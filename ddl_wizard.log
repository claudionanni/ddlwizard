2025-09-02 10:13:43,537 - INFO - Running in compare mode...
2025-09-02 10:13:43,537 - ERROR - Migration failed: AlterStatementGenerator.__init__() missing 1 required positional argument: 'dest_schema'
2025-09-02 10:14:43,518 - INFO - Running in compare mode...
2025-09-02 10:14:43,518 - ERROR - Migration failed: DependencyManager.__init__() missing 1 required positional argument: 'database_manager'
2025-09-02 10:15:54,488 - INFO - Running in compare mode...
2025-09-02 10:15:54,488 - INFO - Connecting to databases...
2025-09-02 10:15:54,491 - INFO - Database connections successful
2025-09-02 10:15:54,494 - INFO - Initialized new git repository at /home/claudio/Projects/ddl_wiz92
2025-09-02 10:15:54,494 - INFO - Initialized git repository at /home/claudio/Projects/ddl_wiz92
2025-09-02 10:15:54,495 - INFO - Extracting DDL objects...
2025-09-02 10:15:54,505 - INFO - Comparing schemas...
2025-09-02 10:15:54,505 - ERROR - Migration failed: string indices must be integers, not 'str'
2025-09-02 10:16:04,614 - INFO - Running in compare mode...
2025-09-02 10:16:04,614 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 10:16:04,614 - INFO - Connecting to databases...
2025-09-02 10:16:04,617 - INFO - Database connections successful
2025-09-02 10:16:04,617 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 10:16:04,617 - INFO - Using existing git repository at /home/claudio/Projects/ddl_wiz92
2025-09-02 10:16:04,617 - DEBUG - Created directory: /home/claudio/Projects/ddl_wiz92/tables
2025-09-02 10:16:04,617 - DEBUG - Created directory: /home/claudio/Projects/ddl_wiz92/functions
2025-09-02 10:16:04,617 - DEBUG - Created directory: /home/claudio/Projects/ddl_wiz92/procedures
2025-09-02 10:16:04,617 - DEBUG - Created directory: /home/claudio/Projects/ddl_wiz92/triggers
2025-09-02 10:16:04,617 - DEBUG - Created directory: /home/claudio/Projects/ddl_wiz92/events
2025-09-02 10:16:04,617 - INFO - Initialized git repository at /home/claudio/Projects/ddl_wiz92
2025-09-02 10:16:04,617 - INFO - Extracting DDL objects...
2025-09-02 10:16:04,623 - INFO - Comparing schemas...
2025-09-02 10:16:04,623 - ERROR - Migration failed: string indices must be integers, not 'str'
2025-09-02 10:19:28,126 - INFO - Running in compare mode...
2025-09-02 10:19:28,127 - INFO - Connecting to databases...
2025-09-02 10:19:28,130 - INFO - Database connections successful
2025-09-02 10:19:28,130 - INFO - Using existing git repository at /home/claudio/Projects/ddl_wiz92
2025-09-02 10:19:28,130 - INFO - Initialized git repository at /home/claudio/Projects/ddl_wiz92
2025-09-02 10:19:28,130 - INFO - Extracting DDL objects...
2025-09-02 10:19:28,137 - INFO - Comparing schemas...
2025-09-02 10:19:28,137 - INFO - Performing safety analysis...
2025-09-02 10:19:28,137 - INFO - Generating migration SQL...
2025-09-02 10:19:28,146 - ERROR - Migration failed: 'AlterStatementGenerator' object has no attribute 'generate_table_differences_report'
2025-09-02 10:19:51,924 - INFO - Running in compare mode...
2025-09-02 10:19:51,925 - INFO - Connecting to databases...
2025-09-02 10:19:51,929 - INFO - Database connections successful
2025-09-02 10:19:51,929 - INFO - Using existing git repository at /home/claudio/Projects/ddl_wiz92
2025-09-02 10:19:51,930 - INFO - Initialized git repository at /home/claudio/Projects/ddl_wiz92
2025-09-02 10:19:51,930 - INFO - Extracting DDL objects...
2025-09-02 10:19:51,936 - INFO - Comparing schemas...
2025-09-02 10:19:51,936 - INFO - Performing safety analysis...
2025-09-02 10:19:51,936 - INFO - Generating migration SQL...
2025-09-02 10:19:51,972 - INFO - Generating schema visualizations...
2025-09-02 10:19:51,973 - ERROR - Failed to get table DDL for {'name': 'categories'}: (1146, "Table 'ddl_test_source.{'name': 'categories'}' doesn't exist")
2025-09-02 10:19:51,973 - ERROR - Migration failed: unhashable type: 'dict'
2025-09-02 10:20:50,903 - INFO - Running in compare mode...
2025-09-02 10:20:50,904 - INFO - Connecting to databases...
2025-09-02 10:20:50,906 - INFO - Database connections successful
2025-09-02 10:20:50,907 - INFO - Using existing git repository at /home/claudio/Projects/ddl_wiz92
2025-09-02 10:20:50,907 - INFO - Initialized git repository at /home/claudio/Projects/ddl_wiz92
2025-09-02 10:20:50,907 - INFO - Extracting DDL objects...
2025-09-02 10:20:50,914 - INFO - Comparing schemas...
2025-09-02 10:20:50,914 - INFO - Performing safety analysis...
2025-09-02 10:20:50,914 - INFO - Generating migration SQL...
2025-09-02 10:20:50,955 - INFO - Generating schema visualizations...
2025-09-02 10:20:50,956 - ERROR - Failed to get table DDL for {'name': 'categories'}: (1146, "Table 'ddl_test_source.{'name': 'categories'}' doesn't exist")
2025-09-02 10:20:50,956 - ERROR - Migration failed: unhashable type: 'dict'
2025-09-02 10:36:32,691 - INFO - Running in compare mode...
2025-09-02 10:36:32,692 - INFO - Connecting to databases...
2025-09-02 10:36:32,695 - INFO - Database connections successful
2025-09-02 10:36:32,696 - INFO - Using existing git repository at /home/claudio/Projects/ddl_wiz92
2025-09-02 10:36:32,696 - INFO - Initialized git repository at /home/claudio/Projects/ddl_wiz92
2025-09-02 10:36:32,696 - INFO - Extracting DDL objects...
2025-09-02 10:36:32,701 - INFO - Comparing schemas...
2025-09-02 10:36:32,701 - INFO - Performing safety analysis...
2025-09-02 10:36:32,701 - INFO - Generating migration SQL...
2025-09-02 10:36:32,731 - INFO - Generating schema visualizations...
2025-09-02 10:36:32,734 - INFO - Generated HTML documentation
2025-09-02 10:36:32,734 - INFO - Generated Mermaid ERD
2025-09-02 10:36:32,734 - INFO - Generated Graphviz DOT file
2025-09-02 10:36:32,735 - INFO - Generated JSON schema structure
2025-09-02 10:36:32,735 - INFO - Schema visualizations generated in /home/claudio/Projects/ddl_wiz92/documentation
2025-09-02 10:36:32,735 - INFO - Migration report generated: /home/claudio/Projects/ddl_wiz92/migration_report.md
2025-09-02 10:36:32,740 - INFO - Started tracking migration 100: ddl_test_source_to_ddl_test_dest_1756802192
2025-09-02 10:36:32,740 - ERROR - Migration failed: MigrationHistory.complete_migration() missing 3 required positional arguments: 'execution_time', 'successful_operations', and 'failed_operations'
2025-09-02 10:37:58,349 - INFO - Running in compare mode...
2025-09-02 10:37:58,349 - INFO - Connecting to databases...
2025-09-02 10:37:58,352 - INFO - Database connections successful
2025-09-02 10:37:58,352 - INFO - Using existing git repository at /home/claudio/Projects/ddl_wiz92
2025-09-02 10:37:58,352 - INFO - Initialized git repository at /home/claudio/Projects/ddl_wiz92
2025-09-02 10:37:58,352 - INFO - Extracting DDL objects...
2025-09-02 10:37:58,358 - INFO - Comparing schemas...
2025-09-02 10:37:58,358 - INFO - Performing safety analysis...
2025-09-02 10:37:58,358 - INFO - Generating migration SQL...
2025-09-02 10:37:58,391 - INFO - Generating schema visualizations...
2025-09-02 10:37:58,394 - INFO - Generated HTML documentation
2025-09-02 10:37:58,394 - INFO - Generated Mermaid ERD
2025-09-02 10:37:58,394 - INFO - Generated Graphviz DOT file
2025-09-02 10:37:58,395 - INFO - Generated JSON schema structure
2025-09-02 10:37:58,395 - INFO - Schema visualizations generated in /home/claudio/Projects/ddl_wiz92/documentation
2025-09-02 10:37:58,395 - INFO - Migration report generated: /home/claudio/Projects/ddl_wiz92/migration_report.md
2025-09-02 10:37:58,399 - INFO - Started tracking migration 101: ddl_test_source_to_ddl_test_dest_1756802278
2025-09-02 10:37:58,403 - INFO - Completed migration tracking 101: SUCCESS
2025-09-02 10:37:58,403 - INFO - Migration tracking completed: 101
2025-09-02 10:37:58,403 - INFO - Migration completed successfully!
2025-09-02 10:37:58,403 - INFO - Migration ID: 101
2025-09-02 10:37:58,403 - INFO - Operations: 2
2025-09-02 10:37:58,403 - INFO - Safety warnings: 0
2025-09-02 10:37:58,403 - INFO - Migration file: /home/claudio/Projects/ddl_wiz92/migration.sql
2025-09-02 10:37:58,403 - INFO - Rollback file: /home/claudio/Projects/ddl_wiz92/rollback.sql
2025-09-02 10:37:58,403 - INFO - Migration report: /home/claudio/Projects/ddl_wiz92/migration_report.md
2025-09-02 10:41:06,931 - INFO - Generating schema visualizations...
2025-09-02 10:41:06,934 - INFO - Generated HTML documentation
2025-09-02 10:41:06,934 - INFO - Generated Mermaid ERD
2025-09-02 10:41:06,935 - INFO - Generated Graphviz DOT file
2025-09-02 10:41:06,936 - INFO - Generated JSON schema structure
2025-09-02 10:41:06,936 - INFO - Schema visualizations generated in ddl_output22/documentation
2025-09-02 10:41:06,937 - INFO - Migration report generated: ddl_output22/migration_report.md
2025-09-02 10:41:06,943 - INFO - Started tracking migration 102: ddl_test_source_to_ddl_test_dest_1756802466
2025-09-02 10:41:06,948 - INFO - Completed migration tracking 102: SUCCESS
2025-09-02 10:41:06,948 - INFO - Migration tracking completed: 102
2025-09-02 10:56:04,745 - INFO - Running in compare mode...
2025-09-02 10:56:04,746 - INFO - Connecting to databases...
2025-09-02 10:56:04,748 - INFO - Database connections successful
2025-09-02 10:56:04,750 - INFO - Initialized new git repository at ddl_output_test
2025-09-02 10:56:04,751 - INFO - Initialized git repository at ddl_output_test
2025-09-02 10:56:04,751 - INFO - Extracting DDL objects...
2025-09-02 10:56:04,757 - INFO - Comparing schemas...
2025-09-02 10:56:04,757 - ERROR - Migration failed: 'SchemaComparator' object has no attribute 'compare_objects'
2025-09-02 10:56:28,411 - INFO - Running in compare mode...
2025-09-02 10:56:28,412 - INFO - Connecting to databases...
2025-09-02 10:56:28,416 - INFO - Database connections successful
2025-09-02 10:56:28,416 - INFO - Using existing git repository at ddl_output_test
2025-09-02 10:56:28,417 - INFO - Initialized git repository at ddl_output_test
2025-09-02 10:56:28,417 - INFO - Extracting DDL objects...
2025-09-02 10:56:28,424 - INFO - Comparing schemas...
2025-09-02 10:56:28,424 - INFO - Performing safety analysis...
2025-09-02 10:56:28,424 - INFO - Generating migration SQL...
2025-09-02 10:56:28,456 - INFO - Generating schema visualizations...
2025-09-02 10:56:28,458 - INFO - Generated HTML documentation
2025-09-02 10:56:28,459 - INFO - Generated Mermaid ERD
2025-09-02 10:56:28,459 - INFO - Generated Graphviz DOT file
2025-09-02 10:56:28,460 - INFO - Generated JSON schema structure
2025-09-02 10:56:28,460 - INFO - Schema visualizations generated in ddl_output_test/documentation
2025-09-02 10:56:28,460 - INFO - Migration report generated: ddl_output_test/migration_report.md
2025-09-02 10:56:28,464 - INFO - Started tracking migration 103: ddl_test_source_to_ddl_test_dest_1756803388
2025-09-02 10:56:28,469 - INFO - Completed migration tracking 103: SUCCESS
2025-09-02 10:56:28,469 - INFO - Migration tracking completed: 103
2025-09-02 10:56:28,469 - INFO - Migration completed successfully!
2025-09-02 10:56:28,469 - INFO - Migration ID: 103
2025-09-02 10:56:28,469 - INFO - Operations: 2
2025-09-02 10:56:28,469 - INFO - Safety warnings: 0
2025-09-02 10:56:28,469 - INFO - Migration file: ddl_output_test/migration.sql
2025-09-02 10:56:28,469 - INFO - Rollback file: ddl_output_test/rollback.sql
2025-09-02 10:56:28,469 - INFO - Migration report: ddl_output_test/migration_report.md
2025-09-02 10:57:29,537 - INFO - Running in compare mode...
2025-09-02 10:57:29,537 - INFO - Connecting to databases...
2025-09-02 10:57:29,540 - INFO - Database connections successful
2025-09-02 10:57:29,543 - INFO - Initialized new git repository at ddl_output_test2
2025-09-02 10:57:29,544 - INFO - Initialized git repository at ddl_output_test2
2025-09-02 10:57:29,544 - INFO - Extracting DDL objects...
2025-09-02 10:57:29,551 - INFO - Comparing schemas...
2025-09-02 10:57:29,551 - INFO - Performing safety analysis...
2025-09-02 10:57:29,551 - INFO - Generating migration SQL...
2025-09-02 10:57:29,583 - INFO - Generating schema visualizations...
2025-09-02 10:57:29,585 - INFO - Generated HTML documentation
2025-09-02 10:57:29,586 - INFO - Generated Mermaid ERD
2025-09-02 10:57:29,586 - INFO - Generated Graphviz DOT file
2025-09-02 10:57:29,587 - INFO - Generated JSON schema structure
2025-09-02 10:57:29,587 - INFO - Schema visualizations generated in ddl_output_test2/documentation
2025-09-02 10:57:29,587 - INFO - Migration report generated: ddl_output_test2/migration_report.md
2025-09-02 10:57:29,591 - INFO - Started tracking migration 104: ddl_test_source_to_ddl_test_dest_1756803449
2025-09-02 10:57:29,594 - INFO - Completed migration tracking 104: SUCCESS
2025-09-02 10:57:29,594 - INFO - Migration tracking completed: 104
2025-09-02 10:57:29,595 - INFO - Migration completed successfully!
2025-09-02 10:57:29,595 - INFO - Migration ID: 104
2025-09-02 10:57:29,595 - INFO - Operations: 2
2025-09-02 10:57:29,595 - INFO - Safety warnings: 0
2025-09-02 10:57:29,595 - INFO - Migration file: ddl_output_test2/migration.sql
2025-09-02 10:57:29,595 - INFO - Rollback file: ddl_output_test2/rollback.sql
2025-09-02 10:57:29,595 - INFO - Migration report: ddl_output_test2/migration_report.md
2025-09-02 11:01:40,015 - INFO - Generating schema visualizations...
2025-09-02 11:01:40,018 - INFO - Generated HTML documentation
2025-09-02 11:01:40,019 - INFO - Generated Mermaid ERD
2025-09-02 11:01:40,019 - INFO - Generated Graphviz DOT file
2025-09-02 11:01:40,020 - INFO - Generated JSON schema structure
2025-09-02 11:01:40,020 - INFO - Schema visualizations generated in ddl_output111/documentation
2025-09-02 11:01:40,021 - INFO - Migration report generated: ddl_output111/migration_report.md
2025-09-02 11:01:40,029 - INFO - Started tracking migration 105: ddl_test_source_to_ddl_test_dest_1756803700
2025-09-02 11:01:40,033 - INFO - Completed migration tracking 105: SUCCESS
2025-09-02 11:01:40,034 - INFO - Migration tracking completed: 105
2025-09-02 11:11:44,410 - INFO - Generating schema visualizations...
2025-09-02 11:11:44,412 - INFO - Generated HTML documentation
2025-09-02 11:11:44,413 - INFO - Generated Mermaid ERD
2025-09-02 11:11:44,413 - INFO - Generated Graphviz DOT file
2025-09-02 11:11:44,413 - INFO - Generated JSON schema structure
2025-09-02 11:11:44,414 - INFO - Schema visualizations generated in /tmp/ddl_output001/documentation
2025-09-02 11:11:44,414 - INFO - Migration report generated: /tmp/ddl_output001/migration_report.md
2025-09-02 11:11:44,420 - INFO - Started tracking migration 106: ddl_test_source_to_ddl_test_dest_1756804304
2025-09-02 11:11:44,424 - INFO - Completed migration tracking 106: SUCCESS
2025-09-02 11:11:44,424 - INFO - Migration tracking completed: 106
2025-09-02 11:12:19,698 - INFO - Running in compare mode...
2025-09-02 11:12:19,698 - INFO - Connecting to databases...
2025-09-02 11:12:19,701 - INFO - Database connections successful
2025-09-02 11:12:19,701 - INFO - Using existing git repository at /home/claudio/Projects/ddl_wiz94
2025-09-02 11:12:19,701 - INFO - Initialized git repository at /home/claudio/Projects/ddl_wiz94
2025-09-02 11:12:19,702 - INFO - Extracting DDL objects...
2025-09-02 11:12:19,707 - INFO - Comparing schemas...
2025-09-02 11:12:19,707 - INFO - Performing safety analysis...
2025-09-02 11:12:19,707 - INFO - Generating migration SQL...
2025-09-02 11:12:19,732 - INFO - Generating schema visualizations...
2025-09-02 11:12:19,734 - INFO - Generated HTML documentation
2025-09-02 11:12:19,734 - INFO - Generated Mermaid ERD
2025-09-02 11:12:19,735 - INFO - Generated Graphviz DOT file
2025-09-02 11:12:19,735 - INFO - Generated JSON schema structure
2025-09-02 11:12:19,735 - INFO - Schema visualizations generated in /home/claudio/Projects/ddl_wiz94/documentation
2025-09-02 11:12:19,736 - INFO - Migration report generated: /home/claudio/Projects/ddl_wiz94/migration_report.md
2025-09-02 11:12:19,739 - INFO - Started tracking migration 107: ddl_test_source_to_ddl_test_dest_1756804339
2025-09-02 11:12:19,743 - INFO - Completed migration tracking 107: SUCCESS
2025-09-02 11:12:19,743 - INFO - Migration tracking completed: 107
2025-09-02 11:12:19,743 - INFO - Migration completed successfully!
2025-09-02 11:12:19,743 - INFO - Migration ID: 107
2025-09-02 11:12:19,743 - INFO - Operations: 2
2025-09-02 11:12:19,743 - INFO - Safety warnings: 0
2025-09-02 11:12:19,743 - INFO - Migration file: /home/claudio/Projects/ddl_wiz94/migration.sql
2025-09-02 11:12:19,743 - INFO - Rollback file: /home/claudio/Projects/ddl_wiz94/rollback.sql
2025-09-02 11:12:19,743 - INFO - Migration report: /home/claudio/Projects/ddl_wiz94/migration_report.md
2025-09-02 11:12:29,564 - INFO - Running in compare mode...
2025-09-02 11:12:29,565 - INFO - Connecting to databases...
2025-09-02 11:12:29,567 - INFO - Database connections successful
2025-09-02 11:12:29,570 - INFO - Initialized new git repository at /home/claudio/Projects/ddl_wiz95
2025-09-02 11:12:29,570 - INFO - Initialized git repository at /home/claudio/Projects/ddl_wiz95
2025-09-02 11:12:29,571 - INFO - Extracting DDL objects...
2025-09-02 11:12:29,576 - INFO - Comparing schemas...
2025-09-02 11:12:29,576 - INFO - Performing safety analysis...
2025-09-02 11:12:29,576 - INFO - Generating migration SQL...
2025-09-02 11:12:29,599 - INFO - Generating schema visualizations...
2025-09-02 11:12:29,602 - INFO - Generated HTML documentation
2025-09-02 11:12:29,602 - INFO - Generated Mermaid ERD
2025-09-02 11:12:29,602 - INFO - Generated Graphviz DOT file
2025-09-02 11:12:29,603 - INFO - Generated JSON schema structure
2025-09-02 11:12:29,603 - INFO - Schema visualizations generated in /home/claudio/Projects/ddl_wiz95/documentation
2025-09-02 11:12:29,603 - INFO - Migration report generated: /home/claudio/Projects/ddl_wiz95/migration_report.md
2025-09-02 11:12:29,609 - INFO - Started tracking migration 108: ddl_test_source_to_ddl_test_dest_1756804349
2025-09-02 11:12:29,614 - INFO - Completed migration tracking 108: SUCCESS
2025-09-02 11:12:29,614 - INFO - Migration tracking completed: 108
2025-09-02 11:12:29,614 - INFO - Migration completed successfully!
2025-09-02 11:12:29,614 - INFO - Migration ID: 108
2025-09-02 11:12:29,614 - INFO - Operations: 2
2025-09-02 11:12:29,614 - INFO - Safety warnings: 0
2025-09-02 11:12:29,614 - INFO - Migration file: /home/claudio/Projects/ddl_wiz95/migration.sql
2025-09-02 11:12:29,614 - INFO - Rollback file: /home/claudio/Projects/ddl_wiz95/rollback.sql
2025-09-02 11:12:29,614 - INFO - Migration report: /home/claudio/Projects/ddl_wiz95/migration_report.md
2025-09-02 11:12:50,498 - INFO - Running in compare mode...
2025-09-02 11:12:50,499 - INFO - Connecting to databases...
2025-09-02 11:12:50,501 - INFO - Database connections successful
2025-09-02 11:12:50,504 - INFO - Initialized new git repository at /home/claudio/Projects/ddl_wiz95
2025-09-02 11:12:50,504 - INFO - Initialized git repository at /home/claudio/Projects/ddl_wiz95
2025-09-02 11:12:50,504 - INFO - Extracting DDL objects...
2025-09-02 11:12:50,509 - INFO - Comparing schemas...
2025-09-02 11:12:50,510 - INFO - Performing safety analysis...
2025-09-02 11:12:50,510 - INFO - Generating migration SQL...
2025-09-02 11:12:50,533 - INFO - Generating schema visualizations...
2025-09-02 11:12:50,535 - INFO - Generated HTML documentation
2025-09-02 11:12:50,535 - INFO - Generated Mermaid ERD
2025-09-02 11:12:50,535 - INFO - Generated Graphviz DOT file
2025-09-02 11:12:50,536 - INFO - Generated JSON schema structure
2025-09-02 11:12:50,536 - INFO - Schema visualizations generated in /home/claudio/Projects/ddl_wiz95/documentation
2025-09-02 11:12:50,536 - INFO - Migration report generated: /home/claudio/Projects/ddl_wiz95/migration_report.md
2025-09-02 11:12:50,542 - INFO - Started tracking migration 109: ddl_test_source_to_ddl_test_dest_1756804370
2025-09-02 11:12:50,546 - INFO - Completed migration tracking 109: SUCCESS
2025-09-02 11:12:50,546 - INFO - Migration tracking completed: 109
2025-09-02 11:12:50,546 - INFO - Migration completed successfully!
2025-09-02 11:12:50,546 - INFO - Migration ID: 109
2025-09-02 11:12:50,546 - INFO - Operations: 2
2025-09-02 11:12:50,546 - INFO - Safety warnings: 0
2025-09-02 11:12:50,546 - INFO - Migration file: /home/claudio/Projects/ddl_wiz95/migration.sql
2025-09-02 11:12:50,546 - INFO - Rollback file: /home/claudio/Projects/ddl_wiz95/rollback.sql
2025-09-02 11:12:50,546 - INFO - Migration report: /home/claudio/Projects/ddl_wiz95/migration_report.md
2025-09-02 11:21:49,991 - INFO - Running in compare mode...
2025-09-02 11:21:49,992 - INFO - Connecting to databases...
2025-09-02 11:21:49,996 - INFO - Database connections successful
2025-09-02 11:21:49,999 - INFO - Initialized new git repository at ddl_output_test3
2025-09-02 11:21:49,999 - INFO - Initialized git repository at ddl_output_test3
2025-09-02 11:21:49,999 - INFO - Extracting DDL objects...
2025-09-02 11:21:50,005 - INFO - Comparing schemas...
2025-09-02 11:21:50,005 - INFO - Performing safety analysis...
2025-09-02 11:21:50,005 - INFO - Generating migration SQL...
2025-09-02 11:21:50,035 - INFO - Generating schema visualizations...
2025-09-02 11:21:50,038 - INFO - Generated HTML documentation
2025-09-02 11:21:50,038 - INFO - Generated Mermaid ERD
2025-09-02 11:21:50,038 - INFO - Generated Graphviz DOT file
2025-09-02 11:21:50,039 - INFO - Generated JSON schema structure
2025-09-02 11:21:50,039 - INFO - Schema visualizations generated in ddl_output_test3/documentation
2025-09-02 11:21:50,039 - INFO - Migration report generated: ddl_output_test3/migration_report.md
2025-09-02 11:21:50,043 - INFO - Started tracking migration 110: ddl_test_source_to_ddl_test_dest_1756804910
2025-09-02 11:21:50,046 - INFO - Completed migration tracking 110: SUCCESS
2025-09-02 11:21:50,046 - INFO - Migration tracking completed: 110
2025-09-02 11:21:50,047 - INFO - Migration completed successfully!
2025-09-02 11:21:50,047 - INFO - Migration ID: 110
2025-09-02 11:21:50,047 - INFO - Operations: 2
2025-09-02 11:21:50,047 - INFO - Safety warnings: 0
2025-09-02 11:21:50,047 - INFO - Migration file: ddl_output_test3/migration.sql
2025-09-02 11:21:50,047 - INFO - Rollback file: ddl_output_test3/rollback.sql
2025-09-02 11:21:50,047 - INFO - Migration report: ddl_output_test3/migration_report.md
2025-09-02 11:21:58,038 - INFO - Running in compare mode...
2025-09-02 11:21:58,038 - INFO - Connecting to databases...
2025-09-02 11:21:58,042 - INFO - Database connections successful
2025-09-02 11:21:58,042 - INFO - Using existing git repository at ddl_output_test3
2025-09-02 11:21:58,043 - INFO - Initialized git repository at ddl_output_test3
2025-09-02 11:21:58,043 - INFO - Extracting DDL objects...
2025-09-02 11:21:58,049 - INFO - Comparing schemas...
2025-09-02 11:21:58,049 - INFO - Performing safety analysis...
2025-09-02 11:21:58,049 - INFO - Generating migration SQL...
2025-09-02 11:21:58,077 - INFO - Generating schema visualizations...
2025-09-02 11:21:58,079 - INFO - Generated HTML documentation
2025-09-02 11:21:58,079 - INFO - Generated Mermaid ERD
2025-09-02 11:21:58,080 - INFO - Generated Graphviz DOT file
2025-09-02 11:21:58,080 - INFO - Generated JSON schema structure
2025-09-02 11:21:58,080 - INFO - Schema visualizations generated in ddl_output_test3/documentation
2025-09-02 11:21:58,081 - INFO - Migration report generated: ddl_output_test3/migration_report.md
2025-09-02 11:21:58,085 - INFO - Started tracking migration 111: ddl_test_source_to_ddl_test_dest_1756804918
2025-09-02 11:21:58,089 - INFO - Completed migration tracking 111: SUCCESS
2025-09-02 11:21:58,089 - INFO - Migration tracking completed: 111
2025-09-02 11:21:58,089 - INFO - Migration completed successfully!
2025-09-02 11:21:58,089 - INFO - Migration ID: 111
2025-09-02 11:21:58,089 - INFO - Operations: 2
2025-09-02 11:21:58,089 - INFO - Safety warnings: 0
2025-09-02 11:21:58,089 - INFO - Migration file: ddl_output_test3/migration.sql
2025-09-02 11:21:58,089 - INFO - Rollback file: ddl_output_test3/rollback.sql
2025-09-02 11:21:58,089 - INFO - Migration report: ddl_output_test3/migration_report.md
2025-09-02 11:22:34,517 - INFO - Running in compare mode...
2025-09-02 11:22:34,518 - INFO - Connecting to databases...
2025-09-02 11:22:34,521 - INFO - Database connections successful
2025-09-02 11:22:34,524 - INFO - Initialized new git repository at /home/claudio/Projects/ddl_wiz97
2025-09-02 11:22:34,524 - INFO - Initialized git repository at /home/claudio/Projects/ddl_wiz97
2025-09-02 11:22:34,524 - INFO - Extracting DDL objects...
2025-09-02 11:22:34,532 - INFO - Comparing schemas...
2025-09-02 11:22:34,532 - INFO - Performing safety analysis...
2025-09-02 11:22:34,532 - INFO - Generating migration SQL...
2025-09-02 11:22:34,556 - INFO - Generating schema visualizations...
2025-09-02 11:22:34,559 - INFO - Generated HTML documentation
2025-09-02 11:22:34,559 - INFO - Generated Mermaid ERD
2025-09-02 11:22:34,559 - INFO - Generated Graphviz DOT file
2025-09-02 11:22:34,560 - INFO - Generated JSON schema structure
2025-09-02 11:22:34,560 - INFO - Schema visualizations generated in /home/claudio/Projects/ddl_wiz97/documentation
2025-09-02 11:22:34,560 - INFO - Migration report generated: /home/claudio/Projects/ddl_wiz97/migration_report.md
2025-09-02 11:22:34,566 - INFO - Started tracking migration 112: ddl_test_source_to_ddl_test_dest_1756804954
2025-09-02 11:22:34,571 - INFO - Completed migration tracking 112: SUCCESS
2025-09-02 11:22:34,571 - INFO - Migration tracking completed: 112
2025-09-02 11:22:34,572 - INFO - Migration completed successfully!
2025-09-02 11:22:34,572 - INFO - Migration ID: 112
2025-09-02 11:22:34,572 - INFO - Operations: 2
2025-09-02 11:22:34,572 - INFO - Safety warnings: 0
2025-09-02 11:22:34,572 - INFO - Migration file: /home/claudio/Projects/ddl_wiz97/migration.sql
2025-09-02 11:22:34,572 - INFO - Rollback file: /home/claudio/Projects/ddl_wiz97/rollback.sql
2025-09-02 11:22:34,572 - INFO - Migration report: /home/claudio/Projects/ddl_wiz97/migration_report.md
2025-09-02 11:25:13,911 - INFO - Running in compare mode...
2025-09-02 11:25:13,912 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 11:25:13,912 - INFO - Connecting to databases...
2025-09-02 11:25:13,913 - ERROR - Database connection test failed: (1045, "Access denied for user 'sstuser'@'localhost' (using password: YES)")
2025-09-02 11:25:13,913 - ERROR - Failed to connect to source database
2025-09-02 11:25:13,913 - ERROR - Migration failed: Failed to connect to databases
2025-09-02 11:26:47,017 - INFO - Running in compare mode...
2025-09-02 11:26:47,018 - INFO - Connecting to databases...
2025-09-02 11:26:47,020 - INFO - Database connections successful
2025-09-02 11:26:47,023 - INFO - Initialized new git repository at /home/claudio/Projects/ddl_wiz100
2025-09-02 11:26:47,023 - INFO - Initialized git repository at /home/claudio/Projects/ddl_wiz100
2025-09-02 11:26:47,023 - INFO - Extracting DDL objects...
2025-09-02 11:26:47,029 - INFO - Comparing schemas...
2025-09-02 11:26:47,030 - INFO - Performing safety analysis...
2025-09-02 11:26:47,030 - INFO - Generating migration SQL...
2025-09-02 11:26:47,056 - INFO - Generating schema visualizations...
2025-09-02 11:26:47,059 - INFO - Generated HTML documentation
2025-09-02 11:26:47,059 - INFO - Generated Mermaid ERD
2025-09-02 11:26:47,059 - INFO - Generated Graphviz DOT file
2025-09-02 11:26:47,060 - INFO - Generated JSON schema structure
2025-09-02 11:26:47,060 - INFO - Schema visualizations generated in /home/claudio/Projects/ddl_wiz100/documentation
2025-09-02 11:26:47,060 - INFO - Migration report generated: /home/claudio/Projects/ddl_wiz100/migration_report.md
2025-09-02 11:26:47,066 - INFO - Started tracking migration 113: ddl_test_source_to_ddl_test_dest_1756805207
2025-09-02 11:26:47,070 - INFO - Completed migration tracking 113: SUCCESS
2025-09-02 11:26:47,070 - INFO - Migration tracking completed: 113
2025-09-02 11:26:47,070 - INFO - Migration completed successfully!
2025-09-02 11:26:47,070 - INFO - Migration ID: 113
2025-09-02 11:26:47,070 - INFO - Operations: 2
2025-09-02 11:26:47,070 - INFO - Safety warnings: 0
2025-09-02 11:26:47,070 - INFO - Migration file: /home/claudio/Projects/ddl_wiz100/migration.sql
2025-09-02 11:26:47,070 - INFO - Rollback file: /home/claudio/Projects/ddl_wiz100/rollback.sql
2025-09-02 11:26:47,070 - INFO - Migration report: /home/claudio/Projects/ddl_wiz100/migration_report.md
2025-09-02 11:31:59,469 - INFO - Running in compare mode...
2025-09-02 11:31:59,469 - INFO - Connecting to databases...
2025-09-02 11:31:59,472 - INFO - Database connections successful
2025-09-02 11:31:59,475 - INFO - Initialized new git repository at /home/claudio/Projects/ddl_wiz101
2025-09-02 11:31:59,476 - INFO - Initialized git repository at /home/claudio/Projects/ddl_wiz101
2025-09-02 11:31:59,476 - INFO - Extracting DDL objects...
2025-09-02 11:31:59,482 - INFO - Comparing schemas...
2025-09-02 11:31:59,482 - INFO - Performing safety analysis...
2025-09-02 11:31:59,482 - INFO - Generating migration SQL...
2025-09-02 11:31:59,512 - INFO - Generating schema visualizations...
2025-09-02 11:31:59,516 - INFO - Generated HTML documentation
2025-09-02 11:31:59,516 - INFO - Generated Mermaid ERD
2025-09-02 11:31:59,516 - INFO - Generated Graphviz DOT file
2025-09-02 11:31:59,516 - INFO - Generated JSON schema structure
2025-09-02 11:31:59,516 - INFO - Schema visualizations generated in /home/claudio/Projects/ddl_wiz101/documentation
2025-09-02 11:31:59,517 - INFO - Migration report generated: /home/claudio/Projects/ddl_wiz101/migration_report.md
2025-09-02 11:31:59,521 - INFO - Started tracking migration 114: ddl_test_source_to_ddl_test_dest_1756805519
2025-09-02 11:31:59,525 - INFO - Completed migration tracking 114: SUCCESS
2025-09-02 11:31:59,525 - INFO - Migration tracking completed: 114
2025-09-02 11:31:59,525 - INFO - Migration completed successfully!
2025-09-02 11:31:59,525 - INFO - Migration ID: 114
2025-09-02 11:31:59,525 - INFO - Operations: 2
2025-09-02 11:31:59,525 - INFO - Safety warnings: 0
2025-09-02 11:31:59,525 - INFO - Migration file: /home/claudio/Projects/ddl_wiz101/migration.sql
2025-09-02 11:31:59,525 - INFO - Rollback file: /home/claudio/Projects/ddl_wiz101/rollback.sql
2025-09-02 11:31:59,525 - INFO - Migration report: /home/claudio/Projects/ddl_wiz101/migration_report.md
2025-09-02 11:34:35,836 - INFO - Running in compare mode...
2025-09-02 11:34:35,836 - INFO - Connecting to databases...
2025-09-02 11:34:35,839 - INFO - Database connections successful
2025-09-02 11:34:35,841 - INFO - Initialized new git repository at /home/claudio/Projects/ddl_wiz102
2025-09-02 11:34:35,842 - INFO - Initialized git repository at /home/claudio/Projects/ddl_wiz102
2025-09-02 11:34:35,842 - INFO - Extracting DDL objects...
2025-09-02 11:34:35,847 - INFO - Comparing schemas...
2025-09-02 11:34:35,847 - INFO - Performing safety analysis...
2025-09-02 11:34:35,847 - INFO - Generating migration SQL...
2025-09-02 11:34:35,875 - INFO - Generating schema visualizations...
2025-09-02 11:34:35,877 - INFO - Generated HTML documentation
2025-09-02 11:34:35,878 - INFO - Generated Mermaid ERD
2025-09-02 11:34:35,878 - INFO - Generated Graphviz DOT file
2025-09-02 11:34:35,878 - INFO - Generated JSON schema structure
2025-09-02 11:34:35,878 - INFO - Schema visualizations generated in /home/claudio/Projects/ddl_wiz102/documentation
2025-09-02 11:34:35,879 - INFO - Migration report generated: /home/claudio/Projects/ddl_wiz102/migration_report.md
2025-09-02 11:34:35,884 - INFO - Started tracking migration 115: ddl_test_source_to_ddl_test_dest_1756805675
2025-09-02 11:34:35,888 - INFO - Completed migration tracking 115: SUCCESS
2025-09-02 11:34:35,888 - INFO - Migration tracking completed: 115
2025-09-02 11:34:35,888 - INFO - Migration completed successfully!
2025-09-02 11:34:35,888 - INFO - Migration ID: 115
2025-09-02 11:34:35,888 - INFO - Operations: 2
2025-09-02 11:34:35,888 - INFO - Safety warnings: 0
2025-09-02 11:34:35,888 - INFO - Migration file: /home/claudio/Projects/ddl_wiz102/migration.sql
2025-09-02 11:34:35,888 - INFO - Rollback file: /home/claudio/Projects/ddl_wiz102/rollback.sql
2025-09-02 11:34:35,889 - INFO - Migration report: /home/claudio/Projects/ddl_wiz102/migration_report.md
2025-09-02 11:37:24,210 - INFO - 🏗️  Setting up source database...
2025-09-02 11:37:24,266 - INFO - ✅ Source database setup completed
2025-09-02 11:37:24,267 - INFO - 🏗️  Setting up destination database with differences...
2025-09-02 11:37:24,319 - INFO - ✅ Destination database setup completed
2025-09-02 11:37:24,319 - INFO - 📝 Populating test data...
2025-09-02 11:37:24,322 - INFO - ✅ Test data populated in ddl_test_source
2025-09-02 11:37:24,324 - INFO - ✅ Test data populated in ddl_test_dest
2025-09-02 11:37:24,324 - INFO - 🔍 Running comparison step: Initial comparison
2025-09-02 11:37:24,325 - INFO - Running in compare mode...
2025-09-02 11:37:24,325 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 11:37:24,325 - INFO - Connecting to databases...
2025-09-02 11:37:24,326 - INFO - Database connections successful
2025-09-02 11:37:24,327 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output, stdin=None, shell=False, universal_newlines=False)
2025-09-02 11:37:24,329 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 11:37:24,330 - INFO - Initialized new git repository at test_output
2025-09-02 11:37:24,330 - DEBUG - Created directory: test_output/tables
2025-09-02 11:37:24,330 - DEBUG - Created directory: test_output/functions
2025-09-02 11:37:24,330 - DEBUG - Created directory: test_output/procedures
2025-09-02 11:37:24,330 - DEBUG - Created directory: test_output/triggers
2025-09-02 11:37:24,330 - DEBUG - Created directory: test_output/events
2025-09-02 11:37:24,330 - INFO - Initialized git repository at ./test_output
2025-09-02 11:37:24,330 - INFO - Extracting DDL objects...
2025-09-02 11:37:24,338 - INFO - Comparing schemas...
2025-09-02 11:37:24,338 - INFO - Performing safety analysis...
2025-09-02 11:37:24,338 - INFO - Generating migration SQL...
2025-09-02 11:37:24,363 - INFO - Generating schema visualizations...
2025-09-02 11:37:24,366 - INFO - Generated HTML documentation
2025-09-02 11:37:24,366 - INFO - Generated Mermaid ERD
2025-09-02 11:37:24,366 - INFO - Generated Graphviz DOT file
2025-09-02 11:37:24,367 - INFO - Generated JSON schema structure
2025-09-02 11:37:24,367 - INFO - Schema visualizations generated in test_output/documentation
2025-09-02 11:37:24,367 - INFO - Migration report generated: test_output/migration_report.md
2025-09-02 11:37:24,373 - INFO - Started tracking migration 116: ddl_test_source_to_ddl_test_dest_1756805844
2025-09-02 11:37:24,376 - INFO - Completed migration tracking 116: SUCCESS
2025-09-02 11:37:24,376 - INFO - Migration tracking completed: 116
2025-09-02 11:37:24,376 - INFO - Migration completed successfully!
2025-09-02 11:37:24,376 - INFO - Migration ID: 116
2025-09-02 11:37:24,376 - INFO - Operations: 5
2025-09-02 11:37:24,376 - INFO - Safety warnings: 0
2025-09-02 11:37:24,377 - INFO - Migration file: test_output/migration.sql
2025-09-02 11:37:24,377 - INFO - Rollback file: test_output/rollback.sql
2025-09-02 11:37:24,377 - INFO - Migration report: test_output/migration_report.md
2025-09-02 11:37:24,377 - INFO - ✅ Initial comparison completed successfully
2025-09-02 11:37:24,377 - INFO - 🔍 Analyzing results in ./test_output...
2025-09-02 11:37:24,377 - INFO - 🔧 Executing SQL file: ./test_output/migration.sql
2025-09-02 11:37:24,377 - DEBUG - Executing statement 1/20: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 11:37:24,377 - DEBUG - Executing statement 2/20: DROP TABLE IF EXISTS `ddl_test_dest`.`temp_table`;...
2025-09-02 11:37:24,380 - DEBUG - Executing statement 3/20: ALTER TABLE `products` ADD COLUMN decimal(8,3) DEFAULT NULL;...
2025-09-02 11:37:24,380 - WARNING - ⚠️  SQL execution warning (statement 3): (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near 'decimal(8,3) DEFAULT NULL' at line 1")
2025-09-02 11:37:24,380 - WARNING - Statement: ALTER TABLE `products` ADD COLUMN decimal(8,3) DEFAULT NULL;
2025-09-02 11:37:24,380 - DEBUG - Executing statement 4/20: ALTER TABLE `products` ADD COLUMN varchar(100) DEFAULT NULL;...
2025-09-02 11:37:24,380 - WARNING - ⚠️  SQL execution warning (statement 4): (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near 'varchar(100) DEFAULT NULL' at line 1")
2025-09-02 11:37:24,380 - WARNING - Statement: ALTER TABLE `products` ADD COLUMN varchar(100) DEFAULT NULL;
2025-09-02 11:37:24,380 - DEBUG - Executing statement 5/20: ALTER TABLE `products` DROP COLUMN `old_column`;...
2025-09-02 11:37:24,385 - DEBUG - Executing statement 6/20: ALTER TABLE `products` ADD KEY `idx_products_active` (`is_active`);...
2025-09-02 11:37:24,391 - DEBUG - Executing statement 7/20: ALTER TABLE `products` ADD KEY `idx_products_sku` (`sku`);...
2025-09-02 11:37:24,396 - DEBUG - Executing statement 8/20: ALTER TABLE `products` ADD KEY `fk_products_category` (`category_id`);...
2025-09-02 11:37:24,402 - DEBUG - Executing statement 9/20: ALTER TABLE `products` ADD KEY `idx_products_stock` (`stock_quantity`);...
2025-09-02 11:37:24,408 - DEBUG - Executing statement 10/20: ALTER TABLE `products` ADD KEY `idx_products_price` (`price`);...
2025-09-02 11:37:24,413 - DEBUG - Executing statement 11/20: ALTER TABLE `products` DROP INDEX `idx_products_old`;...
2025-09-02 11:37:24,414 - WARNING - ⚠️  SQL execution warning (statement 11): (1091, "Can't DROP INDEX `idx_products_old`; check that it exists")
2025-09-02 11:37:24,414 - WARNING - Statement: ALTER TABLE `products` DROP INDEX `idx_products_old`;
2025-09-02 11:37:24,414 - DEBUG - Executing statement 12/20: ALTER TABLE `categories` ADD COLUMN text DEFAULT NULL;...
2025-09-02 11:37:24,414 - WARNING - ⚠️  SQL execution warning (statement 12): (4161, "Unknown data type: 'DEFAULT'")
2025-09-02 11:37:24,414 - WARNING - Statement: ALTER TABLE `categories` ADD COLUMN text DEFAULT NULL;
2025-09-02 11:37:24,414 - DEBUG - Executing statement 13/20: ALTER TABLE `categories` ADD KEY `idx_categories_created` (`created_at`);...
2025-09-02 11:37:24,420 - DEBUG - Executing statement 14/20: ALTER TABLE `customers` DROP COLUMN `loyalty_points`;...
2025-09-02 11:37:24,425 - DEBUG - Executing statement 15/20: ALTER TABLE `customers` ADD KEY `idx_customers_city` (`city`);...
2025-09-02 11:37:24,431 - DEBUG - Executing statement 16/20: ALTER TABLE `customers` ADD KEY `idx_customers_country` (`country`);...
2025-09-02 11:37:24,438 - DEBUG - Executing statement 17/20: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;...
2025-09-02 11:37:24,438 - WARNING - ⚠️  SQL execution warning (statement 17): (1091, "Can't DROP INDEX `idx_customers_loyalty`; check that it exists")
2025-09-02 11:37:24,438 - WARNING - Statement: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;
2025-09-02 11:37:24,438 - DEBUG - Executing statement 18/20: DROP PROCEDURE IF EXISTS `ddl_test_dest`.`GetCustomerOrders`;...
2025-09-02 11:37:24,440 - DEBUG - Executing statement 19/20: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*, COU...
2025-09-02 11:37:24,441 - DEBUG - Executing statement 20/20: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 11:37:24,442 - INFO - ✅ SQL file executed: 15 statements succeeded, 5 failed
2025-09-02 11:37:24,442 - INFO - 🔍 Checking if schemas are identical after migration...
2025-09-02 11:37:24,442 - INFO - 🔍 Running comparison step: Post-migration schema check
2025-09-02 11:37:24,443 - INFO - Running in compare mode...
2025-09-02 11:37:24,443 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 11:37:24,443 - INFO - Connecting to databases...
2025-09-02 11:37:24,444 - INFO - Database connections successful
2025-09-02 11:37:24,445 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_post_migration, stdin=None, shell=False, universal_newlines=False)
2025-09-02 11:37:24,447 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 11:37:24,447 - INFO - Initialized new git repository at test_output_post_migration
2025-09-02 11:37:24,447 - DEBUG - Created directory: test_output_post_migration/tables
2025-09-02 11:37:24,447 - DEBUG - Created directory: test_output_post_migration/functions
2025-09-02 11:37:24,447 - DEBUG - Created directory: test_output_post_migration/procedures
2025-09-02 11:37:24,447 - DEBUG - Created directory: test_output_post_migration/triggers
2025-09-02 11:37:24,447 - DEBUG - Created directory: test_output_post_migration/events
2025-09-02 11:37:24,447 - INFO - Initialized git repository at ./test_output_post_migration
2025-09-02 11:37:24,448 - INFO - Extracting DDL objects...
2025-09-02 11:37:24,453 - INFO - Comparing schemas...
2025-09-02 11:37:24,453 - INFO - Performing safety analysis...
2025-09-02 11:37:24,453 - INFO - Generating migration SQL...
2025-09-02 11:37:24,474 - INFO - Generating schema visualizations...
2025-09-02 11:37:24,477 - INFO - Generated HTML documentation
2025-09-02 11:37:24,477 - INFO - Generated Mermaid ERD
2025-09-02 11:37:24,477 - INFO - Generated Graphviz DOT file
2025-09-02 11:37:24,478 - INFO - Generated JSON schema structure
2025-09-02 11:37:24,478 - INFO - Schema visualizations generated in test_output_post_migration/documentation
2025-09-02 11:37:24,478 - INFO - Migration report generated: test_output_post_migration/migration_report.md
2025-09-02 11:37:24,483 - INFO - Started tracking migration 117: ddl_test_source_to_ddl_test_dest_1756805844
2025-09-02 11:37:24,487 - INFO - Completed migration tracking 117: SUCCESS
2025-09-02 11:37:24,487 - INFO - Migration tracking completed: 117
2025-09-02 11:37:24,487 - INFO - Migration completed successfully!
2025-09-02 11:37:24,487 - INFO - Migration ID: 117
2025-09-02 11:37:24,487 - INFO - Operations: 2
2025-09-02 11:37:24,487 - INFO - Safety warnings: 0
2025-09-02 11:37:24,487 - INFO - Migration file: test_output_post_migration/migration.sql
2025-09-02 11:37:24,487 - INFO - Rollback file: test_output_post_migration/rollback.sql
2025-09-02 11:37:24,488 - INFO - Migration report: test_output_post_migration/migration_report.md
2025-09-02 11:37:24,488 - INFO - ✅ Post-migration schema check completed successfully
2025-09-02 11:37:24,488 - WARNING - ⚠️  Schemas are not identical - found differences after migration
2025-09-02 11:37:24,488 - WARNING - Migration content: -- DDL Wizard Migration Script
-- Source Schema: ddl_test_source
-- Destination Schema: ddl_test_dest
-- Generated: 2025-09-02T11:37:24.453353

-- WARNING: Review this script carefully before executin...
2025-09-02 11:37:24,488 - INFO - 🔧 Executing SQL file: ./test_output/rollback.sql
2025-09-02 11:37:24,488 - DEBUG - Executing statement 1/19: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 11:37:24,489 - DEBUG - Executing statement 2/19: ALTER TABLE `products` DROP COLUMN `weight`;...
2025-09-02 11:37:24,489 - WARNING - ⚠️  SQL execution warning (statement 2): (1091, "Can't DROP COLUMN `weight`; check that it exists")
2025-09-02 11:37:24,489 - WARNING - Statement: ALTER TABLE `products` DROP COLUMN `weight`;
2025-09-02 11:37:24,489 - DEBUG - Executing statement 3/19: ALTER TABLE `products` DROP COLUMN `dimensions`;...
2025-09-02 11:37:24,489 - WARNING - ⚠️  SQL execution warning (statement 3): (1091, "Can't DROP COLUMN `dimensions`; check that it exists")
2025-09-02 11:37:24,489 - WARNING - Statement: ALTER TABLE `products` DROP COLUMN `dimensions`;
2025-09-02 11:37:24,489 - DEBUG - Executing statement 4/19: ALTER TABLE `products` ADD COLUMN varchar(50) DEFAULT NULL;...
2025-09-02 11:37:24,489 - WARNING - ⚠️  SQL execution warning (statement 4): (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near 'varchar(50) DEFAULT NULL' at line 1")
2025-09-02 11:37:24,489 - WARNING - Statement: ALTER TABLE `products` ADD COLUMN varchar(50) DEFAULT NULL;
2025-09-02 11:37:24,489 - DEBUG - Executing statement 5/19: ALTER TABLE `products` DROP INDEX `idx_products_active`;...
2025-09-02 11:37:24,493 - DEBUG - Executing statement 6/19: ALTER TABLE `products` DROP INDEX `idx_products_sku`;...
2025-09-02 11:37:24,498 - DEBUG - Executing statement 7/19: ALTER TABLE `products` DROP INDEX `fk_products_category`;...
2025-09-02 11:37:24,502 - DEBUG - Executing statement 8/19: ALTER TABLE `products` DROP INDEX `idx_products_stock`;...
2025-09-02 11:37:24,507 - DEBUG - Executing statement 9/19: ALTER TABLE `products` DROP INDEX `idx_products_price`;...
2025-09-02 11:37:24,511 - DEBUG - Executing statement 10/19: ALTER TABLE `products` ADD KEY `idx_products_old` (`old_column`);...
2025-09-02 11:37:24,513 - WARNING - ⚠️  SQL execution warning (statement 10): (1072, "Key column 'old_column' doesn't exist in table")
2025-09-02 11:37:24,513 - WARNING - Statement: ALTER TABLE `products` ADD KEY `idx_products_old` (`old_column`);
2025-09-02 11:37:24,513 - DEBUG - Executing statement 11/19: ALTER TABLE `categories` DROP COLUMN `description`;...
2025-09-02 11:37:24,513 - WARNING - ⚠️  SQL execution warning (statement 11): (1091, "Can't DROP COLUMN `description`; check that it exists")
2025-09-02 11:37:24,513 - WARNING - Statement: ALTER TABLE `categories` DROP COLUMN `description`;
2025-09-02 11:37:24,513 - DEBUG - Executing statement 12/19: ALTER TABLE `categories` DROP INDEX `idx_categories_created`;...
2025-09-02 11:37:24,517 - DEBUG - Executing statement 13/19: ALTER TABLE `customers` ADD COLUMN int(11) DEFAULT 0;...
2025-09-02 11:37:24,517 - WARNING - ⚠️  SQL execution warning (statement 13): (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near 'int(11) DEFAULT 0' at line 1")
2025-09-02 11:37:24,517 - WARNING - Statement: ALTER TABLE `customers` ADD COLUMN int(11) DEFAULT 0;
2025-09-02 11:37:24,517 - DEBUG - Executing statement 14/19: ALTER TABLE `customers` DROP INDEX `idx_customers_city`;...
2025-09-02 11:37:24,521 - DEBUG - Executing statement 15/19: ALTER TABLE `customers` DROP INDEX `idx_customers_country`;...
2025-09-02 11:37:24,526 - DEBUG - Executing statement 16/19: ALTER TABLE `customers` ADD KEY `idx_customers_loyalty` (`loyalty_points`);...
2025-09-02 11:37:24,528 - WARNING - ⚠️  SQL execution warning (statement 16): (1072, "Key column 'loyalty_points' doesn't exist in table")
2025-09-02 11:37:24,528 - WARNING - Statement: ALTER TABLE `customers` ADD KEY `idx_customers_loyalty` (`loyalty_points`);
2025-09-02 11:37:24,528 - DEBUG - Executing statement 17/19: DROP PROCEDURE IF EXISTS `GetCustomerOrders`;...
2025-09-02 11:37:24,529 - DEBUG - Executing statement 18/19: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*
FROM...
2025-09-02 11:37:24,531 - DEBUG - Executing statement 19/19: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 11:37:24,531 - INFO - ✅ SQL file executed: 12 statements succeeded, 7 failed
2025-09-02 11:37:24,531 - INFO - 🔍 Running comparison step: Final comparison after rollback
2025-09-02 11:37:24,532 - INFO - Running in compare mode...
2025-09-02 11:37:24,533 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 11:37:24,533 - INFO - Connecting to databases...
2025-09-02 11:37:24,535 - INFO - Database connections successful
2025-09-02 11:37:24,535 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_final, stdin=None, shell=False, universal_newlines=False)
2025-09-02 11:37:24,538 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 11:37:24,539 - INFO - Initialized new git repository at test_output_final
2025-09-02 11:37:24,539 - DEBUG - Created directory: test_output_final/tables
2025-09-02 11:37:24,539 - DEBUG - Created directory: test_output_final/functions
2025-09-02 11:37:24,539 - DEBUG - Created directory: test_output_final/procedures
2025-09-02 11:37:24,540 - DEBUG - Created directory: test_output_final/triggers
2025-09-02 11:37:24,540 - DEBUG - Created directory: test_output_final/events
2025-09-02 11:37:24,540 - INFO - Initialized git repository at ./test_output_final
2025-09-02 11:37:24,540 - INFO - Extracting DDL objects...
2025-09-02 11:37:24,546 - INFO - Comparing schemas...
2025-09-02 11:37:24,546 - INFO - Performing safety analysis...
2025-09-02 11:37:24,546 - INFO - Generating migration SQL...
2025-09-02 11:37:24,570 - INFO - Generating schema visualizations...
2025-09-02 11:37:24,573 - INFO - Generated HTML documentation
2025-09-02 11:37:24,573 - INFO - Generated Mermaid ERD
2025-09-02 11:37:24,573 - INFO - Generated Graphviz DOT file
2025-09-02 11:37:24,573 - INFO - Generated JSON schema structure
2025-09-02 11:37:24,573 - INFO - Schema visualizations generated in test_output_final/documentation
2025-09-02 11:37:24,574 - INFO - Migration report generated: test_output_final/migration_report.md
2025-09-02 11:37:24,578 - INFO - Started tracking migration 118: ddl_test_source_to_ddl_test_dest_1756805844
2025-09-02 11:37:24,582 - INFO - Completed migration tracking 118: SUCCESS
2025-09-02 11:37:24,582 - INFO - Migration tracking completed: 118
2025-09-02 11:37:24,582 - INFO - Migration completed successfully!
2025-09-02 11:37:24,582 - INFO - Migration ID: 118
2025-09-02 11:37:24,582 - INFO - Operations: 4
2025-09-02 11:37:24,582 - INFO - Safety warnings: 0
2025-09-02 11:37:24,582 - INFO - Migration file: test_output_final/migration.sql
2025-09-02 11:37:24,582 - INFO - Rollback file: test_output_final/rollback.sql
2025-09-02 11:37:24,582 - INFO - Migration report: test_output_final/migration_report.md
2025-09-02 11:37:24,582 - INFO - ✅ Final comparison after rollback completed successfully
2025-09-02 11:37:24,582 - INFO - 🔍 Analyzing results in ./test_output_final...
2025-09-02 11:37:24,583 - INFO - 🔄 Comparing initial and final results...
2025-09-02 11:37:24,583 - WARNING - ⚠️  Mismatch in detected_extra_columns: initial=True, final=False
2025-09-02 11:37:24,583 - WARNING - ⚠️  Mismatch in detected_extra_indexes: initial=True, final=False
2025-09-02 11:37:24,583 - ERROR - ❌ Rollback test failed - initial and final states don't match!
2025-09-02 11:37:24,583 - INFO - 🧹 Cleaning up test databases...
2025-09-02 11:37:24,584 - INFO - ✅ Cleaned up database: ddl_test_source
2025-09-02 11:37:24,584 - INFO - ✅ Cleaned up database: ddl_test_dest
2025-09-02 11:41:28,442 - INFO - Running in compare mode...
2025-09-02 11:41:28,443 - INFO - Connecting to databases...
2025-09-02 11:41:28,445 - ERROR - Database connection test failed: (1049, "Unknown database 'ddl_test_source'")
2025-09-02 11:41:28,445 - ERROR - Failed to connect to source database
2025-09-02 11:41:28,445 - ERROR - Migration failed: Failed to connect to databases
2025-09-02 11:41:37,736 - INFO - 🏗️  Setting up source database...
2025-09-02 11:41:37,792 - INFO - ✅ Source database setup completed
2025-09-02 11:41:37,792 - INFO - 🏗️  Setting up destination database with differences...
2025-09-02 11:41:37,837 - INFO - ✅ Destination database setup completed
2025-09-02 11:41:37,837 - INFO - 📝 Populating test data...
2025-09-02 11:41:37,840 - INFO - ✅ Test data populated in ddl_test_source
2025-09-02 11:41:37,842 - INFO - ✅ Test data populated in ddl_test_dest
2025-09-02 11:41:37,842 - INFO - 🔍 Running comparison step: Initial comparison
2025-09-02 11:41:37,843 - INFO - Running in compare mode...
2025-09-02 11:41:37,844 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 11:41:37,844 - INFO - Connecting to databases...
2025-09-02 11:41:37,845 - INFO - Database connections successful
2025-09-02 11:41:37,845 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 11:41:37,846 - INFO - Using existing git repository at test_output
2025-09-02 11:41:37,846 - DEBUG - Created directory: test_output/tables
2025-09-02 11:41:37,846 - DEBUG - Created directory: test_output/functions
2025-09-02 11:41:37,846 - DEBUG - Created directory: test_output/procedures
2025-09-02 11:41:37,846 - DEBUG - Created directory: test_output/triggers
2025-09-02 11:41:37,846 - DEBUG - Created directory: test_output/events
2025-09-02 11:41:37,846 - INFO - Initialized git repository at ./test_output
2025-09-02 11:41:37,846 - INFO - Extracting DDL objects...
2025-09-02 11:41:37,854 - INFO - Comparing schemas...
2025-09-02 11:41:37,854 - INFO - Performing safety analysis...
2025-09-02 11:41:37,854 - INFO - Generating migration SQL...
2025-09-02 11:41:37,874 - INFO - Generating schema visualizations...
2025-09-02 11:41:37,877 - INFO - Generated HTML documentation
2025-09-02 11:41:37,877 - INFO - Generated Mermaid ERD
2025-09-02 11:41:37,877 - INFO - Generated Graphviz DOT file
2025-09-02 11:41:37,878 - INFO - Generated JSON schema structure
2025-09-02 11:41:37,878 - INFO - Schema visualizations generated in test_output/documentation
2025-09-02 11:41:37,879 - INFO - Migration report generated: test_output/migration_report.md
2025-09-02 11:41:37,883 - INFO - Started tracking migration 119: ddl_test_source_to_ddl_test_dest_1756806097
2025-09-02 11:41:37,887 - INFO - Completed migration tracking 119: SUCCESS
2025-09-02 11:41:37,887 - INFO - Migration tracking completed: 119
2025-09-02 11:41:37,887 - INFO - Migration completed successfully!
2025-09-02 11:41:37,887 - INFO - Migration ID: 119
2025-09-02 11:41:37,887 - INFO - Operations: 6
2025-09-02 11:41:37,887 - INFO - Safety warnings: 0
2025-09-02 11:41:37,887 - INFO - Migration file: test_output/migration.sql
2025-09-02 11:41:37,887 - INFO - Rollback file: test_output/rollback.sql
2025-09-02 11:41:37,887 - INFO - Migration report: test_output/migration_report.md
2025-09-02 11:41:37,887 - INFO - ✅ Initial comparison completed successfully
2025-09-02 11:41:37,887 - INFO - 🔍 Analyzing results in ./test_output...
2025-09-02 11:41:37,887 - INFO - 🔧 Executing SQL file: ./test_output/migration.sql
2025-09-02 11:41:37,888 - DEBUG - Executing statement 1/22: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 11:41:37,888 - DEBUG - Executing statement 2/22: DROP TABLE IF EXISTS `ddl_test_dest`.`temp_table`;...
2025-09-02 11:41:37,891 - DEBUG - Executing statement 3/22: ALTER TABLE `products` ADD COLUMN `weight` decimal(8,3) DEFAULT NULL;...
2025-09-02 11:41:37,895 - DEBUG - Executing statement 4/22: ALTER TABLE `products` ADD COLUMN `dimensions` varchar(100) DEFAULT NULL;...
2025-09-02 11:41:37,899 - DEBUG - Executing statement 5/22: ALTER TABLE `products` DROP COLUMN `old_column`;...
2025-09-02 11:41:37,904 - DEBUG - Executing statement 6/22: ALTER TABLE `products` ADD KEY `idx_products_stock` (`stock_quantity`);...
2025-09-02 11:41:37,910 - DEBUG - Executing statement 7/22: ALTER TABLE `products` ADD KEY `idx_products_active` (`is_active`);...
2025-09-02 11:41:37,916 - DEBUG - Executing statement 8/22: ALTER TABLE `products` ADD KEY `idx_products_price` (`price`);...
2025-09-02 11:41:37,922 - DEBUG - Executing statement 9/22: ALTER TABLE `products` ADD KEY `idx_products_sku` (`sku`);...
2025-09-02 11:41:37,927 - DEBUG - Executing statement 10/22: ALTER TABLE `products` ADD KEY `fk_products_category` (`category_id`);...
2025-09-02 11:41:37,933 - DEBUG - Executing statement 11/22: ALTER TABLE `products` DROP INDEX `idx_products_old`;...
2025-09-02 11:41:37,933 - WARNING - ⚠️  SQL execution warning (statement 11): (1091, "Can't DROP INDEX `idx_products_old`; check that it exists")
2025-09-02 11:41:37,933 - WARNING - Statement: ALTER TABLE `products` DROP INDEX `idx_products_old`;
2025-09-02 11:41:37,933 - DEBUG - Executing statement 12/22: ALTER TABLE `customers` DROP COLUMN `loyalty_points`;...
2025-09-02 11:41:37,939 - DEBUG - Executing statement 13/22: ALTER TABLE `customers` ADD KEY `idx_customers_country` (`country`);...
2025-09-02 11:41:37,945 - DEBUG - Executing statement 14/22: ALTER TABLE `customers` ADD KEY `idx_customers_city` (`city`);...
2025-09-02 11:41:37,951 - DEBUG - Executing statement 15/22: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;...
2025-09-02 11:41:37,952 - WARNING - ⚠️  SQL execution warning (statement 15): (1091, "Can't DROP INDEX `idx_customers_loyalty`; check that it exists")
2025-09-02 11:41:37,952 - WARNING - Statement: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;
2025-09-02 11:41:37,952 - DEBUG - Executing statement 16/22: ALTER TABLE `categories` ADD COLUMN `description` text DEFAULT NULL;...
2025-09-02 11:41:37,956 - DEBUG - Executing statement 17/22: ALTER TABLE `categories` ADD KEY `idx_categories_created` (`created_at`);...
2025-09-02 11:41:37,962 - DEBUG - Executing statement 18/22: DROP PROCEDURE IF EXISTS `ddl_test_dest`.`GetCustomerOrders`;...
2025-09-02 11:41:37,964 - DEBUG - Executing statement 19/22: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*, COU...
2025-09-02 11:41:37,965 - DEBUG - Executing statement 20/22: DROP FUNCTION IF EXISTS `ddl_test_dest`.`CalculateOrderTotal`;...
2025-09-02 11:41:37,965 - DEBUG - Executing statement 21/22: CREATE DEFINER=`sstuser`@`%` FUNCTION `CalculateOrderTotal`(order_id INT) RETURNS decimal(12,2)
READ...
2025-09-02 11:41:37,967 - DEBUG - Executing statement 22/22: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 11:41:37,967 - INFO - ✅ SQL file executed: 20 statements succeeded, 2 failed
2025-09-02 11:41:37,967 - INFO - 🔍 Checking if schemas are identical after migration...
2025-09-02 11:41:37,967 - INFO - 🔍 Running comparison step: Post-migration schema check
2025-09-02 11:41:37,968 - INFO - Running in compare mode...
2025-09-02 11:41:37,968 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 11:41:37,968 - INFO - Connecting to databases...
2025-09-02 11:41:37,969 - INFO - Database connections successful
2025-09-02 11:41:37,970 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 11:41:37,970 - INFO - Using existing git repository at test_output_post_migration
2025-09-02 11:41:37,970 - DEBUG - Created directory: test_output_post_migration/tables
2025-09-02 11:41:37,970 - DEBUG - Created directory: test_output_post_migration/functions
2025-09-02 11:41:37,970 - DEBUG - Created directory: test_output_post_migration/procedures
2025-09-02 11:41:37,970 - DEBUG - Created directory: test_output_post_migration/triggers
2025-09-02 11:41:37,970 - DEBUG - Created directory: test_output_post_migration/events
2025-09-02 11:41:37,970 - INFO - Initialized git repository at ./test_output_post_migration
2025-09-02 11:41:37,970 - INFO - Extracting DDL objects...
2025-09-02 11:41:37,976 - INFO - Comparing schemas...
2025-09-02 11:41:37,976 - INFO - Performing safety analysis...
2025-09-02 11:41:37,976 - INFO - Generating migration SQL...
2025-09-02 11:41:38,006 - INFO - Generating schema visualizations...
2025-09-02 11:41:38,010 - INFO - Generated HTML documentation
2025-09-02 11:41:38,010 - INFO - Generated Mermaid ERD
2025-09-02 11:41:38,010 - INFO - Generated Graphviz DOT file
2025-09-02 11:41:38,011 - INFO - Generated JSON schema structure
2025-09-02 11:41:38,011 - INFO - Schema visualizations generated in test_output_post_migration/documentation
2025-09-02 11:41:38,012 - INFO - Migration report generated: test_output_post_migration/migration_report.md
2025-09-02 11:41:38,016 - INFO - Started tracking migration 120: ddl_test_source_to_ddl_test_dest_1756806098
2025-09-02 11:41:38,021 - INFO - Completed migration tracking 120: SUCCESS
2025-09-02 11:41:38,021 - INFO - Migration tracking completed: 120
2025-09-02 11:41:38,021 - INFO - Migration completed successfully!
2025-09-02 11:41:38,021 - INFO - Migration ID: 120
2025-09-02 11:41:38,021 - INFO - Operations: 0
2025-09-02 11:41:38,021 - INFO - Safety warnings: 0
2025-09-02 11:41:38,021 - INFO - Migration file: test_output_post_migration/migration.sql
2025-09-02 11:41:38,021 - INFO - Rollback file: test_output_post_migration/rollback.sql
2025-09-02 11:41:38,021 - INFO - Migration report: test_output_post_migration/migration_report.md
2025-09-02 11:41:38,021 - INFO - ✅ Post-migration schema check completed successfully
2025-09-02 11:41:38,021 - WARNING - ⚠️  Schemas are not identical - found differences after migration
2025-09-02 11:41:38,021 - WARNING - Migration content: -- DDL Wizard Migration Script
-- Source Schema: ddl_test_source
-- Destination Schema: ddl_test_dest
-- Generated: 2025-09-02T11:41:37.976859

-- WARNING: Review this script carefully before executin...
2025-09-02 11:41:38,021 - INFO - 🔧 Executing SQL file: ./test_output/rollback.sql
2025-09-02 11:41:38,022 - DEBUG - Executing statement 1/20: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 11:41:38,022 - DEBUG - Executing statement 2/20: ALTER TABLE `products` DROP COLUMN `weight`;...
2025-09-02 11:41:38,027 - DEBUG - Executing statement 3/20: ALTER TABLE `products` DROP COLUMN `dimensions`;...
2025-09-02 11:41:38,031 - DEBUG - Executing statement 4/20: ALTER TABLE `products` ADD COLUMN `old_column` varchar(50) DEFAULT NULL;...
2025-09-02 11:41:38,037 - DEBUG - Executing statement 5/20: ALTER TABLE `products` DROP INDEX `idx_products_stock`;...
2025-09-02 11:41:38,041 - DEBUG - Executing statement 6/20: ALTER TABLE `products` DROP INDEX `idx_products_active`;...
2025-09-02 11:41:38,046 - DEBUG - Executing statement 7/20: ALTER TABLE `products` DROP INDEX `idx_products_price`;...
2025-09-02 11:41:38,051 - DEBUG - Executing statement 8/20: ALTER TABLE `products` DROP INDEX `idx_products_sku`;...
2025-09-02 11:41:38,055 - DEBUG - Executing statement 9/20: ALTER TABLE `products` DROP INDEX `fk_products_category`;...
2025-09-02 11:41:38,059 - DEBUG - Executing statement 10/20: ALTER TABLE `products` ADD KEY `idx_products_old` (`old_column`);...
2025-09-02 11:41:38,064 - DEBUG - Executing statement 11/20: ALTER TABLE `customers` ADD COLUMN `loyalty_points` int(11) DEFAULT 0;...
2025-09-02 11:41:38,069 - DEBUG - Executing statement 12/20: ALTER TABLE `customers` DROP INDEX `idx_customers_country`;...
2025-09-02 11:41:38,074 - DEBUG - Executing statement 13/20: ALTER TABLE `customers` DROP INDEX `idx_customers_city`;...
2025-09-02 11:41:38,078 - DEBUG - Executing statement 14/20: ALTER TABLE `customers` ADD KEY `idx_customers_loyalty` (`loyalty_points`);...
2025-09-02 11:41:38,085 - DEBUG - Executing statement 15/20: ALTER TABLE `categories` DROP COLUMN `description`;...
2025-09-02 11:41:38,090 - DEBUG - Executing statement 16/20: ALTER TABLE `categories` DROP INDEX `idx_categories_created`;...
2025-09-02 11:41:38,094 - DEBUG - Executing statement 17/20: DROP PROCEDURE IF EXISTS `GetCustomerOrders`;...
2025-09-02 11:41:38,095 - DEBUG - Executing statement 18/20: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*
FROM...
2025-09-02 11:41:38,096 - DEBUG - Executing statement 19/20: DROP FUNCTION IF EXISTS `CalculateOrderTotal`;...
2025-09-02 11:41:38,098 - DEBUG - Executing statement 20/20: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 11:41:38,098 - INFO - ✅ SQL file executed: 20 statements succeeded, 0 failed
2025-09-02 11:41:38,098 - INFO - 🔍 Running comparison step: Final comparison after rollback
2025-09-02 11:41:38,099 - INFO - Running in compare mode...
2025-09-02 11:41:38,099 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 11:41:38,099 - INFO - Connecting to databases...
2025-09-02 11:41:38,100 - INFO - Database connections successful
2025-09-02 11:41:38,100 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 11:41:38,101 - INFO - Using existing git repository at test_output_final
2025-09-02 11:41:38,101 - DEBUG - Created directory: test_output_final/tables
2025-09-02 11:41:38,101 - DEBUG - Created directory: test_output_final/functions
2025-09-02 11:41:38,101 - DEBUG - Created directory: test_output_final/procedures
2025-09-02 11:41:38,101 - DEBUG - Created directory: test_output_final/triggers
2025-09-02 11:41:38,102 - DEBUG - Created directory: test_output_final/events
2025-09-02 11:41:38,102 - INFO - Initialized git repository at ./test_output_final
2025-09-02 11:41:38,102 - INFO - Extracting DDL objects...
2025-09-02 11:41:38,109 - INFO - Comparing schemas...
2025-09-02 11:41:38,109 - INFO - Performing safety analysis...
2025-09-02 11:41:38,109 - INFO - Generating migration SQL...
2025-09-02 11:41:38,131 - INFO - Generating schema visualizations...
2025-09-02 11:41:38,134 - INFO - Generated HTML documentation
2025-09-02 11:41:38,134 - INFO - Generated Mermaid ERD
2025-09-02 11:41:38,134 - INFO - Generated Graphviz DOT file
2025-09-02 11:41:38,135 - INFO - Generated JSON schema structure
2025-09-02 11:41:38,135 - INFO - Schema visualizations generated in test_output_final/documentation
2025-09-02 11:41:38,136 - INFO - Migration report generated: test_output_final/migration_report.md
2025-09-02 11:41:38,140 - INFO - Started tracking migration 121: ddl_test_source_to_ddl_test_dest_1756806098
2025-09-02 11:41:38,144 - INFO - Completed migration tracking 121: SUCCESS
2025-09-02 11:41:38,144 - INFO - Migration tracking completed: 121
2025-09-02 11:41:38,144 - INFO - Migration completed successfully!
2025-09-02 11:41:38,144 - INFO - Migration ID: 121
2025-09-02 11:41:38,144 - INFO - Operations: 5
2025-09-02 11:41:38,144 - INFO - Safety warnings: 0
2025-09-02 11:41:38,144 - INFO - Migration file: test_output_final/migration.sql
2025-09-02 11:41:38,144 - INFO - Rollback file: test_output_final/rollback.sql
2025-09-02 11:41:38,144 - INFO - Migration report: test_output_final/migration_report.md
2025-09-02 11:41:38,144 - INFO - ✅ Final comparison after rollback completed successfully
2025-09-02 11:41:38,144 - INFO - 🔍 Analyzing results in ./test_output_final...
2025-09-02 11:41:38,145 - INFO - 🔄 Comparing initial and final results...
2025-09-02 11:41:38,145 - INFO - ✅ Rollback test passed - initial and final states match!
2025-09-02 11:41:38,145 - INFO - 🧹 Cleaning up test databases...
2025-09-02 11:41:38,146 - INFO - ✅ Cleaned up database: ddl_test_source
2025-09-02 11:41:38,146 - INFO - ✅ Cleaned up database: ddl_test_dest
2025-09-02 11:43:35,985 - INFO - 🏗️  Setting up source database...
2025-09-02 11:43:36,043 - INFO - ✅ Source database setup completed
2025-09-02 11:43:36,043 - INFO - 🏗️  Setting up destination database with differences...
2025-09-02 11:43:36,094 - INFO - ✅ Destination database setup completed
2025-09-02 11:43:36,094 - INFO - 📝 Populating test data...
2025-09-02 11:43:36,096 - INFO - ✅ Test data populated in ddl_test_source
2025-09-02 11:43:36,098 - INFO - ✅ Test data populated in ddl_test_dest
2025-09-02 11:43:36,098 - INFO - 🔍 Running comparison step: Initial comparison
2025-09-02 11:43:36,099 - INFO - Running in compare mode...
2025-09-02 11:43:36,100 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 11:43:36,100 - INFO - Connecting to databases...
2025-09-02 11:43:36,101 - INFO - Database connections successful
2025-09-02 11:43:36,101 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 11:43:36,101 - INFO - Using existing git repository at test_output
2025-09-02 11:43:36,101 - DEBUG - Created directory: test_output/tables
2025-09-02 11:43:36,101 - DEBUG - Created directory: test_output/functions
2025-09-02 11:43:36,101 - DEBUG - Created directory: test_output/procedures
2025-09-02 11:43:36,101 - DEBUG - Created directory: test_output/triggers
2025-09-02 11:43:36,101 - DEBUG - Created directory: test_output/events
2025-09-02 11:43:36,101 - INFO - Initialized git repository at ./test_output
2025-09-02 11:43:36,101 - INFO - Extracting DDL objects...
2025-09-02 11:43:36,107 - INFO - Comparing schemas...
2025-09-02 11:43:36,107 - INFO - Performing safety analysis...
2025-09-02 11:43:36,107 - INFO - Generating migration SQL...
2025-09-02 11:43:36,129 - INFO - Generating schema visualizations...
2025-09-02 11:43:36,131 - INFO - Generated HTML documentation
2025-09-02 11:43:36,132 - INFO - Generated Mermaid ERD
2025-09-02 11:43:36,132 - INFO - Generated Graphviz DOT file
2025-09-02 11:43:36,132 - INFO - Generated JSON schema structure
2025-09-02 11:43:36,132 - INFO - Schema visualizations generated in test_output/documentation
2025-09-02 11:43:36,133 - INFO - Migration report generated: test_output/migration_report.md
2025-09-02 11:43:36,137 - INFO - Started tracking migration 122: ddl_test_source_to_ddl_test_dest_1756806216
2025-09-02 11:43:36,140 - INFO - Completed migration tracking 122: SUCCESS
2025-09-02 11:43:36,140 - INFO - Migration tracking completed: 122
2025-09-02 11:43:36,141 - INFO - Migration completed successfully!
2025-09-02 11:43:36,141 - INFO - Migration ID: 122
2025-09-02 11:43:36,141 - INFO - Operations: 6
2025-09-02 11:43:36,141 - INFO - Safety warnings: 0
2025-09-02 11:43:36,141 - INFO - Migration file: test_output/migration.sql
2025-09-02 11:43:36,141 - INFO - Rollback file: test_output/rollback.sql
2025-09-02 11:43:36,141 - INFO - Migration report: test_output/migration_report.md
2025-09-02 11:43:36,141 - INFO - ✅ Initial comparison completed successfully
2025-09-02 11:43:36,141 - INFO - 🔍 Analyzing results in ./test_output...
2025-09-02 11:43:36,141 - INFO - 🔧 Executing SQL file: ./test_output/migration.sql
2025-09-02 11:43:36,142 - DEBUG - Executing statement 1/22: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 11:43:36,142 - DEBUG - Executing statement 2/22: DROP TABLE IF EXISTS `ddl_test_dest`.`temp_table`;...
2025-09-02 11:43:36,145 - DEBUG - Executing statement 3/22: ALTER TABLE `products` ADD COLUMN `dimensions` varchar(100) DEFAULT NULL;...
2025-09-02 11:43:36,149 - DEBUG - Executing statement 4/22: ALTER TABLE `products` ADD COLUMN `weight` decimal(8,3) DEFAULT NULL;...
2025-09-02 11:43:36,154 - DEBUG - Executing statement 5/22: ALTER TABLE `products` DROP COLUMN `old_column`;...
2025-09-02 11:43:36,159 - DEBUG - Executing statement 6/22: ALTER TABLE `products` ADD KEY `idx_products_active` (`is_active`);...
2025-09-02 11:43:36,165 - DEBUG - Executing statement 7/22: ALTER TABLE `products` ADD KEY `fk_products_category` (`category_id`);...
2025-09-02 11:43:36,170 - DEBUG - Executing statement 8/22: ALTER TABLE `products` ADD KEY `idx_products_price` (`price`);...
2025-09-02 11:43:36,176 - DEBUG - Executing statement 9/22: ALTER TABLE `products` ADD KEY `idx_products_sku` (`sku`);...
2025-09-02 11:43:36,182 - DEBUG - Executing statement 10/22: ALTER TABLE `products` ADD KEY `idx_products_stock` (`stock_quantity`);...
2025-09-02 11:43:36,188 - DEBUG - Executing statement 11/22: ALTER TABLE `products` DROP INDEX `idx_products_old`;...
2025-09-02 11:43:36,188 - WARNING - ⚠️  SQL execution warning (statement 11): (1091, "Can't DROP INDEX `idx_products_old`; check that it exists")
2025-09-02 11:43:36,188 - WARNING - Statement: ALTER TABLE `products` DROP INDEX `idx_products_old`;
2025-09-02 11:43:36,188 - DEBUG - Executing statement 12/22: ALTER TABLE `categories` ADD COLUMN `description` text DEFAULT NULL;...
2025-09-02 11:43:36,193 - DEBUG - Executing statement 13/22: ALTER TABLE `categories` ADD KEY `idx_categories_created` (`created_at`);...
2025-09-02 11:43:36,199 - DEBUG - Executing statement 14/22: ALTER TABLE `customers` DROP COLUMN `loyalty_points`;...
2025-09-02 11:43:36,204 - DEBUG - Executing statement 15/22: ALTER TABLE `customers` ADD KEY `idx_customers_city` (`city`);...
2025-09-02 11:43:36,211 - DEBUG - Executing statement 16/22: ALTER TABLE `customers` ADD KEY `idx_customers_country` (`country`);...
2025-09-02 11:43:36,217 - DEBUG - Executing statement 17/22: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;...
2025-09-02 11:43:36,218 - WARNING - ⚠️  SQL execution warning (statement 17): (1091, "Can't DROP INDEX `idx_customers_loyalty`; check that it exists")
2025-09-02 11:43:36,218 - WARNING - Statement: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;
2025-09-02 11:43:36,218 - DEBUG - Executing statement 18/22: DROP PROCEDURE IF EXISTS `ddl_test_dest`.`GetCustomerOrders`;...
2025-09-02 11:43:36,219 - DEBUG - Executing statement 19/22: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*, COU...
2025-09-02 11:43:36,221 - DEBUG - Executing statement 20/22: DROP FUNCTION IF EXISTS `ddl_test_dest`.`CalculateOrderTotal`;...
2025-09-02 11:43:36,221 - DEBUG - Executing statement 21/22: CREATE DEFINER=`sstuser`@`%` FUNCTION `CalculateOrderTotal`(order_id INT) RETURNS decimal(12,2)
READ...
2025-09-02 11:43:36,223 - DEBUG - Executing statement 22/22: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 11:43:36,224 - INFO - ✅ SQL file executed: 20 statements succeeded, 2 failed
2025-09-02 11:43:36,224 - INFO - 🔍 Checking if schemas are identical after migration...
2025-09-02 11:43:36,224 - INFO - 🔍 Running comparison step: Post-migration schema check
2025-09-02 11:43:36,225 - INFO - Running in compare mode...
2025-09-02 11:43:36,225 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 11:43:36,225 - INFO - Connecting to databases...
2025-09-02 11:43:36,226 - INFO - Database connections successful
2025-09-02 11:43:36,226 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 11:43:36,227 - INFO - Using existing git repository at test_output_post_migration
2025-09-02 11:43:36,227 - DEBUG - Created directory: test_output_post_migration/tables
2025-09-02 11:43:36,227 - DEBUG - Created directory: test_output_post_migration/functions
2025-09-02 11:43:36,227 - DEBUG - Created directory: test_output_post_migration/procedures
2025-09-02 11:43:36,227 - DEBUG - Created directory: test_output_post_migration/triggers
2025-09-02 11:43:36,227 - DEBUG - Created directory: test_output_post_migration/events
2025-09-02 11:43:36,227 - INFO - Initialized git repository at ./test_output_post_migration
2025-09-02 11:43:36,227 - INFO - Extracting DDL objects...
2025-09-02 11:43:36,233 - INFO - Comparing schemas...
2025-09-02 11:43:36,233 - INFO - Performing safety analysis...
2025-09-02 11:43:36,233 - INFO - Generating migration SQL...
2025-09-02 11:43:36,256 - INFO - Generating schema visualizations...
2025-09-02 11:43:36,258 - INFO - Generated HTML documentation
2025-09-02 11:43:36,258 - INFO - Generated Mermaid ERD
2025-09-02 11:43:36,258 - INFO - Generated Graphviz DOT file
2025-09-02 11:43:36,259 - INFO - Generated JSON schema structure
2025-09-02 11:43:36,259 - INFO - Schema visualizations generated in test_output_post_migration/documentation
2025-09-02 11:43:36,259 - INFO - Migration report generated: test_output_post_migration/migration_report.md
2025-09-02 11:43:36,263 - INFO - Started tracking migration 123: ddl_test_source_to_ddl_test_dest_1756806216
2025-09-02 11:43:36,267 - INFO - Completed migration tracking 123: SUCCESS
2025-09-02 11:43:36,267 - INFO - Migration tracking completed: 123
2025-09-02 11:43:36,267 - INFO - Migration completed successfully!
2025-09-02 11:43:36,267 - INFO - Migration ID: 123
2025-09-02 11:43:36,267 - INFO - Operations: 0
2025-09-02 11:43:36,267 - INFO - Safety warnings: 0
2025-09-02 11:43:36,267 - INFO - Migration file: test_output_post_migration/migration.sql
2025-09-02 11:43:36,267 - INFO - Rollback file: test_output_post_migration/rollback.sql
2025-09-02 11:43:36,267 - INFO - Migration report: test_output_post_migration/migration_report.md
2025-09-02 11:43:36,267 - INFO - ✅ Post-migration schema check completed successfully
2025-09-02 11:43:36,267 - INFO - ✅ Schemas are identical after migration!
2025-09-02 11:43:36,267 - INFO - 🔧 Executing SQL file: ./test_output/rollback.sql
2025-09-02 11:43:36,268 - DEBUG - Executing statement 1/20: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 11:43:36,268 - DEBUG - Executing statement 2/20: ALTER TABLE `products` DROP COLUMN `dimensions`;...
2025-09-02 11:43:36,273 - DEBUG - Executing statement 3/20: ALTER TABLE `products` DROP COLUMN `weight`;...
2025-09-02 11:43:36,278 - DEBUG - Executing statement 4/20: ALTER TABLE `products` ADD COLUMN `old_column` varchar(50) DEFAULT NULL;...
2025-09-02 11:43:36,283 - DEBUG - Executing statement 5/20: ALTER TABLE `products` DROP INDEX `idx_products_active`;...
2025-09-02 11:43:36,288 - DEBUG - Executing statement 6/20: ALTER TABLE `products` DROP INDEX `fk_products_category`;...
2025-09-02 11:43:36,292 - DEBUG - Executing statement 7/20: ALTER TABLE `products` DROP INDEX `idx_products_price`;...
2025-09-02 11:43:36,297 - DEBUG - Executing statement 8/20: ALTER TABLE `products` DROP INDEX `idx_products_sku`;...
2025-09-02 11:43:36,301 - DEBUG - Executing statement 9/20: ALTER TABLE `products` DROP INDEX `idx_products_stock`;...
2025-09-02 11:43:36,305 - DEBUG - Executing statement 10/20: ALTER TABLE `products` ADD KEY `idx_products_old` (`old_column`);...
2025-09-02 11:43:36,310 - DEBUG - Executing statement 11/20: ALTER TABLE `categories` DROP COLUMN `description`;...
2025-09-02 11:43:36,315 - DEBUG - Executing statement 12/20: ALTER TABLE `categories` DROP INDEX `idx_categories_created`;...
2025-09-02 11:43:36,320 - DEBUG - Executing statement 13/20: ALTER TABLE `customers` ADD COLUMN `loyalty_points` int(11) DEFAULT 0;...
2025-09-02 11:43:36,325 - DEBUG - Executing statement 14/20: ALTER TABLE `customers` DROP INDEX `idx_customers_city`;...
2025-09-02 11:43:36,329 - DEBUG - Executing statement 15/20: ALTER TABLE `customers` DROP INDEX `idx_customers_country`;...
2025-09-02 11:43:36,334 - DEBUG - Executing statement 16/20: ALTER TABLE `customers` ADD KEY `idx_customers_loyalty` (`loyalty_points`);...
2025-09-02 11:43:36,339 - DEBUG - Executing statement 17/20: DROP PROCEDURE IF EXISTS `GetCustomerOrders`;...
2025-09-02 11:43:36,341 - DEBUG - Executing statement 18/20: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*
FROM...
2025-09-02 11:43:36,342 - DEBUG - Executing statement 19/20: DROP FUNCTION IF EXISTS `CalculateOrderTotal`;...
2025-09-02 11:43:36,343 - DEBUG - Executing statement 20/20: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 11:43:36,344 - INFO - ✅ SQL file executed: 20 statements succeeded, 0 failed
2025-09-02 11:43:36,344 - INFO - 🔍 Running comparison step: Final comparison after rollback
2025-09-02 11:43:36,344 - INFO - Running in compare mode...
2025-09-02 11:43:36,345 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 11:43:36,345 - INFO - Connecting to databases...
2025-09-02 11:43:36,346 - INFO - Database connections successful
2025-09-02 11:43:36,346 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 11:43:36,346 - INFO - Using existing git repository at test_output_final
2025-09-02 11:43:36,346 - DEBUG - Created directory: test_output_final/tables
2025-09-02 11:43:36,346 - DEBUG - Created directory: test_output_final/functions
2025-09-02 11:43:36,347 - DEBUG - Created directory: test_output_final/procedures
2025-09-02 11:43:36,347 - DEBUG - Created directory: test_output_final/triggers
2025-09-02 11:43:36,347 - DEBUG - Created directory: test_output_final/events
2025-09-02 11:43:36,347 - INFO - Initialized git repository at ./test_output_final
2025-09-02 11:43:36,347 - INFO - Extracting DDL objects...
2025-09-02 11:43:36,353 - INFO - Comparing schemas...
2025-09-02 11:43:36,353 - INFO - Performing safety analysis...
2025-09-02 11:43:36,353 - INFO - Generating migration SQL...
2025-09-02 11:43:36,375 - INFO - Generating schema visualizations...
2025-09-02 11:43:36,377 - INFO - Generated HTML documentation
2025-09-02 11:43:36,377 - INFO - Generated Mermaid ERD
2025-09-02 11:43:36,377 - INFO - Generated Graphviz DOT file
2025-09-02 11:43:36,378 - INFO - Generated JSON schema structure
2025-09-02 11:43:36,378 - INFO - Schema visualizations generated in test_output_final/documentation
2025-09-02 11:43:36,378 - INFO - Migration report generated: test_output_final/migration_report.md
2025-09-02 11:43:36,382 - INFO - Started tracking migration 124: ddl_test_source_to_ddl_test_dest_1756806216
2025-09-02 11:43:36,386 - INFO - Completed migration tracking 124: SUCCESS
2025-09-02 11:43:36,386 - INFO - Migration tracking completed: 124
2025-09-02 11:43:36,386 - INFO - Migration completed successfully!
2025-09-02 11:43:36,386 - INFO - Migration ID: 124
2025-09-02 11:43:36,386 - INFO - Operations: 5
2025-09-02 11:43:36,386 - INFO - Safety warnings: 0
2025-09-02 11:43:36,386 - INFO - Migration file: test_output_final/migration.sql
2025-09-02 11:43:36,387 - INFO - Rollback file: test_output_final/rollback.sql
2025-09-02 11:43:36,387 - INFO - Migration report: test_output_final/migration_report.md
2025-09-02 11:43:36,387 - INFO - ✅ Final comparison after rollback completed successfully
2025-09-02 11:43:36,387 - INFO - 🔍 Analyzing results in ./test_output_final...
2025-09-02 11:43:36,387 - INFO - 🔄 Comparing initial and final results...
2025-09-02 11:43:36,387 - WARNING - ⚠️  Mismatch in detected_extra_tables: initial=True, final=False
2025-09-02 11:43:36,387 - ERROR - ❌ Rollback test failed - initial and final states don't match!
2025-09-02 11:43:36,387 - INFO - 🧹 Cleaning up test databases...
2025-09-02 11:43:36,388 - INFO - ✅ Cleaned up database: ddl_test_source
2025-09-02 11:43:36,389 - INFO - ✅ Cleaned up database: ddl_test_dest
2025-09-02 11:45:08,506 - INFO - 🏗️  Setting up source database...
2025-09-02 11:45:08,564 - INFO - ✅ Source database setup completed
2025-09-02 11:45:08,564 - INFO - 🏗️  Setting up destination database with differences...
2025-09-02 11:45:08,615 - INFO - ✅ Destination database setup completed
2025-09-02 11:45:08,615 - INFO - 📝 Populating test data...
2025-09-02 11:45:08,618 - INFO - ✅ Test data populated in ddl_test_source
2025-09-02 11:45:08,620 - INFO - ✅ Test data populated in ddl_test_dest
2025-09-02 11:45:08,620 - INFO - 🔍 Running comparison step: Initial comparison
2025-09-02 11:45:08,621 - INFO - Running in compare mode...
2025-09-02 11:45:08,622 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 11:45:08,622 - INFO - Connecting to databases...
2025-09-02 11:45:08,623 - INFO - Database connections successful
2025-09-02 11:45:08,623 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 11:45:08,624 - INFO - Using existing git repository at test_output
2025-09-02 11:45:08,624 - DEBUG - Created directory: test_output/tables
2025-09-02 11:45:08,624 - DEBUG - Created directory: test_output/functions
2025-09-02 11:45:08,624 - DEBUG - Created directory: test_output/procedures
2025-09-02 11:45:08,624 - DEBUG - Created directory: test_output/triggers
2025-09-02 11:45:08,624 - DEBUG - Created directory: test_output/events
2025-09-02 11:45:08,624 - INFO - Initialized git repository at ./test_output
2025-09-02 11:45:08,624 - INFO - Extracting DDL objects...
2025-09-02 11:45:08,630 - INFO - Comparing schemas...
2025-09-02 11:45:08,631 - INFO - Performing safety analysis...
2025-09-02 11:45:08,631 - INFO - Generating migration SQL...
2025-09-02 11:45:08,652 - INFO - Generating schema visualizations...
2025-09-02 11:45:08,654 - INFO - Generated HTML documentation
2025-09-02 11:45:08,654 - INFO - Generated Mermaid ERD
2025-09-02 11:45:08,654 - INFO - Generated Graphviz DOT file
2025-09-02 11:45:08,655 - INFO - Generated JSON schema structure
2025-09-02 11:45:08,655 - INFO - Schema visualizations generated in test_output/documentation
2025-09-02 11:45:08,656 - INFO - Migration report generated: test_output/migration_report.md
2025-09-02 11:45:08,660 - INFO - Started tracking migration 125: ddl_test_source_to_ddl_test_dest_1756806308
2025-09-02 11:45:08,664 - INFO - Completed migration tracking 125: SUCCESS
2025-09-02 11:45:08,664 - INFO - Migration tracking completed: 125
2025-09-02 11:45:08,664 - INFO - Migration completed successfully!
2025-09-02 11:45:08,664 - INFO - Migration ID: 125
2025-09-02 11:45:08,664 - INFO - Operations: 6
2025-09-02 11:45:08,664 - INFO - Safety warnings: 0
2025-09-02 11:45:08,664 - INFO - Migration file: test_output/migration.sql
2025-09-02 11:45:08,664 - INFO - Rollback file: test_output/rollback.sql
2025-09-02 11:45:08,664 - INFO - Migration report: test_output/migration_report.md
2025-09-02 11:45:08,664 - INFO - ✅ Initial comparison completed successfully
2025-09-02 11:45:08,665 - INFO - 🔍 Analyzing results in ./test_output...
2025-09-02 11:45:08,665 - INFO - 🔧 Executing SQL file: ./test_output/migration.sql
2025-09-02 11:45:08,665 - DEBUG - Executing statement 1/22: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 11:45:08,665 - DEBUG - Executing statement 2/22: DROP TABLE IF EXISTS `ddl_test_dest`.`temp_table`;...
2025-09-02 11:45:08,668 - DEBUG - Executing statement 3/22: ALTER TABLE `categories` ADD COLUMN `description` text DEFAULT NULL;...
2025-09-02 11:45:08,672 - DEBUG - Executing statement 4/22: ALTER TABLE `categories` ADD KEY `idx_categories_created` (`created_at`);...
2025-09-02 11:45:08,678 - DEBUG - Executing statement 5/22: ALTER TABLE `customers` DROP COLUMN `loyalty_points`;...
2025-09-02 11:45:08,683 - DEBUG - Executing statement 6/22: ALTER TABLE `customers` ADD KEY `idx_customers_country` (`country`);...
2025-09-02 11:45:08,690 - DEBUG - Executing statement 7/22: ALTER TABLE `customers` ADD KEY `idx_customers_city` (`city`);...
2025-09-02 11:45:08,696 - DEBUG - Executing statement 8/22: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;...
2025-09-02 11:45:08,697 - WARNING - ⚠️  SQL execution warning (statement 8): (1091, "Can't DROP INDEX `idx_customers_loyalty`; check that it exists")
2025-09-02 11:45:08,697 - WARNING - Statement: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;
2025-09-02 11:45:08,697 - DEBUG - Executing statement 9/22: ALTER TABLE `products` ADD COLUMN `dimensions` varchar(100) DEFAULT NULL;...
2025-09-02 11:45:08,701 - DEBUG - Executing statement 10/22: ALTER TABLE `products` ADD COLUMN `weight` decimal(8,3) DEFAULT NULL;...
2025-09-02 11:45:08,706 - DEBUG - Executing statement 11/22: ALTER TABLE `products` DROP COLUMN `old_column`;...
2025-09-02 11:45:08,711 - DEBUG - Executing statement 12/22: ALTER TABLE `products` ADD KEY `idx_products_price` (`price`);...
2025-09-02 11:45:08,716 - DEBUG - Executing statement 13/22: ALTER TABLE `products` ADD KEY `idx_products_active` (`is_active`);...
2025-09-02 11:45:08,722 - DEBUG - Executing statement 14/22: ALTER TABLE `products` ADD KEY `fk_products_category` (`category_id`);...
2025-09-02 11:45:08,728 - DEBUG - Executing statement 15/22: ALTER TABLE `products` ADD KEY `idx_products_stock` (`stock_quantity`);...
2025-09-02 11:45:08,734 - DEBUG - Executing statement 16/22: ALTER TABLE `products` ADD KEY `idx_products_sku` (`sku`);...
2025-09-02 11:45:08,739 - DEBUG - Executing statement 17/22: ALTER TABLE `products` DROP INDEX `idx_products_old`;...
2025-09-02 11:45:08,740 - WARNING - ⚠️  SQL execution warning (statement 17): (1091, "Can't DROP INDEX `idx_products_old`; check that it exists")
2025-09-02 11:45:08,740 - WARNING - Statement: ALTER TABLE `products` DROP INDEX `idx_products_old`;
2025-09-02 11:45:08,740 - DEBUG - Executing statement 18/22: DROP PROCEDURE IF EXISTS `ddl_test_dest`.`GetCustomerOrders`;...
2025-09-02 11:45:08,741 - DEBUG - Executing statement 19/22: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*, COU...
2025-09-02 11:45:08,743 - DEBUG - Executing statement 20/22: DROP FUNCTION IF EXISTS `ddl_test_dest`.`CalculateOrderTotal`;...
2025-09-02 11:45:08,743 - DEBUG - Executing statement 21/22: CREATE DEFINER=`sstuser`@`%` FUNCTION `CalculateOrderTotal`(order_id INT) RETURNS decimal(12,2)
READ...
2025-09-02 11:45:08,744 - DEBUG - Executing statement 22/22: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 11:45:08,745 - INFO - ✅ SQL file executed: 20 statements succeeded, 2 failed
2025-09-02 11:45:08,745 - INFO - 🔍 Checking if schemas are identical after migration...
2025-09-02 11:45:08,745 - INFO - 🔍 Running comparison step: Post-migration schema check
2025-09-02 11:45:08,746 - INFO - Running in compare mode...
2025-09-02 11:45:08,746 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 11:45:08,746 - INFO - Connecting to databases...
2025-09-02 11:45:08,747 - INFO - Database connections successful
2025-09-02 11:45:08,747 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 11:45:08,748 - INFO - Using existing git repository at test_output_post_migration
2025-09-02 11:45:08,748 - DEBUG - Created directory: test_output_post_migration/tables
2025-09-02 11:45:08,748 - DEBUG - Created directory: test_output_post_migration/functions
2025-09-02 11:45:08,748 - DEBUG - Created directory: test_output_post_migration/procedures
2025-09-02 11:45:08,748 - DEBUG - Created directory: test_output_post_migration/triggers
2025-09-02 11:45:08,748 - DEBUG - Created directory: test_output_post_migration/events
2025-09-02 11:45:08,748 - INFO - Initialized git repository at ./test_output_post_migration
2025-09-02 11:45:08,748 - INFO - Extracting DDL objects...
2025-09-02 11:45:08,753 - INFO - Comparing schemas...
2025-09-02 11:45:08,754 - INFO - Performing safety analysis...
2025-09-02 11:45:08,754 - INFO - Generating migration SQL...
2025-09-02 11:45:08,776 - INFO - Generating schema visualizations...
2025-09-02 11:45:08,779 - INFO - Generated HTML documentation
2025-09-02 11:45:08,779 - INFO - Generated Mermaid ERD
2025-09-02 11:45:08,779 - INFO - Generated Graphviz DOT file
2025-09-02 11:45:08,780 - INFO - Generated JSON schema structure
2025-09-02 11:45:08,780 - INFO - Schema visualizations generated in test_output_post_migration/documentation
2025-09-02 11:45:08,780 - INFO - Migration report generated: test_output_post_migration/migration_report.md
2025-09-02 11:45:08,785 - INFO - Started tracking migration 126: ddl_test_source_to_ddl_test_dest_1756806308
2025-09-02 11:45:08,789 - INFO - Completed migration tracking 126: SUCCESS
2025-09-02 11:45:08,789 - INFO - Migration tracking completed: 126
2025-09-02 11:45:08,789 - INFO - Migration completed successfully!
2025-09-02 11:45:08,789 - INFO - Migration ID: 126
2025-09-02 11:45:08,789 - INFO - Operations: 0
2025-09-02 11:45:08,789 - INFO - Safety warnings: 0
2025-09-02 11:45:08,789 - INFO - Migration file: test_output_post_migration/migration.sql
2025-09-02 11:45:08,789 - INFO - Rollback file: test_output_post_migration/rollback.sql
2025-09-02 11:45:08,789 - INFO - Migration report: test_output_post_migration/migration_report.md
2025-09-02 11:45:08,789 - INFO - ✅ Post-migration schema check completed successfully
2025-09-02 11:45:08,789 - INFO - ✅ Schemas are identical after migration!
2025-09-02 11:45:08,789 - INFO - 🔧 Executing SQL file: ./test_output/rollback.sql
2025-09-02 11:45:08,790 - DEBUG - Executing statement 1/21: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 11:45:08,790 - DEBUG - Executing statement 2/21: CREATE TABLE `temp_table` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`temp_data` varchar(255) DEFAULT N...
2025-09-02 11:45:08,793 - DEBUG - Executing statement 3/21: ALTER TABLE `categories` DROP COLUMN `description`;...
2025-09-02 11:45:08,799 - DEBUG - Executing statement 4/21: ALTER TABLE `categories` DROP INDEX `idx_categories_created`;...
2025-09-02 11:45:08,803 - DEBUG - Executing statement 5/21: ALTER TABLE `customers` ADD COLUMN `loyalty_points` int(11) DEFAULT 0;...
2025-09-02 11:45:08,808 - DEBUG - Executing statement 6/21: ALTER TABLE `customers` DROP INDEX `idx_customers_country`;...
2025-09-02 11:45:08,812 - DEBUG - Executing statement 7/21: ALTER TABLE `customers` DROP INDEX `idx_customers_city`;...
2025-09-02 11:45:08,816 - DEBUG - Executing statement 8/21: ALTER TABLE `customers` ADD KEY `idx_customers_loyalty` (`loyalty_points`);...
2025-09-02 11:45:08,822 - DEBUG - Executing statement 9/21: ALTER TABLE `products` DROP COLUMN `dimensions`;...
2025-09-02 11:45:08,828 - DEBUG - Executing statement 10/21: ALTER TABLE `products` DROP COLUMN `weight`;...
2025-09-02 11:45:08,833 - DEBUG - Executing statement 11/21: ALTER TABLE `products` ADD COLUMN `old_column` varchar(50) DEFAULT NULL;...
2025-09-02 11:45:08,838 - DEBUG - Executing statement 12/21: ALTER TABLE `products` DROP INDEX `idx_products_price`;...
2025-09-02 11:45:08,842 - DEBUG - Executing statement 13/21: ALTER TABLE `products` DROP INDEX `idx_products_active`;...
2025-09-02 11:45:08,846 - DEBUG - Executing statement 14/21: ALTER TABLE `products` DROP INDEX `fk_products_category`;...
2025-09-02 11:45:08,851 - DEBUG - Executing statement 15/21: ALTER TABLE `products` DROP INDEX `idx_products_stock`;...
2025-09-02 11:45:08,855 - DEBUG - Executing statement 16/21: ALTER TABLE `products` DROP INDEX `idx_products_sku`;...
2025-09-02 11:45:08,860 - DEBUG - Executing statement 17/21: ALTER TABLE `products` ADD KEY `idx_products_old` (`old_column`);...
2025-09-02 11:45:08,865 - DEBUG - Executing statement 18/21: DROP PROCEDURE IF EXISTS `GetCustomerOrders`;...
2025-09-02 11:45:08,866 - DEBUG - Executing statement 19/21: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*
FROM...
2025-09-02 11:45:08,868 - DEBUG - Executing statement 20/21: DROP FUNCTION IF EXISTS `CalculateOrderTotal`;...
2025-09-02 11:45:08,869 - DEBUG - Executing statement 21/21: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 11:45:08,869 - INFO - ✅ SQL file executed: 21 statements succeeded, 0 failed
2025-09-02 11:45:08,869 - INFO - 🔍 Running comparison step: Final comparison after rollback
2025-09-02 11:45:08,870 - INFO - Running in compare mode...
2025-09-02 11:45:08,870 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 11:45:08,870 - INFO - Connecting to databases...
2025-09-02 11:45:08,871 - INFO - Database connections successful
2025-09-02 11:45:08,871 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 11:45:08,872 - INFO - Using existing git repository at test_output_final
2025-09-02 11:45:08,872 - DEBUG - Created directory: test_output_final/tables
2025-09-02 11:45:08,872 - DEBUG - Created directory: test_output_final/functions
2025-09-02 11:45:08,872 - DEBUG - Created directory: test_output_final/procedures
2025-09-02 11:45:08,872 - DEBUG - Created directory: test_output_final/triggers
2025-09-02 11:45:08,872 - DEBUG - Created directory: test_output_final/events
2025-09-02 11:45:08,872 - INFO - Initialized git repository at ./test_output_final
2025-09-02 11:45:08,872 - INFO - Extracting DDL objects...
2025-09-02 11:45:08,878 - INFO - Comparing schemas...
2025-09-02 11:45:08,878 - INFO - Performing safety analysis...
2025-09-02 11:45:08,878 - INFO - Generating migration SQL...
2025-09-02 11:45:08,898 - INFO - Generating schema visualizations...
2025-09-02 11:45:08,900 - INFO - Generated HTML documentation
2025-09-02 11:45:08,900 - INFO - Generated Mermaid ERD
2025-09-02 11:45:08,900 - INFO - Generated Graphviz DOT file
2025-09-02 11:45:08,901 - INFO - Generated JSON schema structure
2025-09-02 11:45:08,901 - INFO - Schema visualizations generated in test_output_final/documentation
2025-09-02 11:45:08,901 - INFO - Migration report generated: test_output_final/migration_report.md
2025-09-02 11:45:08,906 - INFO - Started tracking migration 127: ddl_test_source_to_ddl_test_dest_1756806308
2025-09-02 11:45:08,910 - INFO - Completed migration tracking 127: SUCCESS
2025-09-02 11:45:08,910 - INFO - Migration tracking completed: 127
2025-09-02 11:45:08,910 - INFO - Migration completed successfully!
2025-09-02 11:45:08,910 - INFO - Migration ID: 127
2025-09-02 11:45:08,910 - INFO - Operations: 6
2025-09-02 11:45:08,910 - INFO - Safety warnings: 0
2025-09-02 11:45:08,910 - INFO - Migration file: test_output_final/migration.sql
2025-09-02 11:45:08,910 - INFO - Rollback file: test_output_final/rollback.sql
2025-09-02 11:45:08,910 - INFO - Migration report: test_output_final/migration_report.md
2025-09-02 11:45:08,910 - INFO - ✅ Final comparison after rollback completed successfully
2025-09-02 11:45:08,910 - INFO - 🔍 Analyzing results in ./test_output_final...
2025-09-02 11:45:08,910 - INFO - 🔄 Comparing initial and final results...
2025-09-02 11:45:08,911 - INFO - ✅ Rollback test passed - initial and final states match!
2025-09-02 11:45:08,911 - INFO - 🧹 Cleaning up test databases...
2025-09-02 11:45:08,911 - INFO - ✅ Cleaned up database: ddl_test_source
2025-09-02 11:45:08,912 - INFO - ✅ Cleaned up database: ddl_test_dest
2025-09-02 11:46:31,866 - INFO - 🏗️  Setting up source database...
2025-09-02 11:46:31,921 - INFO - ✅ Source database setup completed
2025-09-02 11:46:31,921 - INFO - 🏗️  Setting up destination database with differences...
2025-09-02 11:46:31,969 - INFO - ✅ Destination database setup completed
2025-09-02 11:46:31,970 - INFO - 📝 Populating test data...
2025-09-02 11:46:31,973 - INFO - ✅ Test data populated in ddl_test_source
2025-09-02 11:46:31,975 - INFO - ✅ Test data populated in ddl_test_dest
2025-09-02 11:46:31,975 - INFO - 🔍 Running comparison step: Initial comparison
2025-09-02 11:46:31,975 - INFO - Running in compare mode...
2025-09-02 11:46:31,976 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 11:46:31,976 - INFO - Connecting to databases...
2025-09-02 11:46:31,977 - INFO - Database connections successful
2025-09-02 11:46:31,977 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output, stdin=None, shell=False, universal_newlines=False)
2025-09-02 11:46:31,979 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 11:46:31,979 - INFO - Initialized new git repository at test_output
2025-09-02 11:46:31,980 - DEBUG - Created directory: test_output/tables
2025-09-02 11:46:31,980 - DEBUG - Created directory: test_output/functions
2025-09-02 11:46:31,980 - DEBUG - Created directory: test_output/procedures
2025-09-02 11:46:31,980 - DEBUG - Created directory: test_output/triggers
2025-09-02 11:46:31,980 - DEBUG - Created directory: test_output/events
2025-09-02 11:46:31,980 - INFO - Initialized git repository at ./test_output
2025-09-02 11:46:31,980 - INFO - Extracting DDL objects...
2025-09-02 11:46:31,985 - INFO - Comparing schemas...
2025-09-02 11:46:31,985 - INFO - Performing safety analysis...
2025-09-02 11:46:31,986 - INFO - Generating migration SQL...
2025-09-02 11:46:32,005 - INFO - Generating schema visualizations...
2025-09-02 11:46:32,008 - INFO - Generated HTML documentation
2025-09-02 11:46:32,008 - INFO - Generated Mermaid ERD
2025-09-02 11:46:32,008 - INFO - Generated Graphviz DOT file
2025-09-02 11:46:32,008 - INFO - Generated JSON schema structure
2025-09-02 11:46:32,009 - INFO - Schema visualizations generated in test_output/documentation
2025-09-02 11:46:32,009 - INFO - Migration report generated: test_output/migration_report.md
2025-09-02 11:46:32,014 - INFO - Started tracking migration 128: ddl_test_source_to_ddl_test_dest_1756806392
2025-09-02 11:46:32,018 - INFO - Completed migration tracking 128: SUCCESS
2025-09-02 11:46:32,018 - INFO - Migration tracking completed: 128
2025-09-02 11:46:32,018 - INFO - Migration completed successfully!
2025-09-02 11:46:32,018 - INFO - Migration ID: 128
2025-09-02 11:46:32,018 - INFO - Operations: 6
2025-09-02 11:46:32,018 - INFO - Safety warnings: 0
2025-09-02 11:46:32,018 - INFO - Migration file: test_output/migration.sql
2025-09-02 11:46:32,018 - INFO - Rollback file: test_output/rollback.sql
2025-09-02 11:46:32,018 - INFO - Migration report: test_output/migration_report.md
2025-09-02 11:46:32,018 - INFO - ✅ Initial comparison completed successfully
2025-09-02 11:46:32,018 - INFO - 🔍 Analyzing results in ./test_output...
2025-09-02 11:46:32,019 - INFO - 🔧 Executing SQL file: ./test_output/migration.sql
2025-09-02 11:46:32,019 - DEBUG - Executing statement 1/22: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 11:46:32,019 - DEBUG - Executing statement 2/22: DROP TABLE IF EXISTS `ddl_test_dest`.`temp_table`;...
2025-09-02 11:46:32,022 - DEBUG - Executing statement 3/22: ALTER TABLE `customers` DROP COLUMN `loyalty_points`;...
2025-09-02 11:46:32,027 - DEBUG - Executing statement 4/22: ALTER TABLE `customers` ADD KEY `idx_customers_country` (`country`);...
2025-09-02 11:46:32,033 - DEBUG - Executing statement 5/22: ALTER TABLE `customers` ADD KEY `idx_customers_city` (`city`);...
2025-09-02 11:46:32,038 - DEBUG - Executing statement 6/22: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;...
2025-09-02 11:46:32,039 - WARNING - ⚠️  SQL execution warning (statement 6): (1091, "Can't DROP INDEX `idx_customers_loyalty`; check that it exists")
2025-09-02 11:46:32,039 - WARNING - Statement: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;
2025-09-02 11:46:32,039 - DEBUG - Executing statement 7/22: ALTER TABLE `categories` ADD COLUMN `description` text DEFAULT NULL;...
2025-09-02 11:46:32,043 - DEBUG - Executing statement 8/22: ALTER TABLE `categories` ADD KEY `idx_categories_created` (`created_at`);...
2025-09-02 11:46:32,049 - DEBUG - Executing statement 9/22: ALTER TABLE `products` ADD COLUMN `weight` decimal(8,3) DEFAULT NULL;...
2025-09-02 11:46:32,053 - DEBUG - Executing statement 10/22: ALTER TABLE `products` ADD COLUMN `dimensions` varchar(100) DEFAULT NULL;...
2025-09-02 11:46:32,058 - DEBUG - Executing statement 11/22: ALTER TABLE `products` DROP COLUMN `old_column`;...
2025-09-02 11:46:32,063 - DEBUG - Executing statement 12/22: ALTER TABLE `products` ADD KEY `idx_products_price` (`price`);...
2025-09-02 11:46:32,068 - DEBUG - Executing statement 13/22: ALTER TABLE `products` ADD KEY `fk_products_category` (`category_id`);...
2025-09-02 11:46:32,074 - DEBUG - Executing statement 14/22: ALTER TABLE `products` ADD KEY `idx_products_stock` (`stock_quantity`);...
2025-09-02 11:46:32,080 - DEBUG - Executing statement 15/22: ALTER TABLE `products` ADD KEY `idx_products_sku` (`sku`);...
2025-09-02 11:46:32,086 - DEBUG - Executing statement 16/22: ALTER TABLE `products` ADD KEY `idx_products_active` (`is_active`);...
2025-09-02 11:46:32,092 - DEBUG - Executing statement 17/22: ALTER TABLE `products` DROP INDEX `idx_products_old`;...
2025-09-02 11:46:32,092 - WARNING - ⚠️  SQL execution warning (statement 17): (1091, "Can't DROP INDEX `idx_products_old`; check that it exists")
2025-09-02 11:46:32,092 - WARNING - Statement: ALTER TABLE `products` DROP INDEX `idx_products_old`;
2025-09-02 11:46:32,092 - DEBUG - Executing statement 18/22: DROP PROCEDURE IF EXISTS `ddl_test_dest`.`GetCustomerOrders`;...
2025-09-02 11:46:32,093 - DEBUG - Executing statement 19/22: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*, COU...
2025-09-02 11:46:32,095 - DEBUG - Executing statement 20/22: DROP FUNCTION IF EXISTS `ddl_test_dest`.`CalculateOrderTotal`;...
2025-09-02 11:46:32,095 - DEBUG - Executing statement 21/22: CREATE DEFINER=`sstuser`@`%` FUNCTION `CalculateOrderTotal`(order_id INT) RETURNS decimal(12,2)
READ...
2025-09-02 11:46:32,097 - DEBUG - Executing statement 22/22: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 11:46:32,097 - INFO - ✅ SQL file executed: 20 statements succeeded, 2 failed
2025-09-02 11:46:32,097 - INFO - 🔍 Checking if schemas are identical after migration...
2025-09-02 11:46:32,097 - INFO - 🔍 Running comparison step: Post-migration schema check
2025-09-02 11:46:32,097 - INFO - Running in compare mode...
2025-09-02 11:46:32,098 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 11:46:32,098 - INFO - Connecting to databases...
2025-09-02 11:46:32,099 - INFO - Database connections successful
2025-09-02 11:46:32,099 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_post_migration, stdin=None, shell=False, universal_newlines=False)
2025-09-02 11:46:32,101 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 11:46:32,102 - INFO - Initialized new git repository at test_output_post_migration
2025-09-02 11:46:32,102 - DEBUG - Created directory: test_output_post_migration/tables
2025-09-02 11:46:32,102 - DEBUG - Created directory: test_output_post_migration/functions
2025-09-02 11:46:32,102 - DEBUG - Created directory: test_output_post_migration/procedures
2025-09-02 11:46:32,102 - DEBUG - Created directory: test_output_post_migration/triggers
2025-09-02 11:46:32,102 - DEBUG - Created directory: test_output_post_migration/events
2025-09-02 11:46:32,102 - INFO - Initialized git repository at ./test_output_post_migration
2025-09-02 11:46:32,102 - INFO - Extracting DDL objects...
2025-09-02 11:46:32,108 - INFO - Comparing schemas...
2025-09-02 11:46:32,108 - INFO - Performing safety analysis...
2025-09-02 11:46:32,108 - INFO - Generating migration SQL...
2025-09-02 11:46:32,129 - INFO - Generating schema visualizations...
2025-09-02 11:46:32,131 - INFO - Generated HTML documentation
2025-09-02 11:46:32,132 - INFO - Generated Mermaid ERD
2025-09-02 11:46:32,132 - INFO - Generated Graphviz DOT file
2025-09-02 11:46:32,132 - INFO - Generated JSON schema structure
2025-09-02 11:46:32,132 - INFO - Schema visualizations generated in test_output_post_migration/documentation
2025-09-02 11:46:32,133 - INFO - Migration report generated: test_output_post_migration/migration_report.md
2025-09-02 11:46:32,137 - INFO - Started tracking migration 129: ddl_test_source_to_ddl_test_dest_1756806392
2025-09-02 11:46:32,141 - INFO - Completed migration tracking 129: SUCCESS
2025-09-02 11:46:32,141 - INFO - Migration tracking completed: 129
2025-09-02 11:46:32,141 - INFO - Migration completed successfully!
2025-09-02 11:46:32,141 - INFO - Migration ID: 129
2025-09-02 11:46:32,141 - INFO - Operations: 0
2025-09-02 11:46:32,141 - INFO - Safety warnings: 0
2025-09-02 11:46:32,141 - INFO - Migration file: test_output_post_migration/migration.sql
2025-09-02 11:46:32,141 - INFO - Rollback file: test_output_post_migration/rollback.sql
2025-09-02 11:46:32,141 - INFO - Migration report: test_output_post_migration/migration_report.md
2025-09-02 11:46:32,141 - INFO - ✅ Post-migration schema check completed successfully
2025-09-02 11:46:32,141 - INFO - ✅ Schemas are identical after migration!
2025-09-02 11:46:32,141 - INFO - 🔧 Executing SQL file: ./test_output/rollback.sql
2025-09-02 11:46:32,142 - DEBUG - Executing statement 1/21: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 11:46:32,142 - DEBUG - Executing statement 2/21: CREATE TABLE `temp_table` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`temp_data` varchar(255) DEFAULT N...
2025-09-02 11:46:32,145 - DEBUG - Executing statement 3/21: ALTER TABLE `customers` ADD COLUMN `loyalty_points` int(11) DEFAULT 0;...
2025-09-02 11:46:32,149 - DEBUG - Executing statement 4/21: ALTER TABLE `customers` DROP INDEX `idx_customers_country`;...
2025-09-02 11:46:32,153 - DEBUG - Executing statement 5/21: ALTER TABLE `customers` DROP INDEX `idx_customers_city`;...
2025-09-02 11:46:32,158 - DEBUG - Executing statement 6/21: ALTER TABLE `customers` ADD KEY `idx_customers_loyalty` (`loyalty_points`);...
2025-09-02 11:46:32,163 - DEBUG - Executing statement 7/21: ALTER TABLE `categories` DROP COLUMN `description`;...
2025-09-02 11:46:32,168 - DEBUG - Executing statement 8/21: ALTER TABLE `categories` DROP INDEX `idx_categories_created`;...
2025-09-02 11:46:32,172 - DEBUG - Executing statement 9/21: ALTER TABLE `products` DROP COLUMN `weight`;...
2025-09-02 11:46:32,177 - DEBUG - Executing statement 10/21: ALTER TABLE `products` DROP COLUMN `dimensions`;...
2025-09-02 11:46:32,182 - DEBUG - Executing statement 11/21: ALTER TABLE `products` ADD COLUMN `old_column` varchar(50) DEFAULT NULL;...
2025-09-02 11:46:32,187 - DEBUG - Executing statement 12/21: ALTER TABLE `products` DROP INDEX `idx_products_price`;...
2025-09-02 11:46:32,191 - DEBUG - Executing statement 13/21: ALTER TABLE `products` DROP INDEX `fk_products_category`;...
2025-09-02 11:46:32,195 - DEBUG - Executing statement 14/21: ALTER TABLE `products` DROP INDEX `idx_products_stock`;...
2025-09-02 11:46:32,199 - DEBUG - Executing statement 15/21: ALTER TABLE `products` DROP INDEX `idx_products_sku`;...
2025-09-02 11:46:32,204 - DEBUG - Executing statement 16/21: ALTER TABLE `products` DROP INDEX `idx_products_active`;...
2025-09-02 11:46:32,208 - DEBUG - Executing statement 17/21: ALTER TABLE `products` ADD KEY `idx_products_old` (`old_column`);...
2025-09-02 11:46:32,212 - DEBUG - Executing statement 18/21: DROP PROCEDURE IF EXISTS `GetCustomerOrders`;...
2025-09-02 11:46:32,214 - DEBUG - Executing statement 19/21: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*
FROM...
2025-09-02 11:46:32,215 - DEBUG - Executing statement 20/21: DROP FUNCTION IF EXISTS `CalculateOrderTotal`;...
2025-09-02 11:46:32,217 - DEBUG - Executing statement 21/21: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 11:46:32,217 - INFO - ✅ SQL file executed: 21 statements succeeded, 0 failed
2025-09-02 11:46:32,217 - INFO - 🔍 Running comparison step: Final comparison after rollback
2025-09-02 11:46:32,217 - INFO - Running in compare mode...
2025-09-02 11:46:32,218 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 11:46:32,218 - INFO - Connecting to databases...
2025-09-02 11:46:32,219 - INFO - Database connections successful
2025-09-02 11:46:32,219 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_final, stdin=None, shell=False, universal_newlines=False)
2025-09-02 11:46:32,222 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 11:46:32,222 - INFO - Initialized new git repository at test_output_final
2025-09-02 11:46:32,222 - DEBUG - Created directory: test_output_final/tables
2025-09-02 11:46:32,222 - DEBUG - Created directory: test_output_final/functions
2025-09-02 11:46:32,222 - DEBUG - Created directory: test_output_final/procedures
2025-09-02 11:46:32,222 - DEBUG - Created directory: test_output_final/triggers
2025-09-02 11:46:32,222 - DEBUG - Created directory: test_output_final/events
2025-09-02 11:46:32,222 - INFO - Initialized git repository at ./test_output_final
2025-09-02 11:46:32,222 - INFO - Extracting DDL objects...
2025-09-02 11:46:32,228 - INFO - Comparing schemas...
2025-09-02 11:46:32,228 - INFO - Performing safety analysis...
2025-09-02 11:46:32,228 - INFO - Generating migration SQL...
2025-09-02 11:46:32,248 - INFO - Generating schema visualizations...
2025-09-02 11:46:32,250 - INFO - Generated HTML documentation
2025-09-02 11:46:32,250 - INFO - Generated Mermaid ERD
2025-09-02 11:46:32,251 - INFO - Generated Graphviz DOT file
2025-09-02 11:46:32,251 - INFO - Generated JSON schema structure
2025-09-02 11:46:32,251 - INFO - Schema visualizations generated in test_output_final/documentation
2025-09-02 11:46:32,251 - INFO - Migration report generated: test_output_final/migration_report.md
2025-09-02 11:46:32,257 - INFO - Started tracking migration 130: ddl_test_source_to_ddl_test_dest_1756806392
2025-09-02 11:46:32,262 - INFO - Completed migration tracking 130: SUCCESS
2025-09-02 11:46:32,262 - INFO - Migration tracking completed: 130
2025-09-02 11:46:32,262 - INFO - Migration completed successfully!
2025-09-02 11:46:32,262 - INFO - Migration ID: 130
2025-09-02 11:46:32,262 - INFO - Operations: 6
2025-09-02 11:46:32,262 - INFO - Safety warnings: 0
2025-09-02 11:46:32,262 - INFO - Migration file: test_output_final/migration.sql
2025-09-02 11:46:32,262 - INFO - Rollback file: test_output_final/rollback.sql
2025-09-02 11:46:32,262 - INFO - Migration report: test_output_final/migration_report.md
2025-09-02 11:46:32,262 - INFO - ✅ Final comparison after rollback completed successfully
2025-09-02 11:46:32,262 - INFO - 🔍 Analyzing results in ./test_output_final...
2025-09-02 11:46:32,262 - INFO - 🔄 Comparing initial and final results...
2025-09-02 11:46:32,262 - INFO - ✅ Rollback test passed - initial and final states match!
2025-09-02 11:46:32,263 - INFO - 🧹 Cleaning up test databases...
2025-09-02 11:46:32,263 - INFO - ✅ Cleaned up database: ddl_test_source
2025-09-02 11:46:32,263 - INFO - ✅ Cleaned up database: ddl_test_dest
2025-09-02 11:49:59,330 - INFO - 🏗️  Setting up source database...
2025-09-02 11:49:59,387 - INFO - ✅ Source database setup completed
2025-09-02 11:49:59,387 - INFO - 🏗️  Setting up destination database with differences...
2025-09-02 11:49:59,439 - INFO - ✅ Destination database setup completed
2025-09-02 11:49:59,439 - INFO - 📝 Populating test data...
2025-09-02 11:49:59,442 - INFO - ✅ Test data populated in ddl_test_source
2025-09-02 11:49:59,445 - INFO - ✅ Test data populated in ddl_test_dest
2025-09-02 11:49:59,445 - INFO - 🔍 Running comparison step: Initial comparison
2025-09-02 11:49:59,445 - INFO - Running in compare mode...
2025-09-02 11:49:59,446 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 11:49:59,446 - INFO - Connecting to databases...
2025-09-02 11:49:59,447 - INFO - Database connections successful
2025-09-02 11:49:59,447 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 11:49:59,447 - INFO - Using existing git repository at test_output
2025-09-02 11:49:59,447 - DEBUG - Created directory: test_output/tables
2025-09-02 11:49:59,447 - DEBUG - Created directory: test_output/functions
2025-09-02 11:49:59,448 - DEBUG - Created directory: test_output/procedures
2025-09-02 11:49:59,448 - DEBUG - Created directory: test_output/triggers
2025-09-02 11:49:59,448 - DEBUG - Created directory: test_output/events
2025-09-02 11:49:59,448 - INFO - Initialized git repository at ./test_output
2025-09-02 11:49:59,448 - INFO - Extracting DDL objects...
2025-09-02 11:49:59,455 - INFO - Comparing schemas...
2025-09-02 11:49:59,455 - INFO - Performing safety analysis...
2025-09-02 11:49:59,455 - INFO - Generating migration SQL...
2025-09-02 11:49:59,479 - INFO - Generating schema visualizations...
2025-09-02 11:49:59,481 - INFO - Generated HTML documentation
2025-09-02 11:49:59,481 - INFO - Generated Mermaid ERD
2025-09-02 11:49:59,481 - INFO - Generated Graphviz DOT file
2025-09-02 11:49:59,482 - INFO - Generated JSON schema structure
2025-09-02 11:49:59,482 - INFO - Schema visualizations generated in test_output/documentation
2025-09-02 11:49:59,482 - INFO - Migration report generated: test_output/migration_report.md
2025-09-02 11:49:59,486 - INFO - Started tracking migration 131: ddl_test_source_to_ddl_test_dest_1756806599
2025-09-02 11:49:59,490 - INFO - Completed migration tracking 131: SUCCESS
2025-09-02 11:49:59,490 - INFO - Migration tracking completed: 131
2025-09-02 11:49:59,490 - INFO - Migration completed successfully!
2025-09-02 11:49:59,491 - INFO - Migration ID: 131
2025-09-02 11:49:59,491 - INFO - Operations: 6
2025-09-02 11:49:59,491 - INFO - Safety warnings: 0
2025-09-02 11:49:59,491 - INFO - Migration file: test_output/migration.sql
2025-09-02 11:49:59,491 - INFO - Rollback file: test_output/rollback.sql
2025-09-02 11:49:59,491 - INFO - Migration report: test_output/migration_report.md
2025-09-02 11:49:59,491 - INFO - ✅ Initial comparison completed successfully
2025-09-02 11:49:59,491 - INFO - 🔍 Analyzing results in ./test_output...
2025-09-02 11:49:59,491 - INFO - 🔧 Executing SQL file: ./test_output/migration.sql
2025-09-02 11:49:59,492 - DEBUG - Executing statement 1/22: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 11:49:59,492 - DEBUG - Executing statement 2/22: DROP TABLE IF EXISTS `ddl_test_dest`.`temp_table`;...
2025-09-02 11:49:59,494 - DEBUG - Executing statement 3/22: ALTER TABLE `products` ADD COLUMN `weight` decimal(8,3) DEFAULT NULL;...
2025-09-02 11:49:59,498 - DEBUG - Executing statement 4/22: ALTER TABLE `products` ADD COLUMN `dimensions` varchar(100) DEFAULT NULL;...
2025-09-02 11:49:59,503 - DEBUG - Executing statement 5/22: ALTER TABLE `products` DROP COLUMN `old_column`;...
2025-09-02 11:49:59,509 - DEBUG - Executing statement 6/22: ALTER TABLE `products` ADD KEY `fk_products_category` (`category_id`);...
2025-09-02 11:49:59,514 - DEBUG - Executing statement 7/22: ALTER TABLE `products` ADD KEY `idx_products_active` (`is_active`);...
2025-09-02 11:49:59,519 - DEBUG - Executing statement 8/22: ALTER TABLE `products` ADD KEY `idx_products_price` (`price`);...
2025-09-02 11:49:59,525 - DEBUG - Executing statement 9/22: ALTER TABLE `products` ADD KEY `idx_products_stock` (`stock_quantity`);...
2025-09-02 11:49:59,530 - DEBUG - Executing statement 10/22: ALTER TABLE `products` ADD KEY `idx_products_sku` (`sku`);...
2025-09-02 11:49:59,536 - DEBUG - Executing statement 11/22: ALTER TABLE `products` DROP INDEX `idx_products_old`;...
2025-09-02 11:49:59,536 - WARNING - ⚠️  SQL execution warning (statement 11): (1091, "Can't DROP INDEX `idx_products_old`; check that it exists")
2025-09-02 11:49:59,536 - WARNING - Statement: ALTER TABLE `products` DROP INDEX `idx_products_old`;
2025-09-02 11:49:59,536 - DEBUG - Executing statement 12/22: ALTER TABLE `categories` ADD COLUMN `description` text DEFAULT NULL;...
2025-09-02 11:49:59,540 - DEBUG - Executing statement 13/22: ALTER TABLE `categories` ADD KEY `idx_categories_created` (`created_at`);...
2025-09-02 11:49:59,547 - DEBUG - Executing statement 14/22: ALTER TABLE `customers` DROP COLUMN `loyalty_points`;...
2025-09-02 11:49:59,551 - DEBUG - Executing statement 15/22: ALTER TABLE `customers` ADD KEY `idx_customers_country` (`country`);...
2025-09-02 11:49:59,557 - DEBUG - Executing statement 16/22: ALTER TABLE `customers` ADD KEY `idx_customers_city` (`city`);...
2025-09-02 11:49:59,563 - DEBUG - Executing statement 17/22: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;...
2025-09-02 11:49:59,563 - WARNING - ⚠️  SQL execution warning (statement 17): (1091, "Can't DROP INDEX `idx_customers_loyalty`; check that it exists")
2025-09-02 11:49:59,563 - WARNING - Statement: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;
2025-09-02 11:49:59,563 - DEBUG - Executing statement 18/22: DROP PROCEDURE IF EXISTS `ddl_test_dest`.`GetCustomerOrders`;...
2025-09-02 11:49:59,565 - DEBUG - Executing statement 19/22: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*, COU...
2025-09-02 11:49:59,566 - DEBUG - Executing statement 20/22: DROP FUNCTION IF EXISTS `ddl_test_dest`.`CalculateOrderTotal`;...
2025-09-02 11:49:59,566 - DEBUG - Executing statement 21/22: CREATE DEFINER=`sstuser`@`%` FUNCTION `CalculateOrderTotal`(order_id INT) RETURNS decimal(12,2)
READ...
2025-09-02 11:49:59,568 - DEBUG - Executing statement 22/22: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 11:49:59,568 - INFO - ✅ SQL file executed: 20 statements succeeded, 2 failed
2025-09-02 11:49:59,568 - INFO - 🔍 Checking if schemas are identical after migration...
2025-09-02 11:49:59,568 - INFO - 🔍 Running comparison step: Post-migration schema check
2025-09-02 11:49:59,569 - INFO - Running in compare mode...
2025-09-02 11:49:59,569 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 11:49:59,569 - INFO - Connecting to databases...
2025-09-02 11:49:59,570 - INFO - Database connections successful
2025-09-02 11:49:59,570 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 11:49:59,571 - INFO - Using existing git repository at test_output_post_migration
2025-09-02 11:49:59,571 - DEBUG - Created directory: test_output_post_migration/tables
2025-09-02 11:49:59,571 - DEBUG - Created directory: test_output_post_migration/functions
2025-09-02 11:49:59,571 - DEBUG - Created directory: test_output_post_migration/procedures
2025-09-02 11:49:59,571 - DEBUG - Created directory: test_output_post_migration/triggers
2025-09-02 11:49:59,571 - DEBUG - Created directory: test_output_post_migration/events
2025-09-02 11:49:59,571 - INFO - Initialized git repository at ./test_output_post_migration
2025-09-02 11:49:59,571 - INFO - Extracting DDL objects...
2025-09-02 11:49:59,578 - INFO - Comparing schemas...
2025-09-02 11:49:59,578 - INFO - Performing safety analysis...
2025-09-02 11:49:59,578 - INFO - Generating migration SQL...
2025-09-02 11:49:59,599 - INFO - Generating schema visualizations...
2025-09-02 11:49:59,601 - INFO - Generated HTML documentation
2025-09-02 11:49:59,602 - INFO - Generated Mermaid ERD
2025-09-02 11:49:59,602 - INFO - Generated Graphviz DOT file
2025-09-02 11:49:59,602 - INFO - Generated JSON schema structure
2025-09-02 11:49:59,602 - INFO - Schema visualizations generated in test_output_post_migration/documentation
2025-09-02 11:49:59,603 - INFO - Migration report generated: test_output_post_migration/migration_report.md
2025-09-02 11:49:59,607 - INFO - Started tracking migration 132: ddl_test_source_to_ddl_test_dest_1756806599
2025-09-02 11:49:59,611 - INFO - Completed migration tracking 132: SUCCESS
2025-09-02 11:49:59,611 - INFO - Migration tracking completed: 132
2025-09-02 11:49:59,611 - INFO - Migration completed successfully!
2025-09-02 11:49:59,611 - INFO - Migration ID: 132
2025-09-02 11:49:59,612 - INFO - Operations: 0
2025-09-02 11:49:59,612 - INFO - Safety warnings: 0
2025-09-02 11:49:59,612 - INFO - Migration file: test_output_post_migration/migration.sql
2025-09-02 11:49:59,612 - INFO - Rollback file: test_output_post_migration/rollback.sql
2025-09-02 11:49:59,612 - INFO - Migration report: test_output_post_migration/migration_report.md
2025-09-02 11:49:59,612 - INFO - ✅ Post-migration schema check completed successfully
2025-09-02 11:49:59,612 - INFO - ✅ Schemas are identical after migration!
2025-09-02 11:49:59,612 - INFO - 🔧 Executing SQL file: ./test_output/rollback.sql
2025-09-02 11:49:59,612 - DEBUG - Executing statement 1/21: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 11:49:59,613 - DEBUG - Executing statement 2/21: CREATE TABLE `temp_table` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`temp_data` varchar(255) DEFAULT N...
2025-09-02 11:49:59,615 - DEBUG - Executing statement 3/21: ALTER TABLE `products` DROP COLUMN `weight`;...
2025-09-02 11:49:59,620 - DEBUG - Executing statement 4/21: ALTER TABLE `products` DROP COLUMN `dimensions`;...
2025-09-02 11:49:59,625 - DEBUG - Executing statement 5/21: ALTER TABLE `products` ADD COLUMN `old_column` varchar(50) DEFAULT NULL;...
2025-09-02 11:49:59,630 - DEBUG - Executing statement 6/21: ALTER TABLE `products` DROP INDEX `fk_products_category`;...
2025-09-02 11:49:59,634 - DEBUG - Executing statement 7/21: ALTER TABLE `products` DROP INDEX `idx_products_active`;...
2025-09-02 11:49:59,638 - DEBUG - Executing statement 8/21: ALTER TABLE `products` DROP INDEX `idx_products_price`;...
2025-09-02 11:49:59,643 - DEBUG - Executing statement 9/21: ALTER TABLE `products` DROP INDEX `idx_products_stock`;...
2025-09-02 11:49:59,647 - DEBUG - Executing statement 10/21: ALTER TABLE `products` DROP INDEX `idx_products_sku`;...
2025-09-02 11:49:59,651 - DEBUG - Executing statement 11/21: ALTER TABLE `products` ADD KEY `idx_products_old` (`old_column`);...
2025-09-02 11:49:59,656 - DEBUG - Executing statement 12/21: ALTER TABLE `categories` DROP COLUMN `description`;...
2025-09-02 11:49:59,661 - DEBUG - Executing statement 13/21: ALTER TABLE `categories` DROP INDEX `idx_categories_created`;...
2025-09-02 11:49:59,666 - DEBUG - Executing statement 14/21: ALTER TABLE `customers` ADD COLUMN `loyalty_points` int(11) DEFAULT 0;...
2025-09-02 11:49:59,671 - DEBUG - Executing statement 15/21: ALTER TABLE `customers` DROP INDEX `idx_customers_country`;...
2025-09-02 11:49:59,676 - DEBUG - Executing statement 16/21: ALTER TABLE `customers` DROP INDEX `idx_customers_city`;...
2025-09-02 11:49:59,680 - DEBUG - Executing statement 17/21: ALTER TABLE `customers` ADD KEY `idx_customers_loyalty` (`loyalty_points`);...
2025-09-02 11:49:59,686 - DEBUG - Executing statement 18/21: DROP PROCEDURE IF EXISTS `GetCustomerOrders`;...
2025-09-02 11:49:59,687 - DEBUG - Executing statement 19/21: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*
FROM...
2025-09-02 11:49:59,689 - DEBUG - Executing statement 20/21: DROP FUNCTION IF EXISTS `CalculateOrderTotal`;...
2025-09-02 11:49:59,690 - DEBUG - Executing statement 21/21: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 11:49:59,690 - INFO - ✅ SQL file executed: 21 statements succeeded, 0 failed
2025-09-02 11:49:59,691 - INFO - 🔍 Running comparison step: Final comparison after rollback
2025-09-02 11:49:59,692 - INFO - Running in compare mode...
2025-09-02 11:49:59,692 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 11:49:59,692 - INFO - Connecting to databases...
2025-09-02 11:49:59,694 - INFO - Database connections successful
2025-09-02 11:49:59,694 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 11:49:59,694 - INFO - Using existing git repository at test_output_final
2025-09-02 11:49:59,694 - DEBUG - Created directory: test_output_final/tables
2025-09-02 11:49:59,694 - DEBUG - Created directory: test_output_final/functions
2025-09-02 11:49:59,694 - DEBUG - Created directory: test_output_final/procedures
2025-09-02 11:49:59,694 - DEBUG - Created directory: test_output_final/triggers
2025-09-02 11:49:59,694 - DEBUG - Created directory: test_output_final/events
2025-09-02 11:49:59,695 - INFO - Initialized git repository at ./test_output_final
2025-09-02 11:49:59,695 - INFO - Extracting DDL objects...
2025-09-02 11:49:59,701 - INFO - Comparing schemas...
2025-09-02 11:49:59,701 - INFO - Performing safety analysis...
2025-09-02 11:49:59,701 - INFO - Generating migration SQL...
2025-09-02 11:49:59,723 - INFO - Generating schema visualizations...
2025-09-02 11:49:59,725 - INFO - Generated HTML documentation
2025-09-02 11:49:59,726 - INFO - Generated Mermaid ERD
2025-09-02 11:49:59,726 - INFO - Generated Graphviz DOT file
2025-09-02 11:49:59,726 - INFO - Generated JSON schema structure
2025-09-02 11:49:59,726 - INFO - Schema visualizations generated in test_output_final/documentation
2025-09-02 11:49:59,727 - INFO - Migration report generated: test_output_final/migration_report.md
2025-09-02 11:49:59,733 - INFO - Started tracking migration 133: ddl_test_source_to_ddl_test_dest_1756806599
2025-09-02 11:49:59,737 - INFO - Completed migration tracking 133: SUCCESS
2025-09-02 11:49:59,737 - INFO - Migration tracking completed: 133
2025-09-02 11:49:59,737 - INFO - Migration completed successfully!
2025-09-02 11:49:59,737 - INFO - Migration ID: 133
2025-09-02 11:49:59,737 - INFO - Operations: 6
2025-09-02 11:49:59,737 - INFO - Safety warnings: 0
2025-09-02 11:49:59,737 - INFO - Migration file: test_output_final/migration.sql
2025-09-02 11:49:59,737 - INFO - Rollback file: test_output_final/rollback.sql
2025-09-02 11:49:59,737 - INFO - Migration report: test_output_final/migration_report.md
2025-09-02 11:49:59,737 - INFO - ✅ Final comparison after rollback completed successfully
2025-09-02 11:49:59,738 - INFO - 🔍 Analyzing results in ./test_output_final...
2025-09-02 11:49:59,738 - INFO - 🔄 Comparing initial and final results...
2025-09-02 11:49:59,738 - INFO - ✅ Rollback test passed - initial and final states match!
2025-09-02 11:49:59,738 - INFO - 💾 Saving test data for reference...
2025-09-02 11:49:59,741 - INFO - ✅ Saved ./test_output to test_data/test_run_20250902_114959/test_output
2025-09-02 11:49:59,745 - INFO - ✅ Saved ./test_output_post_migration to test_data/test_run_20250902_114959/test_output_post_migration
2025-09-02 11:49:59,748 - INFO - ✅ Saved ./test_output_final to test_data/test_run_20250902_114959/test_output_final
2025-09-02 11:49:59,748 - INFO - ✅ Saved test log to test_data/test_run_20250902_114959
2025-09-02 11:49:59,748 - INFO - 🧹 Cleaning up test databases...
2025-09-02 11:49:59,749 - INFO - ✅ Cleaned up database: ddl_test_source
2025-09-02 11:49:59,749 - INFO - ✅ Cleaned up database: ddl_test_dest
2025-09-02 11:52:03,299 - INFO - Running in compare mode...
2025-09-02 11:52:03,299 - INFO - Connecting to databases...
2025-09-02 11:52:03,302 - INFO - Database connections successful
2025-09-02 11:52:03,305 - INFO - Initialized new git repository at /home/claudio/Projects/ddl_wiz200
2025-09-02 11:52:03,305 - INFO - Initialized git repository at /home/claudio/Projects/ddl_wiz200
2025-09-02 11:52:03,306 - INFO - Extracting DDL objects...
2025-09-02 11:52:03,311 - INFO - Comparing schemas...
2025-09-02 11:52:03,312 - INFO - Performing safety analysis...
2025-09-02 11:52:03,312 - INFO - Generating migration SQL...
2025-09-02 11:52:03,336 - INFO - Generating schema visualizations...
2025-09-02 11:52:03,338 - INFO - Generated HTML documentation
2025-09-02 11:52:03,338 - INFO - Generated Mermaid ERD
2025-09-02 11:52:03,338 - INFO - Generated Graphviz DOT file
2025-09-02 11:52:03,339 - INFO - Generated JSON schema structure
2025-09-02 11:52:03,339 - INFO - Schema visualizations generated in /home/claudio/Projects/ddl_wiz200/documentation
2025-09-02 11:52:03,339 - INFO - Migration report generated: /home/claudio/Projects/ddl_wiz200/migration_report.md
2025-09-02 11:52:03,344 - INFO - Started tracking migration 134: ddl_test_source_to_ddl_test_dest_1756806723
2025-09-02 11:52:03,348 - INFO - Completed migration tracking 134: SUCCESS
2025-09-02 11:52:03,348 - INFO - Migration tracking completed: 134
2025-09-02 11:52:03,348 - INFO - Migration completed successfully!
2025-09-02 11:52:03,348 - INFO - Migration ID: 134
2025-09-02 11:52:03,348 - INFO - Operations: 6
2025-09-02 11:52:03,348 - INFO - Safety warnings: 0
2025-09-02 11:52:03,349 - INFO - Migration file: /home/claudio/Projects/ddl_wiz200/migration.sql
2025-09-02 11:52:03,349 - INFO - Rollback file: /home/claudio/Projects/ddl_wiz200/rollback.sql
2025-09-02 11:52:03,349 - INFO - Migration report: /home/claudio/Projects/ddl_wiz200/migration_report.md
2025-09-02 11:52:30,487 - INFO - 🏗️  Setting up source database...
2025-09-02 11:52:30,543 - INFO - ✅ Source database setup completed
2025-09-02 11:52:30,543 - INFO - 🏗️  Setting up destination database with differences...
2025-09-02 11:52:30,593 - INFO - ✅ Destination database setup completed
2025-09-02 11:52:30,593 - INFO - 📝 Populating test data...
2025-09-02 11:52:30,595 - INFO - ✅ Test data populated in ddl_test_source
2025-09-02 11:52:30,597 - INFO - ✅ Test data populated in ddl_test_dest
2025-09-02 11:52:30,597 - INFO - 🔍 Running comparison step: Initial comparison
2025-09-02 11:52:30,598 - INFO - Running in compare mode...
2025-09-02 11:52:30,599 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 11:52:30,599 - INFO - Connecting to databases...
2025-09-02 11:52:30,600 - INFO - Database connections successful
2025-09-02 11:52:30,600 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output, stdin=None, shell=False, universal_newlines=False)
2025-09-02 11:52:30,602 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 11:52:30,603 - INFO - Initialized new git repository at test_output
2025-09-02 11:52:30,603 - DEBUG - Created directory: test_output/tables
2025-09-02 11:52:30,603 - DEBUG - Created directory: test_output/functions
2025-09-02 11:52:30,603 - DEBUG - Created directory: test_output/procedures
2025-09-02 11:52:30,603 - DEBUG - Created directory: test_output/triggers
2025-09-02 11:52:30,603 - DEBUG - Created directory: test_output/events
2025-09-02 11:52:30,603 - INFO - Initialized git repository at ./test_output
2025-09-02 11:52:30,603 - INFO - Extracting DDL objects...
2025-09-02 11:52:30,613 - INFO - Comparing schemas...
2025-09-02 11:52:30,613 - INFO - Performing safety analysis...
2025-09-02 11:52:30,613 - INFO - Generating migration SQL...
2025-09-02 11:52:30,636 - INFO - Generating schema visualizations...
2025-09-02 11:52:30,639 - INFO - Generated HTML documentation
2025-09-02 11:52:30,639 - INFO - Generated Mermaid ERD
2025-09-02 11:52:30,639 - INFO - Generated Graphviz DOT file
2025-09-02 11:52:30,640 - INFO - Generated JSON schema structure
2025-09-02 11:52:30,640 - INFO - Schema visualizations generated in test_output/documentation
2025-09-02 11:52:30,640 - INFO - Migration report generated: test_output/migration_report.md
2025-09-02 11:52:30,653 - INFO - Started tracking migration 135: ddl_test_source_to_ddl_test_dest_1756806750
2025-09-02 11:52:30,656 - INFO - Completed migration tracking 135: SUCCESS
2025-09-02 11:52:30,656 - INFO - Migration tracking completed: 135
2025-09-02 11:52:30,656 - INFO - Migration completed successfully!
2025-09-02 11:52:30,657 - INFO - Migration ID: 135
2025-09-02 11:52:30,657 - INFO - Operations: 6
2025-09-02 11:52:30,657 - INFO - Safety warnings: 0
2025-09-02 11:52:30,657 - INFO - Migration file: test_output/migration.sql
2025-09-02 11:52:30,657 - INFO - Rollback file: test_output/rollback.sql
2025-09-02 11:52:30,657 - INFO - Migration report: test_output/migration_report.md
2025-09-02 11:52:30,657 - INFO - ✅ Initial comparison completed successfully
2025-09-02 11:52:30,657 - INFO - 🔍 Analyzing results in ./test_output...
2025-09-02 11:52:30,657 - INFO - 🔧 Executing SQL file: ./test_output/migration.sql
2025-09-02 11:52:30,657 - DEBUG - Executing statement 1/22: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 11:52:30,658 - DEBUG - Executing statement 2/22: DROP TABLE IF EXISTS `ddl_test_dest`.`temp_table`;...
2025-09-02 11:52:30,660 - DEBUG - Executing statement 3/22: ALTER TABLE `products` ADD COLUMN `weight` decimal(8,3) DEFAULT NULL;...
2025-09-02 11:52:30,665 - DEBUG - Executing statement 4/22: ALTER TABLE `products` ADD COLUMN `dimensions` varchar(100) DEFAULT NULL;...
2025-09-02 11:52:30,669 - DEBUG - Executing statement 5/22: ALTER TABLE `products` DROP COLUMN `old_column`;...
2025-09-02 11:52:30,674 - DEBUG - Executing statement 6/22: ALTER TABLE `products` ADD KEY `idx_products_active` (`is_active`);...
2025-09-02 11:52:30,680 - DEBUG - Executing statement 7/22: ALTER TABLE `products` ADD KEY `idx_products_price` (`price`);...
2025-09-02 11:52:30,686 - DEBUG - Executing statement 8/22: ALTER TABLE `products` ADD KEY `idx_products_sku` (`sku`);...
2025-09-02 11:52:30,692 - DEBUG - Executing statement 9/22: ALTER TABLE `products` ADD KEY `fk_products_category` (`category_id`);...
2025-09-02 11:52:30,697 - DEBUG - Executing statement 10/22: ALTER TABLE `products` ADD KEY `idx_products_stock` (`stock_quantity`);...
2025-09-02 11:52:30,703 - DEBUG - Executing statement 11/22: ALTER TABLE `products` DROP INDEX `idx_products_old`;...
2025-09-02 11:52:30,703 - WARNING - ⚠️  SQL execution warning (statement 11): (1091, "Can't DROP INDEX `idx_products_old`; check that it exists")
2025-09-02 11:52:30,703 - WARNING - Statement: ALTER TABLE `products` DROP INDEX `idx_products_old`;
2025-09-02 11:52:30,703 - DEBUG - Executing statement 12/22: ALTER TABLE `customers` DROP COLUMN `loyalty_points`;...
2025-09-02 11:52:30,708 - DEBUG - Executing statement 13/22: ALTER TABLE `customers` ADD KEY `idx_customers_city` (`city`);...
2025-09-02 11:52:30,715 - DEBUG - Executing statement 14/22: ALTER TABLE `customers` ADD KEY `idx_customers_country` (`country`);...
2025-09-02 11:52:30,721 - DEBUG - Executing statement 15/22: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;...
2025-09-02 11:52:30,721 - WARNING - ⚠️  SQL execution warning (statement 15): (1091, "Can't DROP INDEX `idx_customers_loyalty`; check that it exists")
2025-09-02 11:52:30,721 - WARNING - Statement: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;
2025-09-02 11:52:30,721 - DEBUG - Executing statement 16/22: ALTER TABLE `categories` ADD COLUMN `description` text DEFAULT NULL;...
2025-09-02 11:52:30,725 - DEBUG - Executing statement 17/22: ALTER TABLE `categories` ADD KEY `idx_categories_created` (`created_at`);...
2025-09-02 11:52:30,731 - DEBUG - Executing statement 18/22: DROP PROCEDURE IF EXISTS `ddl_test_dest`.`GetCustomerOrders`;...
2025-09-02 11:52:30,733 - DEBUG - Executing statement 19/22: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*, COU...
2025-09-02 11:52:30,734 - DEBUG - Executing statement 20/22: DROP FUNCTION IF EXISTS `ddl_test_dest`.`CalculateOrderTotal`;...
2025-09-02 11:52:30,734 - DEBUG - Executing statement 21/22: CREATE DEFINER=`sstuser`@`%` FUNCTION `CalculateOrderTotal`(order_id INT) RETURNS decimal(12,2)
READ...
2025-09-02 11:52:30,736 - DEBUG - Executing statement 22/22: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 11:52:30,736 - INFO - ✅ SQL file executed: 20 statements succeeded, 2 failed
2025-09-02 11:52:30,736 - INFO - 🔍 Checking if schemas are identical after migration...
2025-09-02 11:52:30,736 - INFO - 🔍 Running comparison step: Post-migration schema check
2025-09-02 11:52:30,737 - INFO - Running in compare mode...
2025-09-02 11:52:30,737 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 11:52:30,737 - INFO - Connecting to databases...
2025-09-02 11:52:30,738 - INFO - Database connections successful
2025-09-02 11:52:30,738 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_post_migration, stdin=None, shell=False, universal_newlines=False)
2025-09-02 11:52:30,741 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 11:52:30,742 - INFO - Initialized new git repository at test_output_post_migration
2025-09-02 11:52:30,742 - DEBUG - Created directory: test_output_post_migration/tables
2025-09-02 11:52:30,742 - DEBUG - Created directory: test_output_post_migration/functions
2025-09-02 11:52:30,742 - DEBUG - Created directory: test_output_post_migration/procedures
2025-09-02 11:52:30,742 - DEBUG - Created directory: test_output_post_migration/triggers
2025-09-02 11:52:30,742 - DEBUG - Created directory: test_output_post_migration/events
2025-09-02 11:52:30,742 - INFO - Initialized git repository at ./test_output_post_migration
2025-09-02 11:52:30,742 - INFO - Extracting DDL objects...
2025-09-02 11:52:30,749 - INFO - Comparing schemas...
2025-09-02 11:52:30,749 - INFO - Performing safety analysis...
2025-09-02 11:52:30,749 - INFO - Generating migration SQL...
2025-09-02 11:52:30,772 - INFO - Generating schema visualizations...
2025-09-02 11:52:30,776 - INFO - Generated HTML documentation
2025-09-02 11:52:30,776 - INFO - Generated Mermaid ERD
2025-09-02 11:52:30,776 - INFO - Generated Graphviz DOT file
2025-09-02 11:52:30,776 - INFO - Generated JSON schema structure
2025-09-02 11:52:30,776 - INFO - Schema visualizations generated in test_output_post_migration/documentation
2025-09-02 11:52:30,777 - INFO - Migration report generated: test_output_post_migration/migration_report.md
2025-09-02 11:52:30,783 - INFO - Started tracking migration 136: ddl_test_source_to_ddl_test_dest_1756806750
2025-09-02 11:52:30,786 - INFO - Completed migration tracking 136: SUCCESS
2025-09-02 11:52:30,786 - INFO - Migration tracking completed: 136
2025-09-02 11:52:30,786 - INFO - Migration completed successfully!
2025-09-02 11:52:30,786 - INFO - Migration ID: 136
2025-09-02 11:52:30,786 - INFO - Operations: 0
2025-09-02 11:52:30,786 - INFO - Safety warnings: 0
2025-09-02 11:52:30,786 - INFO - Migration file: test_output_post_migration/migration.sql
2025-09-02 11:52:30,787 - INFO - Rollback file: test_output_post_migration/rollback.sql
2025-09-02 11:52:30,787 - INFO - Migration report: test_output_post_migration/migration_report.md
2025-09-02 11:52:30,787 - INFO - ✅ Post-migration schema check completed successfully
2025-09-02 11:52:30,787 - INFO - ✅ Schemas are identical after migration!
2025-09-02 11:52:30,787 - INFO - 🔧 Executing SQL file: ./test_output/rollback.sql
2025-09-02 11:52:30,788 - DEBUG - Executing statement 1/21: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 11:52:30,788 - DEBUG - Executing statement 2/21: CREATE TABLE `temp_table` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`temp_data` varchar(255) DEFAULT N...
2025-09-02 11:52:30,790 - DEBUG - Executing statement 3/21: ALTER TABLE `products` DROP COLUMN `weight`;...
2025-09-02 11:52:30,795 - DEBUG - Executing statement 4/21: ALTER TABLE `products` DROP COLUMN `dimensions`;...
2025-09-02 11:52:30,800 - DEBUG - Executing statement 5/21: ALTER TABLE `products` ADD COLUMN `old_column` varchar(50) DEFAULT NULL;...
2025-09-02 11:52:30,805 - DEBUG - Executing statement 6/21: ALTER TABLE `products` DROP INDEX `idx_products_active`;...
2025-09-02 11:52:30,809 - DEBUG - Executing statement 7/21: ALTER TABLE `products` DROP INDEX `idx_products_price`;...
2025-09-02 11:52:30,813 - DEBUG - Executing statement 8/21: ALTER TABLE `products` DROP INDEX `idx_products_sku`;...
2025-09-02 11:52:30,818 - DEBUG - Executing statement 9/21: ALTER TABLE `products` DROP INDEX `fk_products_category`;...
2025-09-02 11:52:30,822 - DEBUG - Executing statement 10/21: ALTER TABLE `products` DROP INDEX `idx_products_stock`;...
2025-09-02 11:52:30,826 - DEBUG - Executing statement 11/21: ALTER TABLE `products` ADD KEY `idx_products_old` (`old_column`);...
2025-09-02 11:52:30,831 - DEBUG - Executing statement 12/21: ALTER TABLE `customers` ADD COLUMN `loyalty_points` int(11) DEFAULT 0;...
2025-09-02 11:52:30,836 - DEBUG - Executing statement 13/21: ALTER TABLE `customers` DROP INDEX `idx_customers_city`;...
2025-09-02 11:52:30,840 - DEBUG - Executing statement 14/21: ALTER TABLE `customers` DROP INDEX `idx_customers_country`;...
2025-09-02 11:52:30,844 - DEBUG - Executing statement 15/21: ALTER TABLE `customers` ADD KEY `idx_customers_loyalty` (`loyalty_points`);...
2025-09-02 11:52:30,851 - DEBUG - Executing statement 16/21: ALTER TABLE `categories` DROP COLUMN `description`;...
2025-09-02 11:52:30,855 - DEBUG - Executing statement 17/21: ALTER TABLE `categories` DROP INDEX `idx_categories_created`;...
2025-09-02 11:52:30,859 - DEBUG - Executing statement 18/21: DROP PROCEDURE IF EXISTS `GetCustomerOrders`;...
2025-09-02 11:52:30,861 - DEBUG - Executing statement 19/21: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*
FROM...
2025-09-02 11:52:30,862 - DEBUG - Executing statement 20/21: DROP FUNCTION IF EXISTS `CalculateOrderTotal`;...
2025-09-02 11:52:30,863 - DEBUG - Executing statement 21/21: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 11:52:30,864 - INFO - ✅ SQL file executed: 21 statements succeeded, 0 failed
2025-09-02 11:52:30,864 - INFO - 🔍 Running comparison step: Final comparison after rollback
2025-09-02 11:52:30,864 - INFO - Running in compare mode...
2025-09-02 11:52:30,865 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 11:52:30,865 - INFO - Connecting to databases...
2025-09-02 11:52:30,866 - INFO - Database connections successful
2025-09-02 11:52:30,866 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_final, stdin=None, shell=False, universal_newlines=False)
2025-09-02 11:52:30,869 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 11:52:30,869 - INFO - Initialized new git repository at test_output_final
2025-09-02 11:52:30,869 - DEBUG - Created directory: test_output_final/tables
2025-09-02 11:52:30,869 - DEBUG - Created directory: test_output_final/functions
2025-09-02 11:52:30,869 - DEBUG - Created directory: test_output_final/procedures
2025-09-02 11:52:30,869 - DEBUG - Created directory: test_output_final/triggers
2025-09-02 11:52:30,869 - DEBUG - Created directory: test_output_final/events
2025-09-02 11:52:30,869 - INFO - Initialized git repository at ./test_output_final
2025-09-02 11:52:30,869 - INFO - Extracting DDL objects...
2025-09-02 11:52:30,875 - INFO - Comparing schemas...
2025-09-02 11:52:30,875 - INFO - Performing safety analysis...
2025-09-02 11:52:30,875 - INFO - Generating migration SQL...
2025-09-02 11:52:30,896 - INFO - Generating schema visualizations...
2025-09-02 11:52:30,899 - INFO - Generated HTML documentation
2025-09-02 11:52:30,899 - INFO - Generated Mermaid ERD
2025-09-02 11:52:30,899 - INFO - Generated Graphviz DOT file
2025-09-02 11:52:30,900 - INFO - Generated JSON schema structure
2025-09-02 11:52:30,900 - INFO - Schema visualizations generated in test_output_final/documentation
2025-09-02 11:52:30,900 - INFO - Migration report generated: test_output_final/migration_report.md
2025-09-02 11:52:30,906 - INFO - Started tracking migration 137: ddl_test_source_to_ddl_test_dest_1756806750
2025-09-02 11:52:30,910 - INFO - Completed migration tracking 137: SUCCESS
2025-09-02 11:52:30,910 - INFO - Migration tracking completed: 137
2025-09-02 11:52:30,910 - INFO - Migration completed successfully!
2025-09-02 11:52:30,910 - INFO - Migration ID: 137
2025-09-02 11:52:30,910 - INFO - Operations: 6
2025-09-02 11:52:30,910 - INFO - Safety warnings: 0
2025-09-02 11:52:30,910 - INFO - Migration file: test_output_final/migration.sql
2025-09-02 11:52:30,910 - INFO - Rollback file: test_output_final/rollback.sql
2025-09-02 11:52:30,910 - INFO - Migration report: test_output_final/migration_report.md
2025-09-02 11:52:30,910 - INFO - ✅ Final comparison after rollback completed successfully
2025-09-02 11:52:30,910 - INFO - 🔍 Analyzing results in ./test_output_final...
2025-09-02 11:52:30,910 - INFO - 🔄 Comparing initial and final results...
2025-09-02 11:52:30,910 - INFO - ✅ Rollback test passed - initial and final states match!
2025-09-02 11:52:30,911 - INFO - 💾 Saving test data for reference...
2025-09-02 11:52:30,914 - INFO - ✅ Saved ./test_output to test_data/ddl-wizard-testsuite-initial-migration-20250902_115230
2025-09-02 11:52:30,917 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddl-wizard-testsuite-post-migration-verification-20250902_115230
2025-09-02 11:52:30,920 - INFO - ✅ Saved ./test_output_final to test_data/ddl-wizard-testsuite-rollback-verification-20250902_115230
2025-09-02 11:52:30,920 - INFO - ✅ Saved test log to test_data/ddl-wizard-testsuite-initial-migration-20250902_115230
2025-09-02 11:52:30,920 - INFO - 🧹 Cleaning up test databases...
2025-09-02 11:52:30,921 - INFO - ✅ Cleaned up database: ddl_test_source
2025-09-02 11:52:30,921 - INFO - ✅ Cleaned up database: ddl_test_dest
2025-09-02 11:55:27,961 - INFO - 🏗️  Setting up source database...
2025-09-02 11:55:28,019 - INFO - ✅ Source database setup completed
2025-09-02 11:55:28,019 - INFO - 🏗️  Setting up destination database with differences...
2025-09-02 11:55:28,076 - INFO - ✅ Destination database setup completed
2025-09-02 11:55:28,076 - INFO - 📝 Populating test data...
2025-09-02 11:55:28,078 - INFO - ✅ Test data populated in ddl_test_source
2025-09-02 11:55:28,080 - INFO - ✅ Test data populated in ddl_test_dest
2025-09-02 11:55:28,080 - INFO - 🔍 Running comparison step: Initial comparison
2025-09-02 11:55:28,081 - INFO - Running in compare mode...
2025-09-02 11:55:28,082 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 11:55:28,082 - INFO - Connecting to databases...
2025-09-02 11:55:28,082 - INFO - Database connections successful
2025-09-02 11:55:28,083 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 11:55:28,083 - INFO - Using existing git repository at test_output
2025-09-02 11:55:28,083 - DEBUG - Created directory: test_output/tables
2025-09-02 11:55:28,083 - DEBUG - Created directory: test_output/functions
2025-09-02 11:55:28,083 - DEBUG - Created directory: test_output/procedures
2025-09-02 11:55:28,083 - DEBUG - Created directory: test_output/triggers
2025-09-02 11:55:28,083 - DEBUG - Created directory: test_output/events
2025-09-02 11:55:28,083 - INFO - Initialized git repository at ./test_output
2025-09-02 11:55:28,083 - INFO - Extracting DDL objects...
2025-09-02 11:55:28,092 - INFO - Comparing schemas...
2025-09-02 11:55:28,092 - INFO - Performing safety analysis...
2025-09-02 11:55:28,092 - INFO - Generating migration SQL...
2025-09-02 11:55:28,115 - INFO - Generating schema visualizations...
2025-09-02 11:55:28,118 - INFO - Generated HTML documentation
2025-09-02 11:55:28,118 - INFO - Generated Mermaid ERD
2025-09-02 11:55:28,118 - INFO - Generated Graphviz DOT file
2025-09-02 11:55:28,119 - INFO - Generated JSON schema structure
2025-09-02 11:55:28,119 - INFO - Schema visualizations generated in test_output/documentation
2025-09-02 11:55:28,119 - INFO - Migration report generated: test_output/migration_report.md
2025-09-02 11:55:28,124 - INFO - Started tracking migration 138: ddl_test_source_to_ddl_test_dest_1756806928
2025-09-02 11:55:28,128 - INFO - Completed migration tracking 138: SUCCESS
2025-09-02 11:55:28,128 - INFO - Migration tracking completed: 138
2025-09-02 11:55:28,128 - INFO - Migration completed successfully!
2025-09-02 11:55:28,128 - INFO - Migration ID: 138
2025-09-02 11:55:28,128 - INFO - Operations: 6
2025-09-02 11:55:28,128 - INFO - Safety warnings: 0
2025-09-02 11:55:28,129 - INFO - Migration file: test_output/migration.sql
2025-09-02 11:55:28,129 - INFO - Rollback file: test_output/rollback.sql
2025-09-02 11:55:28,129 - INFO - Migration report: test_output/migration_report.md
2025-09-02 11:55:28,129 - INFO - ✅ Initial comparison completed successfully
2025-09-02 11:55:28,129 - INFO - 🔍 Analyzing results in ./test_output...
2025-09-02 11:55:28,129 - INFO - 🔧 Executing SQL file: ./test_output/migration.sql
2025-09-02 11:55:28,130 - DEBUG - Executing statement 1/22: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 11:55:28,130 - DEBUG - Executing statement 2/22: DROP TABLE IF EXISTS `ddl_test_dest`.`temp_table`;...
2025-09-02 11:55:28,132 - DEBUG - Executing statement 3/22: ALTER TABLE `customers` DROP COLUMN `loyalty_points`;...
2025-09-02 11:55:28,138 - DEBUG - Executing statement 4/22: ALTER TABLE `customers` ADD KEY `idx_customers_country` (`country`);...
2025-09-02 11:55:28,145 - DEBUG - Executing statement 5/22: ALTER TABLE `customers` ADD KEY `idx_customers_city` (`city`);...
2025-09-02 11:55:28,151 - DEBUG - Executing statement 6/22: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;...
2025-09-02 11:55:28,151 - WARNING - ⚠️  SQL execution warning (statement 6): (1091, "Can't DROP INDEX `idx_customers_loyalty`; check that it exists")
2025-09-02 11:55:28,151 - WARNING - Statement: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;
2025-09-02 11:55:28,151 - DEBUG - Executing statement 7/22: ALTER TABLE `categories` ADD COLUMN `description` text DEFAULT NULL;...
2025-09-02 11:55:28,155 - DEBUG - Executing statement 8/22: ALTER TABLE `categories` ADD KEY `idx_categories_created` (`created_at`);...
2025-09-02 11:55:28,162 - DEBUG - Executing statement 9/22: ALTER TABLE `products` ADD COLUMN `dimensions` varchar(100) DEFAULT NULL;...
2025-09-02 11:55:28,166 - DEBUG - Executing statement 10/22: ALTER TABLE `products` ADD COLUMN `weight` decimal(8,3) DEFAULT NULL;...
2025-09-02 11:55:28,171 - DEBUG - Executing statement 11/22: ALTER TABLE `products` DROP COLUMN `old_column`;...
2025-09-02 11:55:28,177 - DEBUG - Executing statement 12/22: ALTER TABLE `products` ADD KEY `idx_products_stock` (`stock_quantity`);...
2025-09-02 11:55:28,183 - DEBUG - Executing statement 13/22: ALTER TABLE `products` ADD KEY `idx_products_price` (`price`);...
2025-09-02 11:55:28,188 - DEBUG - Executing statement 14/22: ALTER TABLE `products` ADD KEY `fk_products_category` (`category_id`);...
2025-09-02 11:55:28,194 - DEBUG - Executing statement 15/22: ALTER TABLE `products` ADD KEY `idx_products_sku` (`sku`);...
2025-09-02 11:55:28,201 - DEBUG - Executing statement 16/22: ALTER TABLE `products` ADD KEY `idx_products_active` (`is_active`);...
2025-09-02 11:55:28,207 - DEBUG - Executing statement 17/22: ALTER TABLE `products` DROP INDEX `idx_products_old`;...
2025-09-02 11:55:28,208 - WARNING - ⚠️  SQL execution warning (statement 17): (1091, "Can't DROP INDEX `idx_products_old`; check that it exists")
2025-09-02 11:55:28,208 - WARNING - Statement: ALTER TABLE `products` DROP INDEX `idx_products_old`;
2025-09-02 11:55:28,208 - DEBUG - Executing statement 18/22: DROP PROCEDURE IF EXISTS `ddl_test_dest`.`GetCustomerOrders`;...
2025-09-02 11:55:28,209 - DEBUG - Executing statement 19/22: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*, COU...
2025-09-02 11:55:28,211 - DEBUG - Executing statement 20/22: DROP FUNCTION IF EXISTS `ddl_test_dest`.`CalculateOrderTotal`;...
2025-09-02 11:55:28,211 - DEBUG - Executing statement 21/22: CREATE DEFINER=`sstuser`@`%` FUNCTION `CalculateOrderTotal`(order_id INT) RETURNS decimal(12,2)
READ...
2025-09-02 11:55:28,213 - DEBUG - Executing statement 22/22: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 11:55:28,213 - INFO - ✅ SQL file executed: 20 statements succeeded, 2 failed
2025-09-02 11:55:28,213 - INFO - 🔍 Checking if schemas are identical after migration...
2025-09-02 11:55:28,213 - INFO - 🔍 Running comparison step: Post-migration schema check
2025-09-02 11:55:28,214 - INFO - Running in compare mode...
2025-09-02 11:55:28,215 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 11:55:28,215 - INFO - Connecting to databases...
2025-09-02 11:55:28,216 - INFO - Database connections successful
2025-09-02 11:55:28,216 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 11:55:28,216 - INFO - Using existing git repository at test_output_post_migration
2025-09-02 11:55:28,216 - DEBUG - Created directory: test_output_post_migration/tables
2025-09-02 11:55:28,216 - DEBUG - Created directory: test_output_post_migration/functions
2025-09-02 11:55:28,217 - DEBUG - Created directory: test_output_post_migration/procedures
2025-09-02 11:55:28,217 - DEBUG - Created directory: test_output_post_migration/triggers
2025-09-02 11:55:28,217 - DEBUG - Created directory: test_output_post_migration/events
2025-09-02 11:55:28,217 - INFO - Initialized git repository at ./test_output_post_migration
2025-09-02 11:55:28,217 - INFO - Extracting DDL objects...
2025-09-02 11:55:28,222 - INFO - Comparing schemas...
2025-09-02 11:55:28,222 - INFO - Performing safety analysis...
2025-09-02 11:55:28,222 - INFO - Generating migration SQL...
2025-09-02 11:55:28,248 - INFO - Generating schema visualizations...
2025-09-02 11:55:28,250 - INFO - Generated HTML documentation
2025-09-02 11:55:28,250 - INFO - Generated Mermaid ERD
2025-09-02 11:55:28,251 - INFO - Generated Graphviz DOT file
2025-09-02 11:55:28,251 - INFO - Generated JSON schema structure
2025-09-02 11:55:28,251 - INFO - Schema visualizations generated in test_output_post_migration/documentation
2025-09-02 11:55:28,252 - INFO - Migration report generated: test_output_post_migration/migration_report.md
2025-09-02 11:55:28,255 - INFO - Started tracking migration 139: ddl_test_source_to_ddl_test_dest_1756806928
2025-09-02 11:55:28,259 - INFO - Completed migration tracking 139: SUCCESS
2025-09-02 11:55:28,259 - INFO - Migration tracking completed: 139
2025-09-02 11:55:28,259 - INFO - Migration completed successfully!
2025-09-02 11:55:28,259 - INFO - Migration ID: 139
2025-09-02 11:55:28,259 - INFO - Operations: 0
2025-09-02 11:55:28,259 - INFO - Safety warnings: 0
2025-09-02 11:55:28,259 - INFO - Migration file: test_output_post_migration/migration.sql
2025-09-02 11:55:28,259 - INFO - Rollback file: test_output_post_migration/rollback.sql
2025-09-02 11:55:28,259 - INFO - Migration report: test_output_post_migration/migration_report.md
2025-09-02 11:55:28,260 - INFO - ✅ Post-migration schema check completed successfully
2025-09-02 11:55:28,260 - INFO - ✅ Schemas are identical after migration!
2025-09-02 11:55:28,260 - INFO - 🔧 Executing SQL file: ./test_output/rollback.sql
2025-09-02 11:55:28,260 - DEBUG - Executing statement 1/21: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 11:55:28,261 - DEBUG - Executing statement 2/21: CREATE TABLE `temp_table` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`temp_data` varchar(255) DEFAULT N...
2025-09-02 11:55:28,263 - DEBUG - Executing statement 3/21: ALTER TABLE `customers` ADD COLUMN `loyalty_points` int(11) DEFAULT 0;...
2025-09-02 11:55:28,268 - DEBUG - Executing statement 4/21: ALTER TABLE `customers` DROP INDEX `idx_customers_country`;...
2025-09-02 11:55:28,273 - DEBUG - Executing statement 5/21: ALTER TABLE `customers` DROP INDEX `idx_customers_city`;...
2025-09-02 11:55:28,278 - DEBUG - Executing statement 6/21: ALTER TABLE `customers` ADD KEY `idx_customers_loyalty` (`loyalty_points`);...
2025-09-02 11:55:28,283 - DEBUG - Executing statement 7/21: ALTER TABLE `categories` DROP COLUMN `description`;...
2025-09-02 11:55:28,288 - DEBUG - Executing statement 8/21: ALTER TABLE `categories` DROP INDEX `idx_categories_created`;...
2025-09-02 11:55:28,292 - DEBUG - Executing statement 9/21: ALTER TABLE `products` DROP COLUMN `dimensions`;...
2025-09-02 11:55:28,297 - DEBUG - Executing statement 10/21: ALTER TABLE `products` DROP COLUMN `weight`;...
2025-09-02 11:55:28,302 - DEBUG - Executing statement 11/21: ALTER TABLE `products` ADD COLUMN `old_column` varchar(50) DEFAULT NULL;...
2025-09-02 11:55:28,308 - DEBUG - Executing statement 12/21: ALTER TABLE `products` DROP INDEX `idx_products_stock`;...
2025-09-02 11:55:28,313 - DEBUG - Executing statement 13/21: ALTER TABLE `products` DROP INDEX `idx_products_price`;...
2025-09-02 11:55:28,317 - DEBUG - Executing statement 14/21: ALTER TABLE `products` DROP INDEX `fk_products_category`;...
2025-09-02 11:55:28,321 - DEBUG - Executing statement 15/21: ALTER TABLE `products` DROP INDEX `idx_products_sku`;...
2025-09-02 11:55:28,325 - DEBUG - Executing statement 16/21: ALTER TABLE `products` DROP INDEX `idx_products_active`;...
2025-09-02 11:55:28,330 - DEBUG - Executing statement 17/21: ALTER TABLE `products` ADD KEY `idx_products_old` (`old_column`);...
2025-09-02 11:55:28,335 - DEBUG - Executing statement 18/21: DROP PROCEDURE IF EXISTS `GetCustomerOrders`;...
2025-09-02 11:55:28,337 - DEBUG - Executing statement 19/21: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*
FROM...
2025-09-02 11:55:28,338 - DEBUG - Executing statement 20/21: DROP FUNCTION IF EXISTS `CalculateOrderTotal`;...
2025-09-02 11:55:28,340 - DEBUG - Executing statement 21/21: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 11:55:28,340 - INFO - ✅ SQL file executed: 21 statements succeeded, 0 failed
2025-09-02 11:55:28,340 - INFO - 🔍 Running comparison step: Final comparison after rollback
2025-09-02 11:55:28,341 - INFO - Running in compare mode...
2025-09-02 11:55:28,342 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 11:55:28,342 - INFO - Connecting to databases...
2025-09-02 11:55:28,343 - INFO - Database connections successful
2025-09-02 11:55:28,343 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 11:55:28,343 - INFO - Using existing git repository at test_output_final
2025-09-02 11:55:28,343 - DEBUG - Created directory: test_output_final/tables
2025-09-02 11:55:28,343 - DEBUG - Created directory: test_output_final/functions
2025-09-02 11:55:28,343 - DEBUG - Created directory: test_output_final/procedures
2025-09-02 11:55:28,343 - DEBUG - Created directory: test_output_final/triggers
2025-09-02 11:55:28,343 - DEBUG - Created directory: test_output_final/events
2025-09-02 11:55:28,343 - INFO - Initialized git repository at ./test_output_final
2025-09-02 11:55:28,343 - INFO - Extracting DDL objects...
2025-09-02 11:55:28,348 - INFO - Comparing schemas...
2025-09-02 11:55:28,349 - INFO - Performing safety analysis...
2025-09-02 11:55:28,349 - INFO - Generating migration SQL...
2025-09-02 11:55:28,371 - INFO - Generating schema visualizations...
2025-09-02 11:55:28,374 - INFO - Generated HTML documentation
2025-09-02 11:55:28,374 - INFO - Generated Mermaid ERD
2025-09-02 11:55:28,374 - INFO - Generated Graphviz DOT file
2025-09-02 11:55:28,375 - INFO - Generated JSON schema structure
2025-09-02 11:55:28,375 - INFO - Schema visualizations generated in test_output_final/documentation
2025-09-02 11:55:28,375 - INFO - Migration report generated: test_output_final/migration_report.md
2025-09-02 11:55:28,379 - INFO - Started tracking migration 140: ddl_test_source_to_ddl_test_dest_1756806928
2025-09-02 11:55:28,383 - INFO - Completed migration tracking 140: SUCCESS
2025-09-02 11:55:28,383 - INFO - Migration tracking completed: 140
2025-09-02 11:55:28,383 - INFO - Migration completed successfully!
2025-09-02 11:55:28,383 - INFO - Migration ID: 140
2025-09-02 11:55:28,383 - INFO - Operations: 6
2025-09-02 11:55:28,383 - INFO - Safety warnings: 0
2025-09-02 11:55:28,383 - INFO - Migration file: test_output_final/migration.sql
2025-09-02 11:55:28,383 - INFO - Rollback file: test_output_final/rollback.sql
2025-09-02 11:55:28,383 - INFO - Migration report: test_output_final/migration_report.md
2025-09-02 11:55:28,383 - INFO - ✅ Final comparison after rollback completed successfully
2025-09-02 11:55:28,383 - INFO - 🔍 Analyzing results in ./test_output_final...
2025-09-02 11:55:28,383 - INFO - 🔄 Comparing initial and final results...
2025-09-02 11:55:28,383 - INFO - ✅ Rollback test passed - initial and final states match!
2025-09-02 11:55:28,383 - INFO - 💾 Saving test data for reference...
2025-09-02 11:55:28,387 - INFO - ✅ Saved ./test_output to test_data/ddlw-test-20250902_115528/ddl-wizard-testsuite-initial-migration-20250902_115528
2025-09-02 11:55:28,390 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddlw-test-20250902_115528/ddl-wizard-testsuite-post-migration-verification-20250902_115528
2025-09-02 11:55:28,393 - INFO - ✅ Saved ./test_output_final to test_data/ddlw-test-20250902_115528/ddl-wizard-testsuite-rollback-verification-20250902_115528
2025-09-02 11:55:28,393 - INFO - ✅ Saved test log to test_data/ddlw-test-20250902_115528
2025-09-02 11:55:28,393 - INFO - 🧹 Cleaning up test databases...
2025-09-02 11:55:28,394 - INFO - ✅ Cleaned up database: ddl_test_source
2025-09-02 11:55:28,395 - INFO - ✅ Cleaned up database: ddl_test_dest
2025-09-02 11:56:21,351 - INFO - 🏗️  Setting up source database...
2025-09-02 11:56:21,409 - INFO - ✅ Source database setup completed
2025-09-02 11:56:21,409 - INFO - 🏗️  Setting up destination database with differences...
2025-09-02 11:56:21,460 - INFO - ✅ Destination database setup completed
2025-09-02 11:56:21,461 - INFO - 📝 Populating test data...
2025-09-02 11:56:21,463 - INFO - ✅ Test data populated in ddl_test_source
2025-09-02 11:56:21,465 - INFO - ✅ Test data populated in ddl_test_dest
2025-09-02 11:56:21,465 - INFO - 🔍 Running comparison step: Initial comparison
2025-09-02 11:56:21,466 - INFO - Running in compare mode...
2025-09-02 11:56:21,466 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 11:56:21,466 - INFO - Connecting to databases...
2025-09-02 11:56:21,467 - INFO - Database connections successful
2025-09-02 11:56:21,467 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 11:56:21,467 - INFO - Using existing git repository at test_output
2025-09-02 11:56:21,468 - DEBUG - Created directory: test_output/tables
2025-09-02 11:56:21,468 - DEBUG - Created directory: test_output/functions
2025-09-02 11:56:21,468 - DEBUG - Created directory: test_output/procedures
2025-09-02 11:56:21,468 - DEBUG - Created directory: test_output/triggers
2025-09-02 11:56:21,468 - DEBUG - Created directory: test_output/events
2025-09-02 11:56:21,468 - INFO - Initialized git repository at ./test_output
2025-09-02 11:56:21,468 - INFO - Extracting DDL objects...
2025-09-02 11:56:21,475 - INFO - Comparing schemas...
2025-09-02 11:56:21,475 - INFO - Performing safety analysis...
2025-09-02 11:56:21,475 - INFO - Generating migration SQL...
2025-09-02 11:56:21,498 - INFO - Generating schema visualizations...
2025-09-02 11:56:21,500 - INFO - Generated HTML documentation
2025-09-02 11:56:21,501 - INFO - Generated Mermaid ERD
2025-09-02 11:56:21,501 - INFO - Generated Graphviz DOT file
2025-09-02 11:56:21,501 - INFO - Generated JSON schema structure
2025-09-02 11:56:21,501 - INFO - Schema visualizations generated in test_output/documentation
2025-09-02 11:56:21,502 - INFO - Migration report generated: test_output/migration_report.md
2025-09-02 11:56:21,505 - INFO - Started tracking migration 141: ddl_test_source_to_ddl_test_dest_1756806981
2025-09-02 11:56:21,509 - INFO - Completed migration tracking 141: SUCCESS
2025-09-02 11:56:21,509 - INFO - Migration tracking completed: 141
2025-09-02 11:56:21,509 - INFO - Migration completed successfully!
2025-09-02 11:56:21,509 - INFO - Migration ID: 141
2025-09-02 11:56:21,509 - INFO - Operations: 6
2025-09-02 11:56:21,509 - INFO - Safety warnings: 0
2025-09-02 11:56:21,509 - INFO - Migration file: test_output/migration.sql
2025-09-02 11:56:21,509 - INFO - Rollback file: test_output/rollback.sql
2025-09-02 11:56:21,509 - INFO - Migration report: test_output/migration_report.md
2025-09-02 11:56:21,509 - INFO - ✅ Initial comparison completed successfully
2025-09-02 11:56:21,509 - INFO - 🔍 Analyzing results in ./test_output...
2025-09-02 11:56:21,509 - INFO - 🔧 Executing SQL file: ./test_output/migration.sql
2025-09-02 11:56:21,510 - DEBUG - Executing statement 1/22: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 11:56:21,510 - DEBUG - Executing statement 2/22: DROP TABLE IF EXISTS `ddl_test_dest`.`temp_table`;...
2025-09-02 11:56:21,513 - DEBUG - Executing statement 3/22: ALTER TABLE `customers` DROP COLUMN `loyalty_points`;...
2025-09-02 11:56:21,518 - DEBUG - Executing statement 4/22: ALTER TABLE `customers` ADD KEY `idx_customers_city` (`city`);...
2025-09-02 11:56:21,524 - DEBUG - Executing statement 5/22: ALTER TABLE `customers` ADD KEY `idx_customers_country` (`country`);...
2025-09-02 11:56:21,530 - DEBUG - Executing statement 6/22: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;...
2025-09-02 11:56:21,531 - WARNING - ⚠️  SQL execution warning (statement 6): (1091, "Can't DROP INDEX `idx_customers_loyalty`; check that it exists")
2025-09-02 11:56:21,531 - WARNING - Statement: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;
2025-09-02 11:56:21,531 - DEBUG - Executing statement 7/22: ALTER TABLE `categories` ADD COLUMN `description` text DEFAULT NULL;...
2025-09-02 11:56:21,535 - DEBUG - Executing statement 8/22: ALTER TABLE `categories` ADD KEY `idx_categories_created` (`created_at`);...
2025-09-02 11:56:21,541 - DEBUG - Executing statement 9/22: ALTER TABLE `products` ADD COLUMN `dimensions` varchar(100) DEFAULT NULL;...
2025-09-02 11:56:21,545 - DEBUG - Executing statement 10/22: ALTER TABLE `products` ADD COLUMN `weight` decimal(8,3) DEFAULT NULL;...
2025-09-02 11:56:21,550 - DEBUG - Executing statement 11/22: ALTER TABLE `products` DROP COLUMN `old_column`;...
2025-09-02 11:56:21,555 - DEBUG - Executing statement 12/22: ALTER TABLE `products` ADD KEY `idx_products_sku` (`sku`);...
2025-09-02 11:56:21,561 - DEBUG - Executing statement 13/22: ALTER TABLE `products` ADD KEY `idx_products_stock` (`stock_quantity`);...
2025-09-02 11:56:21,567 - DEBUG - Executing statement 14/22: ALTER TABLE `products` ADD KEY `idx_products_active` (`is_active`);...
2025-09-02 11:56:21,572 - DEBUG - Executing statement 15/22: ALTER TABLE `products` ADD KEY `idx_products_price` (`price`);...
2025-09-02 11:56:21,578 - DEBUG - Executing statement 16/22: ALTER TABLE `products` ADD KEY `fk_products_category` (`category_id`);...
2025-09-02 11:56:21,584 - DEBUG - Executing statement 17/22: ALTER TABLE `products` DROP INDEX `idx_products_old`;...
2025-09-02 11:56:21,584 - WARNING - ⚠️  SQL execution warning (statement 17): (1091, "Can't DROP INDEX `idx_products_old`; check that it exists")
2025-09-02 11:56:21,584 - WARNING - Statement: ALTER TABLE `products` DROP INDEX `idx_products_old`;
2025-09-02 11:56:21,584 - DEBUG - Executing statement 18/22: DROP PROCEDURE IF EXISTS `ddl_test_dest`.`GetCustomerOrders`;...
2025-09-02 11:56:21,586 - DEBUG - Executing statement 19/22: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*, COU...
2025-09-02 11:56:21,587 - DEBUG - Executing statement 20/22: DROP FUNCTION IF EXISTS `ddl_test_dest`.`CalculateOrderTotal`;...
2025-09-02 11:56:21,588 - DEBUG - Executing statement 21/22: CREATE DEFINER=`sstuser`@`%` FUNCTION `CalculateOrderTotal`(order_id INT) RETURNS decimal(12,2)
READ...
2025-09-02 11:56:21,589 - DEBUG - Executing statement 22/22: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 11:56:21,589 - INFO - ✅ SQL file executed: 20 statements succeeded, 2 failed
2025-09-02 11:56:21,590 - INFO - 🔍 Checking if schemas are identical after migration...
2025-09-02 11:56:21,590 - INFO - 🔍 Running comparison step: Post-migration schema check
2025-09-02 11:56:21,590 - INFO - Running in compare mode...
2025-09-02 11:56:21,591 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 11:56:21,591 - INFO - Connecting to databases...
2025-09-02 11:56:21,592 - INFO - Database connections successful
2025-09-02 11:56:21,593 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 11:56:21,593 - INFO - Using existing git repository at test_output_post_migration
2025-09-02 11:56:21,593 - DEBUG - Created directory: test_output_post_migration/tables
2025-09-02 11:56:21,593 - DEBUG - Created directory: test_output_post_migration/functions
2025-09-02 11:56:21,593 - DEBUG - Created directory: test_output_post_migration/procedures
2025-09-02 11:56:21,594 - DEBUG - Created directory: test_output_post_migration/triggers
2025-09-02 11:56:21,594 - DEBUG - Created directory: test_output_post_migration/events
2025-09-02 11:56:21,594 - INFO - Initialized git repository at ./test_output_post_migration
2025-09-02 11:56:21,594 - INFO - Extracting DDL objects...
2025-09-02 11:56:21,599 - INFO - Comparing schemas...
2025-09-02 11:56:21,599 - INFO - Performing safety analysis...
2025-09-02 11:56:21,599 - INFO - Generating migration SQL...
2025-09-02 11:56:21,619 - INFO - Generating schema visualizations...
2025-09-02 11:56:21,622 - INFO - Generated HTML documentation
2025-09-02 11:56:21,622 - INFO - Generated Mermaid ERD
2025-09-02 11:56:21,622 - INFO - Generated Graphviz DOT file
2025-09-02 11:56:21,623 - INFO - Generated JSON schema structure
2025-09-02 11:56:21,623 - INFO - Schema visualizations generated in test_output_post_migration/documentation
2025-09-02 11:56:21,623 - INFO - Migration report generated: test_output_post_migration/migration_report.md
2025-09-02 11:56:21,627 - INFO - Started tracking migration 142: ddl_test_source_to_ddl_test_dest_1756806981
2025-09-02 11:56:21,631 - INFO - Completed migration tracking 142: SUCCESS
2025-09-02 11:56:21,631 - INFO - Migration tracking completed: 142
2025-09-02 11:56:21,631 - INFO - Migration completed successfully!
2025-09-02 11:56:21,631 - INFO - Migration ID: 142
2025-09-02 11:56:21,631 - INFO - Operations: 0
2025-09-02 11:56:21,631 - INFO - Safety warnings: 0
2025-09-02 11:56:21,631 - INFO - Migration file: test_output_post_migration/migration.sql
2025-09-02 11:56:21,631 - INFO - Rollback file: test_output_post_migration/rollback.sql
2025-09-02 11:56:21,631 - INFO - Migration report: test_output_post_migration/migration_report.md
2025-09-02 11:56:21,632 - INFO - ✅ Post-migration schema check completed successfully
2025-09-02 11:56:21,632 - INFO - ✅ Schemas are identical after migration!
2025-09-02 11:56:21,632 - INFO - 🔧 Executing SQL file: ./test_output/rollback.sql
2025-09-02 11:56:21,632 - DEBUG - Executing statement 1/21: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 11:56:21,632 - DEBUG - Executing statement 2/21: CREATE TABLE `temp_table` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`temp_data` varchar(255) DEFAULT N...
2025-09-02 11:56:21,635 - DEBUG - Executing statement 3/21: ALTER TABLE `customers` ADD COLUMN `loyalty_points` int(11) DEFAULT 0;...
2025-09-02 11:56:21,640 - DEBUG - Executing statement 4/21: ALTER TABLE `customers` DROP INDEX `idx_customers_city`;...
2025-09-02 11:56:21,644 - DEBUG - Executing statement 5/21: ALTER TABLE `customers` DROP INDEX `idx_customers_country`;...
2025-09-02 11:56:21,648 - DEBUG - Executing statement 6/21: ALTER TABLE `customers` ADD KEY `idx_customers_loyalty` (`loyalty_points`);...
2025-09-02 11:56:21,654 - DEBUG - Executing statement 7/21: ALTER TABLE `categories` DROP COLUMN `description`;...
2025-09-02 11:56:21,659 - DEBUG - Executing statement 8/21: ALTER TABLE `categories` DROP INDEX `idx_categories_created`;...
2025-09-02 11:56:21,663 - DEBUG - Executing statement 9/21: ALTER TABLE `products` DROP COLUMN `dimensions`;...
2025-09-02 11:56:21,668 - DEBUG - Executing statement 10/21: ALTER TABLE `products` DROP COLUMN `weight`;...
2025-09-02 11:56:21,673 - DEBUG - Executing statement 11/21: ALTER TABLE `products` ADD COLUMN `old_column` varchar(50) DEFAULT NULL;...
2025-09-02 11:56:21,678 - DEBUG - Executing statement 12/21: ALTER TABLE `products` DROP INDEX `idx_products_sku`;...
2025-09-02 11:56:21,682 - DEBUG - Executing statement 13/21: ALTER TABLE `products` DROP INDEX `idx_products_stock`;...
2025-09-02 11:56:21,687 - DEBUG - Executing statement 14/21: ALTER TABLE `products` DROP INDEX `idx_products_active`;...
2025-09-02 11:56:21,692 - DEBUG - Executing statement 15/21: ALTER TABLE `products` DROP INDEX `idx_products_price`;...
2025-09-02 11:56:21,696 - DEBUG - Executing statement 16/21: ALTER TABLE `products` DROP INDEX `fk_products_category`;...
2025-09-02 11:56:21,700 - DEBUG - Executing statement 17/21: ALTER TABLE `products` ADD KEY `idx_products_old` (`old_column`);...
2025-09-02 11:56:21,705 - DEBUG - Executing statement 18/21: DROP PROCEDURE IF EXISTS `GetCustomerOrders`;...
2025-09-02 11:56:21,706 - DEBUG - Executing statement 19/21: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*
FROM...
2025-09-02 11:56:21,708 - DEBUG - Executing statement 20/21: DROP FUNCTION IF EXISTS `CalculateOrderTotal`;...
2025-09-02 11:56:21,709 - DEBUG - Executing statement 21/21: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 11:56:21,709 - INFO - ✅ SQL file executed: 21 statements succeeded, 0 failed
2025-09-02 11:56:21,710 - INFO - 🔍 Running comparison step: Final comparison after rollback
2025-09-02 11:56:21,710 - INFO - Running in compare mode...
2025-09-02 11:56:21,711 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 11:56:21,711 - INFO - Connecting to databases...
2025-09-02 11:56:21,712 - INFO - Database connections successful
2025-09-02 11:56:21,712 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 11:56:21,712 - INFO - Using existing git repository at test_output_final
2025-09-02 11:56:21,712 - DEBUG - Created directory: test_output_final/tables
2025-09-02 11:56:21,712 - DEBUG - Created directory: test_output_final/functions
2025-09-02 11:56:21,712 - DEBUG - Created directory: test_output_final/procedures
2025-09-02 11:56:21,712 - DEBUG - Created directory: test_output_final/triggers
2025-09-02 11:56:21,712 - DEBUG - Created directory: test_output_final/events
2025-09-02 11:56:21,713 - INFO - Initialized git repository at ./test_output_final
2025-09-02 11:56:21,713 - INFO - Extracting DDL objects...
2025-09-02 11:56:21,717 - INFO - Comparing schemas...
2025-09-02 11:56:21,718 - INFO - Performing safety analysis...
2025-09-02 11:56:21,718 - INFO - Generating migration SQL...
2025-09-02 11:56:21,738 - INFO - Generating schema visualizations...
2025-09-02 11:56:21,741 - INFO - Generated HTML documentation
2025-09-02 11:56:21,741 - INFO - Generated Mermaid ERD
2025-09-02 11:56:21,741 - INFO - Generated Graphviz DOT file
2025-09-02 11:56:21,741 - INFO - Generated JSON schema structure
2025-09-02 11:56:21,742 - INFO - Schema visualizations generated in test_output_final/documentation
2025-09-02 11:56:21,742 - INFO - Migration report generated: test_output_final/migration_report.md
2025-09-02 11:56:21,746 - INFO - Started tracking migration 143: ddl_test_source_to_ddl_test_dest_1756806981
2025-09-02 11:56:21,749 - INFO - Completed migration tracking 143: SUCCESS
2025-09-02 11:56:21,749 - INFO - Migration tracking completed: 143
2025-09-02 11:56:21,749 - INFO - Migration completed successfully!
2025-09-02 11:56:21,750 - INFO - Migration ID: 143
2025-09-02 11:56:21,750 - INFO - Operations: 6
2025-09-02 11:56:21,750 - INFO - Safety warnings: 0
2025-09-02 11:56:21,750 - INFO - Migration file: test_output_final/migration.sql
2025-09-02 11:56:21,750 - INFO - Rollback file: test_output_final/rollback.sql
2025-09-02 11:56:21,750 - INFO - Migration report: test_output_final/migration_report.md
2025-09-02 11:56:21,750 - INFO - ✅ Final comparison after rollback completed successfully
2025-09-02 11:56:21,750 - INFO - 🔍 Analyzing results in ./test_output_final...
2025-09-02 11:56:21,750 - INFO - 🔄 Comparing initial and final results...
2025-09-02 11:56:21,750 - INFO - ✅ Rollback test passed - initial and final states match!
2025-09-02 11:56:21,750 - INFO - 💾 Saving test data for reference...
2025-09-02 11:56:21,754 - INFO - ✅ Saved ./test_output to test_data/ddlw-test-20250902_115621/ddl-wizard-testsuite-initial-migration-20250902_115621
2025-09-02 11:56:21,757 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddlw-test-20250902_115621/ddl-wizard-testsuite-post-migration-verification-20250902_115621
2025-09-02 11:56:21,761 - INFO - ✅ Saved ./test_output_final to test_data/ddlw-test-20250902_115621/ddl-wizard-testsuite-rollback-verification-20250902_115621
2025-09-02 11:56:21,761 - INFO - ✅ Saved test log to test_data/ddlw-test-20250902_115621
2025-09-02 11:56:21,761 - INFO - 🧹 Cleaning up test databases...
2025-09-02 11:56:21,762 - INFO - ✅ Cleaned up database: ddl_test_source
2025-09-02 11:56:21,762 - INFO - ✅ Cleaned up database: ddl_test_dest
2025-09-02 12:00:18,938 - INFO - 🏗️  Setting up source database...
2025-09-02 12:00:18,998 - INFO - ✅ Source database setup completed
2025-09-02 12:00:18,998 - INFO - 🏗️  Setting up destination database with differences...
2025-09-02 12:00:19,049 - INFO - ✅ Destination database setup completed
2025-09-02 12:00:19,049 - INFO - 📝 Populating test data...
2025-09-02 12:00:19,052 - INFO - ✅ Test data populated in ddl_test_source
2025-09-02 12:00:19,055 - INFO - ✅ Test data populated in ddl_test_dest
2025-09-02 12:00:19,055 - INFO - 🔍 Running comparison step: Initial comparison
2025-09-02 12:00:19,056 - INFO - Running in compare mode...
2025-09-02 12:00:19,056 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 12:00:19,056 - INFO - Connecting to databases...
2025-09-02 12:00:19,057 - INFO - Database connections successful
2025-09-02 12:00:19,058 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output, stdin=None, shell=False, universal_newlines=False)
2025-09-02 12:00:19,060 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 12:00:19,061 - INFO - Initialized new git repository at test_output
2025-09-02 12:00:19,061 - DEBUG - Created directory: test_output/tables
2025-09-02 12:00:19,061 - DEBUG - Created directory: test_output/functions
2025-09-02 12:00:19,061 - DEBUG - Created directory: test_output/procedures
2025-09-02 12:00:19,061 - DEBUG - Created directory: test_output/triggers
2025-09-02 12:00:19,061 - DEBUG - Created directory: test_output/events
2025-09-02 12:00:19,061 - INFO - Initialized git repository at ./test_output
2025-09-02 12:00:19,061 - INFO - Extracting DDL objects...
2025-09-02 12:00:19,073 - INFO - Comparing schemas...
2025-09-02 12:00:19,073 - INFO - Performing safety analysis...
2025-09-02 12:00:19,073 - INFO - Generating migration SQL...
2025-09-02 12:00:19,095 - INFO - Generating schema visualizations...
2025-09-02 12:00:19,097 - INFO - Generated HTML documentation
2025-09-02 12:00:19,098 - INFO - Generated Mermaid ERD
2025-09-02 12:00:19,098 - INFO - Generated Graphviz DOT file
2025-09-02 12:00:19,098 - INFO - Generated JSON schema structure
2025-09-02 12:00:19,098 - INFO - Schema visualizations generated in test_output/documentation
2025-09-02 12:00:19,099 - INFO - Migration report generated: test_output/migration_report.md
2025-09-02 12:00:19,105 - INFO - Started tracking migration 144: ddl_test_source_to_ddl_test_dest_1756807219
2025-09-02 12:00:19,109 - INFO - Completed migration tracking 144: SUCCESS
2025-09-02 12:00:19,109 - INFO - Migration tracking completed: 144
2025-09-02 12:00:19,109 - INFO - Migration completed successfully!
2025-09-02 12:00:19,109 - INFO - Migration ID: 144
2025-09-02 12:00:19,109 - INFO - Operations: 6
2025-09-02 12:00:19,109 - INFO - Safety warnings: 0
2025-09-02 12:00:19,109 - INFO - Migration file: test_output/migration.sql
2025-09-02 12:00:19,109 - INFO - Rollback file: test_output/rollback.sql
2025-09-02 12:00:19,109 - INFO - Migration report: test_output/migration_report.md
2025-09-02 12:00:19,109 - INFO - ✅ Initial comparison completed successfully
2025-09-02 12:00:19,109 - INFO - 🔍 Analyzing results in ./test_output...
2025-09-02 12:00:19,110 - INFO - 🔧 Executing SQL file: ./test_output/migration.sql
2025-09-02 12:00:19,110 - DEBUG - Executing statement 1/22: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 12:00:19,110 - DEBUG - Executing statement 2/22: DROP TABLE IF EXISTS `ddl_test_dest`.`temp_table`;...
2025-09-02 12:00:19,113 - DEBUG - Executing statement 3/22: ALTER TABLE `categories` ADD COLUMN `description` text DEFAULT NULL;...
2025-09-02 12:00:19,117 - DEBUG - Executing statement 4/22: ALTER TABLE `categories` ADD KEY `idx_categories_created` (`created_at`);...
2025-09-02 12:00:19,123 - DEBUG - Executing statement 5/22: ALTER TABLE `products` ADD COLUMN `weight` decimal(8,3) DEFAULT NULL;...
2025-09-02 12:00:19,127 - DEBUG - Executing statement 6/22: ALTER TABLE `products` ADD COLUMN `dimensions` varchar(100) DEFAULT NULL;...
2025-09-02 12:00:19,132 - DEBUG - Executing statement 7/22: ALTER TABLE `products` DROP COLUMN `old_column`;...
2025-09-02 12:00:19,137 - DEBUG - Executing statement 8/22: ALTER TABLE `products` ADD KEY `idx_products_stock` (`stock_quantity`);...
2025-09-02 12:00:19,143 - DEBUG - Executing statement 9/22: ALTER TABLE `products` ADD KEY `idx_products_price` (`price`);...
2025-09-02 12:00:19,148 - DEBUG - Executing statement 10/22: ALTER TABLE `products` ADD KEY `idx_products_active` (`is_active`);...
2025-09-02 12:00:19,154 - DEBUG - Executing statement 11/22: ALTER TABLE `products` ADD KEY `fk_products_category` (`category_id`);...
2025-09-02 12:00:19,160 - DEBUG - Executing statement 12/22: ALTER TABLE `products` ADD KEY `idx_products_sku` (`sku`);...
2025-09-02 12:00:19,166 - DEBUG - Executing statement 13/22: ALTER TABLE `products` DROP INDEX `idx_products_old`;...
2025-09-02 12:00:19,166 - WARNING - ⚠️  SQL execution warning (statement 13): (1091, "Can't DROP INDEX `idx_products_old`; check that it exists")
2025-09-02 12:00:19,166 - WARNING - Statement: ALTER TABLE `products` DROP INDEX `idx_products_old`;
2025-09-02 12:00:19,166 - DEBUG - Executing statement 14/22: ALTER TABLE `customers` DROP COLUMN `loyalty_points`;...
2025-09-02 12:00:19,172 - DEBUG - Executing statement 15/22: ALTER TABLE `customers` ADD KEY `idx_customers_city` (`city`);...
2025-09-02 12:00:19,178 - DEBUG - Executing statement 16/22: ALTER TABLE `customers` ADD KEY `idx_customers_country` (`country`);...
2025-09-02 12:00:19,184 - DEBUG - Executing statement 17/22: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;...
2025-09-02 12:00:19,184 - WARNING - ⚠️  SQL execution warning (statement 17): (1091, "Can't DROP INDEX `idx_customers_loyalty`; check that it exists")
2025-09-02 12:00:19,184 - WARNING - Statement: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;
2025-09-02 12:00:19,184 - DEBUG - Executing statement 18/22: DROP PROCEDURE IF EXISTS `ddl_test_dest`.`GetCustomerOrders`;...
2025-09-02 12:00:19,186 - DEBUG - Executing statement 19/22: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*, COU...
2025-09-02 12:00:19,187 - DEBUG - Executing statement 20/22: DROP FUNCTION IF EXISTS `ddl_test_dest`.`CalculateOrderTotal`;...
2025-09-02 12:00:19,187 - DEBUG - Executing statement 21/22: CREATE DEFINER=`sstuser`@`%` FUNCTION `CalculateOrderTotal`(order_id INT) RETURNS decimal(12,2)
READ...
2025-09-02 12:00:19,189 - DEBUG - Executing statement 22/22: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 12:00:19,189 - INFO - ✅ SQL file executed: 20 statements succeeded, 2 failed
2025-09-02 12:00:19,189 - INFO - 🔍 Checking if schemas are identical after migration...
2025-09-02 12:00:19,189 - INFO - 🔍 Running comparison step: Post-migration schema check
2025-09-02 12:00:19,190 - INFO - Running in compare mode...
2025-09-02 12:00:19,190 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 12:00:19,191 - INFO - Connecting to databases...
2025-09-02 12:00:19,192 - INFO - Database connections successful
2025-09-02 12:00:19,192 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_post_migration, stdin=None, shell=False, universal_newlines=False)
2025-09-02 12:00:19,194 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 12:00:19,195 - INFO - Initialized new git repository at test_output_post_migration
2025-09-02 12:00:19,195 - DEBUG - Created directory: test_output_post_migration/tables
2025-09-02 12:00:19,195 - DEBUG - Created directory: test_output_post_migration/functions
2025-09-02 12:00:19,195 - DEBUG - Created directory: test_output_post_migration/procedures
2025-09-02 12:00:19,195 - DEBUG - Created directory: test_output_post_migration/triggers
2025-09-02 12:00:19,195 - DEBUG - Created directory: test_output_post_migration/events
2025-09-02 12:00:19,195 - INFO - Initialized git repository at ./test_output_post_migration
2025-09-02 12:00:19,195 - INFO - Extracting DDL objects...
2025-09-02 12:00:19,202 - INFO - Comparing schemas...
2025-09-02 12:00:19,202 - INFO - Performing safety analysis...
2025-09-02 12:00:19,202 - INFO - Generating migration SQL...
2025-09-02 12:00:19,224 - INFO - Generating schema visualizations...
2025-09-02 12:00:19,226 - INFO - Generated HTML documentation
2025-09-02 12:00:19,227 - INFO - Generated Mermaid ERD
2025-09-02 12:00:19,227 - INFO - Generated Graphviz DOT file
2025-09-02 12:00:19,227 - INFO - Generated JSON schema structure
2025-09-02 12:00:19,227 - INFO - Schema visualizations generated in test_output_post_migration/documentation
2025-09-02 12:00:19,228 - INFO - Migration report generated: test_output_post_migration/migration_report.md
2025-09-02 12:00:19,234 - INFO - Started tracking migration 145: ddl_test_source_to_ddl_test_dest_1756807219
2025-09-02 12:00:19,238 - INFO - Completed migration tracking 145: SUCCESS
2025-09-02 12:00:19,238 - INFO - Migration tracking completed: 145
2025-09-02 12:00:19,238 - INFO - Migration completed successfully!
2025-09-02 12:00:19,238 - INFO - Migration ID: 145
2025-09-02 12:00:19,238 - INFO - Operations: 0
2025-09-02 12:00:19,238 - INFO - Safety warnings: 0
2025-09-02 12:00:19,238 - INFO - Migration file: test_output_post_migration/migration.sql
2025-09-02 12:00:19,238 - INFO - Rollback file: test_output_post_migration/rollback.sql
2025-09-02 12:00:19,238 - INFO - Migration report: test_output_post_migration/migration_report.md
2025-09-02 12:00:19,239 - INFO - ✅ Post-migration schema check completed successfully
2025-09-02 12:00:19,239 - INFO - ✅ Schemas are identical after migration!
2025-09-02 12:00:19,239 - INFO - 🔧 Executing SQL file: ./test_output/rollback.sql
2025-09-02 12:00:19,239 - DEBUG - Executing statement 1/21: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 12:00:19,239 - DEBUG - Executing statement 2/21: CREATE TABLE `temp_table` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`temp_data` varchar(255) DEFAULT N...
2025-09-02 12:00:19,242 - DEBUG - Executing statement 3/21: ALTER TABLE `categories` DROP COLUMN `description`;...
2025-09-02 12:00:19,247 - DEBUG - Executing statement 4/21: ALTER TABLE `categories` DROP INDEX `idx_categories_created`;...
2025-09-02 12:00:19,250 - DEBUG - Executing statement 5/21: ALTER TABLE `products` DROP COLUMN `weight`;...
2025-09-02 12:00:19,255 - DEBUG - Executing statement 6/21: ALTER TABLE `products` DROP COLUMN `dimensions`;...
2025-09-02 12:00:19,260 - DEBUG - Executing statement 7/21: ALTER TABLE `products` ADD COLUMN `old_column` varchar(50) DEFAULT NULL;...
2025-09-02 12:00:19,265 - DEBUG - Executing statement 8/21: ALTER TABLE `products` DROP INDEX `idx_products_stock`;...
2025-09-02 12:00:19,270 - DEBUG - Executing statement 9/21: ALTER TABLE `products` DROP INDEX `idx_products_price`;...
2025-09-02 12:00:19,274 - DEBUG - Executing statement 10/21: ALTER TABLE `products` DROP INDEX `idx_products_active`;...
2025-09-02 12:00:19,278 - DEBUG - Executing statement 11/21: ALTER TABLE `products` DROP INDEX `fk_products_category`;...
2025-09-02 12:00:19,283 - DEBUG - Executing statement 12/21: ALTER TABLE `products` DROP INDEX `idx_products_sku`;...
2025-09-02 12:00:19,287 - DEBUG - Executing statement 13/21: ALTER TABLE `products` ADD KEY `idx_products_old` (`old_column`);...
2025-09-02 12:00:19,292 - DEBUG - Executing statement 14/21: ALTER TABLE `customers` ADD COLUMN `loyalty_points` int(11) DEFAULT 0;...
2025-09-02 12:00:19,297 - DEBUG - Executing statement 15/21: ALTER TABLE `customers` DROP INDEX `idx_customers_city`;...
2025-09-02 12:00:19,301 - DEBUG - Executing statement 16/21: ALTER TABLE `customers` DROP INDEX `idx_customers_country`;...
2025-09-02 12:00:19,306 - DEBUG - Executing statement 17/21: ALTER TABLE `customers` ADD KEY `idx_customers_loyalty` (`loyalty_points`);...
2025-09-02 12:00:19,312 - DEBUG - Executing statement 18/21: DROP PROCEDURE IF EXISTS `GetCustomerOrders`;...
2025-09-02 12:00:19,314 - DEBUG - Executing statement 19/21: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*
FROM...
2025-09-02 12:00:19,315 - DEBUG - Executing statement 20/21: DROP FUNCTION IF EXISTS `CalculateOrderTotal`;...
2025-09-02 12:00:19,317 - DEBUG - Executing statement 21/21: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 12:00:19,317 - INFO - ✅ SQL file executed: 21 statements succeeded, 0 failed
2025-09-02 12:00:19,317 - INFO - 🔍 Running comparison step: Final comparison after rollback
2025-09-02 12:00:19,317 - INFO - Running in compare mode...
2025-09-02 12:00:19,318 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 12:00:19,318 - INFO - Connecting to databases...
2025-09-02 12:00:19,319 - INFO - Database connections successful
2025-09-02 12:00:19,319 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_final, stdin=None, shell=False, universal_newlines=False)
2025-09-02 12:00:19,322 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 12:00:19,323 - INFO - Initialized new git repository at test_output_final
2025-09-02 12:00:19,323 - DEBUG - Created directory: test_output_final/tables
2025-09-02 12:00:19,323 - DEBUG - Created directory: test_output_final/functions
2025-09-02 12:00:19,323 - DEBUG - Created directory: test_output_final/procedures
2025-09-02 12:00:19,323 - DEBUG - Created directory: test_output_final/triggers
2025-09-02 12:00:19,323 - DEBUG - Created directory: test_output_final/events
2025-09-02 12:00:19,323 - INFO - Initialized git repository at ./test_output_final
2025-09-02 12:00:19,323 - INFO - Extracting DDL objects...
2025-09-02 12:00:19,329 - INFO - Comparing schemas...
2025-09-02 12:00:19,329 - INFO - Performing safety analysis...
2025-09-02 12:00:19,329 - INFO - Generating migration SQL...
2025-09-02 12:00:19,351 - INFO - Generating schema visualizations...
2025-09-02 12:00:19,354 - INFO - Generated HTML documentation
2025-09-02 12:00:19,354 - INFO - Generated Mermaid ERD
2025-09-02 12:00:19,354 - INFO - Generated Graphviz DOT file
2025-09-02 12:00:19,355 - INFO - Generated JSON schema structure
2025-09-02 12:00:19,355 - INFO - Schema visualizations generated in test_output_final/documentation
2025-09-02 12:00:19,355 - INFO - Migration report generated: test_output_final/migration_report.md
2025-09-02 12:00:19,361 - INFO - Started tracking migration 146: ddl_test_source_to_ddl_test_dest_1756807219
2025-09-02 12:00:19,365 - INFO - Completed migration tracking 146: SUCCESS
2025-09-02 12:00:19,365 - INFO - Migration tracking completed: 146
2025-09-02 12:00:19,366 - INFO - Migration completed successfully!
2025-09-02 12:00:19,366 - INFO - Migration ID: 146
2025-09-02 12:00:19,366 - INFO - Operations: 6
2025-09-02 12:00:19,366 - INFO - Safety warnings: 0
2025-09-02 12:00:19,366 - INFO - Migration file: test_output_final/migration.sql
2025-09-02 12:00:19,366 - INFO - Rollback file: test_output_final/rollback.sql
2025-09-02 12:00:19,366 - INFO - Migration report: test_output_final/migration_report.md
2025-09-02 12:00:19,366 - INFO - ✅ Final comparison after rollback completed successfully
2025-09-02 12:00:19,366 - INFO - 🔍 Analyzing results in ./test_output_final...
2025-09-02 12:00:19,366 - INFO - 🔄 Comparing initial and final results...
2025-09-02 12:00:19,366 - INFO - ✅ Rollback test passed - initial and final states match!
2025-09-02 12:00:19,366 - INFO - 💾 Saving test data for reference...
2025-09-02 12:00:19,370 - INFO - ✅ Saved ./test_output to test_data/ddlw-test-20250902_120019/ddl-wizard-testsuite-initial-migration-20250902_120019
2025-09-02 12:00:19,373 - INFO - ✅ Saved ./test_output to test_data/ddlw-test-20250902_120019/test_output
2025-09-02 12:00:19,376 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddlw-test-20250902_120019/ddl-wizard-testsuite-post-migration-verification-20250902_120019
2025-09-02 12:00:19,379 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddlw-test-20250902_120019/test_output_post_migration
2025-09-02 12:00:19,382 - INFO - ✅ Saved ./test_output_final to test_data/ddlw-test-20250902_120019/ddl-wizard-testsuite-rollback-verification-20250902_120019
2025-09-02 12:00:19,385 - INFO - ✅ Saved ./test_output_final to test_data/ddlw-test-20250902_120019/test_output_final
2025-09-02 12:00:19,386 - INFO - ✅ Saved test log to test_data/ddlw-test-20250902_120019
2025-09-02 12:00:19,386 - INFO - 🧹 Cleaning up test databases...
2025-09-02 12:00:19,387 - INFO - ✅ Cleaned up database: ddl_test_source
2025-09-02 12:00:19,387 - INFO - ✅ Cleaned up database: ddl_test_dest
2025-09-02 12:01:14,748 - INFO - 🏗️  Setting up source database...
2025-09-02 12:01:14,804 - INFO - ✅ Source database setup completed
2025-09-02 12:01:14,805 - INFO - 🏗️  Setting up destination database with differences...
2025-09-02 12:01:14,856 - INFO - ✅ Destination database setup completed
2025-09-02 12:01:14,856 - INFO - 📝 Populating test data...
2025-09-02 12:01:14,859 - INFO - ✅ Test data populated in ddl_test_source
2025-09-02 12:01:14,861 - INFO - ✅ Test data populated in ddl_test_dest
2025-09-02 12:01:14,861 - INFO - 🔍 Running comparison step: Initial comparison
2025-09-02 12:01:14,862 - INFO - Running in compare mode...
2025-09-02 12:01:14,862 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 12:01:14,862 - INFO - Connecting to databases...
2025-09-02 12:01:14,863 - INFO - Database connections successful
2025-09-02 12:01:14,863 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 12:01:14,863 - INFO - Using existing git repository at test_output
2025-09-02 12:01:14,864 - DEBUG - Created directory: test_output/tables
2025-09-02 12:01:14,864 - DEBUG - Created directory: test_output/functions
2025-09-02 12:01:14,864 - DEBUG - Created directory: test_output/procedures
2025-09-02 12:01:14,864 - DEBUG - Created directory: test_output/triggers
2025-09-02 12:01:14,864 - DEBUG - Created directory: test_output/events
2025-09-02 12:01:14,864 - INFO - Initialized git repository at ./test_output
2025-09-02 12:01:14,864 - INFO - Extracting DDL objects...
2025-09-02 12:01:14,876 - INFO - Comparing schemas...
2025-09-02 12:01:14,876 - INFO - Performing safety analysis...
2025-09-02 12:01:14,876 - INFO - Generating migration SQL...
2025-09-02 12:01:14,902 - INFO - Generating schema visualizations...
2025-09-02 12:01:14,906 - INFO - Generated HTML documentation
2025-09-02 12:01:14,906 - INFO - Generated Mermaid ERD
2025-09-02 12:01:14,906 - INFO - Generated Graphviz DOT file
2025-09-02 12:01:14,907 - INFO - Generated JSON schema structure
2025-09-02 12:01:14,907 - INFO - Schema visualizations generated in test_output/documentation
2025-09-02 12:01:14,907 - INFO - Migration report generated: test_output/migration_report.md
2025-09-02 12:01:14,911 - INFO - Started tracking migration 147: ddl_test_source_to_ddl_test_dest_1756807274
2025-09-02 12:01:14,915 - INFO - Completed migration tracking 147: SUCCESS
2025-09-02 12:01:14,915 - INFO - Migration tracking completed: 147
2025-09-02 12:01:14,915 - INFO - Migration completed successfully!
2025-09-02 12:01:14,915 - INFO - Migration ID: 147
2025-09-02 12:01:14,915 - INFO - Operations: 6
2025-09-02 12:01:14,915 - INFO - Safety warnings: 0
2025-09-02 12:01:14,915 - INFO - Migration file: test_output/migration.sql
2025-09-02 12:01:14,915 - INFO - Rollback file: test_output/rollback.sql
2025-09-02 12:01:14,915 - INFO - Migration report: test_output/migration_report.md
2025-09-02 12:01:14,915 - INFO - ✅ Initial comparison completed successfully
2025-09-02 12:01:14,915 - INFO - 🔍 Analyzing results in ./test_output...
2025-09-02 12:01:14,916 - INFO - 🔧 Executing SQL file: ./test_output/migration.sql
2025-09-02 12:01:14,916 - DEBUG - Executing statement 1/22: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 12:01:14,917 - DEBUG - Executing statement 2/22: DROP TABLE IF EXISTS `ddl_test_dest`.`temp_table`;...
2025-09-02 12:01:14,919 - DEBUG - Executing statement 3/22: ALTER TABLE `customers` DROP COLUMN `loyalty_points`;...
2025-09-02 12:01:14,925 - DEBUG - Executing statement 4/22: ALTER TABLE `customers` ADD KEY `idx_customers_country` (`country`);...
2025-09-02 12:01:14,932 - DEBUG - Executing statement 5/22: ALTER TABLE `customers` ADD KEY `idx_customers_city` (`city`);...
2025-09-02 12:01:14,938 - DEBUG - Executing statement 6/22: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;...
2025-09-02 12:01:14,938 - WARNING - ⚠️  SQL execution warning (statement 6): (1091, "Can't DROP INDEX `idx_customers_loyalty`; check that it exists")
2025-09-02 12:01:14,938 - WARNING - Statement: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;
2025-09-02 12:01:14,938 - DEBUG - Executing statement 7/22: ALTER TABLE `categories` ADD COLUMN `description` text DEFAULT NULL;...
2025-09-02 12:01:14,942 - DEBUG - Executing statement 8/22: ALTER TABLE `categories` ADD KEY `idx_categories_created` (`created_at`);...
2025-09-02 12:01:14,949 - DEBUG - Executing statement 9/22: ALTER TABLE `products` ADD COLUMN `dimensions` varchar(100) DEFAULT NULL;...
2025-09-02 12:01:14,954 - DEBUG - Executing statement 10/22: ALTER TABLE `products` ADD COLUMN `weight` decimal(8,3) DEFAULT NULL;...
2025-09-02 12:01:14,958 - DEBUG - Executing statement 11/22: ALTER TABLE `products` DROP COLUMN `old_column`;...
2025-09-02 12:01:14,963 - DEBUG - Executing statement 12/22: ALTER TABLE `products` ADD KEY `idx_products_price` (`price`);...
2025-09-02 12:01:14,969 - DEBUG - Executing statement 13/22: ALTER TABLE `products` ADD KEY `fk_products_category` (`category_id`);...
2025-09-02 12:01:14,976 - DEBUG - Executing statement 14/22: ALTER TABLE `products` ADD KEY `idx_products_active` (`is_active`);...
2025-09-02 12:01:14,981 - DEBUG - Executing statement 15/22: ALTER TABLE `products` ADD KEY `idx_products_stock` (`stock_quantity`);...
2025-09-02 12:01:14,987 - DEBUG - Executing statement 16/22: ALTER TABLE `products` ADD KEY `idx_products_sku` (`sku`);...
2025-09-02 12:01:14,993 - DEBUG - Executing statement 17/22: ALTER TABLE `products` DROP INDEX `idx_products_old`;...
2025-09-02 12:01:14,993 - WARNING - ⚠️  SQL execution warning (statement 17): (1091, "Can't DROP INDEX `idx_products_old`; check that it exists")
2025-09-02 12:01:14,993 - WARNING - Statement: ALTER TABLE `products` DROP INDEX `idx_products_old`;
2025-09-02 12:01:14,993 - DEBUG - Executing statement 18/22: DROP PROCEDURE IF EXISTS `ddl_test_dest`.`GetCustomerOrders`;...
2025-09-02 12:01:14,995 - DEBUG - Executing statement 19/22: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*, COU...
2025-09-02 12:01:14,996 - DEBUG - Executing statement 20/22: DROP FUNCTION IF EXISTS `ddl_test_dest`.`CalculateOrderTotal`;...
2025-09-02 12:01:14,996 - DEBUG - Executing statement 21/22: CREATE DEFINER=`sstuser`@`%` FUNCTION `CalculateOrderTotal`(order_id INT) RETURNS decimal(12,2)
READ...
2025-09-02 12:01:14,998 - DEBUG - Executing statement 22/22: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 12:01:14,998 - INFO - ✅ SQL file executed: 20 statements succeeded, 2 failed
2025-09-02 12:01:14,998 - INFO - 🔍 Checking if schemas are identical after migration...
2025-09-02 12:01:14,998 - INFO - 🔍 Running comparison step: Post-migration schema check
2025-09-02 12:01:14,999 - INFO - Running in compare mode...
2025-09-02 12:01:14,999 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 12:01:15,000 - INFO - Connecting to databases...
2025-09-02 12:01:15,001 - INFO - Database connections successful
2025-09-02 12:01:15,001 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 12:01:15,001 - INFO - Using existing git repository at test_output_post_migration
2025-09-02 12:01:15,002 - DEBUG - Created directory: test_output_post_migration/tables
2025-09-02 12:01:15,002 - DEBUG - Created directory: test_output_post_migration/functions
2025-09-02 12:01:15,002 - DEBUG - Created directory: test_output_post_migration/procedures
2025-09-02 12:01:15,002 - DEBUG - Created directory: test_output_post_migration/triggers
2025-09-02 12:01:15,002 - DEBUG - Created directory: test_output_post_migration/events
2025-09-02 12:01:15,002 - INFO - Initialized git repository at ./test_output_post_migration
2025-09-02 12:01:15,002 - INFO - Extracting DDL objects...
2025-09-02 12:01:15,008 - INFO - Comparing schemas...
2025-09-02 12:01:15,009 - INFO - Performing safety analysis...
2025-09-02 12:01:15,009 - INFO - Generating migration SQL...
2025-09-02 12:01:15,033 - INFO - Generating schema visualizations...
2025-09-02 12:01:15,036 - INFO - Generated HTML documentation
2025-09-02 12:01:15,036 - INFO - Generated Mermaid ERD
2025-09-02 12:01:15,037 - INFO - Generated Graphviz DOT file
2025-09-02 12:01:15,037 - INFO - Generated JSON schema structure
2025-09-02 12:01:15,037 - INFO - Schema visualizations generated in test_output_post_migration/documentation
2025-09-02 12:01:15,038 - INFO - Migration report generated: test_output_post_migration/migration_report.md
2025-09-02 12:01:15,042 - INFO - Started tracking migration 148: ddl_test_source_to_ddl_test_dest_1756807275
2025-09-02 12:01:15,045 - INFO - Completed migration tracking 148: SUCCESS
2025-09-02 12:01:15,045 - INFO - Migration tracking completed: 148
2025-09-02 12:01:15,045 - INFO - Migration completed successfully!
2025-09-02 12:01:15,045 - INFO - Migration ID: 148
2025-09-02 12:01:15,046 - INFO - Operations: 0
2025-09-02 12:01:15,046 - INFO - Safety warnings: 0
2025-09-02 12:01:15,046 - INFO - Migration file: test_output_post_migration/migration.sql
2025-09-02 12:01:15,046 - INFO - Rollback file: test_output_post_migration/rollback.sql
2025-09-02 12:01:15,046 - INFO - Migration report: test_output_post_migration/migration_report.md
2025-09-02 12:01:15,046 - INFO - ✅ Post-migration schema check completed successfully
2025-09-02 12:01:15,046 - INFO - ✅ Schemas are identical after migration!
2025-09-02 12:01:15,046 - INFO - 🔧 Executing SQL file: ./test_output/rollback.sql
2025-09-02 12:01:15,046 - DEBUG - Executing statement 1/21: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 12:01:15,046 - DEBUG - Executing statement 2/21: CREATE TABLE `temp_table` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`temp_data` varchar(255) DEFAULT N...
2025-09-02 12:01:15,049 - DEBUG - Executing statement 3/21: ALTER TABLE `customers` ADD COLUMN `loyalty_points` int(11) DEFAULT 0;...
2025-09-02 12:01:15,054 - DEBUG - Executing statement 4/21: ALTER TABLE `customers` DROP INDEX `idx_customers_country`;...
2025-09-02 12:01:15,058 - DEBUG - Executing statement 5/21: ALTER TABLE `customers` DROP INDEX `idx_customers_city`;...
2025-09-02 12:01:15,063 - DEBUG - Executing statement 6/21: ALTER TABLE `customers` ADD KEY `idx_customers_loyalty` (`loyalty_points`);...
2025-09-02 12:01:15,069 - DEBUG - Executing statement 7/21: ALTER TABLE `categories` DROP COLUMN `description`;...
2025-09-02 12:01:15,074 - DEBUG - Executing statement 8/21: ALTER TABLE `categories` DROP INDEX `idx_categories_created`;...
2025-09-02 12:01:15,079 - DEBUG - Executing statement 9/21: ALTER TABLE `products` DROP COLUMN `dimensions`;...
2025-09-02 12:01:15,083 - DEBUG - Executing statement 10/21: ALTER TABLE `products` DROP COLUMN `weight`;...
2025-09-02 12:01:15,088 - DEBUG - Executing statement 11/21: ALTER TABLE `products` ADD COLUMN `old_column` varchar(50) DEFAULT NULL;...
2025-09-02 12:01:15,093 - DEBUG - Executing statement 12/21: ALTER TABLE `products` DROP INDEX `idx_products_price`;...
2025-09-02 12:01:15,098 - DEBUG - Executing statement 13/21: ALTER TABLE `products` DROP INDEX `fk_products_category`;...
2025-09-02 12:01:15,102 - DEBUG - Executing statement 14/21: ALTER TABLE `products` DROP INDEX `idx_products_active`;...
2025-09-02 12:01:15,107 - DEBUG - Executing statement 15/21: ALTER TABLE `products` DROP INDEX `idx_products_stock`;...
2025-09-02 12:01:15,112 - DEBUG - Executing statement 16/21: ALTER TABLE `products` DROP INDEX `idx_products_sku`;...
2025-09-02 12:01:15,116 - DEBUG - Executing statement 17/21: ALTER TABLE `products` ADD KEY `idx_products_old` (`old_column`);...
2025-09-02 12:01:15,120 - DEBUG - Executing statement 18/21: DROP PROCEDURE IF EXISTS `GetCustomerOrders`;...
2025-09-02 12:01:15,122 - DEBUG - Executing statement 19/21: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*
FROM...
2025-09-02 12:01:15,124 - DEBUG - Executing statement 20/21: DROP FUNCTION IF EXISTS `CalculateOrderTotal`;...
2025-09-02 12:01:15,125 - DEBUG - Executing statement 21/21: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 12:01:15,126 - INFO - ✅ SQL file executed: 21 statements succeeded, 0 failed
2025-09-02 12:01:15,126 - INFO - 🔍 Running comparison step: Final comparison after rollback
2025-09-02 12:01:15,126 - INFO - Running in compare mode...
2025-09-02 12:01:15,127 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 12:01:15,127 - INFO - Connecting to databases...
2025-09-02 12:01:15,128 - INFO - Database connections successful
2025-09-02 12:01:15,128 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 12:01:15,128 - INFO - Using existing git repository at test_output_final
2025-09-02 12:01:15,128 - DEBUG - Created directory: test_output_final/tables
2025-09-02 12:01:15,128 - DEBUG - Created directory: test_output_final/functions
2025-09-02 12:01:15,128 - DEBUG - Created directory: test_output_final/procedures
2025-09-02 12:01:15,128 - DEBUG - Created directory: test_output_final/triggers
2025-09-02 12:01:15,129 - DEBUG - Created directory: test_output_final/events
2025-09-02 12:01:15,129 - INFO - Initialized git repository at ./test_output_final
2025-09-02 12:01:15,129 - INFO - Extracting DDL objects...
2025-09-02 12:01:15,134 - INFO - Comparing schemas...
2025-09-02 12:01:15,134 - INFO - Performing safety analysis...
2025-09-02 12:01:15,134 - INFO - Generating migration SQL...
2025-09-02 12:01:15,155 - INFO - Generating schema visualizations...
2025-09-02 12:01:15,157 - INFO - Generated HTML documentation
2025-09-02 12:01:15,158 - INFO - Generated Mermaid ERD
2025-09-02 12:01:15,158 - INFO - Generated Graphviz DOT file
2025-09-02 12:01:15,159 - INFO - Generated JSON schema structure
2025-09-02 12:01:15,159 - INFO - Schema visualizations generated in test_output_final/documentation
2025-09-02 12:01:15,159 - INFO - Migration report generated: test_output_final/migration_report.md
2025-09-02 12:01:15,165 - INFO - Started tracking migration 149: ddl_test_source_to_ddl_test_dest_1756807275
2025-09-02 12:01:15,169 - INFO - Completed migration tracking 149: SUCCESS
2025-09-02 12:01:15,169 - INFO - Migration tracking completed: 149
2025-09-02 12:01:15,169 - INFO - Migration completed successfully!
2025-09-02 12:01:15,170 - INFO - Migration ID: 149
2025-09-02 12:01:15,170 - INFO - Operations: 6
2025-09-02 12:01:15,170 - INFO - Safety warnings: 0
2025-09-02 12:01:15,170 - INFO - Migration file: test_output_final/migration.sql
2025-09-02 12:01:15,170 - INFO - Rollback file: test_output_final/rollback.sql
2025-09-02 12:01:15,170 - INFO - Migration report: test_output_final/migration_report.md
2025-09-02 12:01:15,170 - INFO - ✅ Final comparison after rollback completed successfully
2025-09-02 12:01:15,170 - INFO - 🔍 Analyzing results in ./test_output_final...
2025-09-02 12:01:15,170 - INFO - 🔄 Comparing initial and final results...
2025-09-02 12:01:15,170 - INFO - ✅ Rollback test passed - initial and final states match!
2025-09-02 12:01:15,170 - INFO - 💾 Saving test data for reference...
2025-09-02 12:01:15,174 - INFO - ✅ Saved ./test_output to test_data/ddlw-test-20250902_120115/ddl-wizard-testsuite-initial-migration-20250902_120115
2025-09-02 12:01:15,177 - INFO - ✅ Saved ./test_output to test_data/ddlw-test-20250902_120115/test_output
2025-09-02 12:01:15,180 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddlw-test-20250902_120115/ddl-wizard-testsuite-post-migration-verification-20250902_120115
2025-09-02 12:01:15,183 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddlw-test-20250902_120115/test_output_post_migration
2025-09-02 12:01:15,186 - INFO - ✅ Saved ./test_output_final to test_data/ddlw-test-20250902_120115/ddl-wizard-testsuite-rollback-verification-20250902_120115
2025-09-02 12:01:15,189 - INFO - ✅ Saved ./test_output_final to test_data/ddlw-test-20250902_120115/test_output_final
2025-09-02 12:01:15,189 - INFO - ✅ Saved test log to test_data/ddlw-test-20250902_120115
2025-09-02 12:01:15,189 - INFO - 🧹 Cleaning up test databases...
2025-09-02 12:01:15,190 - INFO - ✅ Cleaned up database: ddl_test_source
2025-09-02 12:01:15,191 - INFO - ✅ Cleaned up database: ddl_test_dest
2025-09-02 12:02:48,016 - INFO - Running in compare mode...
2025-09-02 12:02:48,017 - INFO - Connecting to databases...
2025-09-02 12:02:48,019 - INFO - Database connections successful
2025-09-02 12:02:48,022 - INFO - Initialized new git repository at /home/claudio/Projects/ddl_wiz201
2025-09-02 12:02:48,023 - INFO - Initialized git repository at /home/claudio/Projects/ddl_wiz201
2025-09-02 12:02:48,023 - INFO - Extracting DDL objects...
2025-09-02 12:02:48,029 - INFO - Comparing schemas...
2025-09-02 12:02:48,029 - INFO - Performing safety analysis...
2025-09-02 12:02:48,029 - INFO - Generating migration SQL...
2025-09-02 12:02:48,054 - INFO - Generating schema visualizations...
2025-09-02 12:02:48,057 - INFO - Generated HTML documentation
2025-09-02 12:02:48,057 - INFO - Generated Mermaid ERD
2025-09-02 12:02:48,057 - INFO - Generated Graphviz DOT file
2025-09-02 12:02:48,058 - INFO - Generated JSON schema structure
2025-09-02 12:02:48,058 - INFO - Schema visualizations generated in /home/claudio/Projects/ddl_wiz201/documentation
2025-09-02 12:02:48,058 - INFO - Migration report generated: /home/claudio/Projects/ddl_wiz201/migration_report.md
2025-09-02 12:02:48,064 - INFO - Started tracking migration 150: ddl_test_source_to_ddl_test_dest_1756807368
2025-09-02 12:02:48,068 - INFO - Completed migration tracking 150: SUCCESS
2025-09-02 12:02:48,068 - INFO - Migration tracking completed: 150
2025-09-02 12:02:48,068 - INFO - Migration completed successfully!
2025-09-02 12:02:48,068 - INFO - Migration ID: 150
2025-09-02 12:02:48,069 - INFO - Operations: 6
2025-09-02 12:02:48,069 - INFO - Safety warnings: 0
2025-09-02 12:02:48,069 - INFO - Migration file: /home/claudio/Projects/ddl_wiz201/migration.sql
2025-09-02 12:02:48,069 - INFO - Rollback file: /home/claudio/Projects/ddl_wiz201/rollback.sql
2025-09-02 12:02:48,069 - INFO - Migration report: /home/claudio/Projects/ddl_wiz201/migration_report.md
2025-09-02 12:03:08,091 - INFO - 🏗️  Setting up source database...
2025-09-02 12:03:08,150 - INFO - ✅ Source database setup completed
2025-09-02 12:03:08,150 - INFO - 🏗️  Setting up destination database with differences...
2025-09-02 12:03:08,200 - INFO - ✅ Destination database setup completed
2025-09-02 12:03:08,200 - INFO - 📝 Populating test data...
2025-09-02 12:03:08,203 - INFO - ✅ Test data populated in ddl_test_source
2025-09-02 12:03:08,205 - INFO - ✅ Test data populated in ddl_test_dest
2025-09-02 12:03:08,205 - INFO - 🔍 Running comparison step: Initial comparison
2025-09-02 12:03:08,206 - INFO - Running in compare mode...
2025-09-02 12:03:08,206 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 12:03:08,206 - INFO - Connecting to databases...
2025-09-02 12:03:08,208 - INFO - Database connections successful
2025-09-02 12:03:08,208 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output, stdin=None, shell=False, universal_newlines=False)
2025-09-02 12:03:08,211 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 12:03:08,211 - INFO - Initialized new git repository at test_output
2025-09-02 12:03:08,212 - DEBUG - Created directory: test_output/tables
2025-09-02 12:03:08,212 - DEBUG - Created directory: test_output/functions
2025-09-02 12:03:08,212 - DEBUG - Created directory: test_output/procedures
2025-09-02 12:03:08,212 - DEBUG - Created directory: test_output/triggers
2025-09-02 12:03:08,212 - DEBUG - Created directory: test_output/events
2025-09-02 12:03:08,212 - INFO - Initialized git repository at ./test_output
2025-09-02 12:03:08,212 - INFO - Extracting DDL objects...
2025-09-02 12:03:08,220 - INFO - Comparing schemas...
2025-09-02 12:03:08,220 - INFO - Performing safety analysis...
2025-09-02 12:03:08,220 - INFO - Generating migration SQL...
2025-09-02 12:03:08,246 - INFO - Generating schema visualizations...
2025-09-02 12:03:08,249 - INFO - Generated HTML documentation
2025-09-02 12:03:08,249 - INFO - Generated Mermaid ERD
2025-09-02 12:03:08,249 - INFO - Generated Graphviz DOT file
2025-09-02 12:03:08,250 - INFO - Generated JSON schema structure
2025-09-02 12:03:08,250 - INFO - Schema visualizations generated in test_output/documentation
2025-09-02 12:03:08,250 - INFO - Migration report generated: test_output/migration_report.md
2025-09-02 12:03:08,256 - INFO - Started tracking migration 151: ddl_test_source_to_ddl_test_dest_1756807388
2025-09-02 12:03:08,259 - INFO - Completed migration tracking 151: SUCCESS
2025-09-02 12:03:08,259 - INFO - Migration tracking completed: 151
2025-09-02 12:03:08,259 - INFO - Migration completed successfully!
2025-09-02 12:03:08,259 - INFO - Migration ID: 151
2025-09-02 12:03:08,259 - INFO - Operations: 6
2025-09-02 12:03:08,259 - INFO - Safety warnings: 0
2025-09-02 12:03:08,259 - INFO - Migration file: test_output/migration.sql
2025-09-02 12:03:08,259 - INFO - Rollback file: test_output/rollback.sql
2025-09-02 12:03:08,259 - INFO - Migration report: test_output/migration_report.md
2025-09-02 12:03:08,259 - INFO - ✅ Initial comparison completed successfully
2025-09-02 12:03:08,260 - INFO - 🔍 Analyzing results in ./test_output...
2025-09-02 12:03:08,260 - INFO - 🔧 Executing SQL file: ./test_output/migration.sql
2025-09-02 12:03:08,260 - DEBUG - Executing statement 1/22: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 12:03:08,260 - DEBUG - Executing statement 2/22: DROP TABLE IF EXISTS `ddl_test_dest`.`temp_table`;...
2025-09-02 12:03:08,263 - DEBUG - Executing statement 3/22: ALTER TABLE `categories` ADD COLUMN `description` text DEFAULT NULL;...
2025-09-02 12:03:08,267 - DEBUG - Executing statement 4/22: ALTER TABLE `categories` ADD KEY `idx_categories_created` (`created_at`);...
2025-09-02 12:03:08,274 - DEBUG - Executing statement 5/22: ALTER TABLE `customers` DROP COLUMN `loyalty_points`;...
2025-09-02 12:03:08,279 - DEBUG - Executing statement 6/22: ALTER TABLE `customers` ADD KEY `idx_customers_country` (`country`);...
2025-09-02 12:03:08,286 - DEBUG - Executing statement 7/22: ALTER TABLE `customers` ADD KEY `idx_customers_city` (`city`);...
2025-09-02 12:03:08,291 - DEBUG - Executing statement 8/22: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;...
2025-09-02 12:03:08,291 - WARNING - ⚠️  SQL execution warning (statement 8): (1091, "Can't DROP INDEX `idx_customers_loyalty`; check that it exists")
2025-09-02 12:03:08,291 - WARNING - Statement: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;
2025-09-02 12:03:08,291 - DEBUG - Executing statement 9/22: ALTER TABLE `products` ADD COLUMN `dimensions` varchar(100) DEFAULT NULL;...
2025-09-02 12:03:08,295 - DEBUG - Executing statement 10/22: ALTER TABLE `products` ADD COLUMN `weight` decimal(8,3) DEFAULT NULL;...
2025-09-02 12:03:08,300 - DEBUG - Executing statement 11/22: ALTER TABLE `products` DROP COLUMN `old_column`;...
2025-09-02 12:03:08,305 - DEBUG - Executing statement 12/22: ALTER TABLE `products` ADD KEY `fk_products_category` (`category_id`);...
2025-09-02 12:03:08,311 - DEBUG - Executing statement 13/22: ALTER TABLE `products` ADD KEY `idx_products_price` (`price`);...
2025-09-02 12:03:08,317 - DEBUG - Executing statement 14/22: ALTER TABLE `products` ADD KEY `idx_products_sku` (`sku`);...
2025-09-02 12:03:08,323 - DEBUG - Executing statement 15/22: ALTER TABLE `products` ADD KEY `idx_products_active` (`is_active`);...
2025-09-02 12:03:08,329 - DEBUG - Executing statement 16/22: ALTER TABLE `products` ADD KEY `idx_products_stock` (`stock_quantity`);...
2025-09-02 12:03:08,334 - DEBUG - Executing statement 17/22: ALTER TABLE `products` DROP INDEX `idx_products_old`;...
2025-09-02 12:03:08,335 - WARNING - ⚠️  SQL execution warning (statement 17): (1091, "Can't DROP INDEX `idx_products_old`; check that it exists")
2025-09-02 12:03:08,335 - WARNING - Statement: ALTER TABLE `products` DROP INDEX `idx_products_old`;
2025-09-02 12:03:08,335 - DEBUG - Executing statement 18/22: DROP PROCEDURE IF EXISTS `ddl_test_dest`.`GetCustomerOrders`;...
2025-09-02 12:03:08,336 - DEBUG - Executing statement 19/22: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*, COU...
2025-09-02 12:03:08,337 - DEBUG - Executing statement 20/22: DROP FUNCTION IF EXISTS `ddl_test_dest`.`CalculateOrderTotal`;...
2025-09-02 12:03:08,338 - DEBUG - Executing statement 21/22: CREATE DEFINER=`sstuser`@`%` FUNCTION `CalculateOrderTotal`(order_id INT) RETURNS decimal(12,2)
READ...
2025-09-02 12:03:08,339 - DEBUG - Executing statement 22/22: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 12:03:08,339 - INFO - ✅ SQL file executed: 20 statements succeeded, 2 failed
2025-09-02 12:03:08,339 - INFO - 🔍 Checking if schemas are identical after migration...
2025-09-02 12:03:08,339 - INFO - 🔍 Running comparison step: Post-migration schema check
2025-09-02 12:03:08,340 - INFO - Running in compare mode...
2025-09-02 12:03:08,340 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 12:03:08,341 - INFO - Connecting to databases...
2025-09-02 12:03:08,342 - INFO - Database connections successful
2025-09-02 12:03:08,342 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_post_migration, stdin=None, shell=False, universal_newlines=False)
2025-09-02 12:03:08,346 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 12:03:08,346 - INFO - Initialized new git repository at test_output_post_migration
2025-09-02 12:03:08,346 - DEBUG - Created directory: test_output_post_migration/tables
2025-09-02 12:03:08,346 - DEBUG - Created directory: test_output_post_migration/functions
2025-09-02 12:03:08,347 - DEBUG - Created directory: test_output_post_migration/procedures
2025-09-02 12:03:08,347 - DEBUG - Created directory: test_output_post_migration/triggers
2025-09-02 12:03:08,347 - DEBUG - Created directory: test_output_post_migration/events
2025-09-02 12:03:08,347 - INFO - Initialized git repository at ./test_output_post_migration
2025-09-02 12:03:08,347 - INFO - Extracting DDL objects...
2025-09-02 12:03:08,353 - INFO - Comparing schemas...
2025-09-02 12:03:08,353 - INFO - Performing safety analysis...
2025-09-02 12:03:08,353 - INFO - Generating migration SQL...
2025-09-02 12:03:08,376 - INFO - Generating schema visualizations...
2025-09-02 12:03:08,378 - INFO - Generated HTML documentation
2025-09-02 12:03:08,379 - INFO - Generated Mermaid ERD
2025-09-02 12:03:08,379 - INFO - Generated Graphviz DOT file
2025-09-02 12:03:08,379 - INFO - Generated JSON schema structure
2025-09-02 12:03:08,379 - INFO - Schema visualizations generated in test_output_post_migration/documentation
2025-09-02 12:03:08,380 - INFO - Migration report generated: test_output_post_migration/migration_report.md
2025-09-02 12:03:08,385 - INFO - Started tracking migration 152: ddl_test_source_to_ddl_test_dest_1756807388
2025-09-02 12:03:08,389 - INFO - Completed migration tracking 152: SUCCESS
2025-09-02 12:03:08,389 - INFO - Migration tracking completed: 152
2025-09-02 12:03:08,389 - INFO - Migration completed successfully!
2025-09-02 12:03:08,389 - INFO - Migration ID: 152
2025-09-02 12:03:08,389 - INFO - Operations: 0
2025-09-02 12:03:08,389 - INFO - Safety warnings: 0
2025-09-02 12:03:08,389 - INFO - Migration file: test_output_post_migration/migration.sql
2025-09-02 12:03:08,389 - INFO - Rollback file: test_output_post_migration/rollback.sql
2025-09-02 12:03:08,389 - INFO - Migration report: test_output_post_migration/migration_report.md
2025-09-02 12:03:08,389 - INFO - ✅ Post-migration schema check completed successfully
2025-09-02 12:03:08,389 - INFO - ✅ Schemas are identical after migration!
2025-09-02 12:03:08,390 - INFO - 🔧 Executing SQL file: ./test_output/rollback.sql
2025-09-02 12:03:08,390 - DEBUG - Executing statement 1/21: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 12:03:08,390 - DEBUG - Executing statement 2/21: CREATE TABLE `temp_table` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`temp_data` varchar(255) DEFAULT N...
2025-09-02 12:03:08,393 - DEBUG - Executing statement 3/21: ALTER TABLE `categories` DROP COLUMN `description`;...
2025-09-02 12:03:08,398 - DEBUG - Executing statement 4/21: ALTER TABLE `categories` DROP INDEX `idx_categories_created`;...
2025-09-02 12:03:08,402 - DEBUG - Executing statement 5/21: ALTER TABLE `customers` ADD COLUMN `loyalty_points` int(11) DEFAULT 0;...
2025-09-02 12:03:08,407 - DEBUG - Executing statement 6/21: ALTER TABLE `customers` DROP INDEX `idx_customers_country`;...
2025-09-02 12:03:08,412 - DEBUG - Executing statement 7/21: ALTER TABLE `customers` DROP INDEX `idx_customers_city`;...
2025-09-02 12:03:08,416 - DEBUG - Executing statement 8/21: ALTER TABLE `customers` ADD KEY `idx_customers_loyalty` (`loyalty_points`);...
2025-09-02 12:03:08,422 - DEBUG - Executing statement 9/21: ALTER TABLE `products` DROP COLUMN `dimensions`;...
2025-09-02 12:03:08,426 - DEBUG - Executing statement 10/21: ALTER TABLE `products` DROP COLUMN `weight`;...
2025-09-02 12:03:08,431 - DEBUG - Executing statement 11/21: ALTER TABLE `products` ADD COLUMN `old_column` varchar(50) DEFAULT NULL;...
2025-09-02 12:03:08,436 - DEBUG - Executing statement 12/21: ALTER TABLE `products` DROP INDEX `fk_products_category`;...
2025-09-02 12:03:08,440 - DEBUG - Executing statement 13/21: ALTER TABLE `products` DROP INDEX `idx_products_price`;...
2025-09-02 12:03:08,445 - DEBUG - Executing statement 14/21: ALTER TABLE `products` DROP INDEX `idx_products_sku`;...
2025-09-02 12:03:08,449 - DEBUG - Executing statement 15/21: ALTER TABLE `products` DROP INDEX `idx_products_active`;...
2025-09-02 12:03:08,453 - DEBUG - Executing statement 16/21: ALTER TABLE `products` DROP INDEX `idx_products_stock`;...
2025-09-02 12:03:08,457 - DEBUG - Executing statement 17/21: ALTER TABLE `products` ADD KEY `idx_products_old` (`old_column`);...
2025-09-02 12:03:08,462 - DEBUG - Executing statement 18/21: DROP PROCEDURE IF EXISTS `GetCustomerOrders`;...
2025-09-02 12:03:08,464 - DEBUG - Executing statement 19/21: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*
FROM...
2025-09-02 12:03:08,465 - DEBUG - Executing statement 20/21: DROP FUNCTION IF EXISTS `CalculateOrderTotal`;...
2025-09-02 12:03:08,466 - DEBUG - Executing statement 21/21: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 12:03:08,466 - INFO - ✅ SQL file executed: 21 statements succeeded, 0 failed
2025-09-02 12:03:08,467 - INFO - 🔍 Running comparison step: Final comparison after rollback
2025-09-02 12:03:08,467 - INFO - Running in compare mode...
2025-09-02 12:03:08,467 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 12:03:08,468 - INFO - Connecting to databases...
2025-09-02 12:03:08,468 - INFO - Database connections successful
2025-09-02 12:03:08,469 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_final, stdin=None, shell=False, universal_newlines=False)
2025-09-02 12:03:08,471 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 12:03:08,472 - INFO - Initialized new git repository at test_output_final
2025-09-02 12:03:08,472 - DEBUG - Created directory: test_output_final/tables
2025-09-02 12:03:08,472 - DEBUG - Created directory: test_output_final/functions
2025-09-02 12:03:08,472 - DEBUG - Created directory: test_output_final/procedures
2025-09-02 12:03:08,472 - DEBUG - Created directory: test_output_final/triggers
2025-09-02 12:03:08,472 - DEBUG - Created directory: test_output_final/events
2025-09-02 12:03:08,472 - INFO - Initialized git repository at ./test_output_final
2025-09-02 12:03:08,472 - INFO - Extracting DDL objects...
2025-09-02 12:03:08,479 - INFO - Comparing schemas...
2025-09-02 12:03:08,479 - INFO - Performing safety analysis...
2025-09-02 12:03:08,479 - INFO - Generating migration SQL...
2025-09-02 12:03:08,499 - INFO - Generating schema visualizations...
2025-09-02 12:03:08,501 - INFO - Generated HTML documentation
2025-09-02 12:03:08,501 - INFO - Generated Mermaid ERD
2025-09-02 12:03:08,501 - INFO - Generated Graphviz DOT file
2025-09-02 12:03:08,502 - INFO - Generated JSON schema structure
2025-09-02 12:03:08,502 - INFO - Schema visualizations generated in test_output_final/documentation
2025-09-02 12:03:08,502 - INFO - Migration report generated: test_output_final/migration_report.md
2025-09-02 12:03:08,509 - INFO - Started tracking migration 153: ddl_test_source_to_ddl_test_dest_1756807388
2025-09-02 12:03:08,512 - INFO - Completed migration tracking 153: SUCCESS
2025-09-02 12:03:08,513 - INFO - Migration tracking completed: 153
2025-09-02 12:03:08,513 - INFO - Migration completed successfully!
2025-09-02 12:03:08,513 - INFO - Migration ID: 153
2025-09-02 12:03:08,513 - INFO - Operations: 6
2025-09-02 12:03:08,513 - INFO - Safety warnings: 0
2025-09-02 12:03:08,513 - INFO - Migration file: test_output_final/migration.sql
2025-09-02 12:03:08,513 - INFO - Rollback file: test_output_final/rollback.sql
2025-09-02 12:03:08,513 - INFO - Migration report: test_output_final/migration_report.md
2025-09-02 12:03:08,513 - INFO - ✅ Final comparison after rollback completed successfully
2025-09-02 12:03:08,513 - INFO - 🔍 Analyzing results in ./test_output_final...
2025-09-02 12:03:08,513 - INFO - 🔄 Comparing initial and final results...
2025-09-02 12:03:08,513 - INFO - ✅ Rollback test passed - initial and final states match!
2025-09-02 12:03:08,513 - INFO - 💾 Saving test data for reference...
2025-09-02 12:03:08,517 - INFO - ✅ Saved ./test_output to test_data/ddlw-test-20250902_120308/ddl-wizard-testsuite-initial-migration-20250902_120308
2025-09-02 12:03:08,520 - INFO - ✅ Saved ./test_output to test_data/ddlw-test-20250902_120308/test_output
2025-09-02 12:03:08,523 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddlw-test-20250902_120308/ddl-wizard-testsuite-post-migration-verification-20250902_120308
2025-09-02 12:03:08,527 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddlw-test-20250902_120308/test_output_post_migration
2025-09-02 12:03:08,530 - INFO - ✅ Saved ./test_output_final to test_data/ddlw-test-20250902_120308/ddl-wizard-testsuite-rollback-verification-20250902_120308
2025-09-02 12:03:08,534 - INFO - ✅ Saved ./test_output_final to test_data/ddlw-test-20250902_120308/test_output_final
2025-09-02 12:03:08,534 - INFO - ✅ Saved test log to test_data/ddlw-test-20250902_120308
2025-09-02 12:03:08,536 - INFO - 🧹 Cleaned up temporary directory: ./test_output
2025-09-02 12:03:08,537 - INFO - 🧹 Cleaned up temporary directory: ./test_output_post_migration
2025-09-02 12:03:08,538 - INFO - 🧹 Cleaned up temporary directory: ./test_output_final
2025-09-02 12:03:08,538 - INFO - 🧹 Cleaning up test databases...
2025-09-02 12:03:08,539 - INFO - ✅ Cleaned up database: ddl_test_source
2025-09-02 12:03:08,540 - INFO - ✅ Cleaned up database: ddl_test_dest
2025-09-02 12:03:58,776 - INFO - 🏗️  Setting up source database...
2025-09-02 12:03:58,834 - INFO - ✅ Source database setup completed
2025-09-02 12:03:58,834 - INFO - 🏗️  Setting up destination database with differences...
2025-09-02 12:03:58,885 - INFO - ✅ Destination database setup completed
2025-09-02 12:03:58,885 - INFO - 📝 Populating test data...
2025-09-02 12:03:58,887 - INFO - ✅ Test data populated in ddl_test_source
2025-09-02 12:03:58,890 - INFO - ✅ Test data populated in ddl_test_dest
2025-09-02 12:03:58,890 - INFO - 🔍 Running comparison step: Initial comparison
2025-09-02 12:03:58,891 - INFO - Running in compare mode...
2025-09-02 12:03:58,891 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 12:03:58,891 - INFO - Connecting to databases...
2025-09-02 12:03:58,892 - INFO - Database connections successful
2025-09-02 12:03:58,893 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output, stdin=None, shell=False, universal_newlines=False)
2025-09-02 12:03:58,895 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 12:03:58,895 - INFO - Initialized new git repository at test_output
2025-09-02 12:03:58,895 - DEBUG - Created directory: test_output/tables
2025-09-02 12:03:58,895 - DEBUG - Created directory: test_output/functions
2025-09-02 12:03:58,895 - DEBUG - Created directory: test_output/procedures
2025-09-02 12:03:58,896 - DEBUG - Created directory: test_output/triggers
2025-09-02 12:03:58,896 - DEBUG - Created directory: test_output/events
2025-09-02 12:03:58,896 - INFO - Initialized git repository at ./test_output
2025-09-02 12:03:58,896 - INFO - Extracting DDL objects...
2025-09-02 12:03:58,907 - INFO - Comparing schemas...
2025-09-02 12:03:58,907 - INFO - Performing safety analysis...
2025-09-02 12:03:58,908 - INFO - Generating migration SQL...
2025-09-02 12:03:58,929 - INFO - Generating schema visualizations...
2025-09-02 12:03:58,932 - INFO - Generated HTML documentation
2025-09-02 12:03:58,932 - INFO - Generated Mermaid ERD
2025-09-02 12:03:58,932 - INFO - Generated Graphviz DOT file
2025-09-02 12:03:58,933 - INFO - Generated JSON schema structure
2025-09-02 12:03:58,933 - INFO - Schema visualizations generated in test_output/documentation
2025-09-02 12:03:58,933 - INFO - Migration report generated: test_output/migration_report.md
2025-09-02 12:03:58,939 - INFO - Started tracking migration 154: ddl_test_source_to_ddl_test_dest_1756807438
2025-09-02 12:03:58,943 - INFO - Completed migration tracking 154: SUCCESS
2025-09-02 12:03:58,944 - INFO - Migration tracking completed: 154
2025-09-02 12:03:58,944 - INFO - Migration completed successfully!
2025-09-02 12:03:58,944 - INFO - Migration ID: 154
2025-09-02 12:03:58,944 - INFO - Operations: 6
2025-09-02 12:03:58,944 - INFO - Safety warnings: 0
2025-09-02 12:03:58,944 - INFO - Migration file: test_output/migration.sql
2025-09-02 12:03:58,944 - INFO - Rollback file: test_output/rollback.sql
2025-09-02 12:03:58,944 - INFO - Migration report: test_output/migration_report.md
2025-09-02 12:03:58,944 - INFO - ✅ Initial comparison completed successfully
2025-09-02 12:03:58,944 - INFO - 🔍 Analyzing results in ./test_output...
2025-09-02 12:03:58,944 - INFO - 🔧 Executing SQL file: ./test_output/migration.sql
2025-09-02 12:03:58,945 - DEBUG - Executing statement 1/22: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 12:03:58,945 - DEBUG - Executing statement 2/22: DROP TABLE IF EXISTS `ddl_test_dest`.`temp_table`;...
2025-09-02 12:03:58,947 - DEBUG - Executing statement 3/22: ALTER TABLE `categories` ADD COLUMN `description` text DEFAULT NULL;...
2025-09-02 12:03:58,951 - DEBUG - Executing statement 4/22: ALTER TABLE `categories` ADD KEY `idx_categories_created` (`created_at`);...
2025-09-02 12:03:58,958 - DEBUG - Executing statement 5/22: ALTER TABLE `customers` DROP COLUMN `loyalty_points`;...
2025-09-02 12:03:58,963 - DEBUG - Executing statement 6/22: ALTER TABLE `customers` ADD KEY `idx_customers_country` (`country`);...
2025-09-02 12:03:58,970 - DEBUG - Executing statement 7/22: ALTER TABLE `customers` ADD KEY `idx_customers_city` (`city`);...
2025-09-02 12:03:58,976 - DEBUG - Executing statement 8/22: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;...
2025-09-02 12:03:58,976 - WARNING - ⚠️  SQL execution warning (statement 8): (1091, "Can't DROP INDEX `idx_customers_loyalty`; check that it exists")
2025-09-02 12:03:58,976 - WARNING - Statement: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;
2025-09-02 12:03:58,976 - DEBUG - Executing statement 9/22: ALTER TABLE `products` ADD COLUMN `dimensions` varchar(100) DEFAULT NULL;...
2025-09-02 12:03:58,981 - DEBUG - Executing statement 10/22: ALTER TABLE `products` ADD COLUMN `weight` decimal(8,3) DEFAULT NULL;...
2025-09-02 12:03:58,985 - DEBUG - Executing statement 11/22: ALTER TABLE `products` DROP COLUMN `old_column`;...
2025-09-02 12:03:58,990 - DEBUG - Executing statement 12/22: ALTER TABLE `products` ADD KEY `idx_products_sku` (`sku`);...
2025-09-02 12:03:58,996 - DEBUG - Executing statement 13/22: ALTER TABLE `products` ADD KEY `idx_products_price` (`price`);...
2025-09-02 12:03:59,001 - DEBUG - Executing statement 14/22: ALTER TABLE `products` ADD KEY `idx_products_active` (`is_active`);...
2025-09-02 12:03:59,007 - DEBUG - Executing statement 15/22: ALTER TABLE `products` ADD KEY `idx_products_stock` (`stock_quantity`);...
2025-09-02 12:03:59,013 - DEBUG - Executing statement 16/22: ALTER TABLE `products` ADD KEY `fk_products_category` (`category_id`);...
2025-09-02 12:03:59,018 - DEBUG - Executing statement 17/22: ALTER TABLE `products` DROP INDEX `idx_products_old`;...
2025-09-02 12:03:59,018 - WARNING - ⚠️  SQL execution warning (statement 17): (1091, "Can't DROP INDEX `idx_products_old`; check that it exists")
2025-09-02 12:03:59,018 - WARNING - Statement: ALTER TABLE `products` DROP INDEX `idx_products_old`;
2025-09-02 12:03:59,018 - DEBUG - Executing statement 18/22: DROP PROCEDURE IF EXISTS `ddl_test_dest`.`GetCustomerOrders`;...
2025-09-02 12:03:59,020 - DEBUG - Executing statement 19/22: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*, COU...
2025-09-02 12:03:59,022 - DEBUG - Executing statement 20/22: DROP FUNCTION IF EXISTS `ddl_test_dest`.`CalculateOrderTotal`;...
2025-09-02 12:03:59,022 - DEBUG - Executing statement 21/22: CREATE DEFINER=`sstuser`@`%` FUNCTION `CalculateOrderTotal`(order_id INT) RETURNS decimal(12,2)
READ...
2025-09-02 12:03:59,023 - DEBUG - Executing statement 22/22: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 12:03:59,024 - INFO - ✅ SQL file executed: 20 statements succeeded, 2 failed
2025-09-02 12:03:59,024 - INFO - 🔍 Checking if schemas are identical after migration...
2025-09-02 12:03:59,024 - INFO - 🔍 Running comparison step: Post-migration schema check
2025-09-02 12:03:59,025 - INFO - Running in compare mode...
2025-09-02 12:03:59,025 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 12:03:59,025 - INFO - Connecting to databases...
2025-09-02 12:03:59,026 - INFO - Database connections successful
2025-09-02 12:03:59,026 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_post_migration, stdin=None, shell=False, universal_newlines=False)
2025-09-02 12:03:59,029 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 12:03:59,029 - INFO - Initialized new git repository at test_output_post_migration
2025-09-02 12:03:59,029 - DEBUG - Created directory: test_output_post_migration/tables
2025-09-02 12:03:59,029 - DEBUG - Created directory: test_output_post_migration/functions
2025-09-02 12:03:59,029 - DEBUG - Created directory: test_output_post_migration/procedures
2025-09-02 12:03:59,029 - DEBUG - Created directory: test_output_post_migration/triggers
2025-09-02 12:03:59,029 - DEBUG - Created directory: test_output_post_migration/events
2025-09-02 12:03:59,029 - INFO - Initialized git repository at ./test_output_post_migration
2025-09-02 12:03:59,029 - INFO - Extracting DDL objects...
2025-09-02 12:03:59,036 - INFO - Comparing schemas...
2025-09-02 12:03:59,037 - INFO - Performing safety analysis...
2025-09-02 12:03:59,037 - INFO - Generating migration SQL...
2025-09-02 12:03:59,060 - INFO - Generating schema visualizations...
2025-09-02 12:03:59,063 - INFO - Generated HTML documentation
2025-09-02 12:03:59,063 - INFO - Generated Mermaid ERD
2025-09-02 12:03:59,063 - INFO - Generated Graphviz DOT file
2025-09-02 12:03:59,064 - INFO - Generated JSON schema structure
2025-09-02 12:03:59,064 - INFO - Schema visualizations generated in test_output_post_migration/documentation
2025-09-02 12:03:59,064 - INFO - Migration report generated: test_output_post_migration/migration_report.md
2025-09-02 12:03:59,072 - INFO - Started tracking migration 155: ddl_test_source_to_ddl_test_dest_1756807439
2025-09-02 12:03:59,077 - INFO - Completed migration tracking 155: SUCCESS
2025-09-02 12:03:59,077 - INFO - Migration tracking completed: 155
2025-09-02 12:03:59,077 - INFO - Migration completed successfully!
2025-09-02 12:03:59,077 - INFO - Migration ID: 155
2025-09-02 12:03:59,077 - INFO - Operations: 0
2025-09-02 12:03:59,077 - INFO - Safety warnings: 0
2025-09-02 12:03:59,077 - INFO - Migration file: test_output_post_migration/migration.sql
2025-09-02 12:03:59,077 - INFO - Rollback file: test_output_post_migration/rollback.sql
2025-09-02 12:03:59,077 - INFO - Migration report: test_output_post_migration/migration_report.md
2025-09-02 12:03:59,077 - INFO - ✅ Post-migration schema check completed successfully
2025-09-02 12:03:59,077 - INFO - ✅ Schemas are identical after migration!
2025-09-02 12:03:59,077 - INFO - 🔧 Executing SQL file: ./test_output/rollback.sql
2025-09-02 12:03:59,078 - DEBUG - Executing statement 1/21: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 12:03:59,078 - DEBUG - Executing statement 2/21: CREATE TABLE `temp_table` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`temp_data` varchar(255) DEFAULT N...
2025-09-02 12:03:59,081 - DEBUG - Executing statement 3/21: ALTER TABLE `categories` DROP COLUMN `description`;...
2025-09-02 12:03:59,086 - DEBUG - Executing statement 4/21: ALTER TABLE `categories` DROP INDEX `idx_categories_created`;...
2025-09-02 12:03:59,090 - DEBUG - Executing statement 5/21: ALTER TABLE `customers` ADD COLUMN `loyalty_points` int(11) DEFAULT 0;...
2025-09-02 12:03:59,095 - DEBUG - Executing statement 6/21: ALTER TABLE `customers` DROP INDEX `idx_customers_country`;...
2025-09-02 12:03:59,100 - DEBUG - Executing statement 7/21: ALTER TABLE `customers` DROP INDEX `idx_customers_city`;...
2025-09-02 12:03:59,105 - DEBUG - Executing statement 8/21: ALTER TABLE `customers` ADD KEY `idx_customers_loyalty` (`loyalty_points`);...
2025-09-02 12:03:59,112 - DEBUG - Executing statement 9/21: ALTER TABLE `products` DROP COLUMN `dimensions`;...
2025-09-02 12:03:59,116 - DEBUG - Executing statement 10/21: ALTER TABLE `products` DROP COLUMN `weight`;...
2025-09-02 12:03:59,121 - DEBUG - Executing statement 11/21: ALTER TABLE `products` ADD COLUMN `old_column` varchar(50) DEFAULT NULL;...
2025-09-02 12:03:59,127 - DEBUG - Executing statement 12/21: ALTER TABLE `products` DROP INDEX `idx_products_sku`;...
2025-09-02 12:03:59,131 - DEBUG - Executing statement 13/21: ALTER TABLE `products` DROP INDEX `idx_products_price`;...
2025-09-02 12:03:59,136 - DEBUG - Executing statement 14/21: ALTER TABLE `products` DROP INDEX `idx_products_active`;...
2025-09-02 12:03:59,142 - DEBUG - Executing statement 15/21: ALTER TABLE `products` DROP INDEX `idx_products_stock`;...
2025-09-02 12:03:59,146 - DEBUG - Executing statement 16/21: ALTER TABLE `products` DROP INDEX `fk_products_category`;...
2025-09-02 12:03:59,150 - DEBUG - Executing statement 17/21: ALTER TABLE `products` ADD KEY `idx_products_old` (`old_column`);...
2025-09-02 12:03:59,155 - DEBUG - Executing statement 18/21: DROP PROCEDURE IF EXISTS `GetCustomerOrders`;...
2025-09-02 12:03:59,157 - DEBUG - Executing statement 19/21: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*
FROM...
2025-09-02 12:03:59,159 - DEBUG - Executing statement 20/21: DROP FUNCTION IF EXISTS `CalculateOrderTotal`;...
2025-09-02 12:03:59,160 - DEBUG - Executing statement 21/21: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 12:03:59,160 - INFO - ✅ SQL file executed: 21 statements succeeded, 0 failed
2025-09-02 12:03:59,161 - INFO - 🔍 Running comparison step: Final comparison after rollback
2025-09-02 12:03:59,161 - INFO - Running in compare mode...
2025-09-02 12:03:59,162 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 12:03:59,162 - INFO - Connecting to databases...
2025-09-02 12:03:59,163 - INFO - Database connections successful
2025-09-02 12:03:59,164 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_final, stdin=None, shell=False, universal_newlines=False)
2025-09-02 12:03:59,167 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 12:03:59,167 - INFO - Initialized new git repository at test_output_final
2025-09-02 12:03:59,167 - DEBUG - Created directory: test_output_final/tables
2025-09-02 12:03:59,167 - DEBUG - Created directory: test_output_final/functions
2025-09-02 12:03:59,167 - DEBUG - Created directory: test_output_final/procedures
2025-09-02 12:03:59,167 - DEBUG - Created directory: test_output_final/triggers
2025-09-02 12:03:59,168 - DEBUG - Created directory: test_output_final/events
2025-09-02 12:03:59,168 - INFO - Initialized git repository at ./test_output_final
2025-09-02 12:03:59,168 - INFO - Extracting DDL objects...
2025-09-02 12:03:59,175 - INFO - Comparing schemas...
2025-09-02 12:03:59,175 - INFO - Performing safety analysis...
2025-09-02 12:03:59,175 - INFO - Generating migration SQL...
2025-09-02 12:03:59,195 - INFO - Generating schema visualizations...
2025-09-02 12:03:59,198 - INFO - Generated HTML documentation
2025-09-02 12:03:59,198 - INFO - Generated Mermaid ERD
2025-09-02 12:03:59,198 - INFO - Generated Graphviz DOT file
2025-09-02 12:03:59,199 - INFO - Generated JSON schema structure
2025-09-02 12:03:59,199 - INFO - Schema visualizations generated in test_output_final/documentation
2025-09-02 12:03:59,199 - INFO - Migration report generated: test_output_final/migration_report.md
2025-09-02 12:03:59,205 - INFO - Started tracking migration 156: ddl_test_source_to_ddl_test_dest_1756807439
2025-09-02 12:03:59,210 - INFO - Completed migration tracking 156: SUCCESS
2025-09-02 12:03:59,210 - INFO - Migration tracking completed: 156
2025-09-02 12:03:59,210 - INFO - Migration completed successfully!
2025-09-02 12:03:59,210 - INFO - Migration ID: 156
2025-09-02 12:03:59,210 - INFO - Operations: 6
2025-09-02 12:03:59,210 - INFO - Safety warnings: 0
2025-09-02 12:03:59,210 - INFO - Migration file: test_output_final/migration.sql
2025-09-02 12:03:59,210 - INFO - Rollback file: test_output_final/rollback.sql
2025-09-02 12:03:59,210 - INFO - Migration report: test_output_final/migration_report.md
2025-09-02 12:03:59,210 - INFO - ✅ Final comparison after rollback completed successfully
2025-09-02 12:03:59,210 - INFO - 🔍 Analyzing results in ./test_output_final...
2025-09-02 12:03:59,211 - INFO - 🔄 Comparing initial and final results...
2025-09-02 12:03:59,211 - INFO - ✅ Rollback test passed - initial and final states match!
2025-09-02 12:03:59,211 - INFO - 💾 Saving test data for reference...
2025-09-02 12:03:59,214 - INFO - ✅ Saved ./test_output to test_data/ddlw-test-20250902_120359/ddl-wizard-testsuite-initial-migration-20250902_120359
2025-09-02 12:03:59,217 - INFO - ✅ Saved ./test_output to test_data/ddlw-test-20250902_120359/test_output
2025-09-02 12:03:59,220 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddlw-test-20250902_120359/ddl-wizard-testsuite-post-migration-verification-20250902_120359
2025-09-02 12:03:59,223 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddlw-test-20250902_120359/test_output_post_migration
2025-09-02 12:03:59,227 - INFO - ✅ Saved ./test_output_final to test_data/ddlw-test-20250902_120359/ddl-wizard-testsuite-rollback-verification-20250902_120359
2025-09-02 12:03:59,230 - INFO - ✅ Saved ./test_output_final to test_data/ddlw-test-20250902_120359/test_output_final
2025-09-02 12:03:59,231 - INFO - ✅ Saved test log to test_data/ddlw-test-20250902_120359
2025-09-02 12:03:59,232 - INFO - 🧹 Cleaned up temporary directory: ./test_output
2025-09-02 12:03:59,233 - INFO - 🧹 Cleaned up temporary directory: ./test_output_post_migration
2025-09-02 12:03:59,235 - INFO - 🧹 Cleaned up temporary directory: ./test_output_final
2025-09-02 12:03:59,235 - INFO - 🧹 Cleaning up test databases...
2025-09-02 12:03:59,235 - INFO - ✅ Cleaned up database: ddl_test_source
2025-09-02 12:03:59,236 - INFO - ✅ Cleaned up database: ddl_test_dest
2025-09-02 12:07:05,306 - INFO - Generating schema visualizations...
2025-09-02 12:07:05,308 - INFO - Generated HTML documentation
2025-09-02 12:07:05,309 - INFO - Generated Mermaid ERD
2025-09-02 12:07:05,310 - INFO - Generated Graphviz DOT file
2025-09-02 12:07:05,311 - INFO - Generated JSON schema structure
2025-09-02 12:07:05,311 - INFO - Schema visualizations generated in ddl_output123/documentation
2025-09-02 12:07:05,312 - INFO - Migration report generated: ddl_output123/migration_report.md
2025-09-02 12:07:05,319 - INFO - Started tracking migration 157: ddl_test_source_to_ddl_test_dest_1756807625
2025-09-02 12:07:05,324 - INFO - Completed migration tracking 157: SUCCESS
2025-09-02 12:07:05,324 - INFO - Migration tracking completed: 157
2025-09-02 12:09:59,630 - INFO - 🏗️  Setting up source database...
2025-09-02 12:09:59,687 - INFO - ✅ Source database setup completed
2025-09-02 12:09:59,687 - INFO - 🏗️  Setting up destination database with differences...
2025-09-02 12:09:59,738 - INFO - ✅ Destination database setup completed
2025-09-02 12:09:59,739 - INFO - 📝 Populating test data...
2025-09-02 12:09:59,741 - INFO - ✅ Test data populated in ddl_test_source
2025-09-02 12:09:59,743 - INFO - ✅ Test data populated in ddl_test_dest
2025-09-02 12:09:59,743 - INFO - 🔍 Running comparison step: Initial comparison
2025-09-02 12:09:59,744 - INFO - Running in compare mode...
2025-09-02 12:09:59,744 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 12:09:59,744 - INFO - Connecting to databases...
2025-09-02 12:09:59,745 - INFO - Database connections successful
2025-09-02 12:09:59,745 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output, stdin=None, shell=False, universal_newlines=False)
2025-09-02 12:09:59,747 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 12:09:59,748 - INFO - Initialized new git repository at test_output
2025-09-02 12:09:59,748 - DEBUG - Created directory: test_output/tables
2025-09-02 12:09:59,748 - DEBUG - Created directory: test_output/functions
2025-09-02 12:09:59,748 - DEBUG - Created directory: test_output/procedures
2025-09-02 12:09:59,748 - DEBUG - Created directory: test_output/triggers
2025-09-02 12:09:59,748 - DEBUG - Created directory: test_output/events
2025-09-02 12:09:59,748 - INFO - Initialized git repository at ./test_output
2025-09-02 12:09:59,748 - INFO - Extracting DDL objects...
2025-09-02 12:09:59,756 - INFO - Comparing schemas...
2025-09-02 12:09:59,756 - INFO - Performing safety analysis...
2025-09-02 12:09:59,757 - INFO - Generating migration SQL...
2025-09-02 12:09:59,780 - INFO - Generating schema visualizations...
2025-09-02 12:09:59,783 - INFO - Generated HTML documentation
2025-09-02 12:09:59,783 - INFO - Generated Mermaid ERD
2025-09-02 12:09:59,783 - INFO - Generated Graphviz DOT file
2025-09-02 12:09:59,784 - INFO - Generated JSON schema structure
2025-09-02 12:09:59,784 - INFO - Schema visualizations generated in test_output/documentation
2025-09-02 12:09:59,784 - INFO - Migration report generated: test_output/migration_report.md
2025-09-02 12:09:59,790 - INFO - Started tracking migration 158: ddl_test_source_to_ddl_test_dest_1756807799
2025-09-02 12:09:59,794 - INFO - Completed migration tracking 158: SUCCESS
2025-09-02 12:09:59,794 - INFO - Migration tracking completed: 158
2025-09-02 12:09:59,795 - INFO - Migration completed successfully!
2025-09-02 12:09:59,795 - INFO - Migration ID: 158
2025-09-02 12:09:59,795 - INFO - Operations: 6
2025-09-02 12:09:59,795 - INFO - Safety warnings: 0
2025-09-02 12:09:59,795 - INFO - Migration file: test_output/migration.sql
2025-09-02 12:09:59,795 - INFO - Rollback file: test_output/rollback.sql
2025-09-02 12:09:59,795 - INFO - Migration report: test_output/migration_report.md
2025-09-02 12:09:59,795 - INFO - ✅ Initial comparison completed successfully
2025-09-02 12:09:59,795 - INFO - 🔍 Analyzing results in ./test_output...
2025-09-02 12:09:59,795 - INFO - 🔧 Executing SQL file: ./test_output/migration.sql
2025-09-02 12:09:59,796 - DEBUG - Executing statement 1/22: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 12:09:59,796 - DEBUG - Executing statement 2/22: DROP TABLE IF EXISTS `ddl_test_dest`.`temp_table`;...
2025-09-02 12:09:59,799 - DEBUG - Executing statement 3/22: ALTER TABLE `customers` DROP COLUMN `loyalty_points`;...
2025-09-02 12:09:59,804 - DEBUG - Executing statement 4/22: ALTER TABLE `customers` ADD KEY `idx_customers_country` (`country`);...
2025-09-02 12:09:59,810 - DEBUG - Executing statement 5/22: ALTER TABLE `customers` ADD KEY `idx_customers_city` (`city`);...
2025-09-02 12:09:59,816 - DEBUG - Executing statement 6/22: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;...
2025-09-02 12:09:59,817 - WARNING - ⚠️  SQL execution warning (statement 6): (1091, "Can't DROP INDEX `idx_customers_loyalty`; check that it exists")
2025-09-02 12:09:59,817 - WARNING - Statement: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;
2025-09-02 12:09:59,817 - DEBUG - Executing statement 7/22: ALTER TABLE `products` ADD COLUMN `weight` decimal(8,3) DEFAULT NULL;...
2025-09-02 12:09:59,821 - DEBUG - Executing statement 8/22: ALTER TABLE `products` ADD COLUMN `dimensions` varchar(100) DEFAULT NULL;...
2025-09-02 12:09:59,825 - DEBUG - Executing statement 9/22: ALTER TABLE `products` DROP COLUMN `old_column`;...
2025-09-02 12:09:59,831 - DEBUG - Executing statement 10/22: ALTER TABLE `products` ADD KEY `fk_products_category` (`category_id`);...
2025-09-02 12:09:59,837 - DEBUG - Executing statement 11/22: ALTER TABLE `products` ADD KEY `idx_products_sku` (`sku`);...
2025-09-02 12:09:59,843 - DEBUG - Executing statement 12/22: ALTER TABLE `products` ADD KEY `idx_products_stock` (`stock_quantity`);...
2025-09-02 12:09:59,848 - DEBUG - Executing statement 13/22: ALTER TABLE `products` ADD KEY `idx_products_active` (`is_active`);...
2025-09-02 12:09:59,854 - DEBUG - Executing statement 14/22: ALTER TABLE `products` ADD KEY `idx_products_price` (`price`);...
2025-09-02 12:09:59,860 - DEBUG - Executing statement 15/22: ALTER TABLE `products` DROP INDEX `idx_products_old`;...
2025-09-02 12:09:59,861 - WARNING - ⚠️  SQL execution warning (statement 15): (1091, "Can't DROP INDEX `idx_products_old`; check that it exists")
2025-09-02 12:09:59,861 - WARNING - Statement: ALTER TABLE `products` DROP INDEX `idx_products_old`;
2025-09-02 12:09:59,861 - DEBUG - Executing statement 16/22: ALTER TABLE `categories` ADD COLUMN `description` text DEFAULT NULL;...
2025-09-02 12:09:59,866 - DEBUG - Executing statement 17/22: ALTER TABLE `categories` ADD KEY `idx_categories_created` (`created_at`);...
2025-09-02 12:09:59,872 - DEBUG - Executing statement 18/22: DROP PROCEDURE IF EXISTS `ddl_test_dest`.`GetCustomerOrders`;...
2025-09-02 12:09:59,874 - DEBUG - Executing statement 19/22: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*, COU...
2025-09-02 12:09:59,875 - DEBUG - Executing statement 20/22: DROP FUNCTION IF EXISTS `ddl_test_dest`.`CalculateOrderTotal`;...
2025-09-02 12:09:59,876 - DEBUG - Executing statement 21/22: CREATE DEFINER=`sstuser`@`%` FUNCTION `CalculateOrderTotal`(order_id INT) RETURNS decimal(12,2)
READ...
2025-09-02 12:09:59,877 - DEBUG - Executing statement 22/22: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 12:09:59,877 - INFO - ✅ SQL file executed: 20 statements succeeded, 2 failed
2025-09-02 12:09:59,877 - INFO - 🔍 Checking if schemas are identical after migration...
2025-09-02 12:09:59,877 - INFO - 🔍 Running comparison step: Post-migration schema check
2025-09-02 12:09:59,878 - INFO - Running in compare mode...
2025-09-02 12:09:59,878 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 12:09:59,878 - INFO - Connecting to databases...
2025-09-02 12:09:59,879 - INFO - Database connections successful
2025-09-02 12:09:59,880 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_post_migration, stdin=None, shell=False, universal_newlines=False)
2025-09-02 12:09:59,882 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 12:09:59,883 - INFO - Initialized new git repository at test_output_post_migration
2025-09-02 12:09:59,883 - DEBUG - Created directory: test_output_post_migration/tables
2025-09-02 12:09:59,883 - DEBUG - Created directory: test_output_post_migration/functions
2025-09-02 12:09:59,883 - DEBUG - Created directory: test_output_post_migration/procedures
2025-09-02 12:09:59,883 - DEBUG - Created directory: test_output_post_migration/triggers
2025-09-02 12:09:59,883 - DEBUG - Created directory: test_output_post_migration/events
2025-09-02 12:09:59,883 - INFO - Initialized git repository at ./test_output_post_migration
2025-09-02 12:09:59,883 - INFO - Extracting DDL objects...
2025-09-02 12:09:59,889 - INFO - Comparing schemas...
2025-09-02 12:09:59,889 - INFO - Performing safety analysis...
2025-09-02 12:09:59,889 - INFO - Generating migration SQL...
2025-09-02 12:09:59,912 - INFO - Generating schema visualizations...
2025-09-02 12:09:59,914 - INFO - Generated HTML documentation
2025-09-02 12:09:59,914 - INFO - Generated Mermaid ERD
2025-09-02 12:09:59,914 - INFO - Generated Graphviz DOT file
2025-09-02 12:09:59,915 - INFO - Generated JSON schema structure
2025-09-02 12:09:59,915 - INFO - Schema visualizations generated in test_output_post_migration/documentation
2025-09-02 12:09:59,916 - INFO - Migration report generated: test_output_post_migration/migration_report.md
2025-09-02 12:09:59,922 - INFO - Started tracking migration 159: ddl_test_source_to_ddl_test_dest_1756807799
2025-09-02 12:09:59,926 - INFO - Completed migration tracking 159: SUCCESS
2025-09-02 12:09:59,926 - INFO - Migration tracking completed: 159
2025-09-02 12:09:59,926 - INFO - Migration completed successfully!
2025-09-02 12:09:59,926 - INFO - Migration ID: 159
2025-09-02 12:09:59,926 - INFO - Operations: 0
2025-09-02 12:09:59,926 - INFO - Safety warnings: 0
2025-09-02 12:09:59,926 - INFO - Migration file: test_output_post_migration/migration.sql
2025-09-02 12:09:59,926 - INFO - Rollback file: test_output_post_migration/rollback.sql
2025-09-02 12:09:59,926 - INFO - Migration report: test_output_post_migration/migration_report.md
2025-09-02 12:09:59,926 - INFO - ✅ Post-migration schema check completed successfully
2025-09-02 12:09:59,927 - INFO - ✅ Schemas are identical after migration!
2025-09-02 12:09:59,927 - INFO - 🔧 Executing SQL file: ./test_output/rollback.sql
2025-09-02 12:09:59,927 - DEBUG - Executing statement 1/21: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 12:09:59,928 - DEBUG - Executing statement 2/21: CREATE TABLE `temp_table` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`temp_data` varchar(255) DEFAULT N...
2025-09-02 12:09:59,931 - DEBUG - Executing statement 3/21: ALTER TABLE `customers` ADD COLUMN `loyalty_points` int(11) DEFAULT 0;...
2025-09-02 12:09:59,935 - DEBUG - Executing statement 4/21: ALTER TABLE `customers` DROP INDEX `idx_customers_country`;...
2025-09-02 12:09:59,939 - DEBUG - Executing statement 5/21: ALTER TABLE `customers` DROP INDEX `idx_customers_city`;...
2025-09-02 12:09:59,943 - DEBUG - Executing statement 6/21: ALTER TABLE `customers` ADD KEY `idx_customers_loyalty` (`loyalty_points`);...
2025-09-02 12:09:59,949 - DEBUG - Executing statement 7/21: ALTER TABLE `products` DROP COLUMN `weight`;...
2025-09-02 12:09:59,954 - DEBUG - Executing statement 8/21: ALTER TABLE `products` DROP COLUMN `dimensions`;...
2025-09-02 12:09:59,959 - DEBUG - Executing statement 9/21: ALTER TABLE `products` ADD COLUMN `old_column` varchar(50) DEFAULT NULL;...
2025-09-02 12:09:59,964 - DEBUG - Executing statement 10/21: ALTER TABLE `products` DROP INDEX `fk_products_category`;...
2025-09-02 12:09:59,969 - DEBUG - Executing statement 11/21: ALTER TABLE `products` DROP INDEX `idx_products_sku`;...
2025-09-02 12:09:59,973 - DEBUG - Executing statement 12/21: ALTER TABLE `products` DROP INDEX `idx_products_stock`;...
2025-09-02 12:09:59,977 - DEBUG - Executing statement 13/21: ALTER TABLE `products` DROP INDEX `idx_products_active`;...
2025-09-02 12:09:59,981 - DEBUG - Executing statement 14/21: ALTER TABLE `products` DROP INDEX `idx_products_price`;...
2025-09-02 12:09:59,985 - DEBUG - Executing statement 15/21: ALTER TABLE `products` ADD KEY `idx_products_old` (`old_column`);...
2025-09-02 12:09:59,990 - DEBUG - Executing statement 16/21: ALTER TABLE `categories` DROP COLUMN `description`;...
2025-09-02 12:09:59,995 - DEBUG - Executing statement 17/21: ALTER TABLE `categories` DROP INDEX `idx_categories_created`;...
2025-09-02 12:09:59,999 - DEBUG - Executing statement 18/21: DROP PROCEDURE IF EXISTS `GetCustomerOrders`;...
2025-09-02 12:10:00,001 - DEBUG - Executing statement 19/21: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*
FROM...
2025-09-02 12:10:00,002 - DEBUG - Executing statement 20/21: DROP FUNCTION IF EXISTS `CalculateOrderTotal`;...
2025-09-02 12:10:00,003 - DEBUG - Executing statement 21/21: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 12:10:00,004 - INFO - ✅ SQL file executed: 21 statements succeeded, 0 failed
2025-09-02 12:10:00,004 - INFO - 🔍 Running comparison step: Final comparison after rollback
2025-09-02 12:10:00,004 - INFO - Running in compare mode...
2025-09-02 12:10:00,005 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 12:10:00,005 - INFO - Connecting to databases...
2025-09-02 12:10:00,006 - INFO - Database connections successful
2025-09-02 12:10:00,006 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_final, stdin=None, shell=False, universal_newlines=False)
2025-09-02 12:10:00,008 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 12:10:00,008 - INFO - Initialized new git repository at test_output_final
2025-09-02 12:10:00,009 - DEBUG - Created directory: test_output_final/tables
2025-09-02 12:10:00,009 - DEBUG - Created directory: test_output_final/functions
2025-09-02 12:10:00,009 - DEBUG - Created directory: test_output_final/procedures
2025-09-02 12:10:00,009 - DEBUG - Created directory: test_output_final/triggers
2025-09-02 12:10:00,009 - DEBUG - Created directory: test_output_final/events
2025-09-02 12:10:00,009 - INFO - Initialized git repository at ./test_output_final
2025-09-02 12:10:00,009 - INFO - Extracting DDL objects...
2025-09-02 12:10:00,015 - INFO - Comparing schemas...
2025-09-02 12:10:00,015 - INFO - Performing safety analysis...
2025-09-02 12:10:00,015 - INFO - Generating migration SQL...
2025-09-02 12:10:00,038 - INFO - Generating schema visualizations...
2025-09-02 12:10:00,041 - INFO - Generated HTML documentation
2025-09-02 12:10:00,041 - INFO - Generated Mermaid ERD
2025-09-02 12:10:00,041 - INFO - Generated Graphviz DOT file
2025-09-02 12:10:00,042 - INFO - Generated JSON schema structure
2025-09-02 12:10:00,042 - INFO - Schema visualizations generated in test_output_final/documentation
2025-09-02 12:10:00,042 - INFO - Migration report generated: test_output_final/migration_report.md
2025-09-02 12:10:00,048 - INFO - Started tracking migration 160: ddl_test_source_to_ddl_test_dest_1756807800
2025-09-02 12:10:00,052 - INFO - Completed migration tracking 160: SUCCESS
2025-09-02 12:10:00,052 - INFO - Migration tracking completed: 160
2025-09-02 12:10:00,052 - INFO - Migration completed successfully!
2025-09-02 12:10:00,052 - INFO - Migration ID: 160
2025-09-02 12:10:00,052 - INFO - Operations: 6
2025-09-02 12:10:00,052 - INFO - Safety warnings: 0
2025-09-02 12:10:00,052 - INFO - Migration file: test_output_final/migration.sql
2025-09-02 12:10:00,052 - INFO - Rollback file: test_output_final/rollback.sql
2025-09-02 12:10:00,053 - INFO - Migration report: test_output_final/migration_report.md
2025-09-02 12:10:00,053 - INFO - ✅ Final comparison after rollback completed successfully
2025-09-02 12:10:00,053 - INFO - 🔍 Analyzing results in ./test_output_final...
2025-09-02 12:10:00,053 - INFO - 🔄 Comparing initial and final results...
2025-09-02 12:10:00,053 - INFO - ✅ Rollback test passed - initial and final states match!
2025-09-02 12:10:00,053 - INFO - 💾 Saving test data for reference...
2025-09-02 12:10:00,056 - INFO - ✅ Saved ./test_output to test_data/ddlw-test-20250902_121000/ddl-wizard-testsuite-initial-migration-20250902_121000
2025-09-02 12:10:00,059 - INFO - ✅ Saved ./test_output to test_data/ddlw-test-20250902_121000/test_output
2025-09-02 12:10:00,063 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddlw-test-20250902_121000/ddl-wizard-testsuite-post-migration-verification-20250902_121000
2025-09-02 12:10:00,066 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddlw-test-20250902_121000/test_output_post_migration
2025-09-02 12:10:00,069 - INFO - ✅ Saved ./test_output_final to test_data/ddlw-test-20250902_121000/ddl-wizard-testsuite-rollback-verification-20250902_121000
2025-09-02 12:10:00,072 - INFO - ✅ Saved ./test_output_final to test_data/ddlw-test-20250902_121000/test_output_final
2025-09-02 12:10:00,072 - INFO - ✅ Saved test log to test_data/ddlw-test-20250902_121000
2025-09-02 12:10:00,074 - INFO - 🧹 Cleaned up temporary directory: ./test_output
2025-09-02 12:10:00,075 - INFO - 🧹 Cleaned up temporary directory: ./test_output_post_migration
2025-09-02 12:10:00,076 - INFO - 🧹 Cleaned up temporary directory: ./test_output_final
2025-09-02 12:10:00,076 - INFO - 🧹 Cleaning up test databases...
2025-09-02 12:10:00,076 - INFO - ✅ Cleaned up database: ddl_test_source
2025-09-02 12:10:00,077 - INFO - ✅ Cleaned up database: ddl_test_dest
2025-09-02 12:11:46,274 - INFO - Connecting to databases...
2025-09-02 12:11:46,276 - INFO - Database connections successful
2025-09-02 12:11:46,278 - INFO - Initialized new git repository at /tmp/ddl_output123
2025-09-02 12:11:46,279 - INFO - Initialized git repository at /tmp/ddl_output123
2025-09-02 12:11:46,279 - INFO - Extracting DDL objects...
2025-09-02 12:11:46,285 - INFO - Comparing schemas...
2025-09-02 12:11:46,285 - INFO - Performing safety analysis...
2025-09-02 12:11:46,286 - INFO - Generating migration SQL...
2025-09-02 12:11:46,326 - INFO - Generating schema visualizations...
2025-09-02 12:11:46,329 - INFO - Generated HTML documentation
2025-09-02 12:11:46,329 - INFO - Generated Mermaid ERD
2025-09-02 12:11:46,330 - INFO - Generated Graphviz DOT file
2025-09-02 12:11:46,330 - INFO - Generated JSON schema structure
2025-09-02 12:11:46,330 - INFO - Schema visualizations generated in /tmp/ddl_output123/documentation
2025-09-02 12:11:46,331 - INFO - Migration report generated: /tmp/ddl_output123/migration_report.md
2025-09-02 12:11:46,337 - INFO - Started tracking migration 161: ddl_test_source_to_ddl_test_dest_1756807906
2025-09-02 12:11:46,341 - INFO - Completed migration tracking 161: SUCCESS
2025-09-02 12:11:46,342 - INFO - Migration tracking completed: 161
2025-09-02 12:12:25,928 - INFO - 🏗️  Setting up source database...
2025-09-02 12:12:25,987 - INFO - ✅ Source database setup completed
2025-09-02 12:12:25,987 - INFO - 🏗️  Setting up destination database with differences...
2025-09-02 12:12:26,041 - INFO - ✅ Destination database setup completed
2025-09-02 12:12:26,041 - INFO - 📝 Populating test data...
2025-09-02 12:12:26,043 - INFO - ✅ Test data populated in ddl_test_source
2025-09-02 12:12:26,045 - INFO - ✅ Test data populated in ddl_test_dest
2025-09-02 12:12:26,046 - INFO - 🔍 Running comparison step: Initial comparison
2025-09-02 12:12:26,046 - INFO - Running in compare mode...
2025-09-02 12:12:26,047 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 12:12:26,047 - INFO - Connecting to databases...
2025-09-02 12:12:26,048 - INFO - Database connections successful
2025-09-02 12:12:26,048 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output, stdin=None, shell=False, universal_newlines=False)
2025-09-02 12:12:26,050 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 12:12:26,051 - INFO - Initialized new git repository at test_output
2025-09-02 12:12:26,051 - DEBUG - Created directory: test_output/tables
2025-09-02 12:12:26,051 - DEBUG - Created directory: test_output/functions
2025-09-02 12:12:26,052 - DEBUG - Created directory: test_output/procedures
2025-09-02 12:12:26,052 - DEBUG - Created directory: test_output/triggers
2025-09-02 12:12:26,052 - DEBUG - Created directory: test_output/events
2025-09-02 12:12:26,052 - INFO - Initialized git repository at ./test_output
2025-09-02 12:12:26,052 - INFO - Extracting DDL objects...
2025-09-02 12:12:26,062 - INFO - Comparing schemas...
2025-09-02 12:12:26,062 - INFO - Performing safety analysis...
2025-09-02 12:12:26,062 - INFO - Generating migration SQL...
2025-09-02 12:12:26,090 - INFO - Generating schema visualizations...
2025-09-02 12:12:26,093 - INFO - Generated HTML documentation
2025-09-02 12:12:26,093 - INFO - Generated Mermaid ERD
2025-09-02 12:12:26,093 - INFO - Generated Graphviz DOT file
2025-09-02 12:12:26,094 - INFO - Generated JSON schema structure
2025-09-02 12:12:26,094 - INFO - Schema visualizations generated in test_output/documentation
2025-09-02 12:12:26,094 - INFO - Migration report generated: test_output/migration_report.md
2025-09-02 12:12:26,101 - INFO - Started tracking migration 162: ddl_test_source_to_ddl_test_dest_1756807946
2025-09-02 12:12:26,105 - INFO - Completed migration tracking 162: SUCCESS
2025-09-02 12:12:26,106 - INFO - Migration tracking completed: 162
2025-09-02 12:12:26,106 - INFO - Migration completed successfully!
2025-09-02 12:12:26,106 - INFO - Migration ID: 162
2025-09-02 12:12:26,106 - INFO - Operations: 6
2025-09-02 12:12:26,106 - INFO - Safety warnings: 0
2025-09-02 12:12:26,106 - INFO - Migration file: test_output/migration.sql
2025-09-02 12:12:26,106 - INFO - Rollback file: test_output/rollback.sql
2025-09-02 12:12:26,106 - INFO - Migration report: test_output/migration_report.md
2025-09-02 12:12:26,106 - INFO - ✅ Initial comparison completed successfully
2025-09-02 12:12:26,106 - INFO - 🔍 Analyzing results in ./test_output...
2025-09-02 12:12:26,107 - INFO - 🔧 Executing SQL file: ./test_output/migration.sql
2025-09-02 12:12:26,107 - DEBUG - Executing statement 1/27: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 12:12:26,108 - DEBUG - Executing statement 2/27: DROP TABLE IF EXISTS `ddl_test_dest`.`temp_table`;...
2025-09-02 12:12:26,111 - DEBUG - Executing statement 3/27: ALTER TABLE `categories` ADD COLUMN `description` text DEFAULT NULL;...
2025-09-02 12:12:26,115 - DEBUG - Executing statement 4/27: ALTER TABLE `categories` ADD KEY `idx_categories_created` (`created_at`);...
2025-09-02 12:12:26,121 - DEBUG - Executing statement 5/27: ALTER TABLE `customers` DROP COLUMN `loyalty_points`;...
2025-09-02 12:12:26,127 - DEBUG - Executing statement 6/27: ALTER TABLE `customers` ADD KEY `idx_customers_country` (`country`);...
2025-09-02 12:12:26,134 - DEBUG - Executing statement 7/27: ALTER TABLE `customers` ADD KEY `idx_customers_city` (`city`);...
2025-09-02 12:12:26,141 - DEBUG - Executing statement 8/27: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;...
2025-09-02 12:12:26,141 - WARNING - ⚠️  SQL execution warning (statement 8): (1091, "Can't DROP INDEX `idx_customers_loyalty`; check that it exists")
2025-09-02 12:12:26,141 - WARNING - Statement: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;
2025-09-02 12:12:26,141 - DEBUG - Executing statement 9/27: ALTER TABLE `products` ADD COLUMN `dimensions` varchar(100) DEFAULT NULL;...
2025-09-02 12:12:26,146 - DEBUG - Executing statement 10/27: ALTER TABLE `products` ADD COLUMN `weight` decimal(8,3) DEFAULT NULL;...
2025-09-02 12:12:26,150 - DEBUG - Executing statement 11/27: ALTER TABLE `products` DROP COLUMN `old_column`;...
2025-09-02 12:12:26,156 - DEBUG - Executing statement 12/27: ALTER TABLE `products` ADD KEY `idx_products_price` (`price`);...
2025-09-02 12:12:26,161 - DEBUG - Executing statement 13/27: ALTER TABLE `products` ADD KEY `fk_products_category` (`category_id`);...
2025-09-02 12:12:26,168 - DEBUG - Executing statement 14/27: ALTER TABLE `products` ADD KEY `idx_products_stock` (`stock_quantity`);...
2025-09-02 12:12:26,174 - DEBUG - Executing statement 15/27: ALTER TABLE `products` ADD KEY `idx_products_sku` (`sku`);...
2025-09-02 12:12:26,180 - DEBUG - Executing statement 16/27: ALTER TABLE `products` ADD KEY `idx_products_active` (`is_active`);...
2025-09-02 12:12:26,186 - DEBUG - Executing statement 17/27: ALTER TABLE `products` DROP INDEX `idx_products_old`;...
2025-09-02 12:12:26,186 - WARNING - ⚠️  SQL execution warning (statement 17): (1091, "Can't DROP INDEX `idx_products_old`; check that it exists")
2025-09-02 12:12:26,186 - WARNING - Statement: ALTER TABLE `products` DROP INDEX `idx_products_old`;
2025-09-02 12:12:26,186 - DEBUG - Executing statement 18/27: DROP PROCEDURE IF EXISTS `ddl_test_dest`.`GetCustomerOrders`;...
2025-09-02 12:12:26,188 - DEBUG - Executing statement 19/27: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*, COU...
2025-09-02 12:12:26,189 - DEBUG - Executing statement 20/27: DROP FUNCTION IF EXISTS `ddl_test_dest`.`CalculateOrderTotal`;...
2025-09-02 12:12:26,190 - DEBUG - Executing statement 21/27: CREATE DEFINER=`sstuser`@`%` FUNCTION `CalculateOrderTotal`(order_id INT) RETURNS decimal(12,2)
READ...
2025-09-02 12:12:26,191 - DEBUG - Executing statement 22/27: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_orders_update_timestamp`;...
2025-09-02 12:12:26,191 - DEBUG - Executing statement 23/27: CREATE DEFINER=`sstuser`@`%` TRIGGER tr_orders_update_timestamp
BEFORE UPDATE ON orders
FOR EACH ROW...
2025-09-02 12:12:26,194 - DEBUG - Executing statement 24/27: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_products_stock_check`;...
2025-09-02 12:12:26,194 - DEBUG - Executing statement 25/27: CREATE DEFINER=`sstuser`@`%` TRIGGER tr_products_stock_check
BEFORE UPDATE ON products
FOR EACH ROW
...
2025-09-02 12:12:26,197 - DEBUG - Executing statement 26/27: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_customers_loyalty_update`;...
2025-09-02 12:12:26,199 - DEBUG - Executing statement 27/27: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 12:12:26,199 - INFO - ✅ SQL file executed: 25 statements succeeded, 2 failed
2025-09-02 12:12:26,199 - INFO - 🔍 Checking if schemas are identical after migration...
2025-09-02 12:12:26,199 - INFO - 🔍 Running comparison step: Post-migration schema check
2025-09-02 12:12:26,200 - INFO - Running in compare mode...
2025-09-02 12:12:26,201 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 12:12:26,201 - INFO - Connecting to databases...
2025-09-02 12:12:26,203 - INFO - Database connections successful
2025-09-02 12:12:26,204 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_post_migration, stdin=None, shell=False, universal_newlines=False)
2025-09-02 12:12:26,208 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 12:12:26,209 - INFO - Initialized new git repository at test_output_post_migration
2025-09-02 12:12:26,209 - DEBUG - Created directory: test_output_post_migration/tables
2025-09-02 12:12:26,209 - DEBUG - Created directory: test_output_post_migration/functions
2025-09-02 12:12:26,209 - DEBUG - Created directory: test_output_post_migration/procedures
2025-09-02 12:12:26,209 - DEBUG - Created directory: test_output_post_migration/triggers
2025-09-02 12:12:26,209 - DEBUG - Created directory: test_output_post_migration/events
2025-09-02 12:12:26,209 - INFO - Initialized git repository at ./test_output_post_migration
2025-09-02 12:12:26,209 - INFO - Extracting DDL objects...
2025-09-02 12:12:26,217 - INFO - Comparing schemas...
2025-09-02 12:12:26,217 - INFO - Performing safety analysis...
2025-09-02 12:12:26,217 - INFO - Generating migration SQL...
2025-09-02 12:12:26,251 - INFO - Generating schema visualizations...
2025-09-02 12:12:26,255 - INFO - Generated HTML documentation
2025-09-02 12:12:26,255 - INFO - Generated Mermaid ERD
2025-09-02 12:12:26,255 - INFO - Generated Graphviz DOT file
2025-09-02 12:12:26,256 - INFO - Generated JSON schema structure
2025-09-02 12:12:26,256 - INFO - Schema visualizations generated in test_output_post_migration/documentation
2025-09-02 12:12:26,256 - INFO - Migration report generated: test_output_post_migration/migration_report.md
2025-09-02 12:12:26,262 - INFO - Started tracking migration 163: ddl_test_source_to_ddl_test_dest_1756807946
2025-09-02 12:12:26,268 - INFO - Completed migration tracking 163: SUCCESS
2025-09-02 12:12:26,268 - INFO - Migration tracking completed: 163
2025-09-02 12:12:26,268 - INFO - Migration completed successfully!
2025-09-02 12:12:26,268 - INFO - Migration ID: 163
2025-09-02 12:12:26,268 - INFO - Operations: 0
2025-09-02 12:12:26,268 - INFO - Safety warnings: 0
2025-09-02 12:12:26,269 - INFO - Migration file: test_output_post_migration/migration.sql
2025-09-02 12:12:26,269 - INFO - Rollback file: test_output_post_migration/rollback.sql
2025-09-02 12:12:26,269 - INFO - Migration report: test_output_post_migration/migration_report.md
2025-09-02 12:12:26,269 - INFO - ✅ Post-migration schema check completed successfully
2025-09-02 12:12:26,269 - INFO - ✅ Schemas are identical after migration!
2025-09-02 12:12:26,269 - INFO - 🔧 Executing SQL file: ./test_output/rollback.sql
2025-09-02 12:12:26,270 - DEBUG - Executing statement 1/21: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 12:12:26,270 - DEBUG - Executing statement 2/21: CREATE TABLE `temp_table` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`temp_data` varchar(255) DEFAULT N...
2025-09-02 12:12:26,274 - DEBUG - Executing statement 3/21: ALTER TABLE `categories` DROP COLUMN `description`;...
2025-09-02 12:12:26,279 - DEBUG - Executing statement 4/21: ALTER TABLE `categories` DROP INDEX `idx_categories_created`;...
2025-09-02 12:12:26,284 - DEBUG - Executing statement 5/21: ALTER TABLE `customers` ADD COLUMN `loyalty_points` int(11) DEFAULT 0;...
2025-09-02 12:12:26,289 - DEBUG - Executing statement 6/21: ALTER TABLE `customers` DROP INDEX `idx_customers_country`;...
2025-09-02 12:12:26,293 - DEBUG - Executing statement 7/21: ALTER TABLE `customers` DROP INDEX `idx_customers_city`;...
2025-09-02 12:12:26,298 - DEBUG - Executing statement 8/21: ALTER TABLE `customers` ADD KEY `idx_customers_loyalty` (`loyalty_points`);...
2025-09-02 12:12:26,304 - DEBUG - Executing statement 9/21: ALTER TABLE `products` DROP COLUMN `dimensions`;...
2025-09-02 12:12:26,309 - DEBUG - Executing statement 10/21: ALTER TABLE `products` DROP COLUMN `weight`;...
2025-09-02 12:12:26,314 - DEBUG - Executing statement 11/21: ALTER TABLE `products` ADD COLUMN `old_column` varchar(50) DEFAULT NULL;...
2025-09-02 12:12:26,319 - DEBUG - Executing statement 12/21: ALTER TABLE `products` DROP INDEX `idx_products_price`;...
2025-09-02 12:12:26,323 - DEBUG - Executing statement 13/21: ALTER TABLE `products` DROP INDEX `fk_products_category`;...
2025-09-02 12:12:26,327 - DEBUG - Executing statement 14/21: ALTER TABLE `products` DROP INDEX `idx_products_stock`;...
2025-09-02 12:12:26,332 - DEBUG - Executing statement 15/21: ALTER TABLE `products` DROP INDEX `idx_products_sku`;...
2025-09-02 12:12:26,337 - DEBUG - Executing statement 16/21: ALTER TABLE `products` DROP INDEX `idx_products_active`;...
2025-09-02 12:12:26,342 - DEBUG - Executing statement 17/21: ALTER TABLE `products` ADD KEY `idx_products_old` (`old_column`);...
2025-09-02 12:12:26,347 - DEBUG - Executing statement 18/21: DROP PROCEDURE IF EXISTS `GetCustomerOrders`;...
2025-09-02 12:12:26,348 - DEBUG - Executing statement 19/21: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*
FROM...
2025-09-02 12:12:26,350 - DEBUG - Executing statement 20/21: DROP FUNCTION IF EXISTS `CalculateOrderTotal`;...
2025-09-02 12:12:26,351 - DEBUG - Executing statement 21/21: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 12:12:26,351 - INFO - ✅ SQL file executed: 21 statements succeeded, 0 failed
2025-09-02 12:12:26,351 - INFO - 🔍 Running comparison step: Final comparison after rollback
2025-09-02 12:12:26,352 - INFO - Running in compare mode...
2025-09-02 12:12:26,353 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 12:12:26,353 - INFO - Connecting to databases...
2025-09-02 12:12:26,354 - INFO - Database connections successful
2025-09-02 12:12:26,354 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_final, stdin=None, shell=False, universal_newlines=False)
2025-09-02 12:12:26,357 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 12:12:26,357 - INFO - Initialized new git repository at test_output_final
2025-09-02 12:12:26,358 - DEBUG - Created directory: test_output_final/tables
2025-09-02 12:12:26,358 - DEBUG - Created directory: test_output_final/functions
2025-09-02 12:12:26,358 - DEBUG - Created directory: test_output_final/procedures
2025-09-02 12:12:26,358 - DEBUG - Created directory: test_output_final/triggers
2025-09-02 12:12:26,358 - DEBUG - Created directory: test_output_final/events
2025-09-02 12:12:26,358 - INFO - Initialized git repository at ./test_output_final
2025-09-02 12:12:26,358 - INFO - Extracting DDL objects...
2025-09-02 12:12:26,365 - INFO - Comparing schemas...
2025-09-02 12:12:26,365 - INFO - Performing safety analysis...
2025-09-02 12:12:26,365 - INFO - Generating migration SQL...
2025-09-02 12:12:26,390 - INFO - Generating schema visualizations...
2025-09-02 12:12:26,393 - INFO - Generated HTML documentation
2025-09-02 12:12:26,393 - INFO - Generated Mermaid ERD
2025-09-02 12:12:26,393 - INFO - Generated Graphviz DOT file
2025-09-02 12:12:26,394 - INFO - Generated JSON schema structure
2025-09-02 12:12:26,394 - INFO - Schema visualizations generated in test_output_final/documentation
2025-09-02 12:12:26,394 - INFO - Migration report generated: test_output_final/migration_report.md
2025-09-02 12:12:26,398 - INFO - Started tracking migration 164: ddl_test_source_to_ddl_test_dest_1756807946
2025-09-02 12:12:26,402 - INFO - Completed migration tracking 164: SUCCESS
2025-09-02 12:12:26,402 - INFO - Migration tracking completed: 164
2025-09-02 12:12:26,402 - INFO - Migration completed successfully!
2025-09-02 12:12:26,403 - INFO - Migration ID: 164
2025-09-02 12:12:26,403 - INFO - Operations: 6
2025-09-02 12:12:26,403 - INFO - Safety warnings: 0
2025-09-02 12:12:26,403 - INFO - Migration file: test_output_final/migration.sql
2025-09-02 12:12:26,403 - INFO - Rollback file: test_output_final/rollback.sql
2025-09-02 12:12:26,403 - INFO - Migration report: test_output_final/migration_report.md
2025-09-02 12:12:26,403 - INFO - ✅ Final comparison after rollback completed successfully
2025-09-02 12:12:26,403 - INFO - 🔍 Analyzing results in ./test_output_final...
2025-09-02 12:12:26,403 - INFO - 🔄 Comparing initial and final results...
2025-09-02 12:12:26,403 - INFO - ✅ Rollback test passed - initial and final states match!
2025-09-02 12:12:26,403 - INFO - 💾 Saving test data for reference...
2025-09-02 12:12:26,408 - INFO - ✅ Saved ./test_output to test_data/ddlw-test-20250902_121226/ddl-wizard-testsuite-initial-migration-20250902_121226
2025-09-02 12:12:26,411 - INFO - ✅ Saved ./test_output to test_data/ddlw-test-20250902_121226/test_output
2025-09-02 12:12:26,414 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddlw-test-20250902_121226/ddl-wizard-testsuite-post-migration-verification-20250902_121226
2025-09-02 12:12:26,417 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddlw-test-20250902_121226/test_output_post_migration
2025-09-02 12:12:26,421 - INFO - ✅ Saved ./test_output_final to test_data/ddlw-test-20250902_121226/ddl-wizard-testsuite-rollback-verification-20250902_121226
2025-09-02 12:12:26,425 - INFO - ✅ Saved ./test_output_final to test_data/ddlw-test-20250902_121226/test_output_final
2025-09-02 12:12:26,425 - INFO - ✅ Saved test log to test_data/ddlw-test-20250902_121226
2025-09-02 12:12:26,427 - INFO - 🧹 Cleaned up temporary directory: ./test_output
2025-09-02 12:12:26,428 - INFO - 🧹 Cleaned up temporary directory: ./test_output_post_migration
2025-09-02 12:12:26,429 - INFO - 🧹 Cleaned up temporary directory: ./test_output_final
2025-09-02 12:12:26,429 - INFO - 🧹 Cleaning up test databases...
2025-09-02 12:12:26,429 - INFO - ✅ Cleaned up database: ddl_test_source
2025-09-02 12:12:26,430 - INFO - ✅ Cleaned up database: ddl_test_dest
2025-09-02 12:12:44,335 - INFO - 🏗️  Setting up source database...
2025-09-02 12:12:44,395 - INFO - ✅ Source database setup completed
2025-09-02 12:12:44,396 - INFO - 🏗️  Setting up destination database with differences...
2025-09-02 12:12:44,446 - INFO - ✅ Destination database setup completed
2025-09-02 12:12:44,447 - INFO - 📝 Populating test data...
2025-09-02 12:12:44,449 - INFO - ✅ Test data populated in ddl_test_source
2025-09-02 12:12:44,452 - INFO - ✅ Test data populated in ddl_test_dest
2025-09-02 12:12:44,452 - INFO - 🔍 Running comparison step: Initial comparison
2025-09-02 12:12:44,453 - INFO - Running in compare mode...
2025-09-02 12:12:44,454 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 12:12:44,454 - INFO - Connecting to databases...
2025-09-02 12:12:44,455 - INFO - Database connections successful
2025-09-02 12:12:44,456 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output, stdin=None, shell=False, universal_newlines=False)
2025-09-02 12:12:44,459 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 12:12:44,460 - INFO - Initialized new git repository at test_output
2025-09-02 12:12:44,460 - DEBUG - Created directory: test_output/tables
2025-09-02 12:12:44,460 - DEBUG - Created directory: test_output/functions
2025-09-02 12:12:44,460 - DEBUG - Created directory: test_output/procedures
2025-09-02 12:12:44,460 - DEBUG - Created directory: test_output/triggers
2025-09-02 12:12:44,460 - DEBUG - Created directory: test_output/events
2025-09-02 12:12:44,460 - INFO - Initialized git repository at ./test_output
2025-09-02 12:12:44,460 - INFO - Extracting DDL objects...
2025-09-02 12:12:44,468 - INFO - Comparing schemas...
2025-09-02 12:12:44,468 - INFO - Performing safety analysis...
2025-09-02 12:12:44,468 - INFO - Generating migration SQL...
2025-09-02 12:12:44,493 - INFO - Generating schema visualizations...
2025-09-02 12:12:44,497 - INFO - Generated HTML documentation
2025-09-02 12:12:44,497 - INFO - Generated Mermaid ERD
2025-09-02 12:12:44,497 - INFO - Generated Graphviz DOT file
2025-09-02 12:12:44,498 - INFO - Generated JSON schema structure
2025-09-02 12:12:44,498 - INFO - Schema visualizations generated in test_output/documentation
2025-09-02 12:12:44,498 - INFO - Migration report generated: test_output/migration_report.md
2025-09-02 12:12:44,502 - INFO - Started tracking migration 165: ddl_test_source_to_ddl_test_dest_1756807964
2025-09-02 12:12:44,507 - INFO - Completed migration tracking 165: SUCCESS
2025-09-02 12:12:44,507 - INFO - Migration tracking completed: 165
2025-09-02 12:12:44,507 - INFO - Migration completed successfully!
2025-09-02 12:12:44,507 - INFO - Migration ID: 165
2025-09-02 12:12:44,507 - INFO - Operations: 6
2025-09-02 12:12:44,507 - INFO - Safety warnings: 0
2025-09-02 12:12:44,507 - INFO - Migration file: test_output/migration.sql
2025-09-02 12:12:44,507 - INFO - Rollback file: test_output/rollback.sql
2025-09-02 12:12:44,507 - INFO - Migration report: test_output/migration_report.md
2025-09-02 12:12:44,507 - INFO - ✅ Initial comparison completed successfully
2025-09-02 12:12:44,507 - INFO - 🔍 Analyzing results in ./test_output...
2025-09-02 12:12:44,507 - INFO - 🔧 Executing SQL file: ./test_output/migration.sql
2025-09-02 12:12:44,508 - DEBUG - Executing statement 1/27: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 12:12:44,508 - DEBUG - Executing statement 2/27: DROP TABLE IF EXISTS `ddl_test_dest`.`temp_table`;...
2025-09-02 12:12:44,511 - DEBUG - Executing statement 3/27: ALTER TABLE `products` ADD COLUMN `weight` decimal(8,3) DEFAULT NULL;...
2025-09-02 12:12:44,515 - DEBUG - Executing statement 4/27: ALTER TABLE `products` ADD COLUMN `dimensions` varchar(100) DEFAULT NULL;...
2025-09-02 12:12:44,519 - DEBUG - Executing statement 5/27: ALTER TABLE `products` DROP COLUMN `old_column`;...
2025-09-02 12:12:44,525 - DEBUG - Executing statement 6/27: ALTER TABLE `products` ADD KEY `fk_products_category` (`category_id`);...
2025-09-02 12:12:44,531 - DEBUG - Executing statement 7/27: ALTER TABLE `products` ADD KEY `idx_products_price` (`price`);...
2025-09-02 12:12:44,536 - DEBUG - Executing statement 8/27: ALTER TABLE `products` ADD KEY `idx_products_active` (`is_active`);...
2025-09-02 12:12:44,542 - DEBUG - Executing statement 9/27: ALTER TABLE `products` ADD KEY `idx_products_stock` (`stock_quantity`);...
2025-09-02 12:12:44,547 - DEBUG - Executing statement 10/27: ALTER TABLE `products` ADD KEY `idx_products_sku` (`sku`);...
2025-09-02 12:12:44,554 - DEBUG - Executing statement 11/27: ALTER TABLE `products` DROP INDEX `idx_products_old`;...
2025-09-02 12:12:44,554 - WARNING - ⚠️  SQL execution warning (statement 11): (1091, "Can't DROP INDEX `idx_products_old`; check that it exists")
2025-09-02 12:12:44,554 - WARNING - Statement: ALTER TABLE `products` DROP INDEX `idx_products_old`;
2025-09-02 12:12:44,554 - DEBUG - Executing statement 12/27: ALTER TABLE `categories` ADD COLUMN `description` text DEFAULT NULL;...
2025-09-02 12:12:44,559 - DEBUG - Executing statement 13/27: ALTER TABLE `categories` ADD KEY `idx_categories_created` (`created_at`);...
2025-09-02 12:12:44,565 - DEBUG - Executing statement 14/27: ALTER TABLE `customers` DROP COLUMN `loyalty_points`;...
2025-09-02 12:12:44,569 - DEBUG - Executing statement 15/27: ALTER TABLE `customers` ADD KEY `idx_customers_country` (`country`);...
2025-09-02 12:12:44,576 - DEBUG - Executing statement 16/27: ALTER TABLE `customers` ADD KEY `idx_customers_city` (`city`);...
2025-09-02 12:12:44,582 - DEBUG - Executing statement 17/27: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;...
2025-09-02 12:12:44,582 - WARNING - ⚠️  SQL execution warning (statement 17): (1091, "Can't DROP INDEX `idx_customers_loyalty`; check that it exists")
2025-09-02 12:12:44,582 - WARNING - Statement: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;
2025-09-02 12:12:44,582 - DEBUG - Executing statement 18/27: DROP PROCEDURE IF EXISTS `ddl_test_dest`.`GetCustomerOrders`;...
2025-09-02 12:12:44,584 - DEBUG - Executing statement 19/27: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*, COU...
2025-09-02 12:12:44,585 - DEBUG - Executing statement 20/27: DROP FUNCTION IF EXISTS `ddl_test_dest`.`CalculateOrderTotal`;...
2025-09-02 12:12:44,585 - DEBUG - Executing statement 21/27: CREATE DEFINER=`sstuser`@`%` FUNCTION `CalculateOrderTotal`(order_id INT) RETURNS decimal(12,2)
READ...
2025-09-02 12:12:44,587 - DEBUG - Executing statement 22/27: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_products_stock_check`;...
2025-09-02 12:12:44,587 - DEBUG - Executing statement 23/27: CREATE DEFINER=`sstuser`@`%` TRIGGER tr_products_stock_check
BEFORE UPDATE ON products
FOR EACH ROW
...
2025-09-02 12:12:44,590 - DEBUG - Executing statement 24/27: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_orders_update_timestamp`;...
2025-09-02 12:12:44,590 - DEBUG - Executing statement 25/27: CREATE DEFINER=`sstuser`@`%` TRIGGER tr_orders_update_timestamp
BEFORE UPDATE ON orders
FOR EACH ROW...
2025-09-02 12:12:44,593 - DEBUG - Executing statement 26/27: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_customers_loyalty_update`;...
2025-09-02 12:12:44,595 - DEBUG - Executing statement 27/27: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 12:12:44,595 - INFO - ✅ SQL file executed: 25 statements succeeded, 2 failed
2025-09-02 12:12:44,595 - INFO - 🔍 Checking if schemas are identical after migration...
2025-09-02 12:12:44,595 - INFO - 🔍 Running comparison step: Post-migration schema check
2025-09-02 12:12:44,596 - INFO - Running in compare mode...
2025-09-02 12:12:44,596 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 12:12:44,596 - INFO - Connecting to databases...
2025-09-02 12:12:44,597 - INFO - Database connections successful
2025-09-02 12:12:44,597 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_post_migration, stdin=None, shell=False, universal_newlines=False)
2025-09-02 12:12:44,600 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 12:12:44,600 - INFO - Initialized new git repository at test_output_post_migration
2025-09-02 12:12:44,600 - DEBUG - Created directory: test_output_post_migration/tables
2025-09-02 12:12:44,600 - DEBUG - Created directory: test_output_post_migration/functions
2025-09-02 12:12:44,600 - DEBUG - Created directory: test_output_post_migration/procedures
2025-09-02 12:12:44,601 - DEBUG - Created directory: test_output_post_migration/triggers
2025-09-02 12:12:44,601 - DEBUG - Created directory: test_output_post_migration/events
2025-09-02 12:12:44,601 - INFO - Initialized git repository at ./test_output_post_migration
2025-09-02 12:12:44,601 - INFO - Extracting DDL objects...
2025-09-02 12:12:44,606 - INFO - Comparing schemas...
2025-09-02 12:12:44,607 - INFO - Performing safety analysis...
2025-09-02 12:12:44,607 - INFO - Generating migration SQL...
2025-09-02 12:12:44,632 - INFO - Generating schema visualizations...
2025-09-02 12:12:44,635 - INFO - Generated HTML documentation
2025-09-02 12:12:44,635 - INFO - Generated Mermaid ERD
2025-09-02 12:12:44,635 - INFO - Generated Graphviz DOT file
2025-09-02 12:12:44,636 - INFO - Generated JSON schema structure
2025-09-02 12:12:44,636 - INFO - Schema visualizations generated in test_output_post_migration/documentation
2025-09-02 12:12:44,636 - INFO - Migration report generated: test_output_post_migration/migration_report.md
2025-09-02 12:12:44,642 - INFO - Started tracking migration 166: ddl_test_source_to_ddl_test_dest_1756807964
2025-09-02 12:12:44,646 - INFO - Completed migration tracking 166: SUCCESS
2025-09-02 12:12:44,646 - INFO - Migration tracking completed: 166
2025-09-02 12:12:44,646 - INFO - Migration completed successfully!
2025-09-02 12:12:44,646 - INFO - Migration ID: 166
2025-09-02 12:12:44,646 - INFO - Operations: 0
2025-09-02 12:12:44,646 - INFO - Safety warnings: 0
2025-09-02 12:12:44,647 - INFO - Migration file: test_output_post_migration/migration.sql
2025-09-02 12:12:44,647 - INFO - Rollback file: test_output_post_migration/rollback.sql
2025-09-02 12:12:44,647 - INFO - Migration report: test_output_post_migration/migration_report.md
2025-09-02 12:12:44,647 - INFO - ✅ Post-migration schema check completed successfully
2025-09-02 12:12:44,647 - INFO - ✅ Schemas are identical after migration!
2025-09-02 12:12:44,647 - INFO - 🔧 Executing SQL file: ./test_output/rollback.sql
2025-09-02 12:12:44,648 - DEBUG - Executing statement 1/21: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 12:12:44,648 - DEBUG - Executing statement 2/21: CREATE TABLE `temp_table` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`temp_data` varchar(255) DEFAULT N...
2025-09-02 12:12:44,651 - DEBUG - Executing statement 3/21: ALTER TABLE `products` DROP COLUMN `weight`;...
2025-09-02 12:12:44,657 - DEBUG - Executing statement 4/21: ALTER TABLE `products` DROP COLUMN `dimensions`;...
2025-09-02 12:12:44,662 - DEBUG - Executing statement 5/21: ALTER TABLE `products` ADD COLUMN `old_column` varchar(50) DEFAULT NULL;...
2025-09-02 12:12:44,667 - DEBUG - Executing statement 6/21: ALTER TABLE `products` DROP INDEX `fk_products_category`;...
2025-09-02 12:12:44,671 - DEBUG - Executing statement 7/21: ALTER TABLE `products` DROP INDEX `idx_products_price`;...
2025-09-02 12:12:44,675 - DEBUG - Executing statement 8/21: ALTER TABLE `products` DROP INDEX `idx_products_active`;...
2025-09-02 12:12:44,680 - DEBUG - Executing statement 9/21: ALTER TABLE `products` DROP INDEX `idx_products_stock`;...
2025-09-02 12:12:44,684 - DEBUG - Executing statement 10/21: ALTER TABLE `products` DROP INDEX `idx_products_sku`;...
2025-09-02 12:12:44,689 - DEBUG - Executing statement 11/21: ALTER TABLE `products` ADD KEY `idx_products_old` (`old_column`);...
2025-09-02 12:12:44,694 - DEBUG - Executing statement 12/21: ALTER TABLE `categories` DROP COLUMN `description`;...
2025-09-02 12:12:44,699 - DEBUG - Executing statement 13/21: ALTER TABLE `categories` DROP INDEX `idx_categories_created`;...
2025-09-02 12:12:44,703 - DEBUG - Executing statement 14/21: ALTER TABLE `customers` ADD COLUMN `loyalty_points` int(11) DEFAULT 0;...
2025-09-02 12:12:44,708 - DEBUG - Executing statement 15/21: ALTER TABLE `customers` DROP INDEX `idx_customers_country`;...
2025-09-02 12:12:44,712 - DEBUG - Executing statement 16/21: ALTER TABLE `customers` DROP INDEX `idx_customers_city`;...
2025-09-02 12:12:44,717 - DEBUG - Executing statement 17/21: ALTER TABLE `customers` ADD KEY `idx_customers_loyalty` (`loyalty_points`);...
2025-09-02 12:12:44,723 - DEBUG - Executing statement 18/21: DROP PROCEDURE IF EXISTS `GetCustomerOrders`;...
2025-09-02 12:12:44,725 - DEBUG - Executing statement 19/21: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*
FROM...
2025-09-02 12:12:44,727 - DEBUG - Executing statement 20/21: DROP FUNCTION IF EXISTS `CalculateOrderTotal`;...
2025-09-02 12:12:44,728 - DEBUG - Executing statement 21/21: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 12:12:44,728 - INFO - ✅ SQL file executed: 21 statements succeeded, 0 failed
2025-09-02 12:12:44,728 - INFO - 🔍 Running comparison step: Final comparison after rollback
2025-09-02 12:12:44,729 - INFO - Running in compare mode...
2025-09-02 12:12:44,729 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 12:12:44,729 - INFO - Connecting to databases...
2025-09-02 12:12:44,730 - INFO - Database connections successful
2025-09-02 12:12:44,731 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_final, stdin=None, shell=False, universal_newlines=False)
2025-09-02 12:12:44,733 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 12:12:44,733 - INFO - Initialized new git repository at test_output_final
2025-09-02 12:12:44,734 - DEBUG - Created directory: test_output_final/tables
2025-09-02 12:12:44,734 - DEBUG - Created directory: test_output_final/functions
2025-09-02 12:12:44,734 - DEBUG - Created directory: test_output_final/procedures
2025-09-02 12:12:44,734 - DEBUG - Created directory: test_output_final/triggers
2025-09-02 12:12:44,734 - DEBUG - Created directory: test_output_final/events
2025-09-02 12:12:44,734 - INFO - Initialized git repository at ./test_output_final
2025-09-02 12:12:44,734 - INFO - Extracting DDL objects...
2025-09-02 12:12:44,740 - INFO - Comparing schemas...
2025-09-02 12:12:44,740 - INFO - Performing safety analysis...
2025-09-02 12:12:44,740 - INFO - Generating migration SQL...
2025-09-02 12:12:44,764 - INFO - Generating schema visualizations...
2025-09-02 12:12:44,766 - INFO - Generated HTML documentation
2025-09-02 12:12:44,766 - INFO - Generated Mermaid ERD
2025-09-02 12:12:44,766 - INFO - Generated Graphviz DOT file
2025-09-02 12:12:44,767 - INFO - Generated JSON schema structure
2025-09-02 12:12:44,767 - INFO - Schema visualizations generated in test_output_final/documentation
2025-09-02 12:12:44,767 - INFO - Migration report generated: test_output_final/migration_report.md
2025-09-02 12:12:44,772 - INFO - Started tracking migration 167: ddl_test_source_to_ddl_test_dest_1756807964
2025-09-02 12:12:44,776 - INFO - Completed migration tracking 167: SUCCESS
2025-09-02 12:12:44,776 - INFO - Migration tracking completed: 167
2025-09-02 12:12:44,776 - INFO - Migration completed successfully!
2025-09-02 12:12:44,776 - INFO - Migration ID: 167
2025-09-02 12:12:44,776 - INFO - Operations: 6
2025-09-02 12:12:44,776 - INFO - Safety warnings: 0
2025-09-02 12:12:44,776 - INFO - Migration file: test_output_final/migration.sql
2025-09-02 12:12:44,776 - INFO - Rollback file: test_output_final/rollback.sql
2025-09-02 12:12:44,776 - INFO - Migration report: test_output_final/migration_report.md
2025-09-02 12:12:44,777 - INFO - ✅ Final comparison after rollback completed successfully
2025-09-02 12:12:44,777 - INFO - 🔍 Analyzing results in ./test_output_final...
2025-09-02 12:12:44,777 - INFO - 🔄 Comparing initial and final results...
2025-09-02 12:12:44,777 - INFO - ✅ Rollback test passed - initial and final states match!
2025-09-02 12:12:44,777 - INFO - 💾 Saving test data for reference...
2025-09-02 12:12:44,780 - INFO - ✅ Saved ./test_output to test_data/ddlw-test-20250902_121244/ddl-wizard-testsuite-initial-migration-20250902_121244
2025-09-02 12:12:44,784 - INFO - ✅ Saved ./test_output to test_data/ddlw-test-20250902_121244/test_output
2025-09-02 12:12:44,788 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddlw-test-20250902_121244/ddl-wizard-testsuite-post-migration-verification-20250902_121244
2025-09-02 12:12:44,792 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddlw-test-20250902_121244/test_output_post_migration
2025-09-02 12:12:44,796 - INFO - ✅ Saved ./test_output_final to test_data/ddlw-test-20250902_121244/ddl-wizard-testsuite-rollback-verification-20250902_121244
2025-09-02 12:12:44,800 - INFO - ✅ Saved ./test_output_final to test_data/ddlw-test-20250902_121244/test_output_final
2025-09-02 12:12:44,800 - INFO - ✅ Saved test log to test_data/ddlw-test-20250902_121244
2025-09-02 12:12:44,802 - INFO - 🧹 Cleaned up temporary directory: ./test_output
2025-09-02 12:12:44,803 - INFO - 🧹 Cleaned up temporary directory: ./test_output_post_migration
2025-09-02 12:12:44,804 - INFO - 🧹 Cleaned up temporary directory: ./test_output_final
2025-09-02 12:12:44,805 - INFO - 🧹 Cleaning up test databases...
2025-09-02 12:12:44,805 - INFO - ✅ Cleaned up database: ddl_test_source
2025-09-02 12:12:44,806 - INFO - ✅ Cleaned up database: ddl_test_dest
2025-09-02 12:26:33,168 - INFO - 🏗️  Setting up source database...
2025-09-02 12:26:33,227 - INFO - ✅ Source database setup completed
2025-09-02 12:26:33,227 - INFO - 🏗️  Setting up destination database with differences...
2025-09-02 12:26:33,278 - INFO - ✅ Destination database setup completed
2025-09-02 12:26:33,278 - INFO - 📝 Populating test data...
2025-09-02 12:26:33,281 - INFO - ✅ Test data populated in ddl_test_source
2025-09-02 12:26:33,284 - INFO - ✅ Test data populated in ddl_test_dest
2025-09-02 12:26:33,284 - INFO - 🔍 Running comparison step: Initial comparison
2025-09-02 12:26:33,285 - INFO - Running in compare mode...
2025-09-02 12:26:33,285 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 12:26:33,285 - INFO - Connecting to databases...
2025-09-02 12:26:33,286 - INFO - Database connections successful
2025-09-02 12:26:33,287 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output, stdin=None, shell=False, universal_newlines=False)
2025-09-02 12:26:33,289 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 12:26:33,289 - INFO - Initialized new git repository at test_output
2025-09-02 12:26:33,289 - DEBUG - Created directory: test_output/tables
2025-09-02 12:26:33,289 - DEBUG - Created directory: test_output/functions
2025-09-02 12:26:33,290 - DEBUG - Created directory: test_output/procedures
2025-09-02 12:26:33,290 - DEBUG - Created directory: test_output/triggers
2025-09-02 12:26:33,290 - DEBUG - Created directory: test_output/events
2025-09-02 12:26:33,290 - INFO - Initialized git repository at ./test_output
2025-09-02 12:26:33,290 - INFO - Extracting DDL objects...
2025-09-02 12:26:33,298 - INFO - Comparing schemas...
2025-09-02 12:26:33,298 - INFO - Performing safety analysis...
2025-09-02 12:26:33,298 - INFO - Generating migration SQL...
2025-09-02 12:26:33,324 - INFO - Generating schema visualizations...
2025-09-02 12:26:33,327 - INFO - Generated HTML documentation
2025-09-02 12:26:33,327 - INFO - Generated Mermaid ERD
2025-09-02 12:26:33,327 - INFO - Generated Graphviz DOT file
2025-09-02 12:26:33,328 - INFO - Generated JSON schema structure
2025-09-02 12:26:33,328 - INFO - Schema visualizations generated in test_output/documentation
2025-09-02 12:26:33,328 - INFO - Migration report generated: test_output/migration_report.md
2025-09-02 12:26:33,334 - INFO - Started tracking migration 168: ddl_test_source_to_ddl_test_dest_1756808793
2025-09-02 12:26:33,338 - INFO - Completed migration tracking 168: SUCCESS
2025-09-02 12:26:33,338 - INFO - Migration tracking completed: 168
2025-09-02 12:26:33,338 - INFO - Migration completed successfully!
2025-09-02 12:26:33,338 - INFO - Migration ID: 168
2025-09-02 12:26:33,338 - INFO - Operations: 6
2025-09-02 12:26:33,338 - INFO - Safety warnings: 0
2025-09-02 12:26:33,338 - INFO - Migration file: test_output/migration.sql
2025-09-02 12:26:33,338 - INFO - Rollback file: test_output/rollback.sql
2025-09-02 12:26:33,338 - INFO - Migration report: test_output/migration_report.md
2025-09-02 12:26:33,338 - INFO - ✅ Initial comparison completed successfully
2025-09-02 12:26:33,338 - INFO - 🔍 Analyzing results in ./test_output...
2025-09-02 12:26:33,338 - INFO - 🔧 Executing SQL file: ./test_output/migration.sql
2025-09-02 12:26:33,339 - DEBUG - Executing statement 1/27: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 12:26:33,339 - DEBUG - Executing statement 2/27: DROP TABLE IF EXISTS `ddl_test_dest`.`temp_table`;...
2025-09-02 12:26:33,342 - DEBUG - Executing statement 3/27: ALTER TABLE `products` ADD COLUMN `weight` decimal(8,3) DEFAULT NULL;...
2025-09-02 12:26:33,347 - DEBUG - Executing statement 4/27: ALTER TABLE `products` ADD COLUMN `dimensions` varchar(100) DEFAULT NULL;...
2025-09-02 12:26:33,351 - DEBUG - Executing statement 5/27: ALTER TABLE `products` DROP COLUMN `old_column`;...
2025-09-02 12:26:33,356 - DEBUG - Executing statement 6/27: ALTER TABLE `products` ADD KEY `idx_products_stock` (`stock_quantity`);...
2025-09-02 12:26:33,361 - DEBUG - Executing statement 7/27: ALTER TABLE `products` ADD KEY `idx_products_active` (`is_active`);...
2025-09-02 12:26:33,367 - DEBUG - Executing statement 8/27: ALTER TABLE `products` ADD KEY `idx_products_sku` (`sku`);...
2025-09-02 12:26:33,373 - DEBUG - Executing statement 9/27: ALTER TABLE `products` ADD KEY `fk_products_category` (`category_id`);...
2025-09-02 12:26:33,379 - DEBUG - Executing statement 10/27: ALTER TABLE `products` ADD KEY `idx_products_price` (`price`);...
2025-09-02 12:26:33,385 - DEBUG - Executing statement 11/27: ALTER TABLE `products` DROP INDEX `idx_products_old`;...
2025-09-02 12:26:33,385 - WARNING - ⚠️  SQL execution warning (statement 11): (1091, "Can't DROP INDEX `idx_products_old`; check that it exists")
2025-09-02 12:26:33,385 - WARNING - Statement: ALTER TABLE `products` DROP INDEX `idx_products_old`;
2025-09-02 12:26:33,385 - DEBUG - Executing statement 12/27: ALTER TABLE `categories` ADD COLUMN `description` text DEFAULT NULL;...
2025-09-02 12:26:33,389 - DEBUG - Executing statement 13/27: ALTER TABLE `categories` ADD KEY `idx_categories_created` (`created_at`);...
2025-09-02 12:26:33,395 - DEBUG - Executing statement 14/27: ALTER TABLE `customers` DROP COLUMN `loyalty_points`;...
2025-09-02 12:26:33,400 - DEBUG - Executing statement 15/27: ALTER TABLE `customers` ADD KEY `idx_customers_city` (`city`);...
2025-09-02 12:26:33,407 - DEBUG - Executing statement 16/27: ALTER TABLE `customers` ADD KEY `idx_customers_country` (`country`);...
2025-09-02 12:26:33,413 - DEBUG - Executing statement 17/27: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;...
2025-09-02 12:26:33,414 - WARNING - ⚠️  SQL execution warning (statement 17): (1091, "Can't DROP INDEX `idx_customers_loyalty`; check that it exists")
2025-09-02 12:26:33,414 - WARNING - Statement: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;
2025-09-02 12:26:33,414 - DEBUG - Executing statement 18/27: DROP PROCEDURE IF EXISTS `ddl_test_dest`.`GetCustomerOrders`;...
2025-09-02 12:26:33,416 - DEBUG - Executing statement 19/27: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*, COU...
2025-09-02 12:26:33,417 - DEBUG - Executing statement 20/27: DROP FUNCTION IF EXISTS `ddl_test_dest`.`CalculateOrderTotal`;...
2025-09-02 12:26:33,418 - DEBUG - Executing statement 21/27: CREATE DEFINER=`sstuser`@`%` FUNCTION `CalculateOrderTotal`(order_id INT) RETURNS decimal(12,2)
READ...
2025-09-02 12:26:33,419 - DEBUG - Executing statement 22/27: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_orders_update_timestamp`;...
2025-09-02 12:26:33,419 - DEBUG - Executing statement 23/27: CREATE DEFINER=`sstuser`@`%` TRIGGER tr_orders_update_timestamp
BEFORE UPDATE ON orders
FOR EACH ROW...
2025-09-02 12:26:33,422 - DEBUG - Executing statement 24/27: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_products_stock_check`;...
2025-09-02 12:26:33,422 - DEBUG - Executing statement 25/27: CREATE DEFINER=`sstuser`@`%` TRIGGER tr_products_stock_check
BEFORE UPDATE ON products
FOR EACH ROW
...
2025-09-02 12:26:33,425 - DEBUG - Executing statement 26/27: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_customers_loyalty_update`;...
2025-09-02 12:26:33,426 - DEBUG - Executing statement 27/27: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 12:26:33,426 - INFO - ✅ SQL file executed: 25 statements succeeded, 2 failed
2025-09-02 12:26:33,426 - INFO - 🔍 Checking if schemas are identical after migration...
2025-09-02 12:26:33,426 - INFO - 🔍 Running comparison step: Post-migration schema check
2025-09-02 12:26:33,428 - INFO - Running in compare mode...
2025-09-02 12:26:33,428 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 12:26:33,428 - INFO - Connecting to databases...
2025-09-02 12:26:33,429 - INFO - Database connections successful
2025-09-02 12:26:33,429 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_post_migration, stdin=None, shell=False, universal_newlines=False)
2025-09-02 12:26:33,432 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 12:26:33,433 - INFO - Initialized new git repository at test_output_post_migration
2025-09-02 12:26:33,433 - DEBUG - Created directory: test_output_post_migration/tables
2025-09-02 12:26:33,433 - DEBUG - Created directory: test_output_post_migration/functions
2025-09-02 12:26:33,433 - DEBUG - Created directory: test_output_post_migration/procedures
2025-09-02 12:26:33,433 - DEBUG - Created directory: test_output_post_migration/triggers
2025-09-02 12:26:33,433 - DEBUG - Created directory: test_output_post_migration/events
2025-09-02 12:26:33,433 - INFO - Initialized git repository at ./test_output_post_migration
2025-09-02 12:26:33,433 - INFO - Extracting DDL objects...
2025-09-02 12:26:33,440 - INFO - Comparing schemas...
2025-09-02 12:26:33,440 - INFO - Performing safety analysis...
2025-09-02 12:26:33,440 - INFO - Generating migration SQL...
2025-09-02 12:26:33,466 - INFO - Generating schema visualizations...
2025-09-02 12:26:33,468 - INFO - Generated HTML documentation
2025-09-02 12:26:33,468 - INFO - Generated Mermaid ERD
2025-09-02 12:26:33,468 - INFO - Generated Graphviz DOT file
2025-09-02 12:26:33,469 - INFO - Generated JSON schema structure
2025-09-02 12:26:33,469 - INFO - Schema visualizations generated in test_output_post_migration/documentation
2025-09-02 12:26:33,469 - INFO - Migration report generated: test_output_post_migration/migration_report.md
2025-09-02 12:26:33,475 - INFO - Started tracking migration 169: ddl_test_source_to_ddl_test_dest_1756808793
2025-09-02 12:26:33,479 - INFO - Completed migration tracking 169: SUCCESS
2025-09-02 12:26:33,479 - INFO - Migration tracking completed: 169
2025-09-02 12:26:33,480 - INFO - Migration completed successfully!
2025-09-02 12:26:33,480 - INFO - Migration ID: 169
2025-09-02 12:26:33,480 - INFO - Operations: 0
2025-09-02 12:26:33,480 - INFO - Safety warnings: 0
2025-09-02 12:26:33,480 - INFO - Migration file: test_output_post_migration/migration.sql
2025-09-02 12:26:33,480 - INFO - Rollback file: test_output_post_migration/rollback.sql
2025-09-02 12:26:33,480 - INFO - Migration report: test_output_post_migration/migration_report.md
2025-09-02 12:26:33,480 - INFO - ✅ Post-migration schema check completed successfully
2025-09-02 12:26:33,480 - INFO - ✅ Schemas are identical after migration!
2025-09-02 12:26:33,480 - INFO - 🔧 Executing SQL file: ./test_output/rollback.sql
2025-09-02 12:26:33,481 - DEBUG - Executing statement 1/21: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 12:26:33,481 - DEBUG - Executing statement 2/21: CREATE TABLE `temp_table` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`temp_data` varchar(255) DEFAULT N...
2025-09-02 12:26:33,484 - DEBUG - Executing statement 3/21: ALTER TABLE `products` DROP COLUMN `weight`;...
2025-09-02 12:26:33,489 - DEBUG - Executing statement 4/21: ALTER TABLE `products` DROP COLUMN `dimensions`;...
2025-09-02 12:26:33,494 - DEBUG - Executing statement 5/21: ALTER TABLE `products` ADD COLUMN `old_column` varchar(50) DEFAULT NULL;...
2025-09-02 12:26:33,499 - DEBUG - Executing statement 6/21: ALTER TABLE `products` DROP INDEX `idx_products_stock`;...
2025-09-02 12:26:33,504 - DEBUG - Executing statement 7/21: ALTER TABLE `products` DROP INDEX `idx_products_active`;...
2025-09-02 12:26:33,508 - DEBUG - Executing statement 8/21: ALTER TABLE `products` DROP INDEX `idx_products_sku`;...
2025-09-02 12:26:33,514 - DEBUG - Executing statement 9/21: ALTER TABLE `products` DROP INDEX `fk_products_category`;...
2025-09-02 12:26:33,518 - DEBUG - Executing statement 10/21: ALTER TABLE `products` DROP INDEX `idx_products_price`;...
2025-09-02 12:26:33,522 - DEBUG - Executing statement 11/21: ALTER TABLE `products` ADD KEY `idx_products_old` (`old_column`);...
2025-09-02 12:26:33,528 - DEBUG - Executing statement 12/21: ALTER TABLE `categories` DROP COLUMN `description`;...
2025-09-02 12:26:33,532 - DEBUG - Executing statement 13/21: ALTER TABLE `categories` DROP INDEX `idx_categories_created`;...
2025-09-02 12:26:33,537 - DEBUG - Executing statement 14/21: ALTER TABLE `customers` ADD COLUMN `loyalty_points` int(11) DEFAULT 0;...
2025-09-02 12:26:33,542 - DEBUG - Executing statement 15/21: ALTER TABLE `customers` DROP INDEX `idx_customers_city`;...
2025-09-02 12:26:33,548 - DEBUG - Executing statement 16/21: ALTER TABLE `customers` DROP INDEX `idx_customers_country`;...
2025-09-02 12:26:33,553 - DEBUG - Executing statement 17/21: ALTER TABLE `customers` ADD KEY `idx_customers_loyalty` (`loyalty_points`);...
2025-09-02 12:26:33,558 - DEBUG - Executing statement 18/21: DROP PROCEDURE IF EXISTS `GetCustomerOrders`;...
2025-09-02 12:26:33,560 - DEBUG - Executing statement 19/21: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*
FROM...
2025-09-02 12:26:33,561 - DEBUG - Executing statement 20/21: DROP FUNCTION IF EXISTS `CalculateOrderTotal`;...
2025-09-02 12:26:33,562 - DEBUG - Executing statement 21/21: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 12:26:33,563 - INFO - ✅ SQL file executed: 21 statements succeeded, 0 failed
2025-09-02 12:26:33,563 - INFO - 🔍 Running comparison step: Final comparison after rollback
2025-09-02 12:26:33,563 - INFO - Running in compare mode...
2025-09-02 12:26:33,564 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 12:26:33,564 - INFO - Connecting to databases...
2025-09-02 12:26:33,565 - INFO - Database connections successful
2025-09-02 12:26:33,565 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_final, stdin=None, shell=False, universal_newlines=False)
2025-09-02 12:26:33,568 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 12:26:33,569 - INFO - Initialized new git repository at test_output_final
2025-09-02 12:26:33,569 - DEBUG - Created directory: test_output_final/tables
2025-09-02 12:26:33,569 - DEBUG - Created directory: test_output_final/functions
2025-09-02 12:26:33,569 - DEBUG - Created directory: test_output_final/procedures
2025-09-02 12:26:33,569 - DEBUG - Created directory: test_output_final/triggers
2025-09-02 12:26:33,569 - DEBUG - Created directory: test_output_final/events
2025-09-02 12:26:33,569 - INFO - Initialized git repository at ./test_output_final
2025-09-02 12:26:33,569 - INFO - Extracting DDL objects...
2025-09-02 12:26:33,576 - INFO - Comparing schemas...
2025-09-02 12:26:33,576 - INFO - Performing safety analysis...
2025-09-02 12:26:33,577 - INFO - Generating migration SQL...
2025-09-02 12:26:33,600 - INFO - Generating schema visualizations...
2025-09-02 12:26:33,603 - INFO - Generated HTML documentation
2025-09-02 12:26:33,603 - INFO - Generated Mermaid ERD
2025-09-02 12:26:33,603 - INFO - Generated Graphviz DOT file
2025-09-02 12:26:33,604 - INFO - Generated JSON schema structure
2025-09-02 12:26:33,604 - INFO - Schema visualizations generated in test_output_final/documentation
2025-09-02 12:26:33,604 - INFO - Migration report generated: test_output_final/migration_report.md
2025-09-02 12:26:33,610 - INFO - Started tracking migration 170: ddl_test_source_to_ddl_test_dest_1756808793
2025-09-02 12:26:33,614 - INFO - Completed migration tracking 170: SUCCESS
2025-09-02 12:26:33,614 - INFO - Migration tracking completed: 170
2025-09-02 12:26:33,614 - INFO - Migration completed successfully!
2025-09-02 12:26:33,614 - INFO - Migration ID: 170
2025-09-02 12:26:33,614 - INFO - Operations: 6
2025-09-02 12:26:33,614 - INFO - Safety warnings: 0
2025-09-02 12:26:33,614 - INFO - Migration file: test_output_final/migration.sql
2025-09-02 12:26:33,614 - INFO - Rollback file: test_output_final/rollback.sql
2025-09-02 12:26:33,614 - INFO - Migration report: test_output_final/migration_report.md
2025-09-02 12:26:33,614 - INFO - ✅ Final comparison after rollback completed successfully
2025-09-02 12:26:33,614 - INFO - 🔍 Analyzing results in ./test_output_final...
2025-09-02 12:26:33,615 - INFO - 🔄 Comparing initial and final results...
2025-09-02 12:26:33,615 - INFO - ✅ Rollback test passed - initial and final states match!
2025-09-02 12:26:33,615 - INFO - 💾 Saving test data for reference...
2025-09-02 12:26:33,618 - INFO - ✅ Saved ./test_output to test_data/ddlw-test-20250902_122633/ddl-wizard-testsuite-initial-migration-20250902_122633
2025-09-02 12:26:33,621 - INFO - ✅ Saved ./test_output to test_data/ddlw-test-20250902_122633/test_output
2025-09-02 12:26:33,625 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddlw-test-20250902_122633/ddl-wizard-testsuite-post-migration-verification-20250902_122633
2025-09-02 12:26:33,628 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddlw-test-20250902_122633/test_output_post_migration
2025-09-02 12:26:33,632 - INFO - ✅ Saved ./test_output_final to test_data/ddlw-test-20250902_122633/ddl-wizard-testsuite-rollback-verification-20250902_122633
2025-09-02 12:26:33,636 - INFO - ✅ Saved ./test_output_final to test_data/ddlw-test-20250902_122633/test_output_final
2025-09-02 12:26:33,636 - INFO - ✅ Saved test log to test_data/ddlw-test-20250902_122633
2025-09-02 12:26:33,637 - INFO - 🧹 Cleaned up temporary directory: ./test_output
2025-09-02 12:26:33,638 - INFO - 🧹 Cleaned up temporary directory: ./test_output_post_migration
2025-09-02 12:26:33,639 - INFO - 🧹 Cleaned up temporary directory: ./test_output_final
2025-09-02 12:26:33,639 - INFO - 🧹 Cleaning up test databases...
2025-09-02 12:26:33,640 - INFO - ✅ Cleaned up database: ddl_test_source
2025-09-02 12:26:33,641 - INFO - ✅ Cleaned up database: ddl_test_dest
2025-09-02 13:10:44,578 - INFO - 🏗️  Setting up source database...
2025-09-02 13:10:44,635 - INFO - ✅ Source database setup completed
2025-09-02 13:10:44,635 - INFO - 🏗️  Setting up destination database with differences...
2025-09-02 13:10:44,686 - INFO - ✅ Destination database setup completed
2025-09-02 13:10:44,686 - INFO - 📝 Populating test data...
2025-09-02 13:10:44,688 - INFO - ✅ Test data populated in ddl_test_source
2025-09-02 13:10:44,690 - INFO - ✅ Test data populated in ddl_test_dest
2025-09-02 13:10:44,690 - INFO - 🔍 Running comparison step: Initial comparison
2025-09-02 13:10:44,691 - INFO - Running in compare mode...
2025-09-02 13:10:44,692 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 13:10:44,692 - INFO - Connecting to databases...
2025-09-02 13:10:44,693 - INFO - Database connections successful
2025-09-02 13:10:44,693 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output, stdin=None, shell=False, universal_newlines=False)
2025-09-02 13:10:44,697 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 13:10:44,698 - INFO - Initialized new git repository at test_output
2025-09-02 13:10:44,698 - DEBUG - Created directory: test_output/tables
2025-09-02 13:10:44,698 - DEBUG - Created directory: test_output/functions
2025-09-02 13:10:44,698 - DEBUG - Created directory: test_output/procedures
2025-09-02 13:10:44,698 - DEBUG - Created directory: test_output/triggers
2025-09-02 13:10:44,698 - DEBUG - Created directory: test_output/events
2025-09-02 13:10:44,698 - INFO - Initialized git repository at ./test_output
2025-09-02 13:10:44,698 - INFO - Extracting DDL objects...
2025-09-02 13:10:44,712 - INFO - Comparing schemas...
2025-09-02 13:10:44,712 - INFO - Performing safety analysis...
2025-09-02 13:10:44,713 - INFO - Generating migration SQL...
2025-09-02 13:10:44,738 - INFO - Generating schema visualizations...
2025-09-02 13:10:44,741 - INFO - Generated HTML documentation
2025-09-02 13:10:44,741 - INFO - Generated Mermaid ERD
2025-09-02 13:10:44,741 - INFO - Generated Graphviz DOT file
2025-09-02 13:10:44,742 - INFO - Generated JSON schema structure
2025-09-02 13:10:44,742 - INFO - Schema visualizations generated in test_output/documentation
2025-09-02 13:10:44,742 - INFO - Migration report generated: test_output/migration_report.md
2025-09-02 13:10:44,748 - INFO - Started tracking migration 171: ddl_test_source_to_ddl_test_dest_1756811444
2025-09-02 13:10:44,751 - INFO - Completed migration tracking 171: SUCCESS
2025-09-02 13:10:44,751 - INFO - Migration tracking completed: 171
2025-09-02 13:10:44,752 - INFO - Migration completed successfully!
2025-09-02 13:10:44,752 - INFO - Migration ID: 171
2025-09-02 13:10:44,752 - INFO - Operations: 6
2025-09-02 13:10:44,752 - INFO - Safety warnings: 0
2025-09-02 13:10:44,752 - INFO - Migration file: test_output/migration.sql
2025-09-02 13:10:44,752 - INFO - Rollback file: test_output/rollback.sql
2025-09-02 13:10:44,752 - INFO - Migration report: test_output/migration_report.md
2025-09-02 13:10:44,752 - INFO - ✅ Initial comparison completed successfully
2025-09-02 13:10:44,752 - INFO - 🔍 Analyzing results in ./test_output...
2025-09-02 13:10:44,752 - INFO - 🔧 Executing SQL file: ./test_output/migration.sql
2025-09-02 13:10:44,753 - DEBUG - Executing statement 1/27: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 13:10:44,753 - DEBUG - Executing statement 2/27: DROP TABLE IF EXISTS `ddl_test_dest`.`temp_table`;...
2025-09-02 13:10:44,755 - DEBUG - Executing statement 3/27: ALTER TABLE `products` ADD COLUMN `weight` decimal(8,3) DEFAULT NULL;...
2025-09-02 13:10:44,760 - DEBUG - Executing statement 4/27: ALTER TABLE `products` ADD COLUMN `dimensions` varchar(100) DEFAULT NULL;...
2025-09-02 13:10:44,765 - DEBUG - Executing statement 5/27: ALTER TABLE `products` DROP COLUMN `old_column`;...
2025-09-02 13:10:44,770 - DEBUG - Executing statement 6/27: ALTER TABLE `products` ADD KEY `idx_products_sku` (`sku`);...
2025-09-02 13:10:44,776 - DEBUG - Executing statement 7/27: ALTER TABLE `products` ADD KEY `idx_products_price` (`price`);...
2025-09-02 13:10:44,781 - DEBUG - Executing statement 8/27: ALTER TABLE `products` ADD KEY `idx_products_active` (`is_active`);...
2025-09-02 13:10:44,787 - DEBUG - Executing statement 9/27: ALTER TABLE `products` ADD KEY `fk_products_category` (`category_id`);...
2025-09-02 13:10:44,792 - DEBUG - Executing statement 10/27: ALTER TABLE `products` ADD KEY `idx_products_stock` (`stock_quantity`);...
2025-09-02 13:10:44,798 - DEBUG - Executing statement 11/27: ALTER TABLE `products` DROP INDEX `idx_products_old`;...
2025-09-02 13:10:44,799 - WARNING - ⚠️  SQL execution warning (statement 11): (1091, "Can't DROP INDEX `idx_products_old`; check that it exists")
2025-09-02 13:10:44,799 - WARNING - Statement: ALTER TABLE `products` DROP INDEX `idx_products_old`;
2025-09-02 13:10:44,800 - DEBUG - Executing statement 12/27: ALTER TABLE `categories` ADD COLUMN `description` text DEFAULT NULL;...
2025-09-02 13:10:44,804 - DEBUG - Executing statement 13/27: ALTER TABLE `categories` ADD KEY `idx_categories_created` (`created_at`);...
2025-09-02 13:10:44,810 - DEBUG - Executing statement 14/27: ALTER TABLE `customers` DROP COLUMN `loyalty_points`;...
2025-09-02 13:10:44,815 - DEBUG - Executing statement 15/27: ALTER TABLE `customers` ADD KEY `idx_customers_city` (`city`);...
2025-09-02 13:10:44,822 - DEBUG - Executing statement 16/27: ALTER TABLE `customers` ADD KEY `idx_customers_country` (`country`);...
2025-09-02 13:10:44,828 - DEBUG - Executing statement 17/27: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;...
2025-09-02 13:10:44,829 - WARNING - ⚠️  SQL execution warning (statement 17): (1091, "Can't DROP INDEX `idx_customers_loyalty`; check that it exists")
2025-09-02 13:10:44,829 - WARNING - Statement: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;
2025-09-02 13:10:44,829 - DEBUG - Executing statement 18/27: DROP PROCEDURE IF EXISTS `ddl_test_dest`.`GetCustomerOrders`;...
2025-09-02 13:10:44,830 - DEBUG - Executing statement 19/27: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*, COU...
2025-09-02 13:10:44,832 - DEBUG - Executing statement 20/27: DROP FUNCTION IF EXISTS `ddl_test_dest`.`CalculateOrderTotal`;...
2025-09-02 13:10:44,833 - DEBUG - Executing statement 21/27: CREATE DEFINER=`sstuser`@`%` FUNCTION `CalculateOrderTotal`(order_id INT) RETURNS decimal(12,2)
READ...
2025-09-02 13:10:44,834 - DEBUG - Executing statement 22/27: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_orders_update_timestamp`;...
2025-09-02 13:10:44,834 - DEBUG - Executing statement 23/27: CREATE DEFINER=`sstuser`@`%` TRIGGER tr_orders_update_timestamp
BEFORE UPDATE ON orders
FOR EACH ROW...
2025-09-02 13:10:44,837 - DEBUG - Executing statement 24/27: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_products_stock_check`;...
2025-09-02 13:10:44,837 - DEBUG - Executing statement 25/27: CREATE DEFINER=`sstuser`@`%` TRIGGER tr_products_stock_check
BEFORE UPDATE ON products
FOR EACH ROW
...
2025-09-02 13:10:44,840 - DEBUG - Executing statement 26/27: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_customers_loyalty_update`;...
2025-09-02 13:10:44,841 - DEBUG - Executing statement 27/27: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 13:10:44,842 - INFO - ✅ SQL file executed: 25 statements succeeded, 2 failed
2025-09-02 13:10:44,842 - INFO - 🔍 Checking if schemas are identical after migration...
2025-09-02 13:10:44,842 - INFO - 🔍 Running comparison step: Post-migration schema check
2025-09-02 13:10:44,843 - INFO - Running in compare mode...
2025-09-02 13:10:44,843 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 13:10:44,843 - INFO - Connecting to databases...
2025-09-02 13:10:44,844 - INFO - Database connections successful
2025-09-02 13:10:44,844 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_post_migration, stdin=None, shell=False, universal_newlines=False)
2025-09-02 13:10:44,846 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 13:10:44,847 - INFO - Initialized new git repository at test_output_post_migration
2025-09-02 13:10:44,847 - DEBUG - Created directory: test_output_post_migration/tables
2025-09-02 13:10:44,847 - DEBUG - Created directory: test_output_post_migration/functions
2025-09-02 13:10:44,847 - DEBUG - Created directory: test_output_post_migration/procedures
2025-09-02 13:10:44,847 - DEBUG - Created directory: test_output_post_migration/triggers
2025-09-02 13:10:44,847 - DEBUG - Created directory: test_output_post_migration/events
2025-09-02 13:10:44,847 - INFO - Initialized git repository at ./test_output_post_migration
2025-09-02 13:10:44,847 - INFO - Extracting DDL objects...
2025-09-02 13:10:44,853 - INFO - Comparing schemas...
2025-09-02 13:10:44,853 - INFO - Performing safety analysis...
2025-09-02 13:10:44,854 - INFO - Generating migration SQL...
2025-09-02 13:10:44,878 - INFO - Generating schema visualizations...
2025-09-02 13:10:44,881 - INFO - Generated HTML documentation
2025-09-02 13:10:44,881 - INFO - Generated Mermaid ERD
2025-09-02 13:10:44,881 - INFO - Generated Graphviz DOT file
2025-09-02 13:10:44,882 - INFO - Generated JSON schema structure
2025-09-02 13:10:44,882 - INFO - Schema visualizations generated in test_output_post_migration/documentation
2025-09-02 13:10:44,882 - INFO - Migration report generated: test_output_post_migration/migration_report.md
2025-09-02 13:10:44,888 - INFO - Started tracking migration 172: ddl_test_source_to_ddl_test_dest_1756811444
2025-09-02 13:10:44,892 - INFO - Completed migration tracking 172: SUCCESS
2025-09-02 13:10:44,892 - INFO - Migration tracking completed: 172
2025-09-02 13:10:44,893 - INFO - Migration completed successfully!
2025-09-02 13:10:44,893 - INFO - Migration ID: 172
2025-09-02 13:10:44,893 - INFO - Operations: 0
2025-09-02 13:10:44,893 - INFO - Safety warnings: 0
2025-09-02 13:10:44,893 - INFO - Migration file: test_output_post_migration/migration.sql
2025-09-02 13:10:44,893 - INFO - Rollback file: test_output_post_migration/rollback.sql
2025-09-02 13:10:44,893 - INFO - Migration report: test_output_post_migration/migration_report.md
2025-09-02 13:10:44,893 - INFO - ✅ Post-migration schema check completed successfully
2025-09-02 13:10:44,893 - INFO - ✅ Schemas are identical after migration!
2025-09-02 13:10:44,893 - INFO - 🔧 Executing SQL file: ./test_output/rollback.sql
2025-09-02 13:10:44,894 - DEBUG - Executing statement 1/21: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 13:10:44,894 - DEBUG - Executing statement 2/21: CREATE TABLE `temp_table` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`temp_data` varchar(255) DEFAULT N...
2025-09-02 13:10:44,897 - DEBUG - Executing statement 3/21: ALTER TABLE `products` DROP COLUMN `weight`;...
2025-09-02 13:10:44,902 - DEBUG - Executing statement 4/21: ALTER TABLE `products` DROP COLUMN `dimensions`;...
2025-09-02 13:10:44,907 - DEBUG - Executing statement 5/21: ALTER TABLE `products` ADD COLUMN `old_column` varchar(50) DEFAULT NULL;...
2025-09-02 13:10:44,912 - DEBUG - Executing statement 6/21: ALTER TABLE `products` DROP INDEX `idx_products_sku`;...
2025-09-02 13:10:44,917 - DEBUG - Executing statement 7/21: ALTER TABLE `products` DROP INDEX `idx_products_price`;...
2025-09-02 13:10:44,921 - DEBUG - Executing statement 8/21: ALTER TABLE `products` DROP INDEX `idx_products_active`;...
2025-09-02 13:10:44,926 - DEBUG - Executing statement 9/21: ALTER TABLE `products` DROP INDEX `fk_products_category`;...
2025-09-02 13:10:44,931 - DEBUG - Executing statement 10/21: ALTER TABLE `products` DROP INDEX `idx_products_stock`;...
2025-09-02 13:10:44,936 - DEBUG - Executing statement 11/21: ALTER TABLE `products` ADD KEY `idx_products_old` (`old_column`);...
2025-09-02 13:10:44,940 - DEBUG - Executing statement 12/21: ALTER TABLE `categories` DROP COLUMN `description`;...
2025-09-02 13:10:44,945 - DEBUG - Executing statement 13/21: ALTER TABLE `categories` DROP INDEX `idx_categories_created`;...
2025-09-02 13:10:44,950 - DEBUG - Executing statement 14/21: ALTER TABLE `customers` ADD COLUMN `loyalty_points` int(11) DEFAULT 0;...
2025-09-02 13:10:44,955 - DEBUG - Executing statement 15/21: ALTER TABLE `customers` DROP INDEX `idx_customers_city`;...
2025-09-02 13:10:44,960 - DEBUG - Executing statement 16/21: ALTER TABLE `customers` DROP INDEX `idx_customers_country`;...
2025-09-02 13:10:44,965 - DEBUG - Executing statement 17/21: ALTER TABLE `customers` ADD KEY `idx_customers_loyalty` (`loyalty_points`);...
2025-09-02 13:10:44,971 - DEBUG - Executing statement 18/21: DROP PROCEDURE IF EXISTS `GetCustomerOrders`;...
2025-09-02 13:10:44,973 - DEBUG - Executing statement 19/21: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*
FROM...
2025-09-02 13:10:44,974 - DEBUG - Executing statement 20/21: DROP FUNCTION IF EXISTS `CalculateOrderTotal`;...
2025-09-02 13:10:44,976 - DEBUG - Executing statement 21/21: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 13:10:44,976 - INFO - ✅ SQL file executed: 21 statements succeeded, 0 failed
2025-09-02 13:10:44,976 - INFO - 🔍 Running comparison step: Final comparison after rollback
2025-09-02 13:10:44,976 - INFO - Running in compare mode...
2025-09-02 13:10:44,977 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 13:10:44,977 - INFO - Connecting to databases...
2025-09-02 13:10:44,978 - INFO - Database connections successful
2025-09-02 13:10:44,978 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_final, stdin=None, shell=False, universal_newlines=False)
2025-09-02 13:10:44,981 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 13:10:44,981 - INFO - Initialized new git repository at test_output_final
2025-09-02 13:10:44,981 - DEBUG - Created directory: test_output_final/tables
2025-09-02 13:10:44,981 - DEBUG - Created directory: test_output_final/functions
2025-09-02 13:10:44,981 - DEBUG - Created directory: test_output_final/procedures
2025-09-02 13:10:44,981 - DEBUG - Created directory: test_output_final/triggers
2025-09-02 13:10:44,981 - DEBUG - Created directory: test_output_final/events
2025-09-02 13:10:44,981 - INFO - Initialized git repository at ./test_output_final
2025-09-02 13:10:44,982 - INFO - Extracting DDL objects...
2025-09-02 13:10:44,987 - INFO - Comparing schemas...
2025-09-02 13:10:44,987 - INFO - Performing safety analysis...
2025-09-02 13:10:44,987 - INFO - Generating migration SQL...
2025-09-02 13:10:45,012 - INFO - Generating schema visualizations...
2025-09-02 13:10:45,014 - INFO - Generated HTML documentation
2025-09-02 13:10:45,014 - INFO - Generated Mermaid ERD
2025-09-02 13:10:45,015 - INFO - Generated Graphviz DOT file
2025-09-02 13:10:45,015 - INFO - Generated JSON schema structure
2025-09-02 13:10:45,015 - INFO - Schema visualizations generated in test_output_final/documentation
2025-09-02 13:10:45,016 - INFO - Migration report generated: test_output_final/migration_report.md
2025-09-02 13:10:45,021 - INFO - Started tracking migration 173: ddl_test_source_to_ddl_test_dest_1756811445
2025-09-02 13:10:45,025 - INFO - Completed migration tracking 173: SUCCESS
2025-09-02 13:10:45,025 - INFO - Migration tracking completed: 173
2025-09-02 13:10:45,025 - INFO - Migration completed successfully!
2025-09-02 13:10:45,025 - INFO - Migration ID: 173
2025-09-02 13:10:45,025 - INFO - Operations: 6
2025-09-02 13:10:45,026 - INFO - Safety warnings: 0
2025-09-02 13:10:45,026 - INFO - Migration file: test_output_final/migration.sql
2025-09-02 13:10:45,026 - INFO - Rollback file: test_output_final/rollback.sql
2025-09-02 13:10:45,026 - INFO - Migration report: test_output_final/migration_report.md
2025-09-02 13:10:45,026 - INFO - ✅ Final comparison after rollback completed successfully
2025-09-02 13:10:45,026 - INFO - 🔍 Analyzing results in ./test_output_final...
2025-09-02 13:10:45,026 - INFO - 🔄 Comparing initial and final results...
2025-09-02 13:10:45,026 - INFO - ✅ Rollback test passed - initial and final states match!
2025-09-02 13:10:45,026 - INFO - 💾 Saving test data for reference...
2025-09-02 13:10:45,030 - INFO - ✅ Saved ./test_output to test_data/ddlw-test-20250902_131045/ddl-wizard-testsuite-initial-migration-20250902_131045
2025-09-02 13:10:45,033 - INFO - ✅ Saved ./test_output to test_data/ddlw-test-20250902_131045/test_output
2025-09-02 13:10:45,037 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddlw-test-20250902_131045/ddl-wizard-testsuite-post-migration-verification-20250902_131045
2025-09-02 13:10:45,040 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddlw-test-20250902_131045/test_output_post_migration
2025-09-02 13:10:45,044 - INFO - ✅ Saved ./test_output_final to test_data/ddlw-test-20250902_131045/ddl-wizard-testsuite-rollback-verification-20250902_131045
2025-09-02 13:10:45,048 - INFO - ✅ Saved ./test_output_final to test_data/ddlw-test-20250902_131045/test_output_final
2025-09-02 13:10:45,048 - INFO - ✅ Saved test log to test_data/ddlw-test-20250902_131045
2025-09-02 13:10:45,049 - INFO - 🧹 Cleaned up temporary directory: ./test_output
2025-09-02 13:10:45,051 - INFO - 🧹 Cleaned up temporary directory: ./test_output_post_migration
2025-09-02 13:10:45,052 - INFO - 🧹 Cleaned up temporary directory: ./test_output_final
2025-09-02 13:10:45,052 - INFO - 🧹 Cleaning up test databases...
2025-09-02 13:10:45,053 - INFO - ✅ Cleaned up database: ddl_test_source
2025-09-02 13:10:45,053 - INFO - ✅ Cleaned up database: ddl_test_dest
2025-09-02 13:56:31,548 - INFO - 🏗️  Setting up source database...
2025-09-02 13:56:31,605 - INFO - ✅ Source database setup completed
2025-09-02 13:56:31,605 - INFO - 🏗️  Setting up destination database with differences...
2025-09-02 13:56:31,656 - INFO - ✅ Destination database setup completed
2025-09-02 13:56:31,656 - INFO - 📝 Populating test data...
2025-09-02 13:56:31,658 - INFO - ✅ Test data populated in ddl_test_source
2025-09-02 13:56:31,660 - INFO - ✅ Test data populated in ddl_test_dest
2025-09-02 13:56:31,660 - INFO - 🔍 Running comparison step: Initial comparison
2025-09-02 13:56:31,661 - INFO - Running in compare mode...
2025-09-02 13:56:31,661 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 13:56:31,662 - INFO - Connecting to databases...
2025-09-02 13:56:31,662 - INFO - Database connections successful
2025-09-02 13:56:31,663 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output, stdin=None, shell=False, universal_newlines=False)
2025-09-02 13:56:31,666 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 13:56:31,666 - INFO - Initialized new git repository at test_output
2025-09-02 13:56:31,666 - DEBUG - Created directory: test_output/tables
2025-09-02 13:56:31,667 - DEBUG - Created directory: test_output/functions
2025-09-02 13:56:31,667 - DEBUG - Created directory: test_output/procedures
2025-09-02 13:56:31,667 - DEBUG - Created directory: test_output/triggers
2025-09-02 13:56:31,667 - DEBUG - Created directory: test_output/events
2025-09-02 13:56:31,667 - INFO - Initialized git repository at ./test_output
2025-09-02 13:56:31,667 - INFO - Extracting DDL objects...
2025-09-02 13:56:31,676 - INFO - Comparing schemas...
2025-09-02 13:56:31,677 - INFO - Performing safety analysis...
2025-09-02 13:56:31,677 - INFO - Generating migration SQL...
2025-09-02 13:56:31,704 - INFO - Generating schema visualizations...
2025-09-02 13:56:31,707 - INFO - Generated HTML documentation
2025-09-02 13:56:31,707 - INFO - Generated Mermaid ERD
2025-09-02 13:56:31,707 - INFO - Generated Graphviz DOT file
2025-09-02 13:56:31,707 - INFO - Generated JSON schema structure
2025-09-02 13:56:31,708 - INFO - Schema visualizations generated in test_output/documentation
2025-09-02 13:56:31,708 - INFO - Migration report generated: test_output/migration_report.md
2025-09-02 13:56:31,714 - INFO - Started tracking migration 174: ddl_test_source_to_ddl_test_dest_1756814191
2025-09-02 13:56:31,718 - INFO - Completed migration tracking 174: SUCCESS
2025-09-02 13:56:31,718 - INFO - Migration tracking completed: 174
2025-09-02 13:56:31,718 - INFO - Migration completed successfully!
2025-09-02 13:56:31,718 - INFO - Migration ID: 174
2025-09-02 13:56:31,718 - INFO - Operations: 7
2025-09-02 13:56:31,718 - INFO - Safety warnings: 0
2025-09-02 13:56:31,718 - INFO - Migration file: test_output/migration.sql
2025-09-02 13:56:31,718 - INFO - Rollback file: test_output/rollback.sql
2025-09-02 13:56:31,718 - INFO - Migration report: test_output/migration_report.md
2025-09-02 13:56:31,718 - INFO - ✅ Initial comparison completed successfully
2025-09-02 13:56:31,718 - INFO - 🔍 Analyzing results in ./test_output...
2025-09-02 13:56:31,718 - INFO - 🔧 Executing SQL file: ./test_output/migration.sql
2025-09-02 13:56:31,719 - DEBUG - Executing statement 1/29: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 13:56:31,719 - DEBUG - Executing statement 2/29: DROP TABLE IF EXISTS `ddl_test_dest`.`temp_table`;...
2025-09-02 13:56:31,722 - DEBUG - Executing statement 3/29: ALTER TABLE `categories` ADD COLUMN `description` text DEFAULT NULL;...
2025-09-02 13:56:31,726 - DEBUG - Executing statement 4/29: ALTER TABLE `categories` ADD KEY `idx_categories_created` (`created_at`);...
2025-09-02 13:56:31,732 - DEBUG - Executing statement 5/29: ALTER TABLE `customers` DROP COLUMN `loyalty_points`;...
2025-09-02 13:56:31,737 - DEBUG - Executing statement 6/29: ALTER TABLE `customers` ADD KEY `idx_customers_country` (`country`);...
2025-09-02 13:56:31,744 - DEBUG - Executing statement 7/29: ALTER TABLE `customers` ADD KEY `idx_customers_city` (`city`);...
2025-09-02 13:56:31,750 - DEBUG - Executing statement 8/29: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;...
2025-09-02 13:56:31,750 - WARNING - ⚠️  SQL execution warning (statement 8): (1091, "Can't DROP INDEX `idx_customers_loyalty`; check that it exists")
2025-09-02 13:56:31,750 - WARNING - Statement: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;
2025-09-02 13:56:31,750 - DEBUG - Executing statement 9/29: ALTER TABLE `orders` ADD CONSTRAINT `fk_orders_customer` FOREIGN KEY (`customer_id`) REFERENCES `cus...
2025-09-02 13:56:31,754 - DEBUG - Executing statement 10/29: ALTER TABLE `products` ADD COLUMN `weight` decimal(8,3) DEFAULT NULL;...
2025-09-02 13:56:31,758 - DEBUG - Executing statement 11/29: ALTER TABLE `products` ADD COLUMN `dimensions` varchar(100) DEFAULT NULL;...
2025-09-02 13:56:31,763 - DEBUG - Executing statement 12/29: ALTER TABLE `products` DROP COLUMN `old_column`;...
2025-09-02 13:56:31,768 - DEBUG - Executing statement 13/29: ALTER TABLE `products` ADD KEY `idx_products_active` (`is_active`);...
2025-09-02 13:56:31,774 - DEBUG - Executing statement 14/29: ALTER TABLE `products` ADD KEY `idx_products_stock` (`stock_quantity`);...
2025-09-02 13:56:31,780 - DEBUG - Executing statement 15/29: ALTER TABLE `products` ADD KEY `idx_products_price` (`price`);...
2025-09-02 13:56:31,786 - DEBUG - Executing statement 16/29: ALTER TABLE `products` ADD KEY `idx_products_sku` (`sku`);...
2025-09-02 13:56:31,791 - DEBUG - Executing statement 17/29: ALTER TABLE `products` ADD KEY `fk_products_category` (`category_id`);...
2025-09-02 13:56:31,797 - DEBUG - Executing statement 18/29: ALTER TABLE `products` DROP INDEX `idx_products_old`;...
2025-09-02 13:56:31,797 - WARNING - ⚠️  SQL execution warning (statement 18): (1091, "Can't DROP INDEX `idx_products_old`; check that it exists")
2025-09-02 13:56:31,797 - WARNING - Statement: ALTER TABLE `products` DROP INDEX `idx_products_old`;
2025-09-02 13:56:31,797 - DEBUG - Executing statement 19/29: ALTER TABLE `products` ADD CONSTRAINT `fk_products_category` FOREIGN KEY (`category_id`) REFERENCES ...
2025-09-02 13:56:31,802 - DEBUG - Executing statement 20/29: DROP PROCEDURE IF EXISTS `ddl_test_dest`.`GetCustomerOrders`;...
2025-09-02 13:56:31,803 - DEBUG - Executing statement 21/29: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*, COU...
2025-09-02 13:56:31,804 - DEBUG - Executing statement 22/29: DROP FUNCTION IF EXISTS `ddl_test_dest`.`CalculateOrderTotal`;...
2025-09-02 13:56:31,805 - DEBUG - Executing statement 23/29: CREATE DEFINER=`sstuser`@`%` FUNCTION `CalculateOrderTotal`(order_id INT) RETURNS decimal(12,2)
READ...
2025-09-02 13:56:31,806 - DEBUG - Executing statement 24/29: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_orders_update_timestamp`;...
2025-09-02 13:56:31,806 - DEBUG - Executing statement 25/29: CREATE DEFINER=`sstuser`@`%` TRIGGER tr_orders_update_timestamp
BEFORE UPDATE ON orders
FOR EACH ROW...
2025-09-02 13:56:31,809 - DEBUG - Executing statement 26/29: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_products_stock_check`;...
2025-09-02 13:56:31,809 - DEBUG - Executing statement 27/29: CREATE DEFINER=`sstuser`@`%` TRIGGER tr_products_stock_check
BEFORE UPDATE ON products
FOR EACH ROW
...
2025-09-02 13:56:31,812 - DEBUG - Executing statement 28/29: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_customers_loyalty_update`;...
2025-09-02 13:56:31,814 - DEBUG - Executing statement 29/29: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 13:56:31,814 - INFO - ✅ SQL file executed: 27 statements succeeded, 2 failed
2025-09-02 13:56:31,814 - INFO - 🔍 Checking if schemas are identical after migration...
2025-09-02 13:56:31,815 - INFO - 🔍 Running comparison step: Post-migration schema check
2025-09-02 13:56:31,815 - INFO - Running in compare mode...
2025-09-02 13:56:31,816 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 13:56:31,816 - INFO - Connecting to databases...
2025-09-02 13:56:31,817 - INFO - Database connections successful
2025-09-02 13:56:31,817 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_post_migration, stdin=None, shell=False, universal_newlines=False)
2025-09-02 13:56:31,819 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 13:56:31,820 - INFO - Initialized new git repository at test_output_post_migration
2025-09-02 13:56:31,820 - DEBUG - Created directory: test_output_post_migration/tables
2025-09-02 13:56:31,820 - DEBUG - Created directory: test_output_post_migration/functions
2025-09-02 13:56:31,820 - DEBUG - Created directory: test_output_post_migration/procedures
2025-09-02 13:56:31,820 - DEBUG - Created directory: test_output_post_migration/triggers
2025-09-02 13:56:31,820 - DEBUG - Created directory: test_output_post_migration/events
2025-09-02 13:56:31,820 - INFO - Initialized git repository at ./test_output_post_migration
2025-09-02 13:56:31,820 - INFO - Extracting DDL objects...
2025-09-02 13:56:31,826 - INFO - Comparing schemas...
2025-09-02 13:56:31,826 - INFO - Performing safety analysis...
2025-09-02 13:56:31,826 - INFO - Generating migration SQL...
2025-09-02 13:56:31,853 - INFO - Generating schema visualizations...
2025-09-02 13:56:31,855 - INFO - Generated HTML documentation
2025-09-02 13:56:31,855 - INFO - Generated Mermaid ERD
2025-09-02 13:56:31,855 - INFO - Generated Graphviz DOT file
2025-09-02 13:56:31,856 - INFO - Generated JSON schema structure
2025-09-02 13:56:31,856 - INFO - Schema visualizations generated in test_output_post_migration/documentation
2025-09-02 13:56:31,856 - INFO - Migration report generated: test_output_post_migration/migration_report.md
2025-09-02 13:56:31,861 - INFO - Started tracking migration 175: ddl_test_source_to_ddl_test_dest_1756814191
2025-09-02 13:56:31,865 - INFO - Completed migration tracking 175: SUCCESS
2025-09-02 13:56:31,865 - INFO - Migration tracking completed: 175
2025-09-02 13:56:31,865 - INFO - Migration completed successfully!
2025-09-02 13:56:31,865 - INFO - Migration ID: 175
2025-09-02 13:56:31,865 - INFO - Operations: 0
2025-09-02 13:56:31,865 - INFO - Safety warnings: 0
2025-09-02 13:56:31,865 - INFO - Migration file: test_output_post_migration/migration.sql
2025-09-02 13:56:31,865 - INFO - Rollback file: test_output_post_migration/rollback.sql
2025-09-02 13:56:31,865 - INFO - Migration report: test_output_post_migration/migration_report.md
2025-09-02 13:56:31,865 - INFO - ✅ Post-migration schema check completed successfully
2025-09-02 13:56:31,866 - INFO - ✅ Schemas are identical after migration!
2025-09-02 13:56:31,866 - INFO - 🔧 Executing SQL file: ./test_output/rollback.sql
2025-09-02 13:56:31,866 - DEBUG - Executing statement 1/21: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 13:56:31,866 - DEBUG - Executing statement 2/21: CREATE TABLE `temp_table` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`temp_data` varchar(255) DEFAULT N...
2025-09-02 13:56:31,869 - DEBUG - Executing statement 3/21: ALTER TABLE `categories` DROP COLUMN `description`;...
2025-09-02 13:56:31,874 - DEBUG - Executing statement 4/21: ALTER TABLE `categories` DROP INDEX `idx_categories_created`;...
2025-09-02 13:56:31,878 - DEBUG - Executing statement 5/21: ALTER TABLE `customers` ADD COLUMN `loyalty_points` int(11) DEFAULT 0;...
2025-09-02 13:56:31,884 - DEBUG - Executing statement 6/21: ALTER TABLE `customers` DROP INDEX `idx_customers_country`;...
2025-09-02 13:56:31,888 - DEBUG - Executing statement 7/21: ALTER TABLE `customers` DROP INDEX `idx_customers_city`;...
2025-09-02 13:56:31,892 - DEBUG - Executing statement 8/21: ALTER TABLE `customers` ADD KEY `idx_customers_loyalty` (`loyalty_points`);...
2025-09-02 13:56:31,897 - DEBUG - Executing statement 9/21: ALTER TABLE `products` DROP COLUMN `weight`;...
2025-09-02 13:56:31,902 - DEBUG - Executing statement 10/21: ALTER TABLE `products` DROP COLUMN `dimensions`;...
2025-09-02 13:56:31,908 - DEBUG - Executing statement 11/21: ALTER TABLE `products` ADD COLUMN `old_column` varchar(50) DEFAULT NULL;...
2025-09-02 13:56:31,913 - DEBUG - Executing statement 12/21: ALTER TABLE `products` DROP INDEX `idx_products_active`;...
2025-09-02 13:56:31,918 - DEBUG - Executing statement 13/21: ALTER TABLE `products` DROP INDEX `idx_products_stock`;...
2025-09-02 13:56:31,922 - DEBUG - Executing statement 14/21: ALTER TABLE `products` DROP INDEX `idx_products_price`;...
2025-09-02 13:56:31,926 - DEBUG - Executing statement 15/21: ALTER TABLE `products` DROP INDEX `idx_products_sku`;...
2025-09-02 13:56:31,930 - DEBUG - Executing statement 16/21: ALTER TABLE `products` DROP INDEX `fk_products_category`;...
2025-09-02 13:56:31,935 - DEBUG - Executing statement 17/21: ALTER TABLE `products` ADD KEY `idx_products_old` (`old_column`);...
2025-09-02 13:56:31,940 - DEBUG - Executing statement 18/21: DROP PROCEDURE IF EXISTS `GetCustomerOrders`;...
2025-09-02 13:56:31,942 - DEBUG - Executing statement 19/21: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*
FROM...
2025-09-02 13:56:31,943 - DEBUG - Executing statement 20/21: DROP FUNCTION IF EXISTS `CalculateOrderTotal`;...
2025-09-02 13:56:31,945 - DEBUG - Executing statement 21/21: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 13:56:31,945 - INFO - ✅ SQL file executed: 21 statements succeeded, 0 failed
2025-09-02 13:56:31,945 - INFO - 🔍 Running comparison step: Final comparison after rollback
2025-09-02 13:56:31,946 - INFO - Running in compare mode...
2025-09-02 13:56:31,946 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 13:56:31,946 - INFO - Connecting to databases...
2025-09-02 13:56:31,948 - INFO - Database connections successful
2025-09-02 13:56:31,948 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_final, stdin=None, shell=False, universal_newlines=False)
2025-09-02 13:56:31,951 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 13:56:31,952 - INFO - Initialized new git repository at test_output_final
2025-09-02 13:56:31,952 - DEBUG - Created directory: test_output_final/tables
2025-09-02 13:56:31,952 - DEBUG - Created directory: test_output_final/functions
2025-09-02 13:56:31,952 - DEBUG - Created directory: test_output_final/procedures
2025-09-02 13:56:31,952 - DEBUG - Created directory: test_output_final/triggers
2025-09-02 13:56:31,952 - DEBUG - Created directory: test_output_final/events
2025-09-02 13:56:31,952 - INFO - Initialized git repository at ./test_output_final
2025-09-02 13:56:31,952 - INFO - Extracting DDL objects...
2025-09-02 13:56:31,958 - INFO - Comparing schemas...
2025-09-02 13:56:31,958 - INFO - Performing safety analysis...
2025-09-02 13:56:31,958 - INFO - Generating migration SQL...
2025-09-02 13:56:31,984 - INFO - Generating schema visualizations...
2025-09-02 13:56:31,987 - INFO - Generated HTML documentation
2025-09-02 13:56:31,987 - INFO - Generated Mermaid ERD
2025-09-02 13:56:31,987 - INFO - Generated Graphviz DOT file
2025-09-02 13:56:31,988 - INFO - Generated JSON schema structure
2025-09-02 13:56:31,988 - INFO - Schema visualizations generated in test_output_final/documentation
2025-09-02 13:56:31,988 - INFO - Migration report generated: test_output_final/migration_report.md
2025-09-02 13:56:31,994 - INFO - Started tracking migration 176: ddl_test_source_to_ddl_test_dest_1756814191
2025-09-02 13:56:31,997 - INFO - Completed migration tracking 176: SUCCESS
2025-09-02 13:56:31,998 - INFO - Migration tracking completed: 176
2025-09-02 13:56:31,998 - INFO - Migration completed successfully!
2025-09-02 13:56:31,998 - INFO - Migration ID: 176
2025-09-02 13:56:31,998 - INFO - Operations: 6
2025-09-02 13:56:31,998 - INFO - Safety warnings: 0
2025-09-02 13:56:31,998 - INFO - Migration file: test_output_final/migration.sql
2025-09-02 13:56:31,998 - INFO - Rollback file: test_output_final/rollback.sql
2025-09-02 13:56:31,998 - INFO - Migration report: test_output_final/migration_report.md
2025-09-02 13:56:31,998 - INFO - ✅ Final comparison after rollback completed successfully
2025-09-02 13:56:31,998 - INFO - 🔍 Analyzing results in ./test_output_final...
2025-09-02 13:56:31,998 - INFO - 🔄 Comparing initial and final results...
2025-09-02 13:56:31,998 - WARNING - ⚠️  Mismatch in detected_missing_fk: initial=True, final=False
2025-09-02 13:56:31,998 - ERROR - ❌ Rollback test failed - initial and final states don't match!
2025-09-02 13:56:31,999 - INFO - 💾 Saving test data for reference...
2025-09-02 13:56:32,002 - INFO - ✅ Saved ./test_output to test_data/ddlw-test-20250902_135631/ddl-wizard-testsuite-initial-migration-20250902_135631
2025-09-02 13:56:32,006 - INFO - ✅ Saved ./test_output to test_data/ddlw-test-20250902_135631/test_output
2025-09-02 13:56:32,010 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddlw-test-20250902_135631/ddl-wizard-testsuite-post-migration-verification-20250902_135631
2025-09-02 13:56:32,014 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddlw-test-20250902_135631/test_output_post_migration
2025-09-02 13:56:32,017 - INFO - ✅ Saved ./test_output_final to test_data/ddlw-test-20250902_135631/ddl-wizard-testsuite-rollback-verification-20250902_135631
2025-09-02 13:56:32,021 - INFO - ✅ Saved ./test_output_final to test_data/ddlw-test-20250902_135631/test_output_final
2025-09-02 13:56:32,021 - INFO - ✅ Saved test log to test_data/ddlw-test-20250902_135631
2025-09-02 13:56:32,022 - INFO - 🧹 Cleaned up temporary directory: ./test_output
2025-09-02 13:56:32,024 - INFO - 🧹 Cleaned up temporary directory: ./test_output_post_migration
2025-09-02 13:56:32,025 - INFO - 🧹 Cleaned up temporary directory: ./test_output_final
2025-09-02 13:56:32,025 - INFO - 🧹 Cleaning up test databases...
2025-09-02 13:56:32,025 - INFO - ✅ Cleaned up database: ddl_test_source
2025-09-02 13:56:32,026 - INFO - ✅ Cleaned up database: ddl_test_dest
2025-09-02 13:59:02,308 - INFO - 🏗️  Setting up source database...
2025-09-02 13:59:02,366 - INFO - ✅ Source database setup completed
2025-09-02 13:59:02,366 - INFO - 🏗️  Setting up destination database with differences...
2025-09-02 13:59:02,417 - INFO - ✅ Destination database setup completed
2025-09-02 13:59:02,417 - INFO - 📝 Populating test data...
2025-09-02 13:59:02,419 - INFO - ✅ Test data populated in ddl_test_source
2025-09-02 13:59:02,422 - INFO - ✅ Test data populated in ddl_test_dest
2025-09-02 13:59:02,423 - INFO - 🔍 Running comparison step: Initial comparison
2025-09-02 13:59:02,423 - INFO - Running in compare mode...
2025-09-02 13:59:02,424 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 13:59:02,424 - INFO - Connecting to databases...
2025-09-02 13:59:02,425 - INFO - Database connections successful
2025-09-02 13:59:02,426 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output, stdin=None, shell=False, universal_newlines=False)
2025-09-02 13:59:02,428 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 13:59:02,428 - INFO - Initialized new git repository at test_output
2025-09-02 13:59:02,429 - DEBUG - Created directory: test_output/tables
2025-09-02 13:59:02,429 - DEBUG - Created directory: test_output/functions
2025-09-02 13:59:02,429 - DEBUG - Created directory: test_output/procedures
2025-09-02 13:59:02,429 - DEBUG - Created directory: test_output/triggers
2025-09-02 13:59:02,429 - DEBUG - Created directory: test_output/events
2025-09-02 13:59:02,429 - INFO - Initialized git repository at ./test_output
2025-09-02 13:59:02,429 - INFO - Extracting DDL objects...
2025-09-02 13:59:02,437 - INFO - Comparing schemas...
2025-09-02 13:59:02,437 - INFO - Performing safety analysis...
2025-09-02 13:59:02,437 - INFO - Generating migration SQL...
2025-09-02 13:59:02,463 - INFO - Generating schema visualizations...
2025-09-02 13:59:02,465 - INFO - Generated HTML documentation
2025-09-02 13:59:02,466 - INFO - Generated Mermaid ERD
2025-09-02 13:59:02,466 - INFO - Generated Graphviz DOT file
2025-09-02 13:59:02,466 - INFO - Generated JSON schema structure
2025-09-02 13:59:02,466 - INFO - Schema visualizations generated in test_output/documentation
2025-09-02 13:59:02,467 - INFO - Migration report generated: test_output/migration_report.md
2025-09-02 13:59:02,472 - INFO - Started tracking migration 177: ddl_test_source_to_ddl_test_dest_1756814342
2025-09-02 13:59:02,476 - INFO - Completed migration tracking 177: SUCCESS
2025-09-02 13:59:02,476 - INFO - Migration tracking completed: 177
2025-09-02 13:59:02,476 - INFO - Migration completed successfully!
2025-09-02 13:59:02,476 - INFO - Migration ID: 177
2025-09-02 13:59:02,476 - INFO - Operations: 7
2025-09-02 13:59:02,476 - INFO - Safety warnings: 0
2025-09-02 13:59:02,476 - INFO - Migration file: test_output/migration.sql
2025-09-02 13:59:02,476 - INFO - Rollback file: test_output/rollback.sql
2025-09-02 13:59:02,476 - INFO - Migration report: test_output/migration_report.md
2025-09-02 13:59:02,476 - INFO - ✅ Initial comparison completed successfully
2025-09-02 13:59:02,476 - INFO - 🔍 Analyzing results in ./test_output...
2025-09-02 13:59:02,476 - INFO - 🔧 Executing SQL file: ./test_output/migration.sql
2025-09-02 13:59:02,477 - DEBUG - Executing statement 1/29: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 13:59:02,477 - DEBUG - Executing statement 2/29: DROP TABLE IF EXISTS `ddl_test_dest`.`temp_table`;...
2025-09-02 13:59:02,480 - DEBUG - Executing statement 3/29: ALTER TABLE `customers` DROP COLUMN `loyalty_points`;...
2025-09-02 13:59:02,485 - DEBUG - Executing statement 4/29: ALTER TABLE `customers` ADD KEY `idx_customers_city` (`city`);...
2025-09-02 13:59:02,492 - DEBUG - Executing statement 5/29: ALTER TABLE `customers` ADD KEY `idx_customers_country` (`country`);...
2025-09-02 13:59:02,498 - DEBUG - Executing statement 6/29: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;...
2025-09-02 13:59:02,498 - WARNING - ⚠️  SQL execution warning (statement 6): (1091, "Can't DROP INDEX `idx_customers_loyalty`; check that it exists")
2025-09-02 13:59:02,498 - WARNING - Statement: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;
2025-09-02 13:59:02,498 - DEBUG - Executing statement 7/29: ALTER TABLE `categories` ADD COLUMN `description` text DEFAULT NULL;...
2025-09-02 13:59:02,502 - DEBUG - Executing statement 8/29: ALTER TABLE `categories` ADD KEY `idx_categories_created` (`created_at`);...
2025-09-02 13:59:02,509 - DEBUG - Executing statement 9/29: ALTER TABLE `orders` ADD CONSTRAINT `fk_orders_customer` FOREIGN KEY (`customer_id`) REFERENCES `cus...
2025-09-02 13:59:02,513 - DEBUG - Executing statement 10/29: ALTER TABLE `products` ADD COLUMN `dimensions` varchar(100) DEFAULT NULL;...
2025-09-02 13:59:02,517 - DEBUG - Executing statement 11/29: ALTER TABLE `products` ADD COLUMN `weight` decimal(8,3) DEFAULT NULL;...
2025-09-02 13:59:02,522 - DEBUG - Executing statement 12/29: ALTER TABLE `products` DROP COLUMN `old_column`;...
2025-09-02 13:59:02,527 - DEBUG - Executing statement 13/29: ALTER TABLE `products` ADD KEY `idx_products_price` (`price`);...
2025-09-02 13:59:02,533 - DEBUG - Executing statement 14/29: ALTER TABLE `products` ADD KEY `idx_products_sku` (`sku`);...
2025-09-02 13:59:02,538 - DEBUG - Executing statement 15/29: ALTER TABLE `products` ADD KEY `idx_products_stock` (`stock_quantity`);...
2025-09-02 13:59:02,544 - DEBUG - Executing statement 16/29: ALTER TABLE `products` ADD KEY `fk_products_category` (`category_id`);...
2025-09-02 13:59:02,550 - DEBUG - Executing statement 17/29: ALTER TABLE `products` ADD KEY `idx_products_active` (`is_active`);...
2025-09-02 13:59:02,557 - DEBUG - Executing statement 18/29: ALTER TABLE `products` DROP INDEX `idx_products_old`;...
2025-09-02 13:59:02,557 - WARNING - ⚠️  SQL execution warning (statement 18): (1091, "Can't DROP INDEX `idx_products_old`; check that it exists")
2025-09-02 13:59:02,557 - WARNING - Statement: ALTER TABLE `products` DROP INDEX `idx_products_old`;
2025-09-02 13:59:02,557 - DEBUG - Executing statement 19/29: ALTER TABLE `products` ADD CONSTRAINT `fk_products_category` FOREIGN KEY (`category_id`) REFERENCES ...
2025-09-02 13:59:02,561 - DEBUG - Executing statement 20/29: DROP PROCEDURE IF EXISTS `ddl_test_dest`.`GetCustomerOrders`;...
2025-09-02 13:59:02,563 - DEBUG - Executing statement 21/29: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*, COU...
2025-09-02 13:59:02,564 - DEBUG - Executing statement 22/29: DROP FUNCTION IF EXISTS `ddl_test_dest`.`CalculateOrderTotal`;...
2025-09-02 13:59:02,564 - DEBUG - Executing statement 23/29: CREATE DEFINER=`sstuser`@`%` FUNCTION `CalculateOrderTotal`(order_id INT) RETURNS decimal(12,2)
READ...
2025-09-02 13:59:02,566 - DEBUG - Executing statement 24/29: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_orders_update_timestamp`;...
2025-09-02 13:59:02,566 - DEBUG - Executing statement 25/29: CREATE DEFINER=`sstuser`@`%` TRIGGER tr_orders_update_timestamp
BEFORE UPDATE ON orders
FOR EACH ROW...
2025-09-02 13:59:02,569 - DEBUG - Executing statement 26/29: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_products_stock_check`;...
2025-09-02 13:59:02,569 - DEBUG - Executing statement 27/29: CREATE DEFINER=`sstuser`@`%` TRIGGER tr_products_stock_check
BEFORE UPDATE ON products
FOR EACH ROW
...
2025-09-02 13:59:02,572 - DEBUG - Executing statement 28/29: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_customers_loyalty_update`;...
2025-09-02 13:59:02,573 - DEBUG - Executing statement 29/29: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 13:59:02,573 - INFO - ✅ SQL file executed: 27 statements succeeded, 2 failed
2025-09-02 13:59:02,573 - INFO - 🔍 Checking if schemas are identical after migration...
2025-09-02 13:59:02,573 - INFO - 🔍 Running comparison step: Post-migration schema check
2025-09-02 13:59:02,574 - INFO - Running in compare mode...
2025-09-02 13:59:02,575 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 13:59:02,575 - INFO - Connecting to databases...
2025-09-02 13:59:02,576 - INFO - Database connections successful
2025-09-02 13:59:02,576 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_post_migration, stdin=None, shell=False, universal_newlines=False)
2025-09-02 13:59:02,579 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 13:59:02,579 - INFO - Initialized new git repository at test_output_post_migration
2025-09-02 13:59:02,579 - DEBUG - Created directory: test_output_post_migration/tables
2025-09-02 13:59:02,579 - DEBUG - Created directory: test_output_post_migration/functions
2025-09-02 13:59:02,579 - DEBUG - Created directory: test_output_post_migration/procedures
2025-09-02 13:59:02,579 - DEBUG - Created directory: test_output_post_migration/triggers
2025-09-02 13:59:02,579 - DEBUG - Created directory: test_output_post_migration/events
2025-09-02 13:59:02,580 - INFO - Initialized git repository at ./test_output_post_migration
2025-09-02 13:59:02,580 - INFO - Extracting DDL objects...
2025-09-02 13:59:02,587 - INFO - Comparing schemas...
2025-09-02 13:59:02,587 - INFO - Performing safety analysis...
2025-09-02 13:59:02,587 - INFO - Generating migration SQL...
2025-09-02 13:59:02,619 - INFO - Generating schema visualizations...
2025-09-02 13:59:02,622 - INFO - Generated HTML documentation
2025-09-02 13:59:02,622 - INFO - Generated Mermaid ERD
2025-09-02 13:59:02,622 - INFO - Generated Graphviz DOT file
2025-09-02 13:59:02,623 - INFO - Generated JSON schema structure
2025-09-02 13:59:02,623 - INFO - Schema visualizations generated in test_output_post_migration/documentation
2025-09-02 13:59:02,623 - INFO - Migration report generated: test_output_post_migration/migration_report.md
2025-09-02 13:59:02,629 - INFO - Started tracking migration 178: ddl_test_source_to_ddl_test_dest_1756814342
2025-09-02 13:59:02,633 - INFO - Completed migration tracking 178: SUCCESS
2025-09-02 13:59:02,633 - INFO - Migration tracking completed: 178
2025-09-02 13:59:02,633 - INFO - Migration completed successfully!
2025-09-02 13:59:02,633 - INFO - Migration ID: 178
2025-09-02 13:59:02,633 - INFO - Operations: 0
2025-09-02 13:59:02,633 - INFO - Safety warnings: 0
2025-09-02 13:59:02,633 - INFO - Migration file: test_output_post_migration/migration.sql
2025-09-02 13:59:02,633 - INFO - Rollback file: test_output_post_migration/rollback.sql
2025-09-02 13:59:02,634 - INFO - Migration report: test_output_post_migration/migration_report.md
2025-09-02 13:59:02,634 - INFO - ✅ Post-migration schema check completed successfully
2025-09-02 13:59:02,634 - INFO - ✅ Schemas are identical after migration!
2025-09-02 13:59:02,634 - INFO - 🔧 Executing SQL file: ./test_output/rollback.sql
2025-09-02 13:59:02,635 - DEBUG - Executing statement 1/23: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 13:59:02,635 - DEBUG - Executing statement 2/23: CREATE TABLE `temp_table` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`temp_data` varchar(255) DEFAULT N...
2025-09-02 13:59:02,638 - DEBUG - Executing statement 3/23: ALTER TABLE `customers` ADD COLUMN `loyalty_points` int(11) DEFAULT 0;...
2025-09-02 13:59:02,642 - DEBUG - Executing statement 4/23: ALTER TABLE `customers` DROP INDEX `idx_customers_city`;...
2025-09-02 13:59:02,646 - DEBUG - Executing statement 5/23: ALTER TABLE `customers` DROP INDEX `idx_customers_country`;...
2025-09-02 13:59:02,651 - DEBUG - Executing statement 6/23: ALTER TABLE `customers` ADD KEY `idx_customers_loyalty` (`loyalty_points`);...
2025-09-02 13:59:02,657 - DEBUG - Executing statement 7/23: ALTER TABLE `categories` DROP COLUMN `description`;...
2025-09-02 13:59:02,662 - DEBUG - Executing statement 8/23: ALTER TABLE `categories` DROP INDEX `idx_categories_created`;...
2025-09-02 13:59:02,666 - DEBUG - Executing statement 9/23: ALTER TABLE `orders` DROP FOREIGN KEY `fk_orders_customer`;...
2025-09-02 13:59:02,670 - DEBUG - Executing statement 10/23: ALTER TABLE `products` DROP COLUMN `dimensions`;...
2025-09-02 13:59:02,675 - DEBUG - Executing statement 11/23: ALTER TABLE `products` DROP COLUMN `weight`;...
2025-09-02 13:59:02,680 - DEBUG - Executing statement 12/23: ALTER TABLE `products` ADD COLUMN `old_column` varchar(50) DEFAULT NULL;...
2025-09-02 13:59:02,686 - DEBUG - Executing statement 13/23: ALTER TABLE `products` DROP INDEX `idx_products_price`;...
2025-09-02 13:59:02,691 - DEBUG - Executing statement 14/23: ALTER TABLE `products` DROP INDEX `idx_products_sku`;...
2025-09-02 13:59:02,695 - DEBUG - Executing statement 15/23: ALTER TABLE `products` DROP INDEX `idx_products_stock`;...
2025-09-02 13:59:02,699 - DEBUG - Executing statement 16/23: ALTER TABLE `products` DROP INDEX `fk_products_category`;...
2025-09-02 13:59:02,704 - DEBUG - Executing statement 17/23: ALTER TABLE `products` DROP INDEX `idx_products_active`;...
2025-09-02 13:59:02,708 - DEBUG - Executing statement 18/23: ALTER TABLE `products` ADD KEY `idx_products_old` (`old_column`);...
2025-09-02 13:59:02,714 - DEBUG - Executing statement 19/23: ALTER TABLE `products` DROP FOREIGN KEY `fk_products_category`;...
2025-09-02 13:59:02,718 - DEBUG - Executing statement 20/23: DROP PROCEDURE IF EXISTS `GetCustomerOrders`;...
2025-09-02 13:59:02,720 - DEBUG - Executing statement 21/23: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*
FROM...
2025-09-02 13:59:02,721 - DEBUG - Executing statement 22/23: DROP FUNCTION IF EXISTS `CalculateOrderTotal`;...
2025-09-02 13:59:02,723 - DEBUG - Executing statement 23/23: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 13:59:02,723 - INFO - ✅ SQL file executed: 23 statements succeeded, 0 failed
2025-09-02 13:59:02,723 - INFO - 🔍 Running comparison step: Final comparison after rollback
2025-09-02 13:59:02,724 - INFO - Running in compare mode...
2025-09-02 13:59:02,725 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 13:59:02,725 - INFO - Connecting to databases...
2025-09-02 13:59:02,726 - INFO - Database connections successful
2025-09-02 13:59:02,726 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_final, stdin=None, shell=False, universal_newlines=False)
2025-09-02 13:59:02,729 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 13:59:02,729 - INFO - Initialized new git repository at test_output_final
2025-09-02 13:59:02,729 - DEBUG - Created directory: test_output_final/tables
2025-09-02 13:59:02,730 - DEBUG - Created directory: test_output_final/functions
2025-09-02 13:59:02,730 - DEBUG - Created directory: test_output_final/procedures
2025-09-02 13:59:02,730 - DEBUG - Created directory: test_output_final/triggers
2025-09-02 13:59:02,730 - DEBUG - Created directory: test_output_final/events
2025-09-02 13:59:02,730 - INFO - Initialized git repository at ./test_output_final
2025-09-02 13:59:02,730 - INFO - Extracting DDL objects...
2025-09-02 13:59:02,737 - INFO - Comparing schemas...
2025-09-02 13:59:02,738 - INFO - Performing safety analysis...
2025-09-02 13:59:02,738 - INFO - Generating migration SQL...
2025-09-02 13:59:02,767 - INFO - Generating schema visualizations...
2025-09-02 13:59:02,770 - INFO - Generated HTML documentation
2025-09-02 13:59:02,770 - INFO - Generated Mermaid ERD
2025-09-02 13:59:02,770 - INFO - Generated Graphviz DOT file
2025-09-02 13:59:02,771 - INFO - Generated JSON schema structure
2025-09-02 13:59:02,771 - INFO - Schema visualizations generated in test_output_final/documentation
2025-09-02 13:59:02,771 - INFO - Migration report generated: test_output_final/migration_report.md
2025-09-02 13:59:02,777 - INFO - Started tracking migration 179: ddl_test_source_to_ddl_test_dest_1756814342
2025-09-02 13:59:02,780 - INFO - Completed migration tracking 179: SUCCESS
2025-09-02 13:59:02,780 - INFO - Migration tracking completed: 179
2025-09-02 13:59:02,781 - INFO - Migration completed successfully!
2025-09-02 13:59:02,781 - INFO - Migration ID: 179
2025-09-02 13:59:02,781 - INFO - Operations: 7
2025-09-02 13:59:02,781 - INFO - Safety warnings: 0
2025-09-02 13:59:02,781 - INFO - Migration file: test_output_final/migration.sql
2025-09-02 13:59:02,781 - INFO - Rollback file: test_output_final/rollback.sql
2025-09-02 13:59:02,781 - INFO - Migration report: test_output_final/migration_report.md
2025-09-02 13:59:02,781 - INFO - ✅ Final comparison after rollback completed successfully
2025-09-02 13:59:02,781 - INFO - 🔍 Analyzing results in ./test_output_final...
2025-09-02 13:59:02,781 - INFO - 🔄 Comparing initial and final results...
2025-09-02 13:59:02,781 - INFO - ✅ Rollback test passed - initial and final states match!
2025-09-02 13:59:02,781 - INFO - 💾 Saving test data for reference...
2025-09-02 13:59:02,785 - INFO - ✅ Saved ./test_output to test_data/ddlw-test-20250902_135902/ddl-wizard-testsuite-initial-migration-20250902_135902
2025-09-02 13:59:02,789 - INFO - ✅ Saved ./test_output to test_data/ddlw-test-20250902_135902/test_output
2025-09-02 13:59:02,792 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddlw-test-20250902_135902/ddl-wizard-testsuite-post-migration-verification-20250902_135902
2025-09-02 13:59:02,796 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddlw-test-20250902_135902/test_output_post_migration
2025-09-02 13:59:02,800 - INFO - ✅ Saved ./test_output_final to test_data/ddlw-test-20250902_135902/ddl-wizard-testsuite-rollback-verification-20250902_135902
2025-09-02 13:59:02,804 - INFO - ✅ Saved ./test_output_final to test_data/ddlw-test-20250902_135902/test_output_final
2025-09-02 13:59:02,805 - INFO - ✅ Saved test log to test_data/ddlw-test-20250902_135902
2025-09-02 13:59:02,806 - INFO - 🧹 Cleaned up temporary directory: ./test_output
2025-09-02 13:59:02,808 - INFO - 🧹 Cleaned up temporary directory: ./test_output_post_migration
2025-09-02 13:59:02,809 - INFO - 🧹 Cleaned up temporary directory: ./test_output_final
2025-09-02 13:59:02,809 - INFO - 🧹 Cleaning up test databases...
2025-09-02 13:59:02,810 - INFO - ✅ Cleaned up database: ddl_test_source
2025-09-02 13:59:02,811 - INFO - ✅ Cleaned up database: ddl_test_dest
2025-09-02 14:30:29,260 - INFO - 🏗️  Setting up source database...
2025-09-02 14:30:29,320 - INFO - ✅ Source database setup completed
2025-09-02 14:30:29,320 - INFO - 🏗️  Setting up destination database with differences...
2025-09-02 14:30:29,371 - INFO - ✅ Destination database setup completed
2025-09-02 14:30:29,371 - INFO - 📝 Populating test data...
2025-09-02 14:30:29,373 - INFO - ✅ Test data populated in ddl_test_source
2025-09-02 14:30:29,375 - INFO - ✅ Test data populated in ddl_test_dest
2025-09-02 14:30:29,375 - INFO - 🔍 Running comparison step: Initial comparison
2025-09-02 14:30:29,376 - INFO - Running in compare mode...
2025-09-02 14:30:29,377 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 14:30:29,377 - INFO - Connecting to databases...
2025-09-02 14:30:29,378 - INFO - Database connections successful
2025-09-02 14:30:29,379 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output, stdin=None, shell=False, universal_newlines=False)
2025-09-02 14:30:29,382 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 14:30:29,383 - INFO - Initialized new git repository at test_output
2025-09-02 14:30:29,384 - DEBUG - Created directory: test_output/tables
2025-09-02 14:30:29,384 - DEBUG - Created directory: test_output/functions
2025-09-02 14:30:29,384 - DEBUG - Created directory: test_output/procedures
2025-09-02 14:30:29,384 - DEBUG - Created directory: test_output/triggers
2025-09-02 14:30:29,384 - DEBUG - Created directory: test_output/events
2025-09-02 14:30:29,384 - INFO - Initialized git repository at ./test_output
2025-09-02 14:30:29,384 - INFO - Extracting DDL objects...
2025-09-02 14:30:29,395 - INFO - Comparing schemas...
2025-09-02 14:30:29,396 - INFO - Performing safety analysis...
2025-09-02 14:30:29,396 - INFO - Generating migration SQL...
2025-09-02 14:30:29,432 - INFO - Generating schema visualizations...
2025-09-02 14:30:29,435 - INFO - Generated HTML documentation
2025-09-02 14:30:29,435 - INFO - Generated Mermaid ERD
2025-09-02 14:30:29,435 - INFO - Generated Graphviz DOT file
2025-09-02 14:30:29,436 - INFO - Generated JSON schema structure
2025-09-02 14:30:29,436 - INFO - Schema visualizations generated in test_output/documentation
2025-09-02 14:30:29,436 - INFO - Migration report generated: test_output/migration_report.md
2025-09-02 14:30:29,442 - INFO - Started tracking migration 180: ddl_test_source_to_ddl_test_dest_1756816229
2025-09-02 14:30:29,446 - INFO - Completed migration tracking 180: SUCCESS
2025-09-02 14:30:29,446 - INFO - Migration tracking completed: 180
2025-09-02 14:30:29,446 - INFO - Migration completed successfully!
2025-09-02 14:30:29,446 - INFO - Migration ID: 180
2025-09-02 14:30:29,446 - INFO - Operations: 7
2025-09-02 14:30:29,446 - INFO - Safety warnings: 0
2025-09-02 14:30:29,446 - INFO - Migration file: test_output/migration.sql
2025-09-02 14:30:29,446 - INFO - Rollback file: test_output/rollback.sql
2025-09-02 14:30:29,446 - INFO - Migration report: test_output/migration_report.md
2025-09-02 14:30:29,446 - INFO - ✅ Initial comparison completed successfully
2025-09-02 14:30:29,446 - INFO - 🔍 Analyzing results in ./test_output...
2025-09-02 14:30:29,446 - INFO - 🔧 Executing SQL file: ./test_output/migration.sql
2025-09-02 14:30:29,447 - DEBUG - Executing statement 1/29: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 14:30:29,448 - DEBUG - Executing statement 2/29: DROP TABLE IF EXISTS `ddl_test_dest`.`temp_table`;...
2025-09-02 14:30:29,450 - DEBUG - Executing statement 3/29: ALTER TABLE `categories` ADD COLUMN `description` text DEFAULT NULL;...
2025-09-02 14:30:29,455 - DEBUG - Executing statement 4/29: ALTER TABLE `categories` ADD KEY `idx_categories_created` (`created_at`);...
2025-09-02 14:30:29,462 - DEBUG - Executing statement 5/29: ALTER TABLE `products` ADD COLUMN `dimensions` varchar(100) DEFAULT NULL;...
2025-09-02 14:30:29,466 - DEBUG - Executing statement 6/29: ALTER TABLE `products` ADD COLUMN `weight` decimal(8,3) DEFAULT NULL;...
2025-09-02 14:30:29,471 - DEBUG - Executing statement 7/29: ALTER TABLE `products` DROP COLUMN `old_column`;...
2025-09-02 14:30:29,476 - DEBUG - Executing statement 8/29: ALTER TABLE `products` ADD KEY `idx_products_active` (`is_active`);...
2025-09-02 14:30:29,482 - DEBUG - Executing statement 9/29: ALTER TABLE `products` ADD KEY `idx_products_price` (`price`);...
2025-09-02 14:30:29,488 - DEBUG - Executing statement 10/29: ALTER TABLE `products` ADD KEY `fk_products_category` (`category_id`);...
2025-09-02 14:30:29,494 - DEBUG - Executing statement 11/29: ALTER TABLE `products` ADD KEY `idx_products_stock` (`stock_quantity`);...
2025-09-02 14:30:29,500 - DEBUG - Executing statement 12/29: ALTER TABLE `products` ADD KEY `idx_products_sku` (`sku`);...
2025-09-02 14:30:29,505 - DEBUG - Executing statement 13/29: ALTER TABLE `products` DROP INDEX `idx_products_old`;...
2025-09-02 14:30:29,505 - WARNING - ⚠️  SQL execution warning (statement 13): (1091, "Can't DROP INDEX `idx_products_old`; check that it exists")
2025-09-02 14:30:29,505 - WARNING - Statement: ALTER TABLE `products` DROP INDEX `idx_products_old`;
2025-09-02 14:30:29,505 - DEBUG - Executing statement 14/29: ALTER TABLE `products` ADD CONSTRAINT `fk_products_category` FOREIGN KEY (`category_id`) REFERENCES ...
2025-09-02 14:30:29,510 - DEBUG - Executing statement 15/29: ALTER TABLE `customers` DROP COLUMN `loyalty_points`;...
2025-09-02 14:30:29,516 - DEBUG - Executing statement 16/29: ALTER TABLE `customers` ADD KEY `idx_customers_city` (`city`);...
2025-09-02 14:30:29,522 - DEBUG - Executing statement 17/29: ALTER TABLE `customers` ADD KEY `idx_customers_country` (`country`);...
2025-09-02 14:30:29,529 - DEBUG - Executing statement 18/29: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;...
2025-09-02 14:30:29,530 - WARNING - ⚠️  SQL execution warning (statement 18): (1091, "Can't DROP INDEX `idx_customers_loyalty`; check that it exists")
2025-09-02 14:30:29,530 - WARNING - Statement: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;
2025-09-02 14:30:29,530 - DEBUG - Executing statement 19/29: ALTER TABLE `orders` ADD CONSTRAINT `fk_orders_customer` FOREIGN KEY (`customer_id`) REFERENCES `cus...
2025-09-02 14:30:29,534 - DEBUG - Executing statement 20/29: DROP PROCEDURE IF EXISTS `ddl_test_dest`.`GetCustomerOrders`;...
2025-09-02 14:30:29,536 - DEBUG - Executing statement 21/29: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*, COU...
2025-09-02 14:30:29,537 - DEBUG - Executing statement 22/29: DROP FUNCTION IF EXISTS `ddl_test_dest`.`CalculateOrderTotal`;...
2025-09-02 14:30:29,537 - DEBUG - Executing statement 23/29: CREATE DEFINER=`sstuser`@`%` FUNCTION `CalculateOrderTotal`(order_id INT) RETURNS decimal(12,2)
READ...
2025-09-02 14:30:29,539 - DEBUG - Executing statement 24/29: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_orders_update_timestamp`;...
2025-09-02 14:30:29,539 - DEBUG - Executing statement 25/29: CREATE DEFINER=`sstuser`@`%` TRIGGER tr_orders_update_timestamp
BEFORE UPDATE ON orders
FOR EACH ROW...
2025-09-02 14:30:29,542 - DEBUG - Executing statement 26/29: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_products_stock_check`;...
2025-09-02 14:30:29,542 - DEBUG - Executing statement 27/29: CREATE DEFINER=`sstuser`@`%` TRIGGER tr_products_stock_check
BEFORE UPDATE ON products
FOR EACH ROW
...
2025-09-02 14:30:29,546 - DEBUG - Executing statement 28/29: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_customers_loyalty_update`;...
2025-09-02 14:30:29,547 - DEBUG - Executing statement 29/29: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 14:30:29,548 - INFO - ✅ SQL file executed: 27 statements succeeded, 2 failed
2025-09-02 14:30:29,548 - INFO - 🔍 Checking if schemas are identical after migration...
2025-09-02 14:30:29,548 - INFO - 🔍 Running comparison step: Post-migration schema check
2025-09-02 14:30:29,549 - INFO - Running in compare mode...
2025-09-02 14:30:29,549 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 14:30:29,549 - INFO - Connecting to databases...
2025-09-02 14:30:29,551 - INFO - Database connections successful
2025-09-02 14:30:29,551 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_post_migration, stdin=None, shell=False, universal_newlines=False)
2025-09-02 14:30:29,554 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 14:30:29,555 - INFO - Initialized new git repository at test_output_post_migration
2025-09-02 14:30:29,555 - DEBUG - Created directory: test_output_post_migration/tables
2025-09-02 14:30:29,555 - DEBUG - Created directory: test_output_post_migration/functions
2025-09-02 14:30:29,556 - DEBUG - Created directory: test_output_post_migration/procedures
2025-09-02 14:30:29,556 - DEBUG - Created directory: test_output_post_migration/triggers
2025-09-02 14:30:29,556 - DEBUG - Created directory: test_output_post_migration/events
2025-09-02 14:30:29,556 - INFO - Initialized git repository at ./test_output_post_migration
2025-09-02 14:30:29,556 - INFO - Extracting DDL objects...
2025-09-02 14:30:29,565 - INFO - Comparing schemas...
2025-09-02 14:30:29,565 - INFO - Performing safety analysis...
2025-09-02 14:30:29,565 - INFO - Generating migration SQL...
2025-09-02 14:30:29,599 - INFO - Generating schema visualizations...
2025-09-02 14:30:29,602 - INFO - Generated HTML documentation
2025-09-02 14:30:29,602 - INFO - Generated Mermaid ERD
2025-09-02 14:30:29,602 - INFO - Generated Graphviz DOT file
2025-09-02 14:30:29,603 - INFO - Generated JSON schema structure
2025-09-02 14:30:29,603 - INFO - Schema visualizations generated in test_output_post_migration/documentation
2025-09-02 14:30:29,603 - INFO - Migration report generated: test_output_post_migration/migration_report.md
2025-09-02 14:30:29,609 - INFO - Started tracking migration 181: ddl_test_source_to_ddl_test_dest_1756816229
2025-09-02 14:30:29,613 - INFO - Completed migration tracking 181: SUCCESS
2025-09-02 14:30:29,613 - INFO - Migration tracking completed: 181
2025-09-02 14:30:29,613 - INFO - Migration completed successfully!
2025-09-02 14:30:29,613 - INFO - Migration ID: 181
2025-09-02 14:30:29,613 - INFO - Operations: 0
2025-09-02 14:30:29,613 - INFO - Safety warnings: 0
2025-09-02 14:30:29,613 - INFO - Migration file: test_output_post_migration/migration.sql
2025-09-02 14:30:29,613 - INFO - Rollback file: test_output_post_migration/rollback.sql
2025-09-02 14:30:29,613 - INFO - Migration report: test_output_post_migration/migration_report.md
2025-09-02 14:30:29,613 - INFO - ✅ Post-migration schema check completed successfully
2025-09-02 14:30:29,613 - INFO - ✅ Schemas are identical after migration!
2025-09-02 14:30:29,614 - INFO - 🔧 Executing SQL file: ./test_output/rollback.sql
2025-09-02 14:30:29,614 - DEBUG - Executing statement 1/23: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 14:30:29,614 - DEBUG - Executing statement 2/23: CREATE TABLE `temp_table` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`temp_data` varchar(255) DEFAULT N...
2025-09-02 14:30:29,618 - DEBUG - Executing statement 3/23: ALTER TABLE `categories` DROP COLUMN `description`;...
2025-09-02 14:30:29,623 - DEBUG - Executing statement 4/23: ALTER TABLE `categories` DROP INDEX `idx_categories_created`;...
2025-09-02 14:30:29,628 - DEBUG - Executing statement 5/23: ALTER TABLE `products` DROP COLUMN `dimensions`;...
2025-09-02 14:30:29,633 - DEBUG - Executing statement 6/23: ALTER TABLE `products` DROP COLUMN `weight`;...
2025-09-02 14:30:29,639 - DEBUG - Executing statement 7/23: ALTER TABLE `products` ADD COLUMN `old_column` varchar(50) DEFAULT NULL;...
2025-09-02 14:30:29,644 - DEBUG - Executing statement 8/23: ALTER TABLE `products` DROP INDEX `idx_products_active`;...
2025-09-02 14:30:29,649 - DEBUG - Executing statement 9/23: ALTER TABLE `products` DROP INDEX `idx_products_price`;...
2025-09-02 14:30:29,654 - DEBUG - Executing statement 10/23: ALTER TABLE `products` DROP INDEX `fk_products_category`;...
2025-09-02 14:30:29,659 - DEBUG - Executing statement 11/23: ALTER TABLE `products` DROP INDEX `idx_products_stock`;...
2025-09-02 14:30:29,663 - DEBUG - Executing statement 12/23: ALTER TABLE `products` DROP INDEX `idx_products_sku`;...
2025-09-02 14:30:29,668 - DEBUG - Executing statement 13/23: ALTER TABLE `products` ADD KEY `idx_products_old` (`old_column`);...
2025-09-02 14:30:29,672 - DEBUG - Executing statement 14/23: ALTER TABLE `products` DROP FOREIGN KEY `fk_products_category`;...
2025-09-02 14:30:29,677 - DEBUG - Executing statement 15/23: ALTER TABLE `customers` ADD COLUMN `loyalty_points` int(11) DEFAULT 0;...
2025-09-02 14:30:29,683 - DEBUG - Executing statement 16/23: ALTER TABLE `customers` DROP INDEX `idx_customers_city`;...
2025-09-02 14:30:29,687 - DEBUG - Executing statement 17/23: ALTER TABLE `customers` DROP INDEX `idx_customers_country`;...
2025-09-02 14:30:29,692 - DEBUG - Executing statement 18/23: ALTER TABLE `customers` ADD KEY `idx_customers_loyalty` (`loyalty_points`);...
2025-09-02 14:30:29,698 - DEBUG - Executing statement 19/23: ALTER TABLE `orders` DROP FOREIGN KEY `fk_orders_customer`;...
2025-09-02 14:30:29,702 - DEBUG - Executing statement 20/23: DROP PROCEDURE IF EXISTS `GetCustomerOrders`;...
2025-09-02 14:30:29,704 - DEBUG - Executing statement 21/23: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*
FROM...
2025-09-02 14:30:29,706 - DEBUG - Executing statement 22/23: DROP FUNCTION IF EXISTS `CalculateOrderTotal`;...
2025-09-02 14:30:29,707 - DEBUG - Executing statement 23/23: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 14:30:29,707 - INFO - ✅ SQL file executed: 23 statements succeeded, 0 failed
2025-09-02 14:30:29,707 - INFO - 🔍 Running comparison step: Final comparison after rollback
2025-09-02 14:30:29,708 - INFO - Running in compare mode...
2025-09-02 14:30:29,709 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 14:30:29,709 - INFO - Connecting to databases...
2025-09-02 14:30:29,710 - INFO - Database connections successful
2025-09-02 14:30:29,711 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_final, stdin=None, shell=False, universal_newlines=False)
2025-09-02 14:30:29,713 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 14:30:29,714 - INFO - Initialized new git repository at test_output_final
2025-09-02 14:30:29,714 - DEBUG - Created directory: test_output_final/tables
2025-09-02 14:30:29,714 - DEBUG - Created directory: test_output_final/functions
2025-09-02 14:30:29,714 - DEBUG - Created directory: test_output_final/procedures
2025-09-02 14:30:29,714 - DEBUG - Created directory: test_output_final/triggers
2025-09-02 14:30:29,714 - DEBUG - Created directory: test_output_final/events
2025-09-02 14:30:29,714 - INFO - Initialized git repository at ./test_output_final
2025-09-02 14:30:29,715 - INFO - Extracting DDL objects...
2025-09-02 14:30:29,726 - INFO - Comparing schemas...
2025-09-02 14:30:29,726 - INFO - Performing safety analysis...
2025-09-02 14:30:29,726 - INFO - Generating migration SQL...
2025-09-02 14:30:29,758 - INFO - Generating schema visualizations...
2025-09-02 14:30:29,763 - INFO - Generated HTML documentation
2025-09-02 14:30:29,763 - INFO - Generated Mermaid ERD
2025-09-02 14:30:29,764 - INFO - Generated Graphviz DOT file
2025-09-02 14:30:29,764 - INFO - Generated JSON schema structure
2025-09-02 14:30:29,765 - INFO - Schema visualizations generated in test_output_final/documentation
2025-09-02 14:30:29,765 - INFO - Migration report generated: test_output_final/migration_report.md
2025-09-02 14:30:29,771 - INFO - Started tracking migration 182: ddl_test_source_to_ddl_test_dest_1756816229
2025-09-02 14:30:29,776 - INFO - Completed migration tracking 182: SUCCESS
2025-09-02 14:30:29,776 - INFO - Migration tracking completed: 182
2025-09-02 14:30:29,776 - INFO - Migration completed successfully!
2025-09-02 14:30:29,776 - INFO - Migration ID: 182
2025-09-02 14:30:29,777 - INFO - Operations: 7
2025-09-02 14:30:29,777 - INFO - Safety warnings: 0
2025-09-02 14:30:29,777 - INFO - Migration file: test_output_final/migration.sql
2025-09-02 14:30:29,777 - INFO - Rollback file: test_output_final/rollback.sql
2025-09-02 14:30:29,777 - INFO - Migration report: test_output_final/migration_report.md
2025-09-02 14:30:29,777 - INFO - ✅ Final comparison after rollback completed successfully
2025-09-02 14:30:29,777 - INFO - 🔍 Analyzing results in ./test_output_final...
2025-09-02 14:30:29,777 - INFO - 🔄 Comparing initial and final results...
2025-09-02 14:30:29,777 - INFO - ✅ Rollback test passed - initial and final states match!
2025-09-02 14:30:29,778 - INFO - 💾 Saving test data for reference...
2025-09-02 14:30:29,782 - INFO - ✅ Saved ./test_output to test_data/ddlw-test-20250902_143029/ddl-wizard-testsuite-initial-migration-20250902_143029
2025-09-02 14:30:29,786 - INFO - ✅ Saved ./test_output to test_data/ddlw-test-20250902_143029/test_output
2025-09-02 14:30:29,789 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddlw-test-20250902_143029/ddl-wizard-testsuite-post-migration-verification-20250902_143029
2025-09-02 14:30:29,794 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddlw-test-20250902_143029/test_output_post_migration
2025-09-02 14:30:29,799 - INFO - ✅ Saved ./test_output_final to test_data/ddlw-test-20250902_143029/ddl-wizard-testsuite-rollback-verification-20250902_143029
2025-09-02 14:30:29,804 - INFO - ✅ Saved ./test_output_final to test_data/ddlw-test-20250902_143029/test_output_final
2025-09-02 14:30:29,804 - INFO - ✅ Saved test log to test_data/ddlw-test-20250902_143029
2025-09-02 14:30:29,806 - INFO - 🧹 Cleaned up temporary directory: ./test_output
2025-09-02 14:30:29,808 - INFO - 🧹 Cleaned up temporary directory: ./test_output_post_migration
2025-09-02 14:30:29,809 - INFO - 🧹 Cleaned up temporary directory: ./test_output_final
2025-09-02 14:30:29,809 - INFO - 🧹 Cleaning up test databases...
2025-09-02 14:30:29,810 - INFO - ✅ Cleaned up database: ddl_test_source
2025-09-02 14:30:29,811 - INFO - ✅ Cleaned up database: ddl_test_dest
2025-09-02 15:22:26,561 - INFO - 🏗️  Setting up source database...
2025-09-02 15:22:26,619 - INFO - ✅ Source database setup completed
2025-09-02 15:22:26,619 - INFO - 🏗️  Setting up destination database with differences...
2025-09-02 15:22:26,671 - INFO - ✅ Destination database setup completed
2025-09-02 15:22:26,671 - INFO - 📝 Populating test data...
2025-09-02 15:22:26,674 - INFO - ✅ Test data populated in ddl_test_source
2025-09-02 15:22:26,676 - INFO - ✅ Test data populated in ddl_test_dest
2025-09-02 15:22:26,676 - INFO - 🔍 Running comparison step: Initial comparison
2025-09-02 15:22:26,677 - INFO - Running in compare mode...
2025-09-02 15:22:26,677 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 15:22:26,677 - INFO - Connecting to databases...
2025-09-02 15:22:26,678 - INFO - Database connections successful
2025-09-02 15:22:26,679 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output, stdin=None, shell=False, universal_newlines=False)
2025-09-02 15:22:26,682 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 15:22:26,682 - INFO - Initialized new git repository at test_output
2025-09-02 15:22:26,682 - DEBUG - Created directory: test_output/tables
2025-09-02 15:22:26,682 - DEBUG - Created directory: test_output/functions
2025-09-02 15:22:26,683 - DEBUG - Created directory: test_output/procedures
2025-09-02 15:22:26,683 - DEBUG - Created directory: test_output/triggers
2025-09-02 15:22:26,683 - DEBUG - Created directory: test_output/events
2025-09-02 15:22:26,683 - INFO - Initialized git repository at ./test_output
2025-09-02 15:22:26,683 - INFO - Extracting DDL objects...
2025-09-02 15:22:26,690 - INFO - Comparing schemas...
2025-09-02 15:22:26,691 - INFO - Performing safety analysis...
2025-09-02 15:22:26,691 - INFO - Generating migration SQL...
2025-09-02 15:22:26,720 - INFO - Generating schema visualizations...
2025-09-02 15:22:26,723 - INFO - Generated HTML documentation
2025-09-02 15:22:26,723 - INFO - Generated Mermaid ERD
2025-09-02 15:22:26,723 - INFO - Generated Graphviz DOT file
2025-09-02 15:22:26,724 - INFO - Generated JSON schema structure
2025-09-02 15:22:26,724 - INFO - Schema visualizations generated in test_output/documentation
2025-09-02 15:22:26,724 - INFO - Migration report generated: test_output/migration_report.md
2025-09-02 15:22:26,730 - INFO - Started tracking migration 183: ddl_test_source_to_ddl_test_dest_1756819346
2025-09-02 15:22:26,734 - INFO - Completed migration tracking 183: SUCCESS
2025-09-02 15:22:26,735 - INFO - Migration tracking completed: 183
2025-09-02 15:22:26,735 - INFO - Migration completed successfully!
2025-09-02 15:22:26,735 - INFO - Migration ID: 183
2025-09-02 15:22:26,735 - INFO - Operations: 7
2025-09-02 15:22:26,735 - INFO - Safety warnings: 0
2025-09-02 15:22:26,735 - INFO - Migration file: test_output/migration.sql
2025-09-02 15:22:26,735 - INFO - Rollback file: test_output/rollback.sql
2025-09-02 15:22:26,735 - INFO - Migration report: test_output/migration_report.md
2025-09-02 15:22:26,735 - INFO - ✅ Initial comparison completed successfully
2025-09-02 15:22:26,735 - INFO - 🔍 Analyzing results in ./test_output...
2025-09-02 15:22:26,735 - INFO - 🔧 Executing SQL file: ./test_output/migration.sql
2025-09-02 15:22:26,736 - DEBUG - Executing statement 1/29: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 15:22:26,736 - DEBUG - Executing statement 2/29: DROP TABLE IF EXISTS `ddl_test_dest`.`temp_table`;...
2025-09-02 15:22:26,739 - DEBUG - Executing statement 3/29: ALTER TABLE `categories` ADD COLUMN `description` text DEFAULT NULL;...
2025-09-02 15:22:26,744 - DEBUG - Executing statement 4/29: ALTER TABLE `categories` ADD KEY `idx_categories_created` (`created_at`);...
2025-09-02 15:22:26,750 - DEBUG - Executing statement 5/29: ALTER TABLE `orders` ADD CONSTRAINT `fk_orders_customer` FOREIGN KEY (`customer_id`) REFERENCES `cus...
2025-09-02 15:22:26,754 - DEBUG - Executing statement 6/29: ALTER TABLE `products` ADD COLUMN `weight` decimal(8,3) DEFAULT NULL;...
2025-09-02 15:22:26,758 - DEBUG - Executing statement 7/29: ALTER TABLE `products` ADD COLUMN `dimensions` varchar(100) DEFAULT NULL;...
2025-09-02 15:22:26,763 - DEBUG - Executing statement 8/29: ALTER TABLE `products` DROP COLUMN `old_column`;...
2025-09-02 15:22:26,768 - DEBUG - Executing statement 9/29: ALTER TABLE `products` ADD KEY `idx_products_sku` (`sku`);...
2025-09-02 15:22:26,773 - DEBUG - Executing statement 10/29: ALTER TABLE `products` ADD KEY `idx_products_price` (`price`);...
2025-09-02 15:22:26,780 - DEBUG - Executing statement 11/29: ALTER TABLE `products` ADD KEY `idx_products_stock` (`stock_quantity`);...
2025-09-02 15:22:26,785 - DEBUG - Executing statement 12/29: ALTER TABLE `products` ADD KEY `idx_products_active` (`is_active`);...
2025-09-02 15:22:26,791 - DEBUG - Executing statement 13/29: ALTER TABLE `products` ADD KEY `fk_products_category` (`category_id`);...
2025-09-02 15:22:26,797 - DEBUG - Executing statement 14/29: ALTER TABLE `products` DROP INDEX `idx_products_old`;...
2025-09-02 15:22:26,797 - WARNING - ⚠️  SQL execution warning (statement 14): (1091, "Can't DROP INDEX `idx_products_old`; check that it exists")
2025-09-02 15:22:26,797 - WARNING - Statement: ALTER TABLE `products` DROP INDEX `idx_products_old`;
2025-09-02 15:22:26,797 - DEBUG - Executing statement 15/29: ALTER TABLE `products` ADD CONSTRAINT `fk_products_category` FOREIGN KEY (`category_id`) REFERENCES ...
2025-09-02 15:22:26,801 - DEBUG - Executing statement 16/29: ALTER TABLE `customers` DROP COLUMN `loyalty_points`;...
2025-09-02 15:22:26,806 - DEBUG - Executing statement 17/29: ALTER TABLE `customers` ADD KEY `idx_customers_country` (`country`);...
2025-09-02 15:22:26,813 - DEBUG - Executing statement 18/29: ALTER TABLE `customers` ADD KEY `idx_customers_city` (`city`);...
2025-09-02 15:22:26,818 - DEBUG - Executing statement 19/29: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;...
2025-09-02 15:22:26,819 - WARNING - ⚠️  SQL execution warning (statement 19): (1091, "Can't DROP INDEX `idx_customers_loyalty`; check that it exists")
2025-09-02 15:22:26,819 - WARNING - Statement: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;
2025-09-02 15:22:26,819 - DEBUG - Executing statement 20/29: DROP PROCEDURE IF EXISTS `ddl_test_dest`.`GetCustomerOrders`;...
2025-09-02 15:22:26,820 - DEBUG - Executing statement 21/29: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*, COU...
2025-09-02 15:22:26,822 - DEBUG - Executing statement 22/29: DROP FUNCTION IF EXISTS `ddl_test_dest`.`CalculateOrderTotal`;...
2025-09-02 15:22:26,822 - DEBUG - Executing statement 23/29: CREATE DEFINER=`sstuser`@`%` FUNCTION `CalculateOrderTotal`(order_id INT) RETURNS decimal(12,2)
READ...
2025-09-02 15:22:26,823 - DEBUG - Executing statement 24/29: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_products_stock_check`;...
2025-09-02 15:22:26,823 - DEBUG - Executing statement 25/29: CREATE DEFINER=`sstuser`@`%` TRIGGER tr_products_stock_check
BEFORE UPDATE ON products
FOR EACH ROW
...
2025-09-02 15:22:26,826 - DEBUG - Executing statement 26/29: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_orders_update_timestamp`;...
2025-09-02 15:22:26,826 - DEBUG - Executing statement 27/29: CREATE DEFINER=`sstuser`@`%` TRIGGER tr_orders_update_timestamp
BEFORE UPDATE ON orders
FOR EACH ROW...
2025-09-02 15:22:26,829 - DEBUG - Executing statement 28/29: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_customers_loyalty_update`;...
2025-09-02 15:22:26,830 - DEBUG - Executing statement 29/29: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 15:22:26,831 - INFO - ✅ SQL file executed: 27 statements succeeded, 2 failed
2025-09-02 15:22:26,831 - INFO - 🔍 Checking if schemas are identical after migration...
2025-09-02 15:22:26,831 - INFO - 🔍 Running comparison step: Post-migration schema check
2025-09-02 15:22:26,832 - INFO - Running in compare mode...
2025-09-02 15:22:26,832 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 15:22:26,832 - INFO - Connecting to databases...
2025-09-02 15:22:26,833 - INFO - Database connections successful
2025-09-02 15:22:26,833 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_post_migration, stdin=None, shell=False, universal_newlines=False)
2025-09-02 15:22:26,836 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 15:22:26,837 - INFO - Initialized new git repository at test_output_post_migration
2025-09-02 15:22:26,837 - DEBUG - Created directory: test_output_post_migration/tables
2025-09-02 15:22:26,837 - DEBUG - Created directory: test_output_post_migration/functions
2025-09-02 15:22:26,837 - DEBUG - Created directory: test_output_post_migration/procedures
2025-09-02 15:22:26,837 - DEBUG - Created directory: test_output_post_migration/triggers
2025-09-02 15:22:26,837 - DEBUG - Created directory: test_output_post_migration/events
2025-09-02 15:22:26,837 - INFO - Initialized git repository at ./test_output_post_migration
2025-09-02 15:22:26,837 - INFO - Extracting DDL objects...
2025-09-02 15:22:26,844 - INFO - Comparing schemas...
2025-09-02 15:22:26,844 - INFO - Performing safety analysis...
2025-09-02 15:22:26,845 - INFO - Generating migration SQL...
2025-09-02 15:22:26,877 - INFO - Generating schema visualizations...
2025-09-02 15:22:26,880 - INFO - Generated HTML documentation
2025-09-02 15:22:26,880 - INFO - Generated Mermaid ERD
2025-09-02 15:22:26,880 - INFO - Generated Graphviz DOT file
2025-09-02 15:22:26,881 - INFO - Generated JSON schema structure
2025-09-02 15:22:26,881 - INFO - Schema visualizations generated in test_output_post_migration/documentation
2025-09-02 15:22:26,881 - INFO - Migration report generated: test_output_post_migration/migration_report.md
2025-09-02 15:22:26,887 - INFO - Started tracking migration 184: ddl_test_source_to_ddl_test_dest_1756819346
2025-09-02 15:22:26,891 - INFO - Completed migration tracking 184: SUCCESS
2025-09-02 15:22:26,891 - INFO - Migration tracking completed: 184
2025-09-02 15:22:26,892 - INFO - Migration completed successfully!
2025-09-02 15:22:26,892 - INFO - Migration ID: 184
2025-09-02 15:22:26,892 - INFO - Operations: 0
2025-09-02 15:22:26,892 - INFO - Safety warnings: 0
2025-09-02 15:22:26,892 - INFO - Migration file: test_output_post_migration/migration.sql
2025-09-02 15:22:26,892 - INFO - Rollback file: test_output_post_migration/rollback.sql
2025-09-02 15:22:26,892 - INFO - Migration report: test_output_post_migration/migration_report.md
2025-09-02 15:22:26,892 - INFO - ✅ Post-migration schema check completed successfully
2025-09-02 15:22:26,892 - INFO - ✅ Schemas are identical after migration!
2025-09-02 15:22:26,892 - INFO - 🔧 Executing SQL file: ./test_output/rollback.sql
2025-09-02 15:22:26,893 - DEBUG - Executing statement 1/23: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 15:22:26,893 - DEBUG - Executing statement 2/23: CREATE TABLE `temp_table` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`temp_data` varchar(255) DEFAULT N...
2025-09-02 15:22:26,896 - DEBUG - Executing statement 3/23: ALTER TABLE `categories` DROP COLUMN `description`;...
2025-09-02 15:22:26,901 - DEBUG - Executing statement 4/23: ALTER TABLE `categories` DROP INDEX `idx_categories_created`;...
2025-09-02 15:22:26,905 - DEBUG - Executing statement 5/23: ALTER TABLE `orders` DROP FOREIGN KEY `fk_orders_customer`;...
2025-09-02 15:22:26,910 - DEBUG - Executing statement 6/23: ALTER TABLE `products` DROP COLUMN `weight`;...
2025-09-02 15:22:26,915 - DEBUG - Executing statement 7/23: ALTER TABLE `products` DROP COLUMN `dimensions`;...
2025-09-02 15:22:26,920 - DEBUG - Executing statement 8/23: ALTER TABLE `products` ADD COLUMN `old_column` varchar(50) DEFAULT NULL;...
2025-09-02 15:22:26,924 - DEBUG - Executing statement 9/23: ALTER TABLE `products` DROP INDEX `idx_products_sku`;...
2025-09-02 15:22:26,929 - DEBUG - Executing statement 10/23: ALTER TABLE `products` DROP INDEX `idx_products_price`;...
2025-09-02 15:22:26,933 - DEBUG - Executing statement 11/23: ALTER TABLE `products` DROP INDEX `idx_products_stock`;...
2025-09-02 15:22:26,938 - DEBUG - Executing statement 12/23: ALTER TABLE `products` DROP INDEX `idx_products_active`;...
2025-09-02 15:22:26,942 - DEBUG - Executing statement 13/23: ALTER TABLE `products` DROP INDEX `fk_products_category`;...
2025-09-02 15:22:26,947 - DEBUG - Executing statement 14/23: ALTER TABLE `products` ADD KEY `idx_products_old` (`old_column`);...
2025-09-02 15:22:26,951 - DEBUG - Executing statement 15/23: ALTER TABLE `products` DROP FOREIGN KEY `fk_products_category`;...
2025-09-02 15:22:26,955 - DEBUG - Executing statement 16/23: ALTER TABLE `customers` ADD COLUMN `loyalty_points` int(11) DEFAULT 0;...
2025-09-02 15:22:26,960 - DEBUG - Executing statement 17/23: ALTER TABLE `customers` DROP INDEX `idx_customers_country`;...
2025-09-02 15:22:26,965 - DEBUG - Executing statement 18/23: ALTER TABLE `customers` DROP INDEX `idx_customers_city`;...
2025-09-02 15:22:26,969 - DEBUG - Executing statement 19/23: ALTER TABLE `customers` ADD KEY `idx_customers_loyalty` (`loyalty_points`);...
2025-09-02 15:22:26,975 - DEBUG - Executing statement 20/23: DROP PROCEDURE IF EXISTS `GetCustomerOrders`;...
2025-09-02 15:22:26,977 - DEBUG - Executing statement 21/23: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*
FROM...
2025-09-02 15:22:26,978 - DEBUG - Executing statement 22/23: DROP FUNCTION IF EXISTS `CalculateOrderTotal`;...
2025-09-02 15:22:26,979 - DEBUG - Executing statement 23/23: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 15:22:26,979 - INFO - ✅ SQL file executed: 23 statements succeeded, 0 failed
2025-09-02 15:22:26,980 - INFO - 🔍 Running comparison step: Final comparison after rollback
2025-09-02 15:22:26,980 - INFO - Running in compare mode...
2025-09-02 15:22:26,981 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 15:22:26,981 - INFO - Connecting to databases...
2025-09-02 15:22:26,981 - INFO - Database connections successful
2025-09-02 15:22:26,982 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_final, stdin=None, shell=False, universal_newlines=False)
2025-09-02 15:22:26,984 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 15:22:26,984 - INFO - Initialized new git repository at test_output_final
2025-09-02 15:22:26,984 - DEBUG - Created directory: test_output_final/tables
2025-09-02 15:22:26,984 - DEBUG - Created directory: test_output_final/functions
2025-09-02 15:22:26,985 - DEBUG - Created directory: test_output_final/procedures
2025-09-02 15:22:26,985 - DEBUG - Created directory: test_output_final/triggers
2025-09-02 15:22:26,985 - DEBUG - Created directory: test_output_final/events
2025-09-02 15:22:26,985 - INFO - Initialized git repository at ./test_output_final
2025-09-02 15:22:26,985 - INFO - Extracting DDL objects...
2025-09-02 15:22:26,990 - INFO - Comparing schemas...
2025-09-02 15:22:26,990 - INFO - Performing safety analysis...
2025-09-02 15:22:26,990 - INFO - Generating migration SQL...
2025-09-02 15:22:27,016 - INFO - Generating schema visualizations...
2025-09-02 15:22:27,018 - INFO - Generated HTML documentation
2025-09-02 15:22:27,019 - INFO - Generated Mermaid ERD
2025-09-02 15:22:27,019 - INFO - Generated Graphviz DOT file
2025-09-02 15:22:27,019 - INFO - Generated JSON schema structure
2025-09-02 15:22:27,019 - INFO - Schema visualizations generated in test_output_final/documentation
2025-09-02 15:22:27,020 - INFO - Migration report generated: test_output_final/migration_report.md
2025-09-02 15:22:27,026 - INFO - Started tracking migration 185: ddl_test_source_to_ddl_test_dest_1756819347
2025-09-02 15:22:27,031 - INFO - Completed migration tracking 185: SUCCESS
2025-09-02 15:22:27,031 - INFO - Migration tracking completed: 185
2025-09-02 15:22:27,031 - INFO - Migration completed successfully!
2025-09-02 15:22:27,032 - INFO - Migration ID: 185
2025-09-02 15:22:27,032 - INFO - Operations: 7
2025-09-02 15:22:27,032 - INFO - Safety warnings: 0
2025-09-02 15:22:27,032 - INFO - Migration file: test_output_final/migration.sql
2025-09-02 15:22:27,032 - INFO - Rollback file: test_output_final/rollback.sql
2025-09-02 15:22:27,032 - INFO - Migration report: test_output_final/migration_report.md
2025-09-02 15:22:27,032 - INFO - ✅ Final comparison after rollback completed successfully
2025-09-02 15:22:27,032 - INFO - 🔍 Analyzing results in ./test_output_final...
2025-09-02 15:22:27,032 - INFO - 🔄 Comparing initial and final results...
2025-09-02 15:22:27,032 - INFO - ✅ Rollback test passed - initial and final states match!
2025-09-02 15:22:27,032 - INFO - 💾 Saving test data for reference...
2025-09-02 15:22:27,036 - INFO - ✅ Saved ./test_output to test_data/ddlw-test-20250902_152227/ddl-wizard-testsuite-initial-migration-20250902_152227
2025-09-02 15:22:27,040 - INFO - ✅ Saved ./test_output to test_data/ddlw-test-20250902_152227/test_output
2025-09-02 15:22:27,043 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddlw-test-20250902_152227/ddl-wizard-testsuite-post-migration-verification-20250902_152227
2025-09-02 15:22:27,046 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddlw-test-20250902_152227/test_output_post_migration
2025-09-02 15:22:27,051 - INFO - ✅ Saved ./test_output_final to test_data/ddlw-test-20250902_152227/ddl-wizard-testsuite-rollback-verification-20250902_152227
2025-09-02 15:22:27,056 - INFO - ✅ Saved ./test_output_final to test_data/ddlw-test-20250902_152227/test_output_final
2025-09-02 15:22:27,056 - INFO - ✅ Saved test log to test_data/ddlw-test-20250902_152227
2025-09-02 15:22:27,058 - INFO - 🧹 Cleaned up temporary directory: ./test_output
2025-09-02 15:22:27,059 - INFO - 🧹 Cleaned up temporary directory: ./test_output_post_migration
2025-09-02 15:22:27,060 - INFO - 🧹 Cleaned up temporary directory: ./test_output_final
2025-09-02 15:22:27,060 - INFO - 🧹 Cleaning up test databases...
2025-09-02 15:22:27,061 - INFO - ✅ Cleaned up database: ddl_test_source
2025-09-02 15:22:27,061 - INFO - ✅ Cleaned up database: ddl_test_dest
2025-09-02 15:23:58,967 - INFO - 🏗️  Setting up source database...
2025-09-02 15:23:59,023 - INFO - ✅ Source database setup completed
2025-09-02 15:23:59,023 - INFO - 🏗️  Setting up destination database with differences...
2025-09-02 15:23:59,074 - INFO - ✅ Destination database setup completed
2025-09-02 15:23:59,075 - INFO - 📝 Populating test data...
2025-09-02 15:23:59,077 - INFO - ✅ Test data populated in ddl_test_source
2025-09-02 15:23:59,079 - INFO - ✅ Test data populated in ddl_test_dest
2025-09-02 15:23:59,079 - INFO - 🔍 Running comparison step: Initial comparison
2025-09-02 15:23:59,080 - INFO - Running in compare mode...
2025-09-02 15:23:59,081 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 15:23:59,081 - INFO - Connecting to databases...
2025-09-02 15:23:59,082 - INFO - Database connections successful
2025-09-02 15:23:59,082 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output, stdin=None, shell=False, universal_newlines=False)
2025-09-02 15:23:59,086 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 15:23:59,086 - INFO - Initialized new git repository at test_output
2025-09-02 15:23:59,087 - DEBUG - Created directory: test_output/tables
2025-09-02 15:23:59,087 - DEBUG - Created directory: test_output/functions
2025-09-02 15:23:59,087 - DEBUG - Created directory: test_output/procedures
2025-09-02 15:23:59,087 - DEBUG - Created directory: test_output/triggers
2025-09-02 15:23:59,087 - DEBUG - Created directory: test_output/events
2025-09-02 15:23:59,087 - INFO - Initialized git repository at ./test_output
2025-09-02 15:23:59,087 - INFO - Extracting DDL objects...
2025-09-02 15:23:59,101 - INFO - Comparing schemas...
2025-09-02 15:23:59,101 - INFO - Performing safety analysis...
2025-09-02 15:23:59,101 - INFO - Generating migration SQL...
2025-09-02 15:23:59,132 - INFO - Generating schema visualizations...
2025-09-02 15:23:59,135 - INFO - Generated HTML documentation
2025-09-02 15:23:59,135 - INFO - Generated Mermaid ERD
2025-09-02 15:23:59,135 - INFO - Generated Graphviz DOT file
2025-09-02 15:23:59,136 - INFO - Generated JSON schema structure
2025-09-02 15:23:59,136 - INFO - Schema visualizations generated in test_output/documentation
2025-09-02 15:23:59,136 - INFO - Migration report generated: test_output/migration_report.md
2025-09-02 15:23:59,140 - INFO - Started tracking migration 186: ddl_test_source_to_ddl_test_dest_1756819439
2025-09-02 15:23:59,145 - INFO - Completed migration tracking 186: SUCCESS
2025-09-02 15:23:59,145 - INFO - Migration tracking completed: 186
2025-09-02 15:23:59,145 - INFO - Migration completed successfully!
2025-09-02 15:23:59,145 - INFO - Migration ID: 186
2025-09-02 15:23:59,145 - INFO - Operations: 6
2025-09-02 15:23:59,145 - INFO - Safety warnings: 0
2025-09-02 15:23:59,145 - INFO - Migration file: test_output/migration.sql
2025-09-02 15:23:59,145 - INFO - Rollback file: test_output/rollback.sql
2025-09-02 15:23:59,145 - INFO - Migration report: test_output/migration_report.md
2025-09-02 15:23:59,145 - INFO - ✅ Initial comparison completed successfully
2025-09-02 15:23:59,145 - INFO - 🔍 Analyzing results in ./test_output...
2025-09-02 15:23:59,145 - INFO - 🔧 Executing SQL file: ./test_output/migration.sql
2025-09-02 15:23:59,146 - DEBUG - Executing statement 1/27: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 15:23:59,146 - DEBUG - Executing statement 2/27: DROP TABLE IF EXISTS `ddl_test_dest`.`temp_table`;...
2025-09-02 15:23:59,149 - DEBUG - Executing statement 3/27: ALTER TABLE `customers` DROP COLUMN `loyalty_points`;...
2025-09-02 15:23:59,155 - DEBUG - Executing statement 4/27: ALTER TABLE `customers` ADD KEY `idx_customers_city` (`city`);...
2025-09-02 15:23:59,162 - DEBUG - Executing statement 5/27: ALTER TABLE `customers` ADD KEY `idx_customers_country` (`country`);...
2025-09-02 15:23:59,167 - DEBUG - Executing statement 6/27: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;...
2025-09-02 15:23:59,167 - WARNING - ⚠️  SQL execution warning (statement 6): (1091, "Can't DROP INDEX `idx_customers_loyalty`; check that it exists")
2025-09-02 15:23:59,167 - WARNING - Statement: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;
2025-09-02 15:23:59,167 - DEBUG - Executing statement 7/27: ALTER TABLE `orders` ADD CONSTRAINT `fk_orders_customer` FOREIGN KEY (`customer_id`) REFERENCES `cus...
2025-09-02 15:23:59,172 - DEBUG - Executing statement 8/27: ALTER TABLE `categories` ADD COLUMN `description` text DEFAULT NULL;...
2025-09-02 15:23:59,176 - DEBUG - Executing statement 9/27: ALTER TABLE `categories` ADD KEY `idx_categories_created` (`created_at`);...
2025-09-02 15:23:59,183 - DEBUG - Executing statement 10/27: ALTER TABLE `products` ADD COLUMN `weight` decimal(8,3) DEFAULT NULL;...
2025-09-02 15:23:59,187 - DEBUG - Executing statement 11/27: ALTER TABLE `products` ADD COLUMN `dimensions` varchar(100) DEFAULT NULL;...
2025-09-02 15:23:59,192 - DEBUG - Executing statement 12/27: ALTER TABLE `products` DROP COLUMN `old_column`;...
2025-09-02 15:23:59,197 - DEBUG - Executing statement 13/27: ALTER TABLE `products` ADD KEY `idx_products_price` (`price`);...
2025-09-02 15:23:59,203 - DEBUG - Executing statement 14/27: ALTER TABLE `products` ADD KEY `idx_products_sku` (`sku`);...
2025-09-02 15:23:59,208 - DEBUG - Executing statement 15/27: ALTER TABLE `products` ADD KEY `idx_products_active` (`is_active`);...
2025-09-02 15:23:59,214 - DEBUG - Executing statement 16/27: ALTER TABLE `products` ADD KEY `fk_products_category` (`category_id`);...
2025-09-02 15:23:59,220 - DEBUG - Executing statement 17/27: ALTER TABLE `products` ADD KEY `idx_products_stock` (`stock_quantity`);...
2025-09-02 15:23:59,226 - DEBUG - Executing statement 18/27: ALTER TABLE `products` DROP INDEX `idx_products_old`;...
2025-09-02 15:23:59,226 - WARNING - ⚠️  SQL execution warning (statement 18): (1091, "Can't DROP INDEX `idx_products_old`; check that it exists")
2025-09-02 15:23:59,226 - WARNING - Statement: ALTER TABLE `products` DROP INDEX `idx_products_old`;
2025-09-02 15:23:59,226 - DEBUG - Executing statement 19/27: ALTER TABLE `products` ADD CONSTRAINT `fk_products_category` FOREIGN KEY (`category_id`) REFERENCES ...
2025-09-02 15:23:59,230 - DEBUG - Executing statement 20/27: DROP PROCEDURE IF EXISTS `ddl_test_dest`.`GetCustomerOrders`;...
2025-09-02 15:23:59,232 - DEBUG - Executing statement 21/27: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*, COU...
2025-09-02 15:23:59,233 - DEBUG - Executing statement 22/27: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_orders_update_timestamp`;...
2025-09-02 15:23:59,234 - DEBUG - Executing statement 23/27: CREATE DEFINER=`sstuser`@`%` TRIGGER tr_orders_update_timestamp
BEFORE UPDATE ON orders
FOR EACH ROW...
2025-09-02 15:23:59,236 - DEBUG - Executing statement 24/27: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_products_stock_check`;...
2025-09-02 15:23:59,236 - DEBUG - Executing statement 25/27: CREATE DEFINER=`sstuser`@`%` TRIGGER tr_products_stock_check
BEFORE UPDATE ON products
FOR EACH ROW
...
2025-09-02 15:23:59,239 - DEBUG - Executing statement 26/27: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_customers_loyalty_update`;...
2025-09-02 15:23:59,241 - DEBUG - Executing statement 27/27: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 15:23:59,241 - INFO - ✅ SQL file executed: 25 statements succeeded, 2 failed
2025-09-02 15:23:59,241 - INFO - 🔍 Checking if schemas are identical after migration...
2025-09-02 15:23:59,241 - INFO - 🔍 Running comparison step: Post-migration schema check
2025-09-02 15:23:59,242 - INFO - Running in compare mode...
2025-09-02 15:23:59,242 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 15:23:59,242 - INFO - Connecting to databases...
2025-09-02 15:23:59,244 - INFO - Database connections successful
2025-09-02 15:23:59,244 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_post_migration, stdin=None, shell=False, universal_newlines=False)
2025-09-02 15:23:59,247 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 15:23:59,248 - INFO - Initialized new git repository at test_output_post_migration
2025-09-02 15:23:59,248 - DEBUG - Created directory: test_output_post_migration/tables
2025-09-02 15:23:59,248 - DEBUG - Created directory: test_output_post_migration/functions
2025-09-02 15:23:59,248 - DEBUG - Created directory: test_output_post_migration/procedures
2025-09-02 15:23:59,248 - DEBUG - Created directory: test_output_post_migration/triggers
2025-09-02 15:23:59,248 - DEBUG - Created directory: test_output_post_migration/events
2025-09-02 15:23:59,248 - INFO - Initialized git repository at ./test_output_post_migration
2025-09-02 15:23:59,248 - INFO - Extracting DDL objects...
2025-09-02 15:23:59,255 - INFO - Comparing schemas...
2025-09-02 15:23:59,255 - INFO - Performing safety analysis...
2025-09-02 15:23:59,255 - INFO - Generating migration SQL...
2025-09-02 15:23:59,283 - INFO - Generating schema visualizations...
2025-09-02 15:23:59,285 - INFO - Generated HTML documentation
2025-09-02 15:23:59,285 - INFO - Generated Mermaid ERD
2025-09-02 15:23:59,285 - INFO - Generated Graphviz DOT file
2025-09-02 15:23:59,286 - INFO - Generated JSON schema structure
2025-09-02 15:23:59,286 - INFO - Schema visualizations generated in test_output_post_migration/documentation
2025-09-02 15:23:59,286 - INFO - Migration report generated: test_output_post_migration/migration_report.md
2025-09-02 15:23:59,292 - INFO - Started tracking migration 187: ddl_test_source_to_ddl_test_dest_1756819439
2025-09-02 15:23:59,296 - INFO - Completed migration tracking 187: SUCCESS
2025-09-02 15:23:59,296 - INFO - Migration tracking completed: 187
2025-09-02 15:23:59,296 - INFO - Migration completed successfully!
2025-09-02 15:23:59,296 - INFO - Migration ID: 187
2025-09-02 15:23:59,296 - INFO - Operations: 0
2025-09-02 15:23:59,296 - INFO - Safety warnings: 0
2025-09-02 15:23:59,296 - INFO - Migration file: test_output_post_migration/migration.sql
2025-09-02 15:23:59,296 - INFO - Rollback file: test_output_post_migration/rollback.sql
2025-09-02 15:23:59,296 - INFO - Migration report: test_output_post_migration/migration_report.md
2025-09-02 15:23:59,297 - INFO - ✅ Post-migration schema check completed successfully
2025-09-02 15:23:59,297 - INFO - ✅ Schemas are identical after migration!
2025-09-02 15:23:59,297 - INFO - 🔧 Executing SQL file: ./test_output/rollback.sql
2025-09-02 15:23:59,297 - DEBUG - Executing statement 1/22: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 15:23:59,297 - DEBUG - Executing statement 2/22: CREATE TABLE `temp_table` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`temp_data` varchar(255) DEFAULT N...
2025-09-02 15:23:59,300 - DEBUG - Executing statement 3/22: ALTER TABLE `customers` ADD COLUMN `loyalty_points` int(11) DEFAULT 0;...
2025-09-02 15:23:59,306 - DEBUG - Executing statement 4/22: ALTER TABLE `customers` DROP INDEX `idx_customers_city`;...
2025-09-02 15:23:59,311 - DEBUG - Executing statement 5/22: ALTER TABLE `customers` DROP INDEX `idx_customers_country`;...
2025-09-02 15:23:59,316 - DEBUG - Executing statement 6/22: ALTER TABLE `customers` ADD KEY `idx_customers_loyalty` (`loyalty_points`);...
2025-09-02 15:23:59,321 - DEBUG - Executing statement 7/22: ALTER TABLE `orders` DROP FOREIGN KEY `fk_orders_customer`;...
2025-09-02 15:23:59,325 - DEBUG - Executing statement 8/22: ALTER TABLE `categories` DROP COLUMN `description`;...
2025-09-02 15:23:59,330 - DEBUG - Executing statement 9/22: ALTER TABLE `categories` DROP INDEX `idx_categories_created`;...
2025-09-02 15:23:59,334 - DEBUG - Executing statement 10/22: ALTER TABLE `products` DROP COLUMN `weight`;...
2025-09-02 15:23:59,339 - DEBUG - Executing statement 11/22: ALTER TABLE `products` DROP COLUMN `dimensions`;...
2025-09-02 15:23:59,345 - DEBUG - Executing statement 12/22: ALTER TABLE `products` ADD COLUMN `old_column` varchar(50) DEFAULT NULL;...
2025-09-02 15:23:59,350 - DEBUG - Executing statement 13/22: ALTER TABLE `products` DROP INDEX `idx_products_price`;...
2025-09-02 15:23:59,355 - DEBUG - Executing statement 14/22: ALTER TABLE `products` DROP INDEX `idx_products_sku`;...
2025-09-02 15:23:59,359 - DEBUG - Executing statement 15/22: ALTER TABLE `products` DROP INDEX `idx_products_active`;...
2025-09-02 15:23:59,363 - DEBUG - Executing statement 16/22: ALTER TABLE `products` DROP INDEX `fk_products_category`;...
2025-09-02 15:23:59,368 - DEBUG - Executing statement 17/22: ALTER TABLE `products` DROP INDEX `idx_products_stock`;...
2025-09-02 15:23:59,372 - DEBUG - Executing statement 18/22: ALTER TABLE `products` ADD KEY `idx_products_old` (`old_column`);...
2025-09-02 15:23:59,377 - DEBUG - Executing statement 19/22: ALTER TABLE `products` DROP FOREIGN KEY `fk_products_category`;...
2025-09-02 15:23:59,382 - DEBUG - Executing statement 20/22: DROP PROCEDURE IF EXISTS `GetCustomerOrders`;...
2025-09-02 15:23:59,384 - DEBUG - Executing statement 21/22: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*
FROM...
2025-09-02 15:23:59,385 - DEBUG - Executing statement 22/22: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 15:23:59,385 - INFO - ✅ SQL file executed: 22 statements succeeded, 0 failed
2025-09-02 15:23:59,386 - INFO - 🔍 Running comparison step: Final comparison after rollback
2025-09-02 15:23:59,386 - INFO - Running in compare mode...
2025-09-02 15:23:59,387 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 15:23:59,387 - INFO - Connecting to databases...
2025-09-02 15:23:59,388 - INFO - Database connections successful
2025-09-02 15:23:59,388 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_final, stdin=None, shell=False, universal_newlines=False)
2025-09-02 15:23:59,390 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 15:23:59,391 - INFO - Initialized new git repository at test_output_final
2025-09-02 15:23:59,391 - DEBUG - Created directory: test_output_final/tables
2025-09-02 15:23:59,391 - DEBUG - Created directory: test_output_final/functions
2025-09-02 15:23:59,391 - DEBUG - Created directory: test_output_final/procedures
2025-09-02 15:23:59,391 - DEBUG - Created directory: test_output_final/triggers
2025-09-02 15:23:59,391 - DEBUG - Created directory: test_output_final/events
2025-09-02 15:23:59,391 - INFO - Initialized git repository at ./test_output_final
2025-09-02 15:23:59,391 - INFO - Extracting DDL objects...
2025-09-02 15:23:59,397 - INFO - Comparing schemas...
2025-09-02 15:23:59,397 - INFO - Performing safety analysis...
2025-09-02 15:23:59,397 - INFO - Generating migration SQL...
2025-09-02 15:23:59,424 - INFO - Generating schema visualizations...
2025-09-02 15:23:59,426 - INFO - Generated HTML documentation
2025-09-02 15:23:59,426 - INFO - Generated Mermaid ERD
2025-09-02 15:23:59,427 - INFO - Generated Graphviz DOT file
2025-09-02 15:23:59,427 - INFO - Generated JSON schema structure
2025-09-02 15:23:59,427 - INFO - Schema visualizations generated in test_output_final/documentation
2025-09-02 15:23:59,428 - INFO - Migration report generated: test_output_final/migration_report.md
2025-09-02 15:23:59,434 - INFO - Started tracking migration 188: ddl_test_source_to_ddl_test_dest_1756819439
2025-09-02 15:23:59,438 - INFO - Completed migration tracking 188: SUCCESS
2025-09-02 15:23:59,438 - INFO - Migration tracking completed: 188
2025-09-02 15:23:59,438 - INFO - Migration completed successfully!
2025-09-02 15:23:59,438 - INFO - Migration ID: 188
2025-09-02 15:23:59,438 - INFO - Operations: 6
2025-09-02 15:23:59,438 - INFO - Safety warnings: 0
2025-09-02 15:23:59,438 - INFO - Migration file: test_output_final/migration.sql
2025-09-02 15:23:59,438 - INFO - Rollback file: test_output_final/rollback.sql
2025-09-02 15:23:59,438 - INFO - Migration report: test_output_final/migration_report.md
2025-09-02 15:23:59,438 - INFO - ✅ Final comparison after rollback completed successfully
2025-09-02 15:23:59,438 - INFO - 🔍 Analyzing results in ./test_output_final...
2025-09-02 15:23:59,438 - INFO - 🔄 Comparing initial and final results...
2025-09-02 15:23:59,438 - INFO - ✅ Rollback test passed - initial and final states match!
2025-09-02 15:23:59,439 - INFO - 💾 Saving test data for reference...
2025-09-02 15:23:59,442 - INFO - ✅ Saved ./test_output to test_data/ddlw-test-20250902_152359/ddl-wizard-testsuite-initial-migration-20250902_152359
2025-09-02 15:23:59,445 - INFO - ✅ Saved ./test_output to test_data/ddlw-test-20250902_152359/test_output
2025-09-02 15:23:59,449 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddlw-test-20250902_152359/ddl-wizard-testsuite-post-migration-verification-20250902_152359
2025-09-02 15:23:59,452 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddlw-test-20250902_152359/test_output_post_migration
2025-09-02 15:23:59,455 - INFO - ✅ Saved ./test_output_final to test_data/ddlw-test-20250902_152359/ddl-wizard-testsuite-rollback-verification-20250902_152359
2025-09-02 15:23:59,458 - INFO - ✅ Saved ./test_output_final to test_data/ddlw-test-20250902_152359/test_output_final
2025-09-02 15:23:59,458 - INFO - ✅ Saved test log to test_data/ddlw-test-20250902_152359
2025-09-02 15:23:59,459 - INFO - 🧹 Cleaned up temporary directory: ./test_output
2025-09-02 15:23:59,460 - INFO - 🧹 Cleaned up temporary directory: ./test_output_post_migration
2025-09-02 15:23:59,461 - INFO - 🧹 Cleaned up temporary directory: ./test_output_final
2025-09-02 15:23:59,461 - INFO - 🧹 Cleaning up test databases...
2025-09-02 15:23:59,462 - INFO - ✅ Cleaned up database: ddl_test_source
2025-09-02 15:23:59,462 - INFO - ✅ Cleaned up database: ddl_test_dest
2025-09-02 15:25:11,316 - INFO - Running in compare mode...
2025-09-02 15:25:11,316 - INFO - Connecting to databases...
2025-09-02 15:25:11,319 - INFO - Database connections successful
2025-09-02 15:25:11,322 - INFO - Initialized new git repository at /home/claudio/Projects/ddl_wiz202
2025-09-02 15:25:11,322 - INFO - Initialized git repository at /home/claudio/Projects/ddl_wiz202
2025-09-02 15:25:11,322 - INFO - Extracting DDL objects...
2025-09-02 15:25:11,328 - INFO - Comparing schemas...
2025-09-02 15:25:11,328 - INFO - Performing safety analysis...
2025-09-02 15:25:11,328 - INFO - Generating migration SQL...
2025-09-02 15:25:11,357 - INFO - Generating schema visualizations...
2025-09-02 15:25:11,359 - INFO - Generated HTML documentation
2025-09-02 15:25:11,360 - INFO - Generated Mermaid ERD
2025-09-02 15:25:11,360 - INFO - Generated Graphviz DOT file
2025-09-02 15:25:11,360 - INFO - Generated JSON schema structure
2025-09-02 15:25:11,360 - INFO - Schema visualizations generated in /home/claudio/Projects/ddl_wiz202/documentation
2025-09-02 15:25:11,361 - INFO - Migration report generated: /home/claudio/Projects/ddl_wiz202/migration_report.md
2025-09-02 15:25:11,371 - INFO - Started tracking migration 189: ddl_test_source_to_ddl_test_dest_1756819511
2025-09-02 15:25:11,375 - INFO - Completed migration tracking 189: SUCCESS
2025-09-02 15:25:11,375 - INFO - Migration tracking completed: 189
2025-09-02 15:25:11,375 - INFO - Migration completed successfully!
2025-09-02 15:25:11,375 - INFO - Migration ID: 189
2025-09-02 15:25:11,376 - INFO - Operations: 6
2025-09-02 15:25:11,376 - INFO - Safety warnings: 0
2025-09-02 15:25:11,376 - INFO - Migration file: /home/claudio/Projects/ddl_wiz202/migration.sql
2025-09-02 15:25:11,376 - INFO - Rollback file: /home/claudio/Projects/ddl_wiz202/rollback.sql
2025-09-02 15:25:11,376 - INFO - Migration report: /home/claudio/Projects/ddl_wiz202/migration_report.md
2025-09-02 15:26:26,364 - INFO - Running in compare mode...
2025-09-02 15:26:26,365 - INFO - Connecting to databases...
2025-09-02 15:26:26,367 - INFO - Database connections successful
2025-09-02 15:26:26,370 - INFO - Initialized new git repository at /home/claudio/Projects/ddl_wiz203
2025-09-02 15:26:26,370 - INFO - Initialized git repository at /home/claudio/Projects/ddl_wiz203
2025-09-02 15:26:26,370 - INFO - Extracting DDL objects...
2025-09-02 15:26:26,376 - INFO - Comparing schemas...
2025-09-02 15:26:26,376 - INFO - Performing safety analysis...
2025-09-02 15:26:26,377 - INFO - Generating migration SQL...
2025-09-02 15:26:26,405 - INFO - Generating schema visualizations...
2025-09-02 15:26:26,407 - INFO - Generated HTML documentation
2025-09-02 15:26:26,407 - INFO - Generated Mermaid ERD
2025-09-02 15:26:26,407 - INFO - Generated Graphviz DOT file
2025-09-02 15:26:26,408 - INFO - Generated JSON schema structure
2025-09-02 15:26:26,408 - INFO - Schema visualizations generated in /home/claudio/Projects/ddl_wiz203/documentation
2025-09-02 15:26:26,408 - INFO - Migration report generated: /home/claudio/Projects/ddl_wiz203/migration_report.md
2025-09-02 15:26:26,414 - INFO - Started tracking migration 190: ddl_test_source_to_ddl_test_dest_1756819586
2025-09-02 15:26:26,418 - INFO - Completed migration tracking 190: SUCCESS
2025-09-02 15:26:26,418 - INFO - Migration tracking completed: 190
2025-09-02 15:26:26,418 - INFO - Migration completed successfully!
2025-09-02 15:26:26,418 - INFO - Migration ID: 190
2025-09-02 15:26:26,418 - INFO - Operations: 0
2025-09-02 15:26:26,418 - INFO - Safety warnings: 0
2025-09-02 15:26:26,418 - INFO - Migration file: /home/claudio/Projects/ddl_wiz203/migration.sql
2025-09-02 15:26:26,418 - INFO - Rollback file: /home/claudio/Projects/ddl_wiz203/rollback.sql
2025-09-02 15:26:26,418 - INFO - Migration report: /home/claudio/Projects/ddl_wiz203/migration_report.md
2025-09-02 15:27:48,256 - INFO - 🏗️  Setting up source database...
2025-09-02 15:27:48,313 - INFO - ✅ Source database setup completed
2025-09-02 15:27:48,313 - INFO - 🏗️  Setting up destination database with differences...
2025-09-02 15:27:48,364 - INFO - ✅ Destination database setup completed
2025-09-02 15:27:48,364 - INFO - 📝 Populating test data...
2025-09-02 15:27:48,366 - INFO - ✅ Test data populated in ddl_test_source
2025-09-02 15:27:48,368 - INFO - ✅ Test data populated in ddl_test_dest
2025-09-02 15:27:48,368 - INFO - 🔍 Running comparison step: Initial comparison
2025-09-02 15:27:48,368 - INFO - Running in compare mode...
2025-09-02 15:27:48,369 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 15:27:48,369 - INFO - Connecting to databases...
2025-09-02 15:27:48,370 - INFO - Database connections successful
2025-09-02 15:27:48,370 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output, stdin=None, shell=False, universal_newlines=False)
2025-09-02 15:27:48,373 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 15:27:48,374 - INFO - Initialized new git repository at test_output
2025-09-02 15:27:48,374 - DEBUG - Created directory: test_output/tables
2025-09-02 15:27:48,374 - DEBUG - Created directory: test_output/functions
2025-09-02 15:27:48,374 - DEBUG - Created directory: test_output/procedures
2025-09-02 15:27:48,374 - DEBUG - Created directory: test_output/triggers
2025-09-02 15:27:48,374 - DEBUG - Created directory: test_output/events
2025-09-02 15:27:48,374 - INFO - Initialized git repository at ./test_output
2025-09-02 15:27:48,374 - INFO - Extracting DDL objects...
2025-09-02 15:27:48,385 - INFO - Comparing schemas...
2025-09-02 15:27:48,385 - INFO - Performing safety analysis...
2025-09-02 15:27:48,385 - INFO - Generating migration SQL...
2025-09-02 15:27:48,418 - INFO - Generating schema visualizations...
2025-09-02 15:27:48,420 - INFO - Generated HTML documentation
2025-09-02 15:27:48,421 - INFO - Generated Mermaid ERD
2025-09-02 15:27:48,421 - INFO - Generated Graphviz DOT file
2025-09-02 15:27:48,421 - INFO - Generated JSON schema structure
2025-09-02 15:27:48,421 - INFO - Schema visualizations generated in test_output/documentation
2025-09-02 15:27:48,422 - INFO - Migration report generated: test_output/migration_report.md
2025-09-02 15:27:48,428 - INFO - Started tracking migration 191: ddl_test_source_to_ddl_test_dest_1756819668
2025-09-02 15:27:48,432 - INFO - Completed migration tracking 191: SUCCESS
2025-09-02 15:27:48,433 - INFO - Migration tracking completed: 191
2025-09-02 15:27:48,433 - INFO - Migration completed successfully!
2025-09-02 15:27:48,433 - INFO - Migration ID: 191
2025-09-02 15:27:48,433 - INFO - Operations: 6
2025-09-02 15:27:48,433 - INFO - Safety warnings: 0
2025-09-02 15:27:48,433 - INFO - Migration file: test_output/migration.sql
2025-09-02 15:27:48,433 - INFO - Rollback file: test_output/rollback.sql
2025-09-02 15:27:48,433 - INFO - Migration report: test_output/migration_report.md
2025-09-02 15:27:48,433 - INFO - ✅ Initial comparison completed successfully
2025-09-02 15:27:48,433 - INFO - 🔍 Analyzing results in ./test_output...
2025-09-02 15:27:48,433 - INFO - 🔧 Executing SQL file: ./test_output/migration.sql
2025-09-02 15:27:48,434 - DEBUG - Executing statement 1/27: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 15:27:48,434 - DEBUG - Executing statement 2/27: DROP TABLE IF EXISTS `ddl_test_dest`.`temp_table`;...
2025-09-02 15:27:48,436 - DEBUG - Executing statement 3/27: ALTER TABLE `orders` ADD CONSTRAINT `fk_orders_customer` FOREIGN KEY (`customer_id`) REFERENCES `cus...
2025-09-02 15:27:48,440 - DEBUG - Executing statement 4/27: ALTER TABLE `customers` DROP COLUMN `loyalty_points`;...
2025-09-02 15:27:48,445 - DEBUG - Executing statement 5/27: ALTER TABLE `customers` ADD KEY `idx_customers_city` (`city`);...
2025-09-02 15:27:48,452 - DEBUG - Executing statement 6/27: ALTER TABLE `customers` ADD KEY `idx_customers_country` (`country`);...
2025-09-02 15:27:48,458 - DEBUG - Executing statement 7/27: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;...
2025-09-02 15:27:48,458 - WARNING - ⚠️  SQL execution warning (statement 7): (1091, "Can't DROP INDEX `idx_customers_loyalty`; check that it exists")
2025-09-02 15:27:48,458 - WARNING - Statement: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;
2025-09-02 15:27:48,458 - DEBUG - Executing statement 8/27: ALTER TABLE `products` ADD COLUMN `weight` decimal(8,3) DEFAULT NULL;...
2025-09-02 15:27:48,463 - DEBUG - Executing statement 9/27: ALTER TABLE `products` ADD COLUMN `dimensions` varchar(100) DEFAULT NULL;...
2025-09-02 15:27:48,467 - DEBUG - Executing statement 10/27: ALTER TABLE `products` DROP COLUMN `old_column`;...
2025-09-02 15:27:48,472 - DEBUG - Executing statement 11/27: ALTER TABLE `products` ADD KEY `fk_products_category` (`category_id`);...
2025-09-02 15:27:48,478 - DEBUG - Executing statement 12/27: ALTER TABLE `products` ADD KEY `idx_products_sku` (`sku`);...
2025-09-02 15:27:48,484 - DEBUG - Executing statement 13/27: ALTER TABLE `products` ADD KEY `idx_products_price` (`price`);...
2025-09-02 15:27:48,490 - DEBUG - Executing statement 14/27: ALTER TABLE `products` ADD KEY `idx_products_stock` (`stock_quantity`);...
2025-09-02 15:27:48,496 - DEBUG - Executing statement 15/27: ALTER TABLE `products` ADD KEY `idx_products_active` (`is_active`);...
2025-09-02 15:27:48,502 - DEBUG - Executing statement 16/27: ALTER TABLE `products` DROP INDEX `idx_products_old`;...
2025-09-02 15:27:48,502 - WARNING - ⚠️  SQL execution warning (statement 16): (1091, "Can't DROP INDEX `idx_products_old`; check that it exists")
2025-09-02 15:27:48,502 - WARNING - Statement: ALTER TABLE `products` DROP INDEX `idx_products_old`;
2025-09-02 15:27:48,502 - DEBUG - Executing statement 17/27: ALTER TABLE `products` ADD CONSTRAINT `fk_products_category` FOREIGN KEY (`category_id`) REFERENCES ...
2025-09-02 15:27:48,506 - DEBUG - Executing statement 18/27: ALTER TABLE `categories` ADD COLUMN `description` text DEFAULT NULL;...
2025-09-02 15:27:48,511 - DEBUG - Executing statement 19/27: ALTER TABLE `categories` ADD KEY `idx_categories_created` (`created_at`);...
2025-09-02 15:27:48,517 - DEBUG - Executing statement 20/27: DROP PROCEDURE IF EXISTS `ddl_test_dest`.`GetCustomerOrders`;...
2025-09-02 15:27:48,519 - DEBUG - Executing statement 21/27: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*, COU...
2025-09-02 15:27:48,521 - DEBUG - Executing statement 22/27: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_orders_update_timestamp`;...
2025-09-02 15:27:48,522 - DEBUG - Executing statement 23/27: CREATE DEFINER=`sstuser`@`%` TRIGGER tr_orders_update_timestamp
BEFORE UPDATE ON orders
FOR EACH ROW...
2025-09-02 15:27:48,525 - DEBUG - Executing statement 24/27: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_products_stock_check`;...
2025-09-02 15:27:48,525 - DEBUG - Executing statement 25/27: CREATE DEFINER=`sstuser`@`%` TRIGGER tr_products_stock_check
BEFORE UPDATE ON products
FOR EACH ROW
...
2025-09-02 15:27:48,528 - DEBUG - Executing statement 26/27: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_customers_loyalty_update`;...
2025-09-02 15:27:48,529 - DEBUG - Executing statement 27/27: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 15:27:48,530 - INFO - ✅ SQL file executed: 25 statements succeeded, 2 failed
2025-09-02 15:27:48,530 - INFO - 🔍 Checking if schemas are identical after migration...
2025-09-02 15:27:48,530 - INFO - 🔍 Running comparison step: Post-migration schema check
2025-09-02 15:27:48,530 - INFO - Running in compare mode...
2025-09-02 15:27:48,531 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 15:27:48,531 - INFO - Connecting to databases...
2025-09-02 15:27:48,532 - INFO - Database connections successful
2025-09-02 15:27:48,532 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_post_migration, stdin=None, shell=False, universal_newlines=False)
2025-09-02 15:27:48,534 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 15:27:48,535 - INFO - Initialized new git repository at test_output_post_migration
2025-09-02 15:27:48,535 - DEBUG - Created directory: test_output_post_migration/tables
2025-09-02 15:27:48,535 - DEBUG - Created directory: test_output_post_migration/functions
2025-09-02 15:27:48,535 - DEBUG - Created directory: test_output_post_migration/procedures
2025-09-02 15:27:48,535 - DEBUG - Created directory: test_output_post_migration/triggers
2025-09-02 15:27:48,535 - DEBUG - Created directory: test_output_post_migration/events
2025-09-02 15:27:48,535 - INFO - Initialized git repository at ./test_output_post_migration
2025-09-02 15:27:48,535 - INFO - Extracting DDL objects...
2025-09-02 15:27:48,540 - INFO - Comparing schemas...
2025-09-02 15:27:48,540 - INFO - Performing safety analysis...
2025-09-02 15:27:48,540 - INFO - Generating migration SQL...
2025-09-02 15:27:48,567 - INFO - Generating schema visualizations...
2025-09-02 15:27:48,569 - INFO - Generated HTML documentation
2025-09-02 15:27:48,569 - INFO - Generated Mermaid ERD
2025-09-02 15:27:48,569 - INFO - Generated Graphviz DOT file
2025-09-02 15:27:48,570 - INFO - Generated JSON schema structure
2025-09-02 15:27:48,570 - INFO - Schema visualizations generated in test_output_post_migration/documentation
2025-09-02 15:27:48,570 - INFO - Migration report generated: test_output_post_migration/migration_report.md
2025-09-02 15:27:48,575 - INFO - Started tracking migration 192: ddl_test_source_to_ddl_test_dest_1756819668
2025-09-02 15:27:48,580 - INFO - Completed migration tracking 192: SUCCESS
2025-09-02 15:27:48,580 - INFO - Migration tracking completed: 192
2025-09-02 15:27:48,580 - INFO - Migration completed successfully!
2025-09-02 15:27:48,580 - INFO - Migration ID: 192
2025-09-02 15:27:48,580 - INFO - Operations: 0
2025-09-02 15:27:48,580 - INFO - Safety warnings: 0
2025-09-02 15:27:48,581 - INFO - Migration file: test_output_post_migration/migration.sql
2025-09-02 15:27:48,581 - INFO - Rollback file: test_output_post_migration/rollback.sql
2025-09-02 15:27:48,581 - INFO - Migration report: test_output_post_migration/migration_report.md
2025-09-02 15:27:48,581 - INFO - ✅ Post-migration schema check completed successfully
2025-09-02 15:27:48,581 - INFO - ✅ Schemas are identical after migration!
2025-09-02 15:27:48,581 - INFO - 🔧 Executing SQL file: ./test_output/rollback.sql
2025-09-02 15:27:48,581 - DEBUG - Executing statement 1/22: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 15:27:48,582 - DEBUG - Executing statement 2/22: CREATE TABLE `temp_table` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`temp_data` varchar(255) DEFAULT N...
2025-09-02 15:27:48,585 - DEBUG - Executing statement 3/22: ALTER TABLE `orders` DROP FOREIGN KEY `fk_orders_customer`;...
2025-09-02 15:27:48,589 - DEBUG - Executing statement 4/22: ALTER TABLE `customers` ADD COLUMN `loyalty_points` int(11) DEFAULT 0;...
2025-09-02 15:27:48,594 - DEBUG - Executing statement 5/22: ALTER TABLE `customers` DROP INDEX `idx_customers_city`;...
2025-09-02 15:27:48,598 - DEBUG - Executing statement 6/22: ALTER TABLE `customers` DROP INDEX `idx_customers_country`;...
2025-09-02 15:27:48,602 - DEBUG - Executing statement 7/22: ALTER TABLE `customers` ADD KEY `idx_customers_loyalty` (`loyalty_points`);...
2025-09-02 15:27:48,608 - DEBUG - Executing statement 8/22: ALTER TABLE `products` DROP COLUMN `weight`;...
2025-09-02 15:27:48,613 - DEBUG - Executing statement 9/22: ALTER TABLE `products` DROP COLUMN `dimensions`;...
2025-09-02 15:27:48,618 - DEBUG - Executing statement 10/22: ALTER TABLE `products` ADD COLUMN `old_column` varchar(50) DEFAULT NULL;...
2025-09-02 15:27:48,624 - DEBUG - Executing statement 11/22: ALTER TABLE `products` DROP INDEX `fk_products_category`;...
2025-09-02 15:27:48,628 - DEBUG - Executing statement 12/22: ALTER TABLE `products` DROP INDEX `idx_products_sku`;...
2025-09-02 15:27:48,633 - DEBUG - Executing statement 13/22: ALTER TABLE `products` DROP INDEX `idx_products_price`;...
2025-09-02 15:27:48,637 - DEBUG - Executing statement 14/22: ALTER TABLE `products` DROP INDEX `idx_products_stock`;...
2025-09-02 15:27:48,641 - DEBUG - Executing statement 15/22: ALTER TABLE `products` DROP INDEX `idx_products_active`;...
2025-09-02 15:27:48,646 - DEBUG - Executing statement 16/22: ALTER TABLE `products` ADD KEY `idx_products_old` (`old_column`);...
2025-09-02 15:27:48,651 - DEBUG - Executing statement 17/22: ALTER TABLE `products` DROP FOREIGN KEY `fk_products_category`;...
2025-09-02 15:27:48,655 - DEBUG - Executing statement 18/22: ALTER TABLE `categories` DROP COLUMN `description`;...
2025-09-02 15:27:48,660 - DEBUG - Executing statement 19/22: ALTER TABLE `categories` DROP INDEX `idx_categories_created`;...
2025-09-02 15:27:48,664 - DEBUG - Executing statement 20/22: DROP PROCEDURE IF EXISTS `GetCustomerOrders`;...
2025-09-02 15:27:48,666 - DEBUG - Executing statement 21/22: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*
FROM...
2025-09-02 15:27:48,667 - DEBUG - Executing statement 22/22: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 15:27:48,667 - INFO - ✅ SQL file executed: 22 statements succeeded, 0 failed
2025-09-02 15:27:48,667 - INFO - 🔍 Running comparison step: Final comparison after rollback
2025-09-02 15:27:48,668 - INFO - Running in compare mode...
2025-09-02 15:27:48,668 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 15:27:48,668 - INFO - Connecting to databases...
2025-09-02 15:27:48,669 - INFO - Database connections successful
2025-09-02 15:27:48,669 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_final, stdin=None, shell=False, universal_newlines=False)
2025-09-02 15:27:48,672 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 15:27:48,672 - INFO - Initialized new git repository at test_output_final
2025-09-02 15:27:48,672 - DEBUG - Created directory: test_output_final/tables
2025-09-02 15:27:48,672 - DEBUG - Created directory: test_output_final/functions
2025-09-02 15:27:48,672 - DEBUG - Created directory: test_output_final/procedures
2025-09-02 15:27:48,672 - DEBUG - Created directory: test_output_final/triggers
2025-09-02 15:27:48,672 - DEBUG - Created directory: test_output_final/events
2025-09-02 15:27:48,672 - INFO - Initialized git repository at ./test_output_final
2025-09-02 15:27:48,673 - INFO - Extracting DDL objects...
2025-09-02 15:27:48,679 - INFO - Comparing schemas...
2025-09-02 15:27:48,679 - INFO - Performing safety analysis...
2025-09-02 15:27:48,679 - INFO - Generating migration SQL...
2025-09-02 15:27:48,706 - INFO - Generating schema visualizations...
2025-09-02 15:27:48,708 - INFO - Generated HTML documentation
2025-09-02 15:27:48,708 - INFO - Generated Mermaid ERD
2025-09-02 15:27:48,708 - INFO - Generated Graphviz DOT file
2025-09-02 15:27:48,709 - INFO - Generated JSON schema structure
2025-09-02 15:27:48,709 - INFO - Schema visualizations generated in test_output_final/documentation
2025-09-02 15:27:48,709 - INFO - Migration report generated: test_output_final/migration_report.md
2025-09-02 15:27:48,715 - INFO - Started tracking migration 193: ddl_test_source_to_ddl_test_dest_1756819668
2025-09-02 15:27:48,720 - INFO - Completed migration tracking 193: SUCCESS
2025-09-02 15:27:48,720 - INFO - Migration tracking completed: 193
2025-09-02 15:27:48,720 - INFO - Migration completed successfully!
2025-09-02 15:27:48,720 - INFO - Migration ID: 193
2025-09-02 15:27:48,720 - INFO - Operations: 6
2025-09-02 15:27:48,720 - INFO - Safety warnings: 0
2025-09-02 15:27:48,720 - INFO - Migration file: test_output_final/migration.sql
2025-09-02 15:27:48,720 - INFO - Rollback file: test_output_final/rollback.sql
2025-09-02 15:27:48,720 - INFO - Migration report: test_output_final/migration_report.md
2025-09-02 15:27:48,720 - INFO - ✅ Final comparison after rollback completed successfully
2025-09-02 15:27:48,720 - INFO - 🔍 Analyzing results in ./test_output_final...
2025-09-02 15:27:48,721 - INFO - 🔄 Comparing initial and final results...
2025-09-02 15:27:48,721 - INFO - ✅ Rollback test passed - initial and final states match!
2025-09-02 15:27:48,721 - INFO - 💾 Saving test data for reference...
2025-09-02 15:27:48,724 - INFO - ✅ Saved ./test_output to test_data/ddlw-test-20250902_152748/ddl-wizard-testsuite-initial-migration-20250902_152748
2025-09-02 15:27:48,727 - INFO - ✅ Saved ./test_output to test_data/ddlw-test-20250902_152748/test_output
2025-09-02 15:27:48,730 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddlw-test-20250902_152748/ddl-wizard-testsuite-post-migration-verification-20250902_152748
2025-09-02 15:27:48,733 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddlw-test-20250902_152748/test_output_post_migration
2025-09-02 15:27:48,736 - INFO - ✅ Saved ./test_output_final to test_data/ddlw-test-20250902_152748/ddl-wizard-testsuite-rollback-verification-20250902_152748
2025-09-02 15:27:48,739 - INFO - ✅ Saved ./test_output_final to test_data/ddlw-test-20250902_152748/test_output_final
2025-09-02 15:27:48,739 - INFO - ✅ Saved test log to test_data/ddlw-test-20250902_152748
2025-09-02 15:27:48,740 - INFO - 🧹 Cleaned up temporary directory: ./test_output
2025-09-02 15:27:48,741 - INFO - 🧹 Cleaned up temporary directory: ./test_output_post_migration
2025-09-02 15:27:48,742 - INFO - 🧹 Cleaned up temporary directory: ./test_output_final
2025-09-02 15:27:48,742 - INFO - 🧹 Cleaning up test databases...
2025-09-02 15:27:48,743 - INFO - ✅ Cleaned up database: ddl_test_source
2025-09-02 15:27:48,744 - INFO - ✅ Cleaned up database: ddl_test_dest
2025-09-02 15:28:32,053 - INFO - Running in compare mode...
2025-09-02 15:28:32,054 - INFO - Connecting to databases...
2025-09-02 15:28:32,056 - INFO - Database connections successful
2025-09-02 15:28:32,059 - INFO - Initialized new git repository at /home/claudio/Projects/ddl_wiz100
2025-09-02 15:28:32,059 - INFO - Initialized git repository at /home/claudio/Projects/ddl_wiz100
2025-09-02 15:28:32,059 - INFO - Extracting DDL objects...
2025-09-02 15:28:32,065 - INFO - Comparing schemas...
2025-09-02 15:28:32,065 - INFO - Performing safety analysis...
2025-09-02 15:28:32,065 - INFO - Generating migration SQL...
2025-09-02 15:28:32,094 - INFO - Generating schema visualizations...
2025-09-02 15:28:32,097 - INFO - Generated HTML documentation
2025-09-02 15:28:32,097 - INFO - Generated Mermaid ERD
2025-09-02 15:28:32,097 - INFO - Generated Graphviz DOT file
2025-09-02 15:28:32,098 - INFO - Generated JSON schema structure
2025-09-02 15:28:32,098 - INFO - Schema visualizations generated in /home/claudio/Projects/ddl_wiz100/documentation
2025-09-02 15:28:32,098 - INFO - Migration report generated: /home/claudio/Projects/ddl_wiz100/migration_report.md
2025-09-02 15:28:32,104 - INFO - Started tracking migration 194: ddl_test_source_to_ddl_test_dest_1756819712
2025-09-02 15:28:32,107 - INFO - Completed migration tracking 194: SUCCESS
2025-09-02 15:28:32,107 - INFO - Migration tracking completed: 194
2025-09-02 15:28:32,107 - INFO - Migration completed successfully!
2025-09-02 15:28:32,107 - INFO - Migration ID: 194
2025-09-02 15:28:32,108 - INFO - Operations: 6
2025-09-02 15:28:32,108 - INFO - Safety warnings: 0
2025-09-02 15:28:32,108 - INFO - Migration file: /home/claudio/Projects/ddl_wiz100/migration.sql
2025-09-02 15:28:32,108 - INFO - Rollback file: /home/claudio/Projects/ddl_wiz100/rollback.sql
2025-09-02 15:28:32,108 - INFO - Migration report: /home/claudio/Projects/ddl_wiz100/migration_report.md
2025-09-02 15:28:48,903 - INFO - Running in compare mode...
2025-09-02 15:28:48,904 - INFO - Connecting to databases...
2025-09-02 15:28:48,906 - INFO - Database connections successful
2025-09-02 15:28:48,909 - INFO - Initialized new git repository at /home/claudio/Projects/ddl_wiz101
2025-09-02 15:28:48,909 - INFO - Initialized git repository at /home/claudio/Projects/ddl_wiz101
2025-09-02 15:28:48,909 - INFO - Extracting DDL objects...
2025-09-02 15:28:48,915 - INFO - Comparing schemas...
2025-09-02 15:28:48,915 - INFO - Performing safety analysis...
2025-09-02 15:28:48,915 - INFO - Generating migration SQL...
2025-09-02 15:28:48,947 - INFO - Generating schema visualizations...
2025-09-02 15:28:48,949 - INFO - Generated HTML documentation
2025-09-02 15:28:48,950 - INFO - Generated Mermaid ERD
2025-09-02 15:28:48,950 - INFO - Generated Graphviz DOT file
2025-09-02 15:28:48,950 - INFO - Generated JSON schema structure
2025-09-02 15:28:48,950 - INFO - Schema visualizations generated in /home/claudio/Projects/ddl_wiz101/documentation
2025-09-02 15:28:48,951 - INFO - Migration report generated: /home/claudio/Projects/ddl_wiz101/migration_report.md
2025-09-02 15:28:48,956 - INFO - Started tracking migration 195: ddl_test_source_to_ddl_test_dest_1756819728
2025-09-02 15:28:48,960 - INFO - Completed migration tracking 195: SUCCESS
2025-09-02 15:28:48,960 - INFO - Migration tracking completed: 195
2025-09-02 15:28:48,960 - INFO - Migration completed successfully!
2025-09-02 15:28:48,960 - INFO - Migration ID: 195
2025-09-02 15:28:48,960 - INFO - Operations: 0
2025-09-02 15:28:48,960 - INFO - Safety warnings: 0
2025-09-02 15:28:48,960 - INFO - Migration file: /home/claudio/Projects/ddl_wiz101/migration.sql
2025-09-02 15:28:48,960 - INFO - Rollback file: /home/claudio/Projects/ddl_wiz101/rollback.sql
2025-09-02 15:28:48,960 - INFO - Migration report: /home/claudio/Projects/ddl_wiz101/migration_report.md
2025-09-02 15:31:05,608 - INFO - 🏗️  Setting up source database...
2025-09-02 15:31:05,665 - INFO - ✅ Source database setup completed
2025-09-02 15:31:05,666 - INFO - 🏗️  Setting up destination database with differences...
2025-09-02 15:31:05,717 - INFO - ✅ Destination database setup completed
2025-09-02 15:31:05,718 - INFO - 📝 Populating test data...
2025-09-02 15:31:05,720 - INFO - ✅ Test data populated in ddl_test_source
2025-09-02 15:31:05,722 - INFO - ✅ Test data populated in ddl_test_dest
2025-09-02 15:31:05,722 - INFO - 🔍 Running comparison step: Initial comparison
2025-09-02 15:31:05,723 - INFO - Running in compare mode...
2025-09-02 15:31:05,723 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 15:31:05,724 - INFO - Connecting to databases...
2025-09-02 15:31:05,725 - INFO - Database connections successful
2025-09-02 15:31:05,725 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output, stdin=None, shell=False, universal_newlines=False)
2025-09-02 15:31:05,729 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 15:31:05,729 - INFO - Initialized new git repository at test_output
2025-09-02 15:31:05,729 - DEBUG - Created directory: test_output/tables
2025-09-02 15:31:05,729 - DEBUG - Created directory: test_output/functions
2025-09-02 15:31:05,730 - DEBUG - Created directory: test_output/procedures
2025-09-02 15:31:05,730 - DEBUG - Created directory: test_output/triggers
2025-09-02 15:31:05,730 - DEBUG - Created directory: test_output/events
2025-09-02 15:31:05,730 - INFO - Initialized git repository at ./test_output
2025-09-02 15:31:05,730 - INFO - Extracting DDL objects...
2025-09-02 15:31:05,744 - INFO - Comparing schemas...
2025-09-02 15:31:05,745 - INFO - Performing safety analysis...
2025-09-02 15:31:05,745 - INFO - Generating migration SQL...
2025-09-02 15:31:05,776 - INFO - Generating schema visualizations...
2025-09-02 15:31:05,778 - INFO - Generated HTML documentation
2025-09-02 15:31:05,779 - INFO - Generated Mermaid ERD
2025-09-02 15:31:05,779 - INFO - Generated Graphviz DOT file
2025-09-02 15:31:05,779 - INFO - Generated JSON schema structure
2025-09-02 15:31:05,779 - INFO - Schema visualizations generated in test_output/documentation
2025-09-02 15:31:05,780 - INFO - Migration report generated: test_output/migration_report.md
2025-09-02 15:31:05,784 - INFO - Started tracking migration 196: ddl_test_source_to_ddl_test_dest_1756819865
2025-09-02 15:31:05,788 - INFO - Completed migration tracking 196: SUCCESS
2025-09-02 15:31:05,788 - INFO - Migration tracking completed: 196
2025-09-02 15:31:05,788 - INFO - Migration completed successfully!
2025-09-02 15:31:05,788 - INFO - Migration ID: 196
2025-09-02 15:31:05,788 - INFO - Operations: 6
2025-09-02 15:31:05,788 - INFO - Safety warnings: 0
2025-09-02 15:31:05,788 - INFO - Migration file: test_output/migration.sql
2025-09-02 15:31:05,788 - INFO - Rollback file: test_output/rollback.sql
2025-09-02 15:31:05,788 - INFO - Migration report: test_output/migration_report.md
2025-09-02 15:31:05,788 - INFO - ✅ Initial comparison completed successfully
2025-09-02 15:31:05,788 - INFO - 🔍 Analyzing results in ./test_output...
2025-09-02 15:31:05,788 - INFO - 🔧 Executing SQL file: ./test_output/migration.sql
2025-09-02 15:31:05,789 - DEBUG - Executing statement 1/27: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 15:31:05,789 - DEBUG - Executing statement 2/27: DROP TABLE IF EXISTS `ddl_test_dest`.`temp_table`;...
2025-09-02 15:31:05,792 - DEBUG - Executing statement 3/27: ALTER TABLE `products` ADD COLUMN `weight` decimal(8,3) DEFAULT NULL;...
2025-09-02 15:31:05,797 - DEBUG - Executing statement 4/27: ALTER TABLE `products` ADD COLUMN `dimensions` varchar(100) DEFAULT NULL;...
2025-09-02 15:31:05,801 - DEBUG - Executing statement 5/27: ALTER TABLE `products` DROP COLUMN `old_column`;...
2025-09-02 15:31:05,806 - DEBUG - Executing statement 6/27: ALTER TABLE `products` ADD KEY `idx_products_price` (`price`);...
2025-09-02 15:31:05,812 - DEBUG - Executing statement 7/27: ALTER TABLE `products` ADD KEY `idx_products_stock` (`stock_quantity`);...
2025-09-02 15:31:05,818 - DEBUG - Executing statement 8/27: ALTER TABLE `products` ADD KEY `idx_products_sku` (`sku`);...
2025-09-02 15:31:05,824 - DEBUG - Executing statement 9/27: ALTER TABLE `products` ADD KEY `fk_products_category` (`category_id`);...
2025-09-02 15:31:05,829 - DEBUG - Executing statement 10/27: ALTER TABLE `products` ADD KEY `idx_products_active` (`is_active`);...
2025-09-02 15:31:05,835 - DEBUG - Executing statement 11/27: ALTER TABLE `products` DROP INDEX `idx_products_old`;...
2025-09-02 15:31:05,836 - WARNING - ⚠️  SQL execution warning (statement 11): (1091, "Can't DROP INDEX `idx_products_old`; check that it exists")
2025-09-02 15:31:05,836 - WARNING - Statement: ALTER TABLE `products` DROP INDEX `idx_products_old`;
2025-09-02 15:31:05,836 - DEBUG - Executing statement 12/27: ALTER TABLE `products` ADD CONSTRAINT `fk_products_category` FOREIGN KEY (`category_id`) REFERENCES ...
2025-09-02 15:31:05,840 - DEBUG - Executing statement 13/27: ALTER TABLE `customers` DROP COLUMN `loyalty_points`;...
2025-09-02 15:31:05,845 - DEBUG - Executing statement 14/27: ALTER TABLE `customers` ADD KEY `idx_customers_country` (`country`);...
2025-09-02 15:31:05,853 - DEBUG - Executing statement 15/27: ALTER TABLE `customers` ADD KEY `idx_customers_city` (`city`);...
2025-09-02 15:31:05,859 - DEBUG - Executing statement 16/27: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;...
2025-09-02 15:31:05,859 - WARNING - ⚠️  SQL execution warning (statement 16): (1091, "Can't DROP INDEX `idx_customers_loyalty`; check that it exists")
2025-09-02 15:31:05,859 - WARNING - Statement: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;
2025-09-02 15:31:05,859 - DEBUG - Executing statement 17/27: ALTER TABLE `categories` ADD COLUMN `description` text DEFAULT NULL;...
2025-09-02 15:31:05,863 - DEBUG - Executing statement 18/27: ALTER TABLE `categories` ADD KEY `idx_categories_created` (`created_at`);...
2025-09-02 15:31:05,869 - DEBUG - Executing statement 19/27: ALTER TABLE `orders` ADD CONSTRAINT `fk_orders_customer` FOREIGN KEY (`customer_id`) REFERENCES `cus...
2025-09-02 15:31:05,873 - DEBUG - Executing statement 20/27: DROP PROCEDURE IF EXISTS `ddl_test_dest`.`GetCustomerOrders`;...
2025-09-02 15:31:05,875 - DEBUG - Executing statement 21/27: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*, COU...
2025-09-02 15:31:05,876 - DEBUG - Executing statement 22/27: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_orders_update_timestamp`;...
2025-09-02 15:31:05,877 - DEBUG - Executing statement 23/27: CREATE DEFINER=`sstuser`@`%` TRIGGER tr_orders_update_timestamp
BEFORE UPDATE ON orders
FOR EACH ROW...
2025-09-02 15:31:05,880 - DEBUG - Executing statement 24/27: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_products_stock_check`;...
2025-09-02 15:31:05,880 - DEBUG - Executing statement 25/27: CREATE DEFINER=`sstuser`@`%` TRIGGER tr_products_stock_check
BEFORE UPDATE ON products
FOR EACH ROW
...
2025-09-02 15:31:05,883 - DEBUG - Executing statement 26/27: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_customers_loyalty_update`;...
2025-09-02 15:31:05,885 - DEBUG - Executing statement 27/27: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 15:31:05,885 - INFO - ✅ SQL file executed: 25 statements succeeded, 2 failed
2025-09-02 15:31:05,885 - INFO - 🔍 Checking if schemas are identical after migration...
2025-09-02 15:31:05,885 - INFO - 🔍 Running comparison step: Post-migration schema check
2025-09-02 15:31:05,886 - INFO - Running in compare mode...
2025-09-02 15:31:05,886 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 15:31:05,886 - INFO - Connecting to databases...
2025-09-02 15:31:05,888 - INFO - Database connections successful
2025-09-02 15:31:05,888 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_post_migration, stdin=None, shell=False, universal_newlines=False)
2025-09-02 15:31:05,890 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 15:31:05,891 - INFO - Initialized new git repository at test_output_post_migration
2025-09-02 15:31:05,891 - DEBUG - Created directory: test_output_post_migration/tables
2025-09-02 15:31:05,891 - DEBUG - Created directory: test_output_post_migration/functions
2025-09-02 15:31:05,891 - DEBUG - Created directory: test_output_post_migration/procedures
2025-09-02 15:31:05,891 - DEBUG - Created directory: test_output_post_migration/triggers
2025-09-02 15:31:05,891 - DEBUG - Created directory: test_output_post_migration/events
2025-09-02 15:31:05,891 - INFO - Initialized git repository at ./test_output_post_migration
2025-09-02 15:31:05,891 - INFO - Extracting DDL objects...
2025-09-02 15:31:05,897 - INFO - Comparing schemas...
2025-09-02 15:31:05,897 - INFO - Performing safety analysis...
2025-09-02 15:31:05,897 - INFO - Generating migration SQL...
2025-09-02 15:31:05,926 - INFO - Generating schema visualizations...
2025-09-02 15:31:05,929 - INFO - Generated HTML documentation
2025-09-02 15:31:05,929 - INFO - Generated Mermaid ERD
2025-09-02 15:31:05,929 - INFO - Generated Graphviz DOT file
2025-09-02 15:31:05,930 - INFO - Generated JSON schema structure
2025-09-02 15:31:05,930 - INFO - Schema visualizations generated in test_output_post_migration/documentation
2025-09-02 15:31:05,930 - INFO - Migration report generated: test_output_post_migration/migration_report.md
2025-09-02 15:31:05,936 - INFO - Started tracking migration 197: ddl_test_source_to_ddl_test_dest_1756819865
2025-09-02 15:31:05,939 - INFO - Completed migration tracking 197: SUCCESS
2025-09-02 15:31:05,939 - INFO - Migration tracking completed: 197
2025-09-02 15:31:05,939 - INFO - Migration completed successfully!
2025-09-02 15:31:05,939 - INFO - Migration ID: 197
2025-09-02 15:31:05,939 - INFO - Operations: 0
2025-09-02 15:31:05,940 - INFO - Safety warnings: 0
2025-09-02 15:31:05,940 - INFO - Migration file: test_output_post_migration/migration.sql
2025-09-02 15:31:05,940 - INFO - Rollback file: test_output_post_migration/rollback.sql
2025-09-02 15:31:05,940 - INFO - Migration report: test_output_post_migration/migration_report.md
2025-09-02 15:31:05,940 - INFO - ✅ Post-migration schema check completed successfully
2025-09-02 15:31:05,940 - INFO - ✅ Schemas are identical after migration!
2025-09-02 15:31:05,940 - INFO - 🔧 Executing SQL file: ./test_output/rollback.sql
2025-09-02 15:31:05,941 - DEBUG - Executing statement 1/22: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 15:31:05,941 - DEBUG - Executing statement 2/22: CREATE TABLE `temp_table` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`temp_data` varchar(255) DEFAULT N...
2025-09-02 15:31:05,944 - DEBUG - Executing statement 3/22: ALTER TABLE `products` DROP COLUMN `weight`;...
2025-09-02 15:31:05,950 - DEBUG - Executing statement 4/22: ALTER TABLE `products` DROP COLUMN `dimensions`;...
2025-09-02 15:31:05,955 - DEBUG - Executing statement 5/22: ALTER TABLE `products` ADD COLUMN `old_column` varchar(50) DEFAULT NULL;...
2025-09-02 15:31:05,960 - DEBUG - Executing statement 6/22: ALTER TABLE `products` DROP INDEX `idx_products_price`;...
2025-09-02 15:31:05,964 - DEBUG - Executing statement 7/22: ALTER TABLE `products` DROP INDEX `idx_products_stock`;...
2025-09-02 15:31:05,969 - DEBUG - Executing statement 8/22: ALTER TABLE `products` DROP INDEX `idx_products_sku`;...
2025-09-02 15:31:05,973 - DEBUG - Executing statement 9/22: ALTER TABLE `products` DROP INDEX `fk_products_category`;...
2025-09-02 15:31:05,977 - DEBUG - Executing statement 10/22: ALTER TABLE `products` DROP INDEX `idx_products_active`;...
2025-09-02 15:31:05,982 - DEBUG - Executing statement 11/22: ALTER TABLE `products` ADD KEY `idx_products_old` (`old_column`);...
2025-09-02 15:31:05,988 - DEBUG - Executing statement 12/22: ALTER TABLE `products` DROP FOREIGN KEY `fk_products_category`;...
2025-09-02 15:31:05,992 - DEBUG - Executing statement 13/22: ALTER TABLE `customers` ADD COLUMN `loyalty_points` int(11) DEFAULT 0;...
2025-09-02 15:31:05,997 - DEBUG - Executing statement 14/22: ALTER TABLE `customers` DROP INDEX `idx_customers_country`;...
2025-09-02 15:31:06,001 - DEBUG - Executing statement 15/22: ALTER TABLE `customers` DROP INDEX `idx_customers_city`;...
2025-09-02 15:31:06,006 - DEBUG - Executing statement 16/22: ALTER TABLE `customers` ADD KEY `idx_customers_loyalty` (`loyalty_points`);...
2025-09-02 15:31:06,011 - DEBUG - Executing statement 17/22: ALTER TABLE `categories` DROP COLUMN `description`;...
2025-09-02 15:31:06,017 - DEBUG - Executing statement 18/22: ALTER TABLE `categories` DROP INDEX `idx_categories_created`;...
2025-09-02 15:31:06,022 - DEBUG - Executing statement 19/22: ALTER TABLE `orders` DROP FOREIGN KEY `fk_orders_customer`;...
2025-09-02 15:31:06,026 - DEBUG - Executing statement 20/22: DROP PROCEDURE IF EXISTS `GetCustomerOrders`;...
2025-09-02 15:31:06,027 - DEBUG - Executing statement 21/22: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*
FROM...
2025-09-02 15:31:06,028 - DEBUG - Executing statement 22/22: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 15:31:06,029 - INFO - ✅ SQL file executed: 22 statements succeeded, 0 failed
2025-09-02 15:31:06,029 - INFO - 🔍 Running comparison step: Final comparison after rollback
2025-09-02 15:31:06,029 - INFO - Running in compare mode...
2025-09-02 15:31:06,030 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 15:31:06,030 - INFO - Connecting to databases...
2025-09-02 15:31:06,031 - INFO - Database connections successful
2025-09-02 15:31:06,031 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_final, stdin=None, shell=False, universal_newlines=False)
2025-09-02 15:31:06,033 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 15:31:06,034 - INFO - Initialized new git repository at test_output_final
2025-09-02 15:31:06,034 - DEBUG - Created directory: test_output_final/tables
2025-09-02 15:31:06,034 - DEBUG - Created directory: test_output_final/functions
2025-09-02 15:31:06,034 - DEBUG - Created directory: test_output_final/procedures
2025-09-02 15:31:06,034 - DEBUG - Created directory: test_output_final/triggers
2025-09-02 15:31:06,034 - DEBUG - Created directory: test_output_final/events
2025-09-02 15:31:06,034 - INFO - Initialized git repository at ./test_output_final
2025-09-02 15:31:06,034 - INFO - Extracting DDL objects...
2025-09-02 15:31:06,041 - INFO - Comparing schemas...
2025-09-02 15:31:06,041 - INFO - Performing safety analysis...
2025-09-02 15:31:06,041 - INFO - Generating migration SQL...
2025-09-02 15:31:06,072 - INFO - Generating schema visualizations...
2025-09-02 15:31:06,075 - INFO - Generated HTML documentation
2025-09-02 15:31:06,075 - INFO - Generated Mermaid ERD
2025-09-02 15:31:06,076 - INFO - Generated Graphviz DOT file
2025-09-02 15:31:06,076 - INFO - Generated JSON schema structure
2025-09-02 15:31:06,076 - INFO - Schema visualizations generated in test_output_final/documentation
2025-09-02 15:31:06,077 - INFO - Migration report generated: test_output_final/migration_report.md
2025-09-02 15:31:06,083 - INFO - Started tracking migration 198: ddl_test_source_to_ddl_test_dest_1756819866
2025-09-02 15:31:06,087 - INFO - Completed migration tracking 198: SUCCESS
2025-09-02 15:31:06,087 - INFO - Migration tracking completed: 198
2025-09-02 15:31:06,087 - INFO - Migration completed successfully!
2025-09-02 15:31:06,087 - INFO - Migration ID: 198
2025-09-02 15:31:06,087 - INFO - Operations: 6
2025-09-02 15:31:06,087 - INFO - Safety warnings: 0
2025-09-02 15:31:06,087 - INFO - Migration file: test_output_final/migration.sql
2025-09-02 15:31:06,087 - INFO - Rollback file: test_output_final/rollback.sql
2025-09-02 15:31:06,087 - INFO - Migration report: test_output_final/migration_report.md
2025-09-02 15:31:06,087 - INFO - ✅ Final comparison after rollback completed successfully
2025-09-02 15:31:06,087 - INFO - 🔍 Analyzing results in ./test_output_final...
2025-09-02 15:31:06,088 - INFO - 🔄 Comparing initial and final results...
2025-09-02 15:31:06,088 - INFO - ✅ Rollback test passed - initial and final states match!
2025-09-02 15:31:06,088 - INFO - 💾 Saving test data for reference...
2025-09-02 15:31:06,093 - INFO - ✅ Saved ./test_output to test_data/ddlw-test-20250902_153106/ddl-wizard-testsuite-initial-migration-20250902_153106
2025-09-02 15:31:06,099 - INFO - ✅ Saved ./test_output to test_data/ddlw-test-20250902_153106/test_output
2025-09-02 15:31:06,103 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddlw-test-20250902_153106/ddl-wizard-testsuite-post-migration-verification-20250902_153106
2025-09-02 15:31:06,107 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddlw-test-20250902_153106/test_output_post_migration
2025-09-02 15:31:06,111 - INFO - ✅ Saved ./test_output_final to test_data/ddlw-test-20250902_153106/ddl-wizard-testsuite-rollback-verification-20250902_153106
2025-09-02 15:31:06,115 - INFO - ✅ Saved ./test_output_final to test_data/ddlw-test-20250902_153106/test_output_final
2025-09-02 15:31:06,115 - INFO - ✅ Saved test log to test_data/ddlw-test-20250902_153106
2025-09-02 15:31:06,117 - INFO - 🧹 Cleaned up temporary directory: ./test_output
2025-09-02 15:31:06,118 - INFO - 🧹 Cleaned up temporary directory: ./test_output_post_migration
2025-09-02 15:31:06,119 - INFO - 🧹 Cleaned up temporary directory: ./test_output_final
2025-09-02 15:31:06,120 - INFO - 🧹 Cleaning up test databases...
2025-09-02 15:31:06,121 - INFO - ✅ Cleaned up database: ddl_test_source
2025-09-02 15:31:06,121 - INFO - ✅ Cleaned up database: ddl_test_dest
2025-09-02 15:33:09,403 - INFO - 🏗️  Setting up source database...
2025-09-02 15:33:09,460 - INFO - ✅ Source database setup completed
2025-09-02 15:33:09,460 - INFO - 🏗️  Setting up destination database with differences...
2025-09-02 15:33:09,514 - INFO - ✅ Destination database setup completed
2025-09-02 15:33:09,514 - INFO - 📝 Populating test data...
2025-09-02 15:33:09,516 - INFO - ✅ Test data populated in ddl_test_source
2025-09-02 15:33:09,519 - INFO - ✅ Test data populated in ddl_test_dest
2025-09-02 15:33:09,519 - INFO - 🔍 Running comparison step: Initial comparison
2025-09-02 15:33:09,520 - INFO - Running in compare mode...
2025-09-02 15:33:09,521 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 15:33:09,521 - INFO - Connecting to databases...
2025-09-02 15:33:09,522 - INFO - Database connections successful
2025-09-02 15:33:09,523 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output, stdin=None, shell=False, universal_newlines=False)
2025-09-02 15:33:09,526 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 15:33:09,527 - INFO - Initialized new git repository at test_output
2025-09-02 15:33:09,527 - DEBUG - Created directory: test_output/tables
2025-09-02 15:33:09,527 - DEBUG - Created directory: test_output/functions
2025-09-02 15:33:09,527 - DEBUG - Created directory: test_output/procedures
2025-09-02 15:33:09,527 - DEBUG - Created directory: test_output/triggers
2025-09-02 15:33:09,527 - DEBUG - Created directory: test_output/events
2025-09-02 15:33:09,527 - INFO - Initialized git repository at ./test_output
2025-09-02 15:33:09,527 - INFO - Extracting DDL objects...
2025-09-02 15:33:09,536 - INFO - Comparing schemas...
2025-09-02 15:33:09,536 - INFO - Performing safety analysis...
2025-09-02 15:33:09,536 - INFO - Generating migration SQL...
2025-09-02 15:33:09,569 - INFO - Generating schema visualizations...
2025-09-02 15:33:09,571 - INFO - Generated HTML documentation
2025-09-02 15:33:09,571 - INFO - Generated Mermaid ERD
2025-09-02 15:33:09,571 - INFO - Generated Graphviz DOT file
2025-09-02 15:33:09,572 - INFO - Generated JSON schema structure
2025-09-02 15:33:09,572 - INFO - Schema visualizations generated in test_output/documentation
2025-09-02 15:33:09,572 - INFO - Migration report generated: test_output/migration_report.md
2025-09-02 15:33:09,576 - INFO - Started tracking migration 199: ddl_test_source_to_ddl_test_dest_1756819989
2025-09-02 15:33:09,580 - INFO - Completed migration tracking 199: SUCCESS
2025-09-02 15:33:09,580 - INFO - Migration tracking completed: 199
2025-09-02 15:33:09,580 - INFO - Migration completed successfully!
2025-09-02 15:33:09,580 - INFO - Migration ID: 199
2025-09-02 15:33:09,580 - INFO - Operations: 6
2025-09-02 15:33:09,580 - INFO - Safety warnings: 0
2025-09-02 15:33:09,580 - INFO - Migration file: test_output/migration.sql
2025-09-02 15:33:09,580 - INFO - Rollback file: test_output/rollback.sql
2025-09-02 15:33:09,580 - INFO - Migration report: test_output/migration_report.md
2025-09-02 15:33:09,580 - INFO - ✅ Initial comparison completed successfully
2025-09-02 15:33:09,580 - INFO - 🔍 Analyzing results in ./test_output...
2025-09-02 15:33:09,580 - INFO - 🔧 Executing SQL file: ./test_output/migration.sql
2025-09-02 15:33:09,581 - DEBUG - Executing statement 1/27: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 15:33:09,581 - DEBUG - Executing statement 2/27: DROP TABLE IF EXISTS `ddl_test_dest`.`temp_table`;...
2025-09-02 15:33:09,584 - DEBUG - Executing statement 3/27: ALTER TABLE `customers` DROP COLUMN `loyalty_points`;...
2025-09-02 15:33:09,590 - DEBUG - Executing statement 4/27: ALTER TABLE `customers` ADD KEY `idx_customers_country` (`country`);...
2025-09-02 15:33:09,597 - DEBUG - Executing statement 5/27: ALTER TABLE `customers` ADD KEY `idx_customers_city` (`city`);...
2025-09-02 15:33:09,603 - DEBUG - Executing statement 6/27: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;...
2025-09-02 15:33:09,604 - WARNING - ⚠️  SQL execution warning (statement 6): (1091, "Can't DROP INDEX `idx_customers_loyalty`; check that it exists")
2025-09-02 15:33:09,604 - WARNING - Statement: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;
2025-09-02 15:33:09,604 - DEBUG - Executing statement 7/27: ALTER TABLE `categories` ADD COLUMN `description` text DEFAULT NULL;...
2025-09-02 15:33:09,608 - DEBUG - Executing statement 8/27: ALTER TABLE `categories` ADD KEY `idx_categories_created` (`created_at`);...
2025-09-02 15:33:09,615 - DEBUG - Executing statement 9/27: ALTER TABLE `orders` ADD CONSTRAINT `fk_orders_customer` FOREIGN KEY (`customer_id`) REFERENCES `cus...
2025-09-02 15:33:09,619 - DEBUG - Executing statement 10/27: ALTER TABLE `products` ADD COLUMN `dimensions` varchar(100) DEFAULT NULL;...
2025-09-02 15:33:09,623 - DEBUG - Executing statement 11/27: ALTER TABLE `products` ADD COLUMN `weight` decimal(8,3) DEFAULT NULL;...
2025-09-02 15:33:09,628 - DEBUG - Executing statement 12/27: ALTER TABLE `products` DROP COLUMN `old_column`;...
2025-09-02 15:33:09,633 - DEBUG - Executing statement 13/27: ALTER TABLE `products` ADD KEY `idx_products_active` (`is_active`);...
2025-09-02 15:33:09,639 - DEBUG - Executing statement 14/27: ALTER TABLE `products` ADD KEY `idx_products_stock` (`stock_quantity`);...
2025-09-02 15:33:09,645 - DEBUG - Executing statement 15/27: ALTER TABLE `products` ADD KEY `fk_products_category` (`category_id`);...
2025-09-02 15:33:09,650 - DEBUG - Executing statement 16/27: ALTER TABLE `products` ADD KEY `idx_products_price` (`price`);...
2025-09-02 15:33:09,657 - DEBUG - Executing statement 17/27: ALTER TABLE `products` ADD KEY `idx_products_sku` (`sku`);...
2025-09-02 15:33:09,663 - DEBUG - Executing statement 18/27: ALTER TABLE `products` DROP INDEX `idx_products_old`;...
2025-09-02 15:33:09,663 - WARNING - ⚠️  SQL execution warning (statement 18): (1091, "Can't DROP INDEX `idx_products_old`; check that it exists")
2025-09-02 15:33:09,663 - WARNING - Statement: ALTER TABLE `products` DROP INDEX `idx_products_old`;
2025-09-02 15:33:09,663 - DEBUG - Executing statement 19/27: ALTER TABLE `products` ADD CONSTRAINT `fk_products_category` FOREIGN KEY (`category_id`) REFERENCES ...
2025-09-02 15:33:09,667 - DEBUG - Executing statement 20/27: DROP PROCEDURE IF EXISTS `ddl_test_dest`.`GetCustomerOrders`;...
2025-09-02 15:33:09,669 - DEBUG - Executing statement 21/27: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*, COU...
2025-09-02 15:33:09,671 - DEBUG - Executing statement 22/27: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_orders_update_timestamp`;...
2025-09-02 15:33:09,671 - DEBUG - Executing statement 23/27: CREATE DEFINER=`sstuser`@`%` TRIGGER tr_orders_update_timestamp
BEFORE UPDATE ON orders
FOR EACH ROW...
2025-09-02 15:33:09,674 - DEBUG - Executing statement 24/27: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_products_stock_check`;...
2025-09-02 15:33:09,674 - DEBUG - Executing statement 25/27: CREATE DEFINER=`sstuser`@`%` TRIGGER tr_products_stock_check
BEFORE UPDATE ON products
FOR EACH ROW
...
2025-09-02 15:33:09,677 - DEBUG - Executing statement 26/27: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_customers_loyalty_update`;...
2025-09-02 15:33:09,678 - DEBUG - Executing statement 27/27: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 15:33:09,678 - INFO - ✅ SQL file executed: 25 statements succeeded, 2 failed
2025-09-02 15:33:09,678 - INFO - 🔍 Checking if schemas are identical after migration...
2025-09-02 15:33:09,678 - INFO - 🔍 Running comparison step: Post-migration schema check
2025-09-02 15:33:09,679 - INFO - Running in compare mode...
2025-09-02 15:33:09,679 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 15:33:09,679 - INFO - Connecting to databases...
2025-09-02 15:33:09,680 - INFO - Database connections successful
2025-09-02 15:33:09,681 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_post_migration, stdin=None, shell=False, universal_newlines=False)
2025-09-02 15:33:09,683 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 15:33:09,684 - INFO - Initialized new git repository at test_output_post_migration
2025-09-02 15:33:09,684 - DEBUG - Created directory: test_output_post_migration/tables
2025-09-02 15:33:09,684 - DEBUG - Created directory: test_output_post_migration/functions
2025-09-02 15:33:09,684 - DEBUG - Created directory: test_output_post_migration/procedures
2025-09-02 15:33:09,684 - DEBUG - Created directory: test_output_post_migration/triggers
2025-09-02 15:33:09,684 - DEBUG - Created directory: test_output_post_migration/events
2025-09-02 15:33:09,684 - INFO - Initialized git repository at ./test_output_post_migration
2025-09-02 15:33:09,684 - INFO - Extracting DDL objects...
2025-09-02 15:33:09,693 - INFO - Comparing schemas...
2025-09-02 15:33:09,693 - INFO - Performing safety analysis...
2025-09-02 15:33:09,693 - INFO - Generating migration SQL...
2025-09-02 15:33:09,725 - INFO - Generating schema visualizations...
2025-09-02 15:33:09,728 - INFO - Generated HTML documentation
2025-09-02 15:33:09,728 - INFO - Generated Mermaid ERD
2025-09-02 15:33:09,728 - INFO - Generated Graphviz DOT file
2025-09-02 15:33:09,729 - INFO - Generated JSON schema structure
2025-09-02 15:33:09,729 - INFO - Schema visualizations generated in test_output_post_migration/documentation
2025-09-02 15:33:09,729 - INFO - Migration report generated: test_output_post_migration/migration_report.md
2025-09-02 15:33:09,735 - INFO - Started tracking migration 200: ddl_test_source_to_ddl_test_dest_1756819989
2025-09-02 15:33:09,739 - INFO - Completed migration tracking 200: SUCCESS
2025-09-02 15:33:09,739 - INFO - Migration tracking completed: 200
2025-09-02 15:33:09,739 - INFO - Migration completed successfully!
2025-09-02 15:33:09,739 - INFO - Migration ID: 200
2025-09-02 15:33:09,739 - INFO - Operations: 0
2025-09-02 15:33:09,739 - INFO - Safety warnings: 0
2025-09-02 15:33:09,739 - INFO - Migration file: test_output_post_migration/migration.sql
2025-09-02 15:33:09,739 - INFO - Rollback file: test_output_post_migration/rollback.sql
2025-09-02 15:33:09,739 - INFO - Migration report: test_output_post_migration/migration_report.md
2025-09-02 15:33:09,739 - INFO - ✅ Post-migration schema check completed successfully
2025-09-02 15:33:09,739 - INFO - ✅ Schemas are identical after migration!
2025-09-02 15:33:09,740 - INFO - 🔧 Executing SQL file: ./test_output/rollback.sql
2025-09-02 15:33:09,740 - DEBUG - Executing statement 1/22: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 15:33:09,740 - DEBUG - Executing statement 2/22: CREATE TABLE `temp_table` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`temp_data` varchar(255) DEFAULT N...
2025-09-02 15:33:09,743 - DEBUG - Executing statement 3/22: ALTER TABLE `customers` ADD COLUMN `loyalty_points` int(11) DEFAULT 0;...
2025-09-02 15:33:09,748 - DEBUG - Executing statement 4/22: ALTER TABLE `customers` DROP INDEX `idx_customers_country`;...
2025-09-02 15:33:09,753 - DEBUG - Executing statement 5/22: ALTER TABLE `customers` DROP INDEX `idx_customers_city`;...
2025-09-02 15:33:09,757 - DEBUG - Executing statement 6/22: ALTER TABLE `customers` ADD KEY `idx_customers_loyalty` (`loyalty_points`);...
2025-09-02 15:33:09,763 - DEBUG - Executing statement 7/22: ALTER TABLE `categories` DROP COLUMN `description`;...
2025-09-02 15:33:09,768 - DEBUG - Executing statement 8/22: ALTER TABLE `categories` DROP INDEX `idx_categories_created`;...
2025-09-02 15:33:09,772 - DEBUG - Executing statement 9/22: ALTER TABLE `orders` DROP FOREIGN KEY `fk_orders_customer`;...
2025-09-02 15:33:09,776 - DEBUG - Executing statement 10/22: ALTER TABLE `products` DROP COLUMN `dimensions`;...
2025-09-02 15:33:09,781 - DEBUG - Executing statement 11/22: ALTER TABLE `products` DROP COLUMN `weight`;...
2025-09-02 15:33:09,786 - DEBUG - Executing statement 12/22: ALTER TABLE `products` ADD COLUMN `old_column` varchar(50) DEFAULT NULL;...
2025-09-02 15:33:09,792 - DEBUG - Executing statement 13/22: ALTER TABLE `products` DROP INDEX `idx_products_active`;...
2025-09-02 15:33:09,796 - DEBUG - Executing statement 14/22: ALTER TABLE `products` DROP INDEX `idx_products_stock`;...
2025-09-02 15:33:09,800 - DEBUG - Executing statement 15/22: ALTER TABLE `products` DROP INDEX `fk_products_category`;...
2025-09-02 15:33:09,805 - DEBUG - Executing statement 16/22: ALTER TABLE `products` DROP INDEX `idx_products_price`;...
2025-09-02 15:33:09,809 - DEBUG - Executing statement 17/22: ALTER TABLE `products` DROP INDEX `idx_products_sku`;...
2025-09-02 15:33:09,814 - DEBUG - Executing statement 18/22: ALTER TABLE `products` ADD KEY `idx_products_old` (`old_column`);...
2025-09-02 15:33:09,820 - DEBUG - Executing statement 19/22: ALTER TABLE `products` DROP FOREIGN KEY `fk_products_category`;...
2025-09-02 15:33:09,825 - DEBUG - Executing statement 20/22: DROP PROCEDURE IF EXISTS `GetCustomerOrders`;...
2025-09-02 15:33:09,827 - DEBUG - Executing statement 21/22: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*
FROM...
2025-09-02 15:33:09,828 - DEBUG - Executing statement 22/22: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 15:33:09,828 - INFO - ✅ SQL file executed: 22 statements succeeded, 0 failed
2025-09-02 15:33:09,829 - INFO - 🔍 Running comparison step: Final comparison after rollback
2025-09-02 15:33:09,829 - INFO - Running in compare mode...
2025-09-02 15:33:09,830 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 15:33:09,830 - INFO - Connecting to databases...
2025-09-02 15:33:09,831 - INFO - Database connections successful
2025-09-02 15:33:09,831 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_final, stdin=None, shell=False, universal_newlines=False)
2025-09-02 15:33:09,833 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 15:33:09,834 - INFO - Initialized new git repository at test_output_final
2025-09-02 15:33:09,834 - DEBUG - Created directory: test_output_final/tables
2025-09-02 15:33:09,834 - DEBUG - Created directory: test_output_final/functions
2025-09-02 15:33:09,834 - DEBUG - Created directory: test_output_final/procedures
2025-09-02 15:33:09,834 - DEBUG - Created directory: test_output_final/triggers
2025-09-02 15:33:09,834 - DEBUG - Created directory: test_output_final/events
2025-09-02 15:33:09,834 - INFO - Initialized git repository at ./test_output_final
2025-09-02 15:33:09,834 - INFO - Extracting DDL objects...
2025-09-02 15:33:09,841 - INFO - Comparing schemas...
2025-09-02 15:33:09,841 - INFO - Performing safety analysis...
2025-09-02 15:33:09,841 - INFO - Generating migration SQL...
2025-09-02 15:33:09,875 - INFO - Generating schema visualizations...
2025-09-02 15:33:09,878 - INFO - Generated HTML documentation
2025-09-02 15:33:09,878 - INFO - Generated Mermaid ERD
2025-09-02 15:33:09,878 - INFO - Generated Graphviz DOT file
2025-09-02 15:33:09,879 - INFO - Generated JSON schema structure
2025-09-02 15:33:09,879 - INFO - Schema visualizations generated in test_output_final/documentation
2025-09-02 15:33:09,879 - INFO - Migration report generated: test_output_final/migration_report.md
2025-09-02 15:33:09,885 - INFO - Started tracking migration 201: ddl_test_source_to_ddl_test_dest_1756819989
2025-09-02 15:33:09,890 - INFO - Completed migration tracking 201: SUCCESS
2025-09-02 15:33:09,890 - INFO - Migration tracking completed: 201
2025-09-02 15:33:09,890 - INFO - Migration completed successfully!
2025-09-02 15:33:09,890 - INFO - Migration ID: 201
2025-09-02 15:33:09,890 - INFO - Operations: 6
2025-09-02 15:33:09,890 - INFO - Safety warnings: 0
2025-09-02 15:33:09,890 - INFO - Migration file: test_output_final/migration.sql
2025-09-02 15:33:09,890 - INFO - Rollback file: test_output_final/rollback.sql
2025-09-02 15:33:09,890 - INFO - Migration report: test_output_final/migration_report.md
2025-09-02 15:33:09,890 - INFO - ✅ Final comparison after rollback completed successfully
2025-09-02 15:33:09,890 - INFO - 🔍 Analyzing results in ./test_output_final...
2025-09-02 15:33:09,890 - INFO - 🔄 Comparing initial and final results...
2025-09-02 15:33:09,890 - INFO - ✅ Rollback test passed - initial and final states match!
2025-09-02 15:33:09,891 - INFO - 💾 Saving test data for reference...
2025-09-02 15:33:09,894 - INFO - ✅ Saved ./test_output to test_data/ddlw-test-20250902_153309/ddl-wizard-testsuite-initial-migration-20250902_153309
2025-09-02 15:33:09,897 - INFO - ✅ Saved ./test_output to test_data/ddlw-test-20250902_153309/test_output
2025-09-02 15:33:09,900 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddlw-test-20250902_153309/ddl-wizard-testsuite-post-migration-verification-20250902_153309
2025-09-02 15:33:09,903 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddlw-test-20250902_153309/test_output_post_migration
2025-09-02 15:33:09,907 - INFO - ✅ Saved ./test_output_final to test_data/ddlw-test-20250902_153309/ddl-wizard-testsuite-rollback-verification-20250902_153309
2025-09-02 15:33:09,911 - INFO - ✅ Saved ./test_output_final to test_data/ddlw-test-20250902_153309/test_output_final
2025-09-02 15:33:09,911 - INFO - ✅ Saved test log to test_data/ddlw-test-20250902_153309
2025-09-02 15:33:09,913 - INFO - 🧹 Cleaned up temporary directory: ./test_output
2025-09-02 15:33:09,915 - INFO - 🧹 Cleaned up temporary directory: ./test_output_post_migration
2025-09-02 15:33:09,917 - INFO - 🧹 Cleaned up temporary directory: ./test_output_final
2025-09-02 15:33:09,917 - INFO - 🧹 Cleaning up test databases...
2025-09-02 15:33:09,918 - INFO - ✅ Cleaned up database: ddl_test_source
2025-09-02 15:33:09,919 - INFO - ✅ Cleaned up database: ddl_test_dest
2025-09-02 15:36:30,225 - INFO - Running in compare mode...
2025-09-02 15:36:30,225 - INFO - Connecting to databases...
2025-09-02 15:36:30,227 - INFO - Database connections successful
2025-09-02 15:36:30,230 - INFO - Initialized new git repository at /home/claudio/Projects/ddl_wiz120
2025-09-02 15:36:30,230 - INFO - Initialized git repository at /home/claudio/Projects/ddl_wiz120
2025-09-02 15:36:30,230 - INFO - Extracting DDL objects...
2025-09-02 15:36:30,236 - INFO - Comparing schemas...
2025-09-02 15:36:30,236 - INFO - Performing safety analysis...
2025-09-02 15:36:30,236 - INFO - Generating migration SQL...
2025-09-02 15:36:30,266 - INFO - Generating schema visualizations...
2025-09-02 15:36:30,269 - INFO - Generated HTML documentation
2025-09-02 15:36:30,270 - INFO - Generated Mermaid ERD
2025-09-02 15:36:30,270 - INFO - Generated Graphviz DOT file
2025-09-02 15:36:30,271 - INFO - Generated JSON schema structure
2025-09-02 15:36:30,271 - INFO - Schema visualizations generated in /home/claudio/Projects/ddl_wiz120/documentation
2025-09-02 15:36:30,271 - INFO - Migration report generated: /home/claudio/Projects/ddl_wiz120/migration_report.md
2025-09-02 15:36:30,278 - INFO - Started tracking migration 202: ddl_test_source_to_ddl_test_dest_1756820190
2025-09-02 15:36:30,282 - INFO - Completed migration tracking 202: SUCCESS
2025-09-02 15:36:30,283 - INFO - Migration tracking completed: 202
2025-09-02 15:36:30,283 - INFO - Migration completed successfully!
2025-09-02 15:36:30,283 - INFO - Migration ID: 202
2025-09-02 15:36:30,283 - INFO - Operations: 0
2025-09-02 15:36:30,283 - INFO - Safety warnings: 0
2025-09-02 15:36:30,283 - INFO - Migration file: /home/claudio/Projects/ddl_wiz120/migration.sql
2025-09-02 15:36:30,283 - INFO - Rollback file: /home/claudio/Projects/ddl_wiz120/rollback.sql
2025-09-02 15:36:30,283 - INFO - Migration report: /home/claudio/Projects/ddl_wiz120/migration_report.md
2025-09-02 15:36:54,973 - INFO - 🏗️  Setting up source database...
2025-09-02 15:36:55,030 - INFO - ✅ Source database setup completed
2025-09-02 15:36:55,030 - INFO - 🏗️  Setting up destination database with differences...
2025-09-02 15:36:55,088 - INFO - ✅ Destination database setup completed
2025-09-02 15:36:55,088 - INFO - 📝 Populating test data...
2025-09-02 15:36:55,092 - INFO - ✅ Test data populated in ddl_test_source
2025-09-02 15:36:55,094 - INFO - ✅ Test data populated in ddl_test_dest
2025-09-02 15:36:55,094 - INFO - 🔍 Running comparison step: Initial comparison
2025-09-02 15:36:55,095 - INFO - Running in compare mode...
2025-09-02 15:36:55,095 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 15:36:55,095 - INFO - Connecting to databases...
2025-09-02 15:36:55,096 - INFO - Database connections successful
2025-09-02 15:36:55,096 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output, stdin=None, shell=False, universal_newlines=False)
2025-09-02 15:36:55,099 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 15:36:55,099 - INFO - Initialized new git repository at test_output
2025-09-02 15:36:55,100 - DEBUG - Created directory: test_output/tables
2025-09-02 15:36:55,100 - DEBUG - Created directory: test_output/functions
2025-09-02 15:36:55,100 - DEBUG - Created directory: test_output/procedures
2025-09-02 15:36:55,100 - DEBUG - Created directory: test_output/triggers
2025-09-02 15:36:55,100 - DEBUG - Created directory: test_output/events
2025-09-02 15:36:55,100 - INFO - Initialized git repository at ./test_output
2025-09-02 15:36:55,100 - INFO - Extracting DDL objects...
2025-09-02 15:36:55,111 - INFO - Comparing schemas...
2025-09-02 15:36:55,111 - INFO - Performing safety analysis...
2025-09-02 15:36:55,111 - INFO - Generating migration SQL...
2025-09-02 15:36:55,146 - INFO - Generating schema visualizations...
2025-09-02 15:36:55,149 - INFO - Generated HTML documentation
2025-09-02 15:36:55,149 - INFO - Generated Mermaid ERD
2025-09-02 15:36:55,150 - INFO - Generated Graphviz DOT file
2025-09-02 15:36:55,151 - INFO - Generated JSON schema structure
2025-09-02 15:36:55,151 - INFO - Schema visualizations generated in test_output/documentation
2025-09-02 15:36:55,151 - INFO - Migration report generated: test_output/migration_report.md
2025-09-02 15:36:55,157 - INFO - Started tracking migration 203: ddl_test_source_to_ddl_test_dest_1756820215
2025-09-02 15:36:55,161 - INFO - Completed migration tracking 203: SUCCESS
2025-09-02 15:36:55,161 - INFO - Migration tracking completed: 203
2025-09-02 15:36:55,161 - INFO - Migration completed successfully!
2025-09-02 15:36:55,161 - INFO - Migration ID: 203
2025-09-02 15:36:55,161 - INFO - Operations: 6
2025-09-02 15:36:55,161 - INFO - Safety warnings: 0
2025-09-02 15:36:55,161 - INFO - Migration file: test_output/migration.sql
2025-09-02 15:36:55,161 - INFO - Rollback file: test_output/rollback.sql
2025-09-02 15:36:55,161 - INFO - Migration report: test_output/migration_report.md
2025-09-02 15:36:55,162 - INFO - ✅ Initial comparison completed successfully
2025-09-02 15:36:55,162 - INFO - 🔍 Analyzing results in ./test_output...
2025-09-02 15:36:55,162 - INFO - 🔧 Executing SQL file: ./test_output/migration.sql
2025-09-02 15:36:55,162 - DEBUG - Executing statement 1/27: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 15:36:55,162 - DEBUG - Executing statement 2/27: DROP TABLE IF EXISTS `ddl_test_dest`.`temp_table`;...
2025-09-02 15:36:55,165 - DEBUG - Executing statement 3/27: ALTER TABLE `categories` ADD COLUMN `description` text DEFAULT NULL;...
2025-09-02 15:36:55,170 - DEBUG - Executing statement 4/27: ALTER TABLE `categories` ADD KEY `idx_categories_created` (`created_at`);...
2025-09-02 15:36:55,177 - DEBUG - Executing statement 5/27: ALTER TABLE `orders` ADD CONSTRAINT `fk_orders_customer` FOREIGN KEY (`customer_id`) REFERENCES `cus...
2025-09-02 15:36:55,181 - DEBUG - Executing statement 6/27: ALTER TABLE `customers` DROP COLUMN `loyalty_points`;...
2025-09-02 15:36:55,185 - DEBUG - Executing statement 7/27: ALTER TABLE `customers` ADD KEY `idx_customers_country` (`country`);...
2025-09-02 15:36:55,192 - DEBUG - Executing statement 8/27: ALTER TABLE `customers` ADD KEY `idx_customers_city` (`city`);...
2025-09-02 15:36:55,197 - DEBUG - Executing statement 9/27: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;...
2025-09-02 15:36:55,198 - WARNING - ⚠️  SQL execution warning (statement 9): (1091, "Can't DROP INDEX `idx_customers_loyalty`; check that it exists")
2025-09-02 15:36:55,198 - WARNING - Statement: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;
2025-09-02 15:36:55,198 - DEBUG - Executing statement 10/27: ALTER TABLE `products` ADD COLUMN `dimensions` varchar(100) DEFAULT NULL;...
2025-09-02 15:36:55,202 - DEBUG - Executing statement 11/27: ALTER TABLE `products` ADD COLUMN `weight` decimal(8,3) DEFAULT NULL;...
2025-09-02 15:36:55,207 - DEBUG - Executing statement 12/27: ALTER TABLE `products` DROP COLUMN `old_column`;...
2025-09-02 15:36:55,212 - DEBUG - Executing statement 13/27: ALTER TABLE `products` ADD KEY `idx_products_stock` (`stock_quantity`);...
2025-09-02 15:36:55,217 - DEBUG - Executing statement 14/27: ALTER TABLE `products` ADD KEY `fk_products_category` (`category_id`);...
2025-09-02 15:36:55,223 - DEBUG - Executing statement 15/27: ALTER TABLE `products` ADD KEY `idx_products_price` (`price`);...
2025-09-02 15:36:55,229 - DEBUG - Executing statement 16/27: ALTER TABLE `products` ADD KEY `idx_products_active` (`is_active`);...
2025-09-02 15:36:55,235 - DEBUG - Executing statement 17/27: ALTER TABLE `products` ADD KEY `idx_products_sku` (`sku`);...
2025-09-02 15:36:55,241 - DEBUG - Executing statement 18/27: ALTER TABLE `products` DROP INDEX `idx_products_old`;...
2025-09-02 15:36:55,241 - WARNING - ⚠️  SQL execution warning (statement 18): (1091, "Can't DROP INDEX `idx_products_old`; check that it exists")
2025-09-02 15:36:55,241 - WARNING - Statement: ALTER TABLE `products` DROP INDEX `idx_products_old`;
2025-09-02 15:36:55,241 - DEBUG - Executing statement 19/27: ALTER TABLE `products` ADD CONSTRAINT `fk_products_category` FOREIGN KEY (`category_id`) REFERENCES ...
2025-09-02 15:36:55,245 - DEBUG - Executing statement 20/27: DROP PROCEDURE IF EXISTS `ddl_test_dest`.`GetCustomerOrders`;...
2025-09-02 15:36:55,247 - DEBUG - Executing statement 21/27: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*, COU...
2025-09-02 15:36:55,248 - DEBUG - Executing statement 22/27: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_orders_update_timestamp`;...
2025-09-02 15:36:55,248 - DEBUG - Executing statement 23/27: CREATE DEFINER=`sstuser`@`%` TRIGGER tr_orders_update_timestamp
BEFORE UPDATE ON orders
FOR EACH ROW...
2025-09-02 15:36:55,251 - DEBUG - Executing statement 24/27: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_products_stock_check`;...
2025-09-02 15:36:55,251 - DEBUG - Executing statement 25/27: CREATE DEFINER=`sstuser`@`%` TRIGGER tr_products_stock_check
BEFORE UPDATE ON products
FOR EACH ROW
...
2025-09-02 15:36:55,254 - DEBUG - Executing statement 26/27: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_customers_loyalty_update`;...
2025-09-02 15:36:55,256 - DEBUG - Executing statement 27/27: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 15:36:55,256 - INFO - ✅ SQL file executed: 25 statements succeeded, 2 failed
2025-09-02 15:36:55,256 - INFO - 🔍 Checking if schemas are identical after migration...
2025-09-02 15:36:55,256 - INFO - 🔍 Running comparison step: Post-migration schema check
2025-09-02 15:36:55,256 - INFO - Running in compare mode...
2025-09-02 15:36:55,257 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 15:36:55,257 - INFO - Connecting to databases...
2025-09-02 15:36:55,258 - INFO - Database connections successful
2025-09-02 15:36:55,258 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_post_migration, stdin=None, shell=False, universal_newlines=False)
2025-09-02 15:36:55,260 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 15:36:55,261 - INFO - Initialized new git repository at test_output_post_migration
2025-09-02 15:36:55,261 - DEBUG - Created directory: test_output_post_migration/tables
2025-09-02 15:36:55,261 - DEBUG - Created directory: test_output_post_migration/functions
2025-09-02 15:36:55,261 - DEBUG - Created directory: test_output_post_migration/procedures
2025-09-02 15:36:55,261 - DEBUG - Created directory: test_output_post_migration/triggers
2025-09-02 15:36:55,261 - DEBUG - Created directory: test_output_post_migration/events
2025-09-02 15:36:55,261 - INFO - Initialized git repository at ./test_output_post_migration
2025-09-02 15:36:55,261 - INFO - Extracting DDL objects...
2025-09-02 15:36:55,269 - INFO - Comparing schemas...
2025-09-02 15:36:55,269 - INFO - Performing safety analysis...
2025-09-02 15:36:55,269 - INFO - Generating migration SQL...
2025-09-02 15:36:55,297 - INFO - Generating schema visualizations...
2025-09-02 15:36:55,300 - INFO - Generated HTML documentation
2025-09-02 15:36:55,300 - INFO - Generated Mermaid ERD
2025-09-02 15:36:55,300 - INFO - Generated Graphviz DOT file
2025-09-02 15:36:55,301 - INFO - Generated JSON schema structure
2025-09-02 15:36:55,301 - INFO - Schema visualizations generated in test_output_post_migration/documentation
2025-09-02 15:36:55,301 - INFO - Migration report generated: test_output_post_migration/migration_report.md
2025-09-02 15:36:55,307 - INFO - Started tracking migration 204: ddl_test_source_to_ddl_test_dest_1756820215
2025-09-02 15:36:55,312 - INFO - Completed migration tracking 204: SUCCESS
2025-09-02 15:36:55,312 - INFO - Migration tracking completed: 204
2025-09-02 15:36:55,312 - INFO - Migration completed successfully!
2025-09-02 15:36:55,312 - INFO - Migration ID: 204
2025-09-02 15:36:55,312 - INFO - Operations: 0
2025-09-02 15:36:55,312 - INFO - Safety warnings: 0
2025-09-02 15:36:55,313 - INFO - Migration file: test_output_post_migration/migration.sql
2025-09-02 15:36:55,313 - INFO - Rollback file: test_output_post_migration/rollback.sql
2025-09-02 15:36:55,313 - INFO - Migration report: test_output_post_migration/migration_report.md
2025-09-02 15:36:55,313 - INFO - ✅ Post-migration schema check completed successfully
2025-09-02 15:36:55,313 - INFO - ✅ Schemas are identical after migration!
2025-09-02 15:36:55,313 - INFO - 🔧 Executing SQL file: ./test_output/rollback.sql
2025-09-02 15:36:55,313 - DEBUG - Executing statement 1/22: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 15:36:55,314 - DEBUG - Executing statement 2/22: CREATE TABLE `temp_table` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`temp_data` varchar(255) DEFAULT N...
2025-09-02 15:36:55,317 - DEBUG - Executing statement 3/22: ALTER TABLE `categories` DROP COLUMN `description`;...
2025-09-02 15:36:55,322 - DEBUG - Executing statement 4/22: ALTER TABLE `categories` DROP INDEX `idx_categories_created`;...
2025-09-02 15:36:55,327 - DEBUG - Executing statement 5/22: ALTER TABLE `orders` DROP FOREIGN KEY `fk_orders_customer`;...
2025-09-02 15:36:55,332 - DEBUG - Executing statement 6/22: ALTER TABLE `customers` ADD COLUMN `loyalty_points` int(11) DEFAULT 0;...
2025-09-02 15:36:55,338 - DEBUG - Executing statement 7/22: ALTER TABLE `customers` DROP INDEX `idx_customers_country`;...
2025-09-02 15:36:55,342 - DEBUG - Executing statement 8/22: ALTER TABLE `customers` DROP INDEX `idx_customers_city`;...
2025-09-02 15:36:55,346 - DEBUG - Executing statement 9/22: ALTER TABLE `customers` ADD KEY `idx_customers_loyalty` (`loyalty_points`);...
2025-09-02 15:36:55,352 - DEBUG - Executing statement 10/22: ALTER TABLE `products` DROP COLUMN `dimensions`;...
2025-09-02 15:36:55,357 - DEBUG - Executing statement 11/22: ALTER TABLE `products` DROP COLUMN `weight`;...
2025-09-02 15:36:55,363 - DEBUG - Executing statement 12/22: ALTER TABLE `products` ADD COLUMN `old_column` varchar(50) DEFAULT NULL;...
2025-09-02 15:36:55,370 - DEBUG - Executing statement 13/22: ALTER TABLE `products` DROP INDEX `idx_products_stock`;...
2025-09-02 15:36:55,374 - DEBUG - Executing statement 14/22: ALTER TABLE `products` DROP INDEX `fk_products_category`;...
2025-09-02 15:36:55,379 - DEBUG - Executing statement 15/22: ALTER TABLE `products` DROP INDEX `idx_products_price`;...
2025-09-02 15:36:55,383 - DEBUG - Executing statement 16/22: ALTER TABLE `products` DROP INDEX `idx_products_active`;...
2025-09-02 15:36:55,387 - DEBUG - Executing statement 17/22: ALTER TABLE `products` DROP INDEX `idx_products_sku`;...
2025-09-02 15:36:55,392 - DEBUG - Executing statement 18/22: ALTER TABLE `products` ADD KEY `idx_products_old` (`old_column`);...
2025-09-02 15:36:55,397 - DEBUG - Executing statement 19/22: ALTER TABLE `products` DROP FOREIGN KEY `fk_products_category`;...
2025-09-02 15:36:55,402 - DEBUG - Executing statement 20/22: DROP PROCEDURE IF EXISTS `GetCustomerOrders`;...
2025-09-02 15:36:55,404 - DEBUG - Executing statement 21/22: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*
FROM...
2025-09-02 15:36:55,405 - DEBUG - Executing statement 22/22: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 15:36:55,405 - INFO - ✅ SQL file executed: 22 statements succeeded, 0 failed
2025-09-02 15:36:55,405 - INFO - 🔍 Running comparison step: Final comparison after rollback
2025-09-02 15:36:55,406 - INFO - Running in compare mode...
2025-09-02 15:36:55,406 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 15:36:55,406 - INFO - Connecting to databases...
2025-09-02 15:36:55,408 - INFO - Database connections successful
2025-09-02 15:36:55,408 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_final, stdin=None, shell=False, universal_newlines=False)
2025-09-02 15:36:55,410 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 15:36:55,410 - INFO - Initialized new git repository at test_output_final
2025-09-02 15:36:55,411 - DEBUG - Created directory: test_output_final/tables
2025-09-02 15:36:55,411 - DEBUG - Created directory: test_output_final/functions
2025-09-02 15:36:55,411 - DEBUG - Created directory: test_output_final/procedures
2025-09-02 15:36:55,411 - DEBUG - Created directory: test_output_final/triggers
2025-09-02 15:36:55,411 - DEBUG - Created directory: test_output_final/events
2025-09-02 15:36:55,411 - INFO - Initialized git repository at ./test_output_final
2025-09-02 15:36:55,411 - INFO - Extracting DDL objects...
2025-09-02 15:36:55,417 - INFO - Comparing schemas...
2025-09-02 15:36:55,417 - INFO - Performing safety analysis...
2025-09-02 15:36:55,417 - INFO - Generating migration SQL...
2025-09-02 15:36:55,445 - INFO - Generating schema visualizations...
2025-09-02 15:36:55,447 - INFO - Generated HTML documentation
2025-09-02 15:36:55,447 - INFO - Generated Mermaid ERD
2025-09-02 15:36:55,447 - INFO - Generated Graphviz DOT file
2025-09-02 15:36:55,448 - INFO - Generated JSON schema structure
2025-09-02 15:36:55,448 - INFO - Schema visualizations generated in test_output_final/documentation
2025-09-02 15:36:55,448 - INFO - Migration report generated: test_output_final/migration_report.md
2025-09-02 15:36:55,454 - INFO - Started tracking migration 205: ddl_test_source_to_ddl_test_dest_1756820215
2025-09-02 15:36:55,457 - INFO - Completed migration tracking 205: SUCCESS
2025-09-02 15:36:55,457 - INFO - Migration tracking completed: 205
2025-09-02 15:36:55,457 - INFO - Migration completed successfully!
2025-09-02 15:36:55,457 - INFO - Migration ID: 205
2025-09-02 15:36:55,458 - INFO - Operations: 6
2025-09-02 15:36:55,458 - INFO - Safety warnings: 0
2025-09-02 15:36:55,458 - INFO - Migration file: test_output_final/migration.sql
2025-09-02 15:36:55,458 - INFO - Rollback file: test_output_final/rollback.sql
2025-09-02 15:36:55,458 - INFO - Migration report: test_output_final/migration_report.md
2025-09-02 15:36:55,458 - INFO - ✅ Final comparison after rollback completed successfully
2025-09-02 15:36:55,458 - INFO - 🔍 Analyzing results in ./test_output_final...
2025-09-02 15:36:55,458 - INFO - 🔄 Comparing initial and final results...
2025-09-02 15:36:55,458 - INFO - ✅ Rollback test passed - initial and final states match!
2025-09-02 15:36:55,458 - INFO - 💾 Saving test data for reference...
2025-09-02 15:36:55,462 - INFO - ✅ Saved ./test_output to test_data/ddlw-test-20250902_153655/ddl-wizard-testsuite-initial-migration-20250902_153655
2025-09-02 15:36:55,465 - INFO - ✅ Saved ./test_output to test_data/ddlw-test-20250902_153655/test_output
2025-09-02 15:36:55,468 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddlw-test-20250902_153655/ddl-wizard-testsuite-post-migration-verification-20250902_153655
2025-09-02 15:36:55,472 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddlw-test-20250902_153655/test_output_post_migration
2025-09-02 15:36:55,476 - INFO - ✅ Saved ./test_output_final to test_data/ddlw-test-20250902_153655/ddl-wizard-testsuite-rollback-verification-20250902_153655
2025-09-02 15:36:55,479 - INFO - ✅ Saved ./test_output_final to test_data/ddlw-test-20250902_153655/test_output_final
2025-09-02 15:36:55,479 - INFO - ✅ Saved test log to test_data/ddlw-test-20250902_153655
2025-09-02 15:36:55,481 - INFO - 🧹 Cleaned up temporary directory: ./test_output
2025-09-02 15:36:55,482 - INFO - 🧹 Cleaned up temporary directory: ./test_output_post_migration
2025-09-02 15:36:55,483 - INFO - 🧹 Cleaned up temporary directory: ./test_output_final
2025-09-02 15:36:55,483 - INFO - 🧹 Cleaning up test databases...
2025-09-02 15:36:55,484 - INFO - ✅ Cleaned up database: ddl_test_source
2025-09-02 15:36:55,485 - INFO - ✅ Cleaned up database: ddl_test_dest
2025-09-02 15:37:03,139 - INFO - Running in compare mode...
2025-09-02 15:37:03,140 - INFO - Connecting to databases...
2025-09-02 15:37:03,142 - INFO - Database connections successful
2025-09-02 15:37:03,145 - INFO - Initialized new git repository at /home/claudio/Projects/ddl_wiz130
2025-09-02 15:37:03,145 - INFO - Initialized git repository at /home/claudio/Projects/ddl_wiz130
2025-09-02 15:37:03,145 - INFO - Extracting DDL objects...
2025-09-02 15:37:03,151 - INFO - Comparing schemas...
2025-09-02 15:37:03,151 - INFO - Performing safety analysis...
2025-09-02 15:37:03,151 - INFO - Generating migration SQL...
2025-09-02 15:37:03,182 - INFO - Generating schema visualizations...
2025-09-02 15:37:03,185 - INFO - Generated HTML documentation
2025-09-02 15:37:03,185 - INFO - Generated Mermaid ERD
2025-09-02 15:37:03,186 - INFO - Generated Graphviz DOT file
2025-09-02 15:37:03,186 - INFO - Generated JSON schema structure
2025-09-02 15:37:03,186 - INFO - Schema visualizations generated in /home/claudio/Projects/ddl_wiz130/documentation
2025-09-02 15:37:03,187 - INFO - Migration report generated: /home/claudio/Projects/ddl_wiz130/migration_report.md
2025-09-02 15:37:03,193 - INFO - Started tracking migration 206: ddl_test_source_to_ddl_test_dest_1756820223
2025-09-02 15:37:03,197 - INFO - Completed migration tracking 206: SUCCESS
2025-09-02 15:37:03,197 - INFO - Migration tracking completed: 206
2025-09-02 15:37:03,197 - INFO - Migration completed successfully!
2025-09-02 15:37:03,197 - INFO - Migration ID: 206
2025-09-02 15:37:03,198 - INFO - Operations: 6
2025-09-02 15:37:03,198 - INFO - Safety warnings: 0
2025-09-02 15:37:03,198 - INFO - Migration file: /home/claudio/Projects/ddl_wiz130/migration.sql
2025-09-02 15:37:03,198 - INFO - Rollback file: /home/claudio/Projects/ddl_wiz130/rollback.sql
2025-09-02 15:37:03,198 - INFO - Migration report: /home/claudio/Projects/ddl_wiz130/migration_report.md
2025-09-02 15:40:00,183 - INFO - Running in compare mode...
2025-09-02 15:40:00,183 - INFO - Connecting to databases...
2025-09-02 15:40:00,186 - INFO - Database connections successful
2025-09-02 15:40:00,188 - INFO - Initialized new git repository at /home/claudio/Projects/ddl_wiz140
2025-09-02 15:40:00,189 - INFO - Initialized git repository at /home/claudio/Projects/ddl_wiz140
2025-09-02 15:40:00,189 - INFO - Extracting DDL objects...
2025-09-02 15:40:00,194 - INFO - Comparing schemas...
2025-09-02 15:40:00,194 - INFO - Performing safety analysis...
2025-09-02 15:40:00,194 - INFO - Generating migration SQL...
2025-09-02 15:40:00,223 - INFO - Generating schema visualizations...
2025-09-02 15:40:00,226 - INFO - Generated HTML documentation
2025-09-02 15:40:00,226 - INFO - Generated Mermaid ERD
2025-09-02 15:40:00,226 - INFO - Generated Graphviz DOT file
2025-09-02 15:40:00,226 - INFO - Generated JSON schema structure
2025-09-02 15:40:00,226 - INFO - Schema visualizations generated in /home/claudio/Projects/ddl_wiz140/documentation
2025-09-02 15:40:00,227 - INFO - Migration report generated: /home/claudio/Projects/ddl_wiz140/migration_report.md
2025-09-02 15:40:00,233 - INFO - Started tracking migration 207: ddl_test_source_to_ddl_test_dest_1756820400
2025-09-02 15:40:00,236 - INFO - Completed migration tracking 207: SUCCESS
2025-09-02 15:40:00,236 - INFO - Migration tracking completed: 207
2025-09-02 15:40:00,236 - INFO - Migration completed successfully!
2025-09-02 15:40:00,236 - INFO - Migration ID: 207
2025-09-02 15:40:00,237 - INFO - Operations: 6
2025-09-02 15:40:00,237 - INFO - Safety warnings: 0
2025-09-02 15:40:00,237 - INFO - Migration file: /home/claudio/Projects/ddl_wiz140/migration.sql
2025-09-02 15:40:00,237 - INFO - Rollback file: /home/claudio/Projects/ddl_wiz140/rollback.sql
2025-09-02 15:40:00,237 - INFO - Migration report: /home/claudio/Projects/ddl_wiz140/migration_report.md
2025-09-02 15:48:36,203 - INFO - 🏗️  Setting up source database...
2025-09-02 15:48:36,209 - ERROR - Failed to connect to database: (2003, "Can't connect to MySQL server on 'localhost' ([Errno 111] Connection refused)")
2025-09-02 15:48:36,209 - ERROR - ❌ Round-trip test suite failed: (2003, "Can't connect to MySQL server on 'localhost' ([Errno 111] Connection refused)")
2025-09-02 15:48:36,209 - INFO - 🧹 Cleaning up test databases...
2025-09-02 15:48:36,210 - ERROR - ❌ Error cleaning up ddl_test_source: (2003, "Can't connect to MySQL server on 'localhost' ([Errno 111] Connection refused)")
2025-09-02 15:48:36,210 - ERROR - ❌ Error cleaning up ddl_test_dest: (2003, "Can't connect to MySQL server on 'localhost' ([Errno 111] Connection refused)")
2025-09-02 15:49:21,140 - INFO - 🏗️  Setting up source database...
2025-09-02 15:49:21,196 - INFO - ✅ Source database setup completed
2025-09-02 15:49:21,197 - INFO - 🏗️  Setting up destination database with differences...
2025-09-02 15:49:21,248 - INFO - ✅ Destination database setup completed
2025-09-02 15:49:21,248 - INFO - 📝 Populating test data...
2025-09-02 15:49:21,251 - INFO - ✅ Test data populated in ddl_test_source
2025-09-02 15:49:21,253 - INFO - ✅ Test data populated in ddl_test_dest
2025-09-02 15:49:21,254 - INFO - 🔍 Running comparison step: Initial comparison
2025-09-02 15:49:21,255 - INFO - Running in compare mode...
2025-09-02 15:49:21,255 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 15:49:21,255 - INFO - Connecting to databases...
2025-09-02 15:49:21,257 - INFO - Database connections successful
2025-09-02 15:49:21,257 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output, stdin=None, shell=False, universal_newlines=False)
2025-09-02 15:49:21,260 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 15:49:21,261 - INFO - Initialized new git repository at test_output
2025-09-02 15:49:21,261 - DEBUG - Created directory: test_output/tables
2025-09-02 15:49:21,261 - DEBUG - Created directory: test_output/functions
2025-09-02 15:49:21,261 - DEBUG - Created directory: test_output/procedures
2025-09-02 15:49:21,261 - DEBUG - Created directory: test_output/triggers
2025-09-02 15:49:21,261 - DEBUG - Created directory: test_output/events
2025-09-02 15:49:21,261 - INFO - Initialized git repository at ./test_output
2025-09-02 15:49:21,261 - INFO - Extracting DDL objects...
2025-09-02 15:49:21,269 - INFO - Comparing schemas...
2025-09-02 15:49:21,269 - INFO - Performing safety analysis...
2025-09-02 15:49:21,269 - INFO - Generating migration SQL...
2025-09-02 15:49:21,303 - INFO - Generating schema visualizations...
2025-09-02 15:49:21,307 - INFO - Generated HTML documentation
2025-09-02 15:49:21,307 - INFO - Generated Mermaid ERD
2025-09-02 15:49:21,307 - INFO - Generated Graphviz DOT file
2025-09-02 15:49:21,308 - INFO - Generated JSON schema structure
2025-09-02 15:49:21,308 - INFO - Schema visualizations generated in test_output/documentation
2025-09-02 15:49:21,308 - INFO - Migration report generated: test_output/migration_report.md
2025-09-02 15:49:21,314 - INFO - Started tracking migration 208: ddl_test_source_to_ddl_test_dest_1756820961
2025-09-02 15:49:21,318 - INFO - Completed migration tracking 208: SUCCESS
2025-09-02 15:49:21,318 - INFO - Migration tracking completed: 208
2025-09-02 15:49:21,318 - INFO - Migration completed successfully!
2025-09-02 15:49:21,318 - INFO - Migration ID: 208
2025-09-02 15:49:21,318 - INFO - Operations: 6
2025-09-02 15:49:21,318 - INFO - Safety warnings: 0
2025-09-02 15:49:21,318 - INFO - Migration file: test_output/migration.sql
2025-09-02 15:49:21,318 - INFO - Rollback file: test_output/rollback.sql
2025-09-02 15:49:21,318 - INFO - Migration report: test_output/migration_report.md
2025-09-02 15:49:21,318 - INFO - ✅ Initial comparison completed successfully
2025-09-02 15:49:21,318 - INFO - 🔍 Analyzing results in ./test_output...
2025-09-02 15:49:21,319 - INFO - 🔧 Executing SQL file: ./test_output/migration.sql
2025-09-02 15:49:21,319 - DEBUG - Executing statement 1/27: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 15:49:21,320 - DEBUG - Executing statement 2/27: DROP TABLE IF EXISTS `ddl_test_dest`.`temp_table`;...
2025-09-02 15:49:21,323 - DEBUG - Executing statement 3/27: ALTER TABLE `orders` ADD CONSTRAINT `fk_orders_customer` FOREIGN KEY (`customer_id`) REFERENCES `cus...
2025-09-02 15:49:21,327 - DEBUG - Executing statement 4/27: ALTER TABLE `customers` DROP COLUMN `loyalty_points`;...
2025-09-02 15:49:21,332 - DEBUG - Executing statement 5/27: ALTER TABLE `customers` ADD KEY `idx_customers_country` (`country`);...
2025-09-02 15:49:21,339 - DEBUG - Executing statement 6/27: ALTER TABLE `customers` ADD KEY `idx_customers_city` (`city`);...
2025-09-02 15:49:21,345 - DEBUG - Executing statement 7/27: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;...
2025-09-02 15:49:21,345 - WARNING - ⚠️  SQL execution warning (statement 7): (1091, "Can't DROP INDEX `idx_customers_loyalty`; check that it exists")
2025-09-02 15:49:21,345 - WARNING - Statement: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;
2025-09-02 15:49:21,345 - DEBUG - Executing statement 8/27: ALTER TABLE `products` ADD COLUMN `weight` decimal(8,3) DEFAULT NULL;...
2025-09-02 15:49:21,349 - DEBUG - Executing statement 9/27: ALTER TABLE `products` ADD COLUMN `dimensions` varchar(100) DEFAULT NULL;...
2025-09-02 15:49:21,354 - DEBUG - Executing statement 10/27: ALTER TABLE `products` DROP COLUMN `old_column`;...
2025-09-02 15:49:21,359 - DEBUG - Executing statement 11/27: ALTER TABLE `products` ADD KEY `fk_products_category` (`category_id`);...
2025-09-02 15:49:21,364 - DEBUG - Executing statement 12/27: ALTER TABLE `products` ADD KEY `idx_products_stock` (`stock_quantity`);...
2025-09-02 15:49:21,370 - DEBUG - Executing statement 13/27: ALTER TABLE `products` ADD KEY `idx_products_active` (`is_active`);...
2025-09-02 15:49:21,376 - DEBUG - Executing statement 14/27: ALTER TABLE `products` ADD KEY `idx_products_price` (`price`);...
2025-09-02 15:49:21,382 - DEBUG - Executing statement 15/27: ALTER TABLE `products` ADD KEY `idx_products_sku` (`sku`);...
2025-09-02 15:49:21,388 - DEBUG - Executing statement 16/27: ALTER TABLE `products` DROP INDEX `idx_products_old`;...
2025-09-02 15:49:21,389 - WARNING - ⚠️  SQL execution warning (statement 16): (1091, "Can't DROP INDEX `idx_products_old`; check that it exists")
2025-09-02 15:49:21,389 - WARNING - Statement: ALTER TABLE `products` DROP INDEX `idx_products_old`;
2025-09-02 15:49:21,389 - DEBUG - Executing statement 17/27: ALTER TABLE `products` ADD CONSTRAINT `fk_products_category` FOREIGN KEY (`category_id`) REFERENCES ...
2025-09-02 15:49:21,393 - DEBUG - Executing statement 18/27: ALTER TABLE `categories` ADD COLUMN `description` text DEFAULT NULL;...
2025-09-02 15:49:21,397 - DEBUG - Executing statement 19/27: ALTER TABLE `categories` ADD KEY `idx_categories_created` (`created_at`);...
2025-09-02 15:49:21,403 - DEBUG - Executing statement 20/27: DROP PROCEDURE IF EXISTS `ddl_test_dest`.`GetCustomerOrders`;...
2025-09-02 15:49:21,405 - DEBUG - Executing statement 21/27: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*, COU...
2025-09-02 15:49:21,406 - DEBUG - Executing statement 22/27: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_orders_update_timestamp`;...
2025-09-02 15:49:21,407 - DEBUG - Executing statement 23/27: CREATE DEFINER=`sstuser`@`%` TRIGGER tr_orders_update_timestamp
BEFORE UPDATE ON orders
FOR EACH ROW...
2025-09-02 15:49:21,410 - DEBUG - Executing statement 24/27: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_products_stock_check`;...
2025-09-02 15:49:21,410 - DEBUG - Executing statement 25/27: CREATE DEFINER=`sstuser`@`%` TRIGGER tr_products_stock_check
BEFORE UPDATE ON products
FOR EACH ROW
...
2025-09-02 15:49:21,412 - DEBUG - Executing statement 26/27: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_customers_loyalty_update`;...
2025-09-02 15:49:21,414 - DEBUG - Executing statement 27/27: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 15:49:21,414 - INFO - ✅ SQL file executed: 25 statements succeeded, 2 failed
2025-09-02 15:49:21,414 - INFO - 🔍 Checking if schemas are identical after migration...
2025-09-02 15:49:21,414 - INFO - 🔍 Running comparison step: Post-migration schema check
2025-09-02 15:49:21,415 - INFO - Running in compare mode...
2025-09-02 15:49:21,415 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 15:49:21,415 - INFO - Connecting to databases...
2025-09-02 15:49:21,417 - INFO - Database connections successful
2025-09-02 15:49:21,417 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_post_migration, stdin=None, shell=False, universal_newlines=False)
2025-09-02 15:49:21,420 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 15:49:21,421 - INFO - Initialized new git repository at test_output_post_migration
2025-09-02 15:49:21,421 - DEBUG - Created directory: test_output_post_migration/tables
2025-09-02 15:49:21,421 - DEBUG - Created directory: test_output_post_migration/functions
2025-09-02 15:49:21,422 - DEBUG - Created directory: test_output_post_migration/procedures
2025-09-02 15:49:21,422 - DEBUG - Created directory: test_output_post_migration/triggers
2025-09-02 15:49:21,422 - DEBUG - Created directory: test_output_post_migration/events
2025-09-02 15:49:21,422 - INFO - Initialized git repository at ./test_output_post_migration
2025-09-02 15:49:21,422 - INFO - Extracting DDL objects...
2025-09-02 15:49:21,428 - INFO - Comparing schemas...
2025-09-02 15:49:21,428 - INFO - Performing safety analysis...
2025-09-02 15:49:21,428 - INFO - Generating migration SQL...
2025-09-02 15:49:21,461 - INFO - Generating schema visualizations...
2025-09-02 15:49:21,465 - INFO - Generated HTML documentation
2025-09-02 15:49:21,465 - INFO - Generated Mermaid ERD
2025-09-02 15:49:21,465 - INFO - Generated Graphviz DOT file
2025-09-02 15:49:21,466 - INFO - Generated JSON schema structure
2025-09-02 15:49:21,466 - INFO - Schema visualizations generated in test_output_post_migration/documentation
2025-09-02 15:49:21,466 - INFO - Migration report generated: test_output_post_migration/migration_report.md
2025-09-02 15:49:21,473 - INFO - Started tracking migration 209: ddl_test_source_to_ddl_test_dest_1756820961
2025-09-02 15:49:21,478 - INFO - Completed migration tracking 209: SUCCESS
2025-09-02 15:49:21,478 - INFO - Migration tracking completed: 209
2025-09-02 15:49:21,478 - INFO - Migration completed successfully!
2025-09-02 15:49:21,478 - INFO - Migration ID: 209
2025-09-02 15:49:21,478 - INFO - Operations: 0
2025-09-02 15:49:21,478 - INFO - Safety warnings: 0
2025-09-02 15:49:21,478 - INFO - Migration file: test_output_post_migration/migration.sql
2025-09-02 15:49:21,478 - INFO - Rollback file: test_output_post_migration/rollback.sql
2025-09-02 15:49:21,478 - INFO - Migration report: test_output_post_migration/migration_report.md
2025-09-02 15:49:21,478 - INFO - ✅ Post-migration schema check completed successfully
2025-09-02 15:49:21,479 - INFO - ✅ Schemas are identical after migration!
2025-09-02 15:49:21,479 - INFO - 🔧 Executing SQL file: ./test_output/rollback.sql
2025-09-02 15:49:21,479 - DEBUG - Executing statement 1/25: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 15:49:21,480 - DEBUG - Executing statement 2/25: CREATE TABLE `temp_table` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`temp_data` varchar(255) DEFAULT N...
2025-09-02 15:49:21,483 - DEBUG - Executing statement 3/25: ALTER TABLE `orders` DROP FOREIGN KEY `fk_orders_customer`;...
2025-09-02 15:49:21,488 - DEBUG - Executing statement 4/25: ALTER TABLE `customers` ADD COLUMN `loyalty_points` int(11) DEFAULT 0;...
2025-09-02 15:49:21,493 - DEBUG - Executing statement 5/25: ALTER TABLE `customers` DROP INDEX `idx_customers_country`;...
2025-09-02 15:49:21,497 - DEBUG - Executing statement 6/25: ALTER TABLE `customers` DROP INDEX `idx_customers_city`;...
2025-09-02 15:49:21,502 - DEBUG - Executing statement 7/25: ALTER TABLE `customers` ADD KEY `idx_customers_loyalty` (`loyalty_points`);...
2025-09-02 15:49:21,507 - DEBUG - Executing statement 8/25: ALTER TABLE `products` DROP COLUMN `weight`;...
2025-09-02 15:49:21,512 - DEBUG - Executing statement 9/25: ALTER TABLE `products` DROP COLUMN `dimensions`;...
2025-09-02 15:49:21,518 - DEBUG - Executing statement 10/25: ALTER TABLE `products` ADD COLUMN `old_column` varchar(50) DEFAULT NULL;...
2025-09-02 15:49:21,524 - DEBUG - Executing statement 11/25: ALTER TABLE `products` DROP INDEX `fk_products_category`;...
2025-09-02 15:49:21,529 - DEBUG - Executing statement 12/25: ALTER TABLE `products` DROP INDEX `idx_products_stock`;...
2025-09-02 15:49:21,533 - DEBUG - Executing statement 13/25: ALTER TABLE `products` DROP INDEX `idx_products_active`;...
2025-09-02 15:49:21,537 - DEBUG - Executing statement 14/25: ALTER TABLE `products` DROP INDEX `idx_products_price`;...
2025-09-02 15:49:21,542 - DEBUG - Executing statement 15/25: ALTER TABLE `products` DROP INDEX `idx_products_sku`;...
2025-09-02 15:49:21,546 - DEBUG - Executing statement 16/25: ALTER TABLE `products` ADD KEY `idx_products_old` (`old_column`);...
2025-09-02 15:49:21,552 - DEBUG - Executing statement 17/25: ALTER TABLE `products` DROP FOREIGN KEY `fk_products_category`;...
2025-09-02 15:49:21,557 - DEBUG - Executing statement 18/25: ALTER TABLE `categories` DROP COLUMN `description`;...
2025-09-02 15:49:21,562 - DEBUG - Executing statement 19/25: ALTER TABLE `categories` DROP INDEX `idx_categories_created`;...
2025-09-02 15:49:21,566 - DEBUG - Executing statement 20/25: DROP PROCEDURE IF EXISTS `GetCustomerOrders`;...
2025-09-02 15:49:21,568 - DEBUG - Executing statement 21/25: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*
FROM...
2025-09-02 15:49:21,569 - DEBUG - Executing statement 22/25: DROP TRIGGER IF EXISTS `tr_orders_update_timestamp`;...
2025-09-02 15:49:21,571 - DEBUG - Executing statement 23/25: DROP TRIGGER IF EXISTS `tr_products_stock_check`;...
2025-09-02 15:49:21,572 - DEBUG - Executing statement 24/25: CREATE DEFINER=`sstuser`@`%` TRIGGER tr_customers_loyalty_update
BEFORE UPDATE ON customers
FOR EACH...
2025-09-02 15:49:21,575 - DEBUG - Executing statement 25/25: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 15:49:21,575 - INFO - ✅ SQL file executed: 25 statements succeeded, 0 failed
2025-09-02 15:49:21,575 - INFO - 🔍 Running comparison step: Final comparison after rollback
2025-09-02 15:49:21,576 - INFO - Running in compare mode...
2025-09-02 15:49:21,576 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 15:49:21,576 - INFO - Connecting to databases...
2025-09-02 15:49:21,578 - INFO - Database connections successful
2025-09-02 15:49:21,578 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_final, stdin=None, shell=False, universal_newlines=False)
2025-09-02 15:49:21,581 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 15:49:21,581 - INFO - Initialized new git repository at test_output_final
2025-09-02 15:49:21,582 - DEBUG - Created directory: test_output_final/tables
2025-09-02 15:49:21,582 - DEBUG - Created directory: test_output_final/functions
2025-09-02 15:49:21,582 - DEBUG - Created directory: test_output_final/procedures
2025-09-02 15:49:21,582 - DEBUG - Created directory: test_output_final/triggers
2025-09-02 15:49:21,582 - DEBUG - Created directory: test_output_final/events
2025-09-02 15:49:21,582 - INFO - Initialized git repository at ./test_output_final
2025-09-02 15:49:21,582 - INFO - Extracting DDL objects...
2025-09-02 15:49:21,589 - INFO - Comparing schemas...
2025-09-02 15:49:21,589 - INFO - Performing safety analysis...
2025-09-02 15:49:21,589 - INFO - Generating migration SQL...
2025-09-02 15:49:21,618 - INFO - Generating schema visualizations...
2025-09-02 15:49:21,621 - INFO - Generated HTML documentation
2025-09-02 15:49:21,621 - INFO - Generated Mermaid ERD
2025-09-02 15:49:21,621 - INFO - Generated Graphviz DOT file
2025-09-02 15:49:21,622 - INFO - Generated JSON schema structure
2025-09-02 15:49:21,622 - INFO - Schema visualizations generated in test_output_final/documentation
2025-09-02 15:49:21,622 - INFO - Migration report generated: test_output_final/migration_report.md
2025-09-02 15:49:21,628 - INFO - Started tracking migration 210: ddl_test_source_to_ddl_test_dest_1756820961
2025-09-02 15:49:21,632 - INFO - Completed migration tracking 210: SUCCESS
2025-09-02 15:49:21,632 - INFO - Migration tracking completed: 210
2025-09-02 15:49:21,632 - INFO - Migration completed successfully!
2025-09-02 15:49:21,632 - INFO - Migration ID: 210
2025-09-02 15:49:21,632 - INFO - Operations: 6
2025-09-02 15:49:21,632 - INFO - Safety warnings: 0
2025-09-02 15:49:21,632 - INFO - Migration file: test_output_final/migration.sql
2025-09-02 15:49:21,632 - INFO - Rollback file: test_output_final/rollback.sql
2025-09-02 15:49:21,632 - INFO - Migration report: test_output_final/migration_report.md
2025-09-02 15:49:21,632 - INFO - ✅ Final comparison after rollback completed successfully
2025-09-02 15:49:21,632 - INFO - 🔍 Analyzing results in ./test_output_final...
2025-09-02 15:49:21,632 - INFO - 🔄 Comparing initial and final results...
2025-09-02 15:49:21,632 - INFO - ✅ Rollback test passed - initial and final states match!
2025-09-02 15:49:21,633 - INFO - 💾 Saving test data for reference...
2025-09-02 15:49:21,636 - INFO - ✅ Saved ./test_output to test_data/ddlw-test-20250902_154921/ddl-wizard-testsuite-initial-migration-20250902_154921
2025-09-02 15:49:21,639 - INFO - ✅ Saved ./test_output to test_data/ddlw-test-20250902_154921/test_output
2025-09-02 15:49:21,643 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddlw-test-20250902_154921/ddl-wizard-testsuite-post-migration-verification-20250902_154921
2025-09-02 15:49:21,646 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddlw-test-20250902_154921/test_output_post_migration
2025-09-02 15:49:21,650 - INFO - ✅ Saved ./test_output_final to test_data/ddlw-test-20250902_154921/ddl-wizard-testsuite-rollback-verification-20250902_154921
2025-09-02 15:49:21,654 - INFO - ✅ Saved ./test_output_final to test_data/ddlw-test-20250902_154921/test_output_final
2025-09-02 15:49:21,654 - INFO - ✅ Saved test log to test_data/ddlw-test-20250902_154921
2025-09-02 15:49:21,656 - INFO - 🧹 Cleaned up temporary directory: ./test_output
2025-09-02 15:49:21,657 - INFO - 🧹 Cleaned up temporary directory: ./test_output_post_migration
2025-09-02 15:49:21,658 - INFO - 🧹 Cleaned up temporary directory: ./test_output_final
2025-09-02 15:49:21,658 - INFO - 🧹 Cleaning up test databases...
2025-09-02 15:49:21,659 - INFO - ✅ Cleaned up database: ddl_test_source
2025-09-02 15:49:21,659 - INFO - ✅ Cleaned up database: ddl_test_dest
2025-09-02 15:52:06,357 - INFO - 🏗️  Setting up source database...
2025-09-02 15:52:06,416 - INFO - ✅ Source database setup completed
2025-09-02 15:52:06,416 - INFO - 🏗️  Setting up destination database with differences...
2025-09-02 15:52:06,467 - INFO - ✅ Destination database setup completed
2025-09-02 15:52:06,467 - INFO - 📝 Populating test data...
2025-09-02 15:52:06,469 - INFO - ✅ Test data populated in ddl_test_source
2025-09-02 15:52:06,471 - INFO - ✅ Test data populated in ddl_test_dest
2025-09-02 15:52:06,472 - INFO - 🔍 Running comparison step: Initial comparison
2025-09-02 15:52:06,472 - INFO - Running in compare mode...
2025-09-02 15:52:06,473 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 15:52:06,473 - INFO - Connecting to databases...
2025-09-02 15:52:06,474 - INFO - Database connections successful
2025-09-02 15:52:06,475 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output, stdin=None, shell=False, universal_newlines=False)
2025-09-02 15:52:06,477 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 15:52:06,478 - INFO - Initialized new git repository at test_output
2025-09-02 15:52:06,478 - DEBUG - Created directory: test_output/tables
2025-09-02 15:52:06,478 - DEBUG - Created directory: test_output/functions
2025-09-02 15:52:06,478 - DEBUG - Created directory: test_output/procedures
2025-09-02 15:52:06,478 - DEBUG - Created directory: test_output/triggers
2025-09-02 15:52:06,478 - DEBUG - Created directory: test_output/events
2025-09-02 15:52:06,478 - INFO - Initialized git repository at ./test_output
2025-09-02 15:52:06,478 - INFO - Extracting DDL objects...
2025-09-02 15:52:06,488 - INFO - Comparing schemas...
2025-09-02 15:52:06,488 - INFO - Performing safety analysis...
2025-09-02 15:52:06,488 - INFO - Generating migration SQL...
2025-09-02 15:52:06,521 - INFO - Generating schema visualizations...
2025-09-02 15:52:06,524 - INFO - Generated HTML documentation
2025-09-02 15:52:06,524 - INFO - Generated Mermaid ERD
2025-09-02 15:52:06,524 - INFO - Generated Graphviz DOT file
2025-09-02 15:52:06,525 - INFO - Generated JSON schema structure
2025-09-02 15:52:06,525 - INFO - Schema visualizations generated in test_output/documentation
2025-09-02 15:52:06,525 - INFO - Migration report generated: test_output/migration_report.md
2025-09-02 15:52:06,531 - INFO - Started tracking migration 211: ddl_test_source_to_ddl_test_dest_1756821126
2025-09-02 15:52:06,537 - INFO - Completed migration tracking 211: SUCCESS
2025-09-02 15:52:06,537 - INFO - Migration tracking completed: 211
2025-09-02 15:52:06,537 - INFO - Migration completed successfully!
2025-09-02 15:52:06,537 - INFO - Migration ID: 211
2025-09-02 15:52:06,537 - INFO - Operations: 6
2025-09-02 15:52:06,537 - INFO - Safety warnings: 0
2025-09-02 15:52:06,537 - INFO - Migration file: test_output/migration.sql
2025-09-02 15:52:06,537 - INFO - Rollback file: test_output/rollback.sql
2025-09-02 15:52:06,538 - INFO - Migration report: test_output/migration_report.md
2025-09-02 15:52:06,538 - INFO - ✅ Initial comparison completed successfully
2025-09-02 15:52:06,538 - INFO - 🔍 Analyzing results in ./test_output...
2025-09-02 15:52:06,538 - INFO - 🔧 Executing SQL file: ./test_output/migration.sql
2025-09-02 15:52:06,538 - DEBUG - Executing statement 1/27: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 15:52:06,539 - DEBUG - Executing statement 2/27: DROP TABLE IF EXISTS `ddl_test_dest`.`temp_table`;...
2025-09-02 15:52:06,542 - DEBUG - Executing statement 3/27: ALTER TABLE `categories` ADD COLUMN `description` text DEFAULT NULL;...
2025-09-02 15:52:06,546 - DEBUG - Executing statement 4/27: ALTER TABLE `categories` ADD KEY `idx_categories_created` (`created_at`);...
2025-09-02 15:52:06,553 - DEBUG - Executing statement 5/27: ALTER TABLE `orders` ADD CONSTRAINT `fk_orders_customer` FOREIGN KEY (`customer_id`) REFERENCES `cus...
2025-09-02 15:52:06,557 - DEBUG - Executing statement 6/27: ALTER TABLE `customers` DROP COLUMN `loyalty_points`;...
2025-09-02 15:52:06,562 - DEBUG - Executing statement 7/27: ALTER TABLE `customers` ADD KEY `idx_customers_country` (`country`);...
2025-09-02 15:52:06,569 - DEBUG - Executing statement 8/27: ALTER TABLE `customers` ADD KEY `idx_customers_city` (`city`);...
2025-09-02 15:52:06,575 - DEBUG - Executing statement 9/27: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;...
2025-09-02 15:52:06,576 - WARNING - ⚠️  SQL execution warning (statement 9): (1091, "Can't DROP INDEX `idx_customers_loyalty`; check that it exists")
2025-09-02 15:52:06,576 - WARNING - Statement: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;
2025-09-02 15:52:06,576 - DEBUG - Executing statement 10/27: ALTER TABLE `products` ADD COLUMN `dimensions` varchar(100) DEFAULT NULL;...
2025-09-02 15:52:06,581 - DEBUG - Executing statement 11/27: ALTER TABLE `products` ADD COLUMN `weight` decimal(8,3) DEFAULT NULL;...
2025-09-02 15:52:06,586 - DEBUG - Executing statement 12/27: ALTER TABLE `products` DROP COLUMN `old_column`;...
2025-09-02 15:52:06,591 - DEBUG - Executing statement 13/27: ALTER TABLE `products` ADD KEY `fk_products_category` (`category_id`);...
2025-09-02 15:52:06,596 - DEBUG - Executing statement 14/27: ALTER TABLE `products` ADD KEY `idx_products_active` (`is_active`);...
2025-09-02 15:52:06,603 - DEBUG - Executing statement 15/27: ALTER TABLE `products` ADD KEY `idx_products_price` (`price`);...
2025-09-02 15:52:06,609 - DEBUG - Executing statement 16/27: ALTER TABLE `products` ADD KEY `idx_products_sku` (`sku`);...
2025-09-02 15:52:06,615 - DEBUG - Executing statement 17/27: ALTER TABLE `products` ADD KEY `idx_products_stock` (`stock_quantity`);...
2025-09-02 15:52:06,621 - DEBUG - Executing statement 18/27: ALTER TABLE `products` DROP INDEX `idx_products_old`;...
2025-09-02 15:52:06,622 - WARNING - ⚠️  SQL execution warning (statement 18): (1091, "Can't DROP INDEX `idx_products_old`; check that it exists")
2025-09-02 15:52:06,622 - WARNING - Statement: ALTER TABLE `products` DROP INDEX `idx_products_old`;
2025-09-02 15:52:06,622 - DEBUG - Executing statement 19/27: ALTER TABLE `products` ADD CONSTRAINT `fk_products_category` FOREIGN KEY (`category_id`) REFERENCES ...
2025-09-02 15:52:06,626 - DEBUG - Executing statement 20/27: DROP PROCEDURE IF EXISTS `ddl_test_dest`.`GetCustomerOrders`;...
2025-09-02 15:52:06,627 - DEBUG - Executing statement 21/27: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*, COU...
2025-09-02 15:52:06,629 - DEBUG - Executing statement 22/27: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_products_stock_check`;...
2025-09-02 15:52:06,629 - DEBUG - Executing statement 23/27: CREATE DEFINER=`sstuser`@`%` TRIGGER tr_products_stock_check
BEFORE UPDATE ON products
FOR EACH ROW
...
2025-09-02 15:52:06,632 - DEBUG - Executing statement 24/27: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_orders_update_timestamp`;...
2025-09-02 15:52:06,633 - DEBUG - Executing statement 25/27: CREATE DEFINER=`sstuser`@`%` TRIGGER tr_orders_update_timestamp
BEFORE UPDATE ON orders
FOR EACH ROW...
2025-09-02 15:52:06,636 - DEBUG - Executing statement 26/27: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_customers_loyalty_update`;...
2025-09-02 15:52:06,637 - DEBUG - Executing statement 27/27: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 15:52:06,637 - INFO - ✅ SQL file executed: 25 statements succeeded, 2 failed
2025-09-02 15:52:06,638 - INFO - 🔍 Checking if schemas are identical after migration...
2025-09-02 15:52:06,638 - INFO - 🔍 Running comparison step: Post-migration schema check
2025-09-02 15:52:06,638 - INFO - Running in compare mode...
2025-09-02 15:52:06,639 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 15:52:06,639 - INFO - Connecting to databases...
2025-09-02 15:52:06,640 - INFO - Database connections successful
2025-09-02 15:52:06,641 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_post_migration, stdin=None, shell=False, universal_newlines=False)
2025-09-02 15:52:06,643 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 15:52:06,644 - INFO - Initialized new git repository at test_output_post_migration
2025-09-02 15:52:06,644 - DEBUG - Created directory: test_output_post_migration/tables
2025-09-02 15:52:06,644 - DEBUG - Created directory: test_output_post_migration/functions
2025-09-02 15:52:06,644 - DEBUG - Created directory: test_output_post_migration/procedures
2025-09-02 15:52:06,644 - DEBUG - Created directory: test_output_post_migration/triggers
2025-09-02 15:52:06,644 - DEBUG - Created directory: test_output_post_migration/events
2025-09-02 15:52:06,644 - INFO - Initialized git repository at ./test_output_post_migration
2025-09-02 15:52:06,644 - INFO - Extracting DDL objects...
2025-09-02 15:52:06,651 - INFO - Comparing schemas...
2025-09-02 15:52:06,651 - INFO - Performing safety analysis...
2025-09-02 15:52:06,651 - INFO - Generating migration SQL...
2025-09-02 15:52:06,684 - INFO - Generating schema visualizations...
2025-09-02 15:52:06,686 - INFO - Generated HTML documentation
2025-09-02 15:52:06,687 - INFO - Generated Mermaid ERD
2025-09-02 15:52:06,687 - INFO - Generated Graphviz DOT file
2025-09-02 15:52:06,687 - INFO - Generated JSON schema structure
2025-09-02 15:52:06,687 - INFO - Schema visualizations generated in test_output_post_migration/documentation
2025-09-02 15:52:06,688 - INFO - Migration report generated: test_output_post_migration/migration_report.md
2025-09-02 15:52:06,694 - INFO - Started tracking migration 212: ddl_test_source_to_ddl_test_dest_1756821126
2025-09-02 15:52:06,698 - INFO - Completed migration tracking 212: SUCCESS
2025-09-02 15:52:06,698 - INFO - Migration tracking completed: 212
2025-09-02 15:52:06,698 - INFO - Migration completed successfully!
2025-09-02 15:52:06,698 - INFO - Migration ID: 212
2025-09-02 15:52:06,698 - INFO - Operations: 0
2025-09-02 15:52:06,698 - INFO - Safety warnings: 0
2025-09-02 15:52:06,698 - INFO - Migration file: test_output_post_migration/migration.sql
2025-09-02 15:52:06,698 - INFO - Rollback file: test_output_post_migration/rollback.sql
2025-09-02 15:52:06,698 - INFO - Migration report: test_output_post_migration/migration_report.md
2025-09-02 15:52:06,698 - INFO - ✅ Post-migration schema check completed successfully
2025-09-02 15:52:06,698 - INFO - ✅ Schemas are identical after migration!
2025-09-02 15:52:06,698 - INFO - 🔧 Executing SQL file: ./test_output/rollback.sql
2025-09-02 15:52:06,699 - DEBUG - Executing statement 1/25: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 15:52:06,699 - DEBUG - Executing statement 2/25: CREATE TABLE `temp_table` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`temp_data` varchar(255) DEFAULT N...
2025-09-02 15:52:06,702 - DEBUG - Executing statement 3/25: ALTER TABLE `categories` DROP COLUMN `description`;...
2025-09-02 15:52:06,707 - DEBUG - Executing statement 4/25: ALTER TABLE `categories` DROP INDEX `idx_categories_created`;...
2025-09-02 15:52:06,712 - DEBUG - Executing statement 5/25: ALTER TABLE `orders` DROP FOREIGN KEY `fk_orders_customer`;...
2025-09-02 15:52:06,716 - DEBUG - Executing statement 6/25: ALTER TABLE `customers` ADD COLUMN `loyalty_points` int(11) DEFAULT 0;...
2025-09-02 15:52:06,721 - DEBUG - Executing statement 7/25: ALTER TABLE `customers` DROP INDEX `idx_customers_country`;...
2025-09-02 15:52:06,725 - DEBUG - Executing statement 8/25: ALTER TABLE `customers` DROP INDEX `idx_customers_city`;...
2025-09-02 15:52:06,730 - DEBUG - Executing statement 9/25: ALTER TABLE `customers` ADD KEY `idx_customers_loyalty` (`loyalty_points`);...
2025-09-02 15:52:06,736 - DEBUG - Executing statement 10/25: ALTER TABLE `products` DROP COLUMN `dimensions`;...
2025-09-02 15:52:06,742 - DEBUG - Executing statement 11/25: ALTER TABLE `products` DROP COLUMN `weight`;...
2025-09-02 15:52:06,747 - DEBUG - Executing statement 12/25: ALTER TABLE `products` ADD COLUMN `old_column` varchar(50) DEFAULT NULL;...
2025-09-02 15:52:06,753 - DEBUG - Executing statement 13/25: ALTER TABLE `products` DROP INDEX `fk_products_category`;...
2025-09-02 15:52:06,757 - DEBUG - Executing statement 14/25: ALTER TABLE `products` DROP INDEX `idx_products_active`;...
2025-09-02 15:52:06,762 - DEBUG - Executing statement 15/25: ALTER TABLE `products` DROP INDEX `idx_products_price`;...
2025-09-02 15:52:06,767 - DEBUG - Executing statement 16/25: ALTER TABLE `products` DROP INDEX `idx_products_sku`;...
2025-09-02 15:52:06,771 - DEBUG - Executing statement 17/25: ALTER TABLE `products` DROP INDEX `idx_products_stock`;...
2025-09-02 15:52:06,776 - DEBUG - Executing statement 18/25: ALTER TABLE `products` ADD KEY `idx_products_old` (`old_column`);...
2025-09-02 15:52:06,782 - DEBUG - Executing statement 19/25: ALTER TABLE `products` DROP FOREIGN KEY `fk_products_category`;...
2025-09-02 15:52:06,787 - DEBUG - Executing statement 20/25: DROP PROCEDURE IF EXISTS `GetCustomerOrders`;...
2025-09-02 15:52:06,788 - DEBUG - Executing statement 21/25: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*
FROM...
2025-09-02 15:52:06,790 - DEBUG - Executing statement 22/25: DROP TRIGGER IF EXISTS `tr_products_stock_check`;...
2025-09-02 15:52:06,791 - DEBUG - Executing statement 23/25: DROP TRIGGER IF EXISTS `tr_orders_update_timestamp`;...
2025-09-02 15:52:06,793 - DEBUG - Executing statement 24/25: CREATE DEFINER=`sstuser`@`%` TRIGGER tr_customers_loyalty_update
BEFORE UPDATE ON customers
FOR EACH...
2025-09-02 15:52:06,796 - DEBUG - Executing statement 25/25: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 15:52:06,796 - INFO - ✅ SQL file executed: 25 statements succeeded, 0 failed
2025-09-02 15:52:06,796 - INFO - 🔍 Running comparison step: Final comparison after rollback
2025-09-02 15:52:06,797 - INFO - Running in compare mode...
2025-09-02 15:52:06,798 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 15:52:06,798 - INFO - Connecting to databases...
2025-09-02 15:52:06,799 - INFO - Database connections successful
2025-09-02 15:52:06,799 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_final, stdin=None, shell=False, universal_newlines=False)
2025-09-02 15:52:06,802 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 15:52:06,802 - INFO - Initialized new git repository at test_output_final
2025-09-02 15:52:06,803 - DEBUG - Created directory: test_output_final/tables
2025-09-02 15:52:06,803 - DEBUG - Created directory: test_output_final/functions
2025-09-02 15:52:06,803 - DEBUG - Created directory: test_output_final/procedures
2025-09-02 15:52:06,803 - DEBUG - Created directory: test_output_final/triggers
2025-09-02 15:52:06,803 - DEBUG - Created directory: test_output_final/events
2025-09-02 15:52:06,803 - INFO - Initialized git repository at ./test_output_final
2025-09-02 15:52:06,803 - INFO - Extracting DDL objects...
2025-09-02 15:52:06,810 - INFO - Comparing schemas...
2025-09-02 15:52:06,810 - INFO - Performing safety analysis...
2025-09-02 15:52:06,810 - INFO - Generating migration SQL...
2025-09-02 15:52:06,841 - INFO - Generating schema visualizations...
2025-09-02 15:52:06,844 - INFO - Generated HTML documentation
2025-09-02 15:52:06,844 - INFO - Generated Mermaid ERD
2025-09-02 15:52:06,844 - INFO - Generated Graphviz DOT file
2025-09-02 15:52:06,845 - INFO - Generated JSON schema structure
2025-09-02 15:52:06,845 - INFO - Schema visualizations generated in test_output_final/documentation
2025-09-02 15:52:06,845 - INFO - Migration report generated: test_output_final/migration_report.md
2025-09-02 15:52:06,865 - INFO - Started tracking migration 213: ddl_test_source_to_ddl_test_dest_1756821126
2025-09-02 15:52:06,884 - INFO - Completed migration tracking 213: SUCCESS
2025-09-02 15:52:06,884 - INFO - Migration tracking completed: 213
2025-09-02 15:52:06,884 - INFO - Migration completed successfully!
2025-09-02 15:52:06,884 - INFO - Migration ID: 213
2025-09-02 15:52:06,884 - INFO - Operations: 6
2025-09-02 15:52:06,884 - INFO - Safety warnings: 0
2025-09-02 15:52:06,884 - INFO - Migration file: test_output_final/migration.sql
2025-09-02 15:52:06,884 - INFO - Rollback file: test_output_final/rollback.sql
2025-09-02 15:52:06,884 - INFO - Migration report: test_output_final/migration_report.md
2025-09-02 15:52:06,884 - INFO - ✅ Final comparison after rollback completed successfully
2025-09-02 15:52:06,884 - INFO - 🔍 Analyzing results in ./test_output_final...
2025-09-02 15:52:06,885 - INFO - 🔄 Comparing initial and final results...
2025-09-02 15:52:06,885 - INFO - ✅ Rollback test passed - initial and final states match!
2025-09-02 15:52:06,885 - INFO - 💾 Saving test data for reference...
2025-09-02 15:52:06,888 - INFO - ✅ Saved ./test_output to test_data/ddlw-test-20250902_155206/ddl-wizard-testsuite-initial-migration-20250902_155206
2025-09-02 15:52:06,891 - INFO - ✅ Saved ./test_output to test_data/ddlw-test-20250902_155206/test_output
2025-09-02 15:52:06,895 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddlw-test-20250902_155206/ddl-wizard-testsuite-post-migration-verification-20250902_155206
2025-09-02 15:52:06,899 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddlw-test-20250902_155206/test_output_post_migration
2025-09-02 15:52:06,903 - INFO - ✅ Saved ./test_output_final to test_data/ddlw-test-20250902_155206/ddl-wizard-testsuite-rollback-verification-20250902_155206
2025-09-02 15:52:06,906 - INFO - ✅ Saved ./test_output_final to test_data/ddlw-test-20250902_155206/test_output_final
2025-09-02 15:52:06,906 - INFO - ✅ Saved test log to test_data/ddlw-test-20250902_155206
2025-09-02 15:52:06,908 - INFO - 🧹 Cleaned up temporary directory: ./test_output
2025-09-02 15:52:06,909 - INFO - 🧹 Cleaned up temporary directory: ./test_output_post_migration
2025-09-02 15:52:06,910 - INFO - 🧹 Cleaned up temporary directory: ./test_output_final
2025-09-02 15:52:06,911 - INFO - 🧹 Cleaning up test databases...
2025-09-02 15:52:06,911 - INFO - ✅ Cleaned up database: ddl_test_source
2025-09-02 15:52:06,912 - INFO - ✅ Cleaned up database: ddl_test_dest
2025-09-02 15:55:29,065 - INFO - 🏗️  Setting up source database...
2025-09-02 15:55:29,125 - INFO - ✅ Source database setup completed
2025-09-02 15:55:29,125 - INFO - 🏗️  Setting up destination database with differences...
2025-09-02 15:55:29,176 - INFO - ✅ Destination database setup completed
2025-09-02 15:55:29,177 - INFO - 📝 Populating test data...
2025-09-02 15:55:29,179 - INFO - ✅ Test data populated in ddl_test_source
2025-09-02 15:55:29,181 - INFO - ✅ Test data populated in ddl_test_dest
2025-09-02 15:55:29,181 - INFO - 🔍 Running comparison step: Initial comparison
2025-09-02 15:55:29,182 - INFO - Running in compare mode...
2025-09-02 15:55:29,182 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 15:55:29,182 - INFO - Connecting to databases...
2025-09-02 15:55:29,183 - INFO - Database connections successful
2025-09-02 15:55:29,183 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output, stdin=None, shell=False, universal_newlines=False)
2025-09-02 15:55:29,185 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 15:55:29,186 - INFO - Initialized new git repository at test_output
2025-09-02 15:55:29,186 - DEBUG - Created directory: test_output/tables
2025-09-02 15:55:29,186 - DEBUG - Created directory: test_output/functions
2025-09-02 15:55:29,186 - DEBUG - Created directory: test_output/procedures
2025-09-02 15:55:29,186 - DEBUG - Created directory: test_output/triggers
2025-09-02 15:55:29,186 - DEBUG - Created directory: test_output/events
2025-09-02 15:55:29,186 - INFO - Initialized git repository at ./test_output
2025-09-02 15:55:29,186 - INFO - Extracting DDL objects...
2025-09-02 15:55:29,197 - DEBUG - Saving source DDL objects to files...
2025-09-02 15:55:29,197 - INFO - Processing 5 tables...
2025-09-02 15:55:29,197 - DEBUG - Saved tables DDL: test_output/tables/categories.sql
2025-09-02 15:55:29,198 - DEBUG - Saved tables DDL: test_output/tables/customers.sql
2025-09-02 15:55:29,199 - DEBUG - Saved tables DDL: test_output/tables/order_items.sql
2025-09-02 15:55:29,199 - DEBUG - Saved tables DDL: test_output/tables/orders.sql
2025-09-02 15:55:29,200 - DEBUG - Saved tables DDL: test_output/tables/products.sql
2025-09-02 15:55:29,200 - INFO - Processing 1 procedures...
2025-09-02 15:55:29,201 - DEBUG - Saved procedures DDL: test_output/procedures/GetCustomerOrders.sql
2025-09-02 15:55:29,201 - INFO - Processing 1 functions...
2025-09-02 15:55:29,202 - DEBUG - Saved functions DDL: test_output/functions/CalculateOrderTotal.sql
2025-09-02 15:55:29,203 - INFO - Processing 2 triggers...
2025-09-02 15:55:29,203 - DEBUG - Saved triggers DDL: test_output/triggers/tr_orders_update_timestamp.sql
2025-09-02 15:55:29,204 - DEBUG - Saved triggers DDL: test_output/triggers/tr_products_stock_check.sql
2025-09-02 15:55:29,204 - INFO - Processing 0 events...
2025-09-02 15:55:29,204 - DEBUG - Saving destination DDL objects to files...
2025-09-02 15:55:29,205 - INFO - Comparing schemas...
2025-09-02 15:55:29,205 - INFO - Performing safety analysis...
2025-09-02 15:55:29,205 - INFO - Generating migration SQL...
2025-09-02 15:55:29,236 - INFO - Generating schema visualizations...
2025-09-02 15:55:29,239 - INFO - Generated HTML documentation
2025-09-02 15:55:29,239 - INFO - Generated Mermaid ERD
2025-09-02 15:55:29,239 - INFO - Generated Graphviz DOT file
2025-09-02 15:55:29,240 - INFO - Generated JSON schema structure
2025-09-02 15:55:29,240 - INFO - Schema visualizations generated in test_output/documentation
2025-09-02 15:55:29,240 - INFO - Migration report generated: test_output/migration_report.md
2025-09-02 15:55:29,246 - INFO - Started tracking migration 214: ddl_test_source_to_ddl_test_dest_1756821329
2025-09-02 15:55:29,249 - INFO - Completed migration tracking 214: SUCCESS
2025-09-02 15:55:29,249 - INFO - Migration tracking completed: 214
2025-09-02 15:55:29,249 - INFO - Migration completed successfully!
2025-09-02 15:55:29,249 - INFO - Migration ID: 214
2025-09-02 15:55:29,249 - INFO - Operations: 6
2025-09-02 15:55:29,249 - INFO - Safety warnings: 0
2025-09-02 15:55:29,249 - INFO - Migration file: test_output/migration.sql
2025-09-02 15:55:29,249 - INFO - Rollback file: test_output/rollback.sql
2025-09-02 15:55:29,249 - INFO - Migration report: test_output/migration_report.md
2025-09-02 15:55:29,249 - INFO - ✅ Initial comparison completed successfully
2025-09-02 15:55:29,249 - INFO - 🔍 Analyzing results in ./test_output...
2025-09-02 15:55:29,250 - INFO - 🔧 Executing SQL file: ./test_output/migration.sql
2025-09-02 15:55:29,250 - DEBUG - Executing statement 1/27: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 15:55:29,250 - DEBUG - Executing statement 2/27: DROP TABLE IF EXISTS `ddl_test_dest`.`temp_table`;...
2025-09-02 15:55:29,253 - DEBUG - Executing statement 3/27: ALTER TABLE `products` ADD COLUMN `dimensions` varchar(100) DEFAULT NULL;...
2025-09-02 15:55:29,258 - DEBUG - Executing statement 4/27: ALTER TABLE `products` ADD COLUMN `weight` decimal(8,3) DEFAULT NULL;...
2025-09-02 15:55:29,262 - DEBUG - Executing statement 5/27: ALTER TABLE `products` DROP COLUMN `old_column`;...
2025-09-02 15:55:29,267 - DEBUG - Executing statement 6/27: ALTER TABLE `products` ADD KEY `idx_products_price` (`price`);...
2025-09-02 15:55:29,273 - DEBUG - Executing statement 7/27: ALTER TABLE `products` ADD KEY `idx_products_stock` (`stock_quantity`);...
2025-09-02 15:55:29,280 - DEBUG - Executing statement 8/27: ALTER TABLE `products` ADD KEY `fk_products_category` (`category_id`);...
2025-09-02 15:55:29,285 - DEBUG - Executing statement 9/27: ALTER TABLE `products` ADD KEY `idx_products_sku` (`sku`);...
2025-09-02 15:55:29,291 - DEBUG - Executing statement 10/27: ALTER TABLE `products` ADD KEY `idx_products_active` (`is_active`);...
2025-09-02 15:55:29,297 - DEBUG - Executing statement 11/27: ALTER TABLE `products` DROP INDEX `idx_products_old`;...
2025-09-02 15:55:29,297 - WARNING - ⚠️  SQL execution warning (statement 11): (1091, "Can't DROP INDEX `idx_products_old`; check that it exists")
2025-09-02 15:55:29,297 - WARNING - Statement: ALTER TABLE `products` DROP INDEX `idx_products_old`;
2025-09-02 15:55:29,297 - DEBUG - Executing statement 12/27: ALTER TABLE `products` ADD CONSTRAINT `fk_products_category` FOREIGN KEY (`category_id`) REFERENCES ...
2025-09-02 15:55:29,302 - DEBUG - Executing statement 13/27: ALTER TABLE `customers` DROP COLUMN `loyalty_points`;...
2025-09-02 15:55:29,308 - DEBUG - Executing statement 14/27: ALTER TABLE `customers` ADD KEY `idx_customers_city` (`city`);...
2025-09-02 15:55:29,315 - DEBUG - Executing statement 15/27: ALTER TABLE `customers` ADD KEY `idx_customers_country` (`country`);...
2025-09-02 15:55:29,321 - DEBUG - Executing statement 16/27: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;...
2025-09-02 15:55:29,321 - WARNING - ⚠️  SQL execution warning (statement 16): (1091, "Can't DROP INDEX `idx_customers_loyalty`; check that it exists")
2025-09-02 15:55:29,321 - WARNING - Statement: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;
2025-09-02 15:55:29,321 - DEBUG - Executing statement 17/27: ALTER TABLE `categories` ADD COLUMN `description` text DEFAULT NULL;...
2025-09-02 15:55:29,326 - DEBUG - Executing statement 18/27: ALTER TABLE `categories` ADD KEY `idx_categories_created` (`created_at`);...
2025-09-02 15:55:29,332 - DEBUG - Executing statement 19/27: ALTER TABLE `orders` ADD CONSTRAINT `fk_orders_customer` FOREIGN KEY (`customer_id`) REFERENCES `cus...
2025-09-02 15:55:29,337 - DEBUG - Executing statement 20/27: DROP PROCEDURE IF EXISTS `ddl_test_dest`.`GetCustomerOrders`;...
2025-09-02 15:55:29,339 - DEBUG - Executing statement 21/27: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*, COU...
2025-09-02 15:55:29,341 - DEBUG - Executing statement 22/27: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_products_stock_check`;...
2025-09-02 15:55:29,341 - DEBUG - Executing statement 23/27: CREATE DEFINER=`sstuser`@`%` TRIGGER tr_products_stock_check
BEFORE UPDATE ON products
FOR EACH ROW
...
2025-09-02 15:55:29,344 - DEBUG - Executing statement 24/27: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_orders_update_timestamp`;...
2025-09-02 15:55:29,344 - DEBUG - Executing statement 25/27: CREATE DEFINER=`sstuser`@`%` TRIGGER tr_orders_update_timestamp
BEFORE UPDATE ON orders
FOR EACH ROW...
2025-09-02 15:55:29,347 - DEBUG - Executing statement 26/27: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_customers_loyalty_update`;...
2025-09-02 15:55:29,348 - DEBUG - Executing statement 27/27: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 15:55:29,348 - INFO - ✅ SQL file executed: 25 statements succeeded, 2 failed
2025-09-02 15:55:29,348 - INFO - 🔍 Checking if schemas are identical after migration...
2025-09-02 15:55:29,348 - INFO - 🔍 Running comparison step: Post-migration schema check
2025-09-02 15:55:29,349 - INFO - Running in compare mode...
2025-09-02 15:55:29,349 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 15:55:29,349 - INFO - Connecting to databases...
2025-09-02 15:55:29,350 - INFO - Database connections successful
2025-09-02 15:55:29,351 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_post_migration, stdin=None, shell=False, universal_newlines=False)
2025-09-02 15:55:29,353 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 15:55:29,353 - INFO - Initialized new git repository at test_output_post_migration
2025-09-02 15:55:29,353 - DEBUG - Created directory: test_output_post_migration/tables
2025-09-02 15:55:29,353 - DEBUG - Created directory: test_output_post_migration/functions
2025-09-02 15:55:29,354 - DEBUG - Created directory: test_output_post_migration/procedures
2025-09-02 15:55:29,354 - DEBUG - Created directory: test_output_post_migration/triggers
2025-09-02 15:55:29,354 - DEBUG - Created directory: test_output_post_migration/events
2025-09-02 15:55:29,354 - INFO - Initialized git repository at ./test_output_post_migration
2025-09-02 15:55:29,354 - INFO - Extracting DDL objects...
2025-09-02 15:55:29,360 - DEBUG - Saving source DDL objects to files...
2025-09-02 15:55:29,360 - INFO - Processing 5 tables...
2025-09-02 15:55:29,361 - DEBUG - Saved tables DDL: test_output_post_migration/tables/categories.sql
2025-09-02 15:55:29,361 - DEBUG - Saved tables DDL: test_output_post_migration/tables/customers.sql
2025-09-02 15:55:29,362 - DEBUG - Saved tables DDL: test_output_post_migration/tables/order_items.sql
2025-09-02 15:55:29,362 - DEBUG - Saved tables DDL: test_output_post_migration/tables/orders.sql
2025-09-02 15:55:29,363 - DEBUG - Saved tables DDL: test_output_post_migration/tables/products.sql
2025-09-02 15:55:29,363 - INFO - Processing 1 procedures...
2025-09-02 15:55:29,364 - DEBUG - Saved procedures DDL: test_output_post_migration/procedures/GetCustomerOrders.sql
2025-09-02 15:55:29,364 - INFO - Processing 1 functions...
2025-09-02 15:55:29,364 - DEBUG - Saved functions DDL: test_output_post_migration/functions/CalculateOrderTotal.sql
2025-09-02 15:55:29,364 - INFO - Processing 2 triggers...
2025-09-02 15:55:29,365 - DEBUG - Saved triggers DDL: test_output_post_migration/triggers/tr_orders_update_timestamp.sql
2025-09-02 15:55:29,366 - DEBUG - Saved triggers DDL: test_output_post_migration/triggers/tr_products_stock_check.sql
2025-09-02 15:55:29,366 - INFO - Processing 0 events...
2025-09-02 15:55:29,366 - DEBUG - Saving destination DDL objects to files...
2025-09-02 15:55:29,366 - INFO - Comparing schemas...
2025-09-02 15:55:29,366 - INFO - Performing safety analysis...
2025-09-02 15:55:29,366 - INFO - Generating migration SQL...
2025-09-02 15:55:29,396 - INFO - Generating schema visualizations...
2025-09-02 15:55:29,399 - INFO - Generated HTML documentation
2025-09-02 15:55:29,399 - INFO - Generated Mermaid ERD
2025-09-02 15:55:29,399 - INFO - Generated Graphviz DOT file
2025-09-02 15:55:29,400 - INFO - Generated JSON schema structure
2025-09-02 15:55:29,400 - INFO - Schema visualizations generated in test_output_post_migration/documentation
2025-09-02 15:55:29,400 - INFO - Migration report generated: test_output_post_migration/migration_report.md
2025-09-02 15:55:29,406 - INFO - Started tracking migration 215: ddl_test_source_to_ddl_test_dest_1756821329
2025-09-02 15:55:29,410 - INFO - Completed migration tracking 215: SUCCESS
2025-09-02 15:55:29,410 - INFO - Migration tracking completed: 215
2025-09-02 15:55:29,410 - INFO - Migration completed successfully!
2025-09-02 15:55:29,411 - INFO - Migration ID: 215
2025-09-02 15:55:29,411 - INFO - Operations: 0
2025-09-02 15:55:29,411 - INFO - Safety warnings: 0
2025-09-02 15:55:29,411 - INFO - Migration file: test_output_post_migration/migration.sql
2025-09-02 15:55:29,411 - INFO - Rollback file: test_output_post_migration/rollback.sql
2025-09-02 15:55:29,411 - INFO - Migration report: test_output_post_migration/migration_report.md
2025-09-02 15:55:29,411 - INFO - ✅ Post-migration schema check completed successfully
2025-09-02 15:55:29,411 - INFO - ✅ Schemas are identical after migration!
2025-09-02 15:55:29,411 - INFO - 🔧 Executing SQL file: ./test_output/rollback.sql
2025-09-02 15:55:29,412 - DEBUG - Executing statement 1/25: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 15:55:29,412 - DEBUG - Executing statement 2/25: CREATE TABLE `temp_table` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`temp_data` varchar(255) DEFAULT N...
2025-09-02 15:55:29,414 - DEBUG - Executing statement 3/25: ALTER TABLE `products` DROP COLUMN `dimensions`;...
2025-09-02 15:55:29,419 - DEBUG - Executing statement 4/25: ALTER TABLE `products` DROP COLUMN `weight`;...
2025-09-02 15:55:29,424 - DEBUG - Executing statement 5/25: ALTER TABLE `products` ADD COLUMN `old_column` varchar(50) DEFAULT NULL;...
2025-09-02 15:55:29,429 - DEBUG - Executing statement 6/25: ALTER TABLE `products` DROP INDEX `idx_products_price`;...
2025-09-02 15:55:29,434 - DEBUG - Executing statement 7/25: ALTER TABLE `products` DROP INDEX `idx_products_stock`;...
2025-09-02 15:55:29,439 - DEBUG - Executing statement 8/25: ALTER TABLE `products` DROP INDEX `fk_products_category`;...
2025-09-02 15:55:29,444 - DEBUG - Executing statement 9/25: ALTER TABLE `products` DROP INDEX `idx_products_sku`;...
2025-09-02 15:55:29,448 - DEBUG - Executing statement 10/25: ALTER TABLE `products` DROP INDEX `idx_products_active`;...
2025-09-02 15:55:29,452 - DEBUG - Executing statement 11/25: ALTER TABLE `products` ADD KEY `idx_products_old` (`old_column`);...
2025-09-02 15:55:29,457 - DEBUG - Executing statement 12/25: ALTER TABLE `products` DROP FOREIGN KEY `fk_products_category`;...
2025-09-02 15:55:29,461 - DEBUG - Executing statement 13/25: ALTER TABLE `customers` ADD COLUMN `loyalty_points` int(11) DEFAULT 0;...
2025-09-02 15:55:29,466 - DEBUG - Executing statement 14/25: ALTER TABLE `customers` DROP INDEX `idx_customers_city`;...
2025-09-02 15:55:29,471 - DEBUG - Executing statement 15/25: ALTER TABLE `customers` DROP INDEX `idx_customers_country`;...
2025-09-02 15:55:29,476 - DEBUG - Executing statement 16/25: ALTER TABLE `customers` ADD KEY `idx_customers_loyalty` (`loyalty_points`);...
2025-09-02 15:55:29,481 - DEBUG - Executing statement 17/25: ALTER TABLE `categories` DROP COLUMN `description`;...
2025-09-02 15:55:29,486 - DEBUG - Executing statement 18/25: ALTER TABLE `categories` DROP INDEX `idx_categories_created`;...
2025-09-02 15:55:29,490 - DEBUG - Executing statement 19/25: ALTER TABLE `orders` DROP FOREIGN KEY `fk_orders_customer`;...
2025-09-02 15:55:29,495 - DEBUG - Executing statement 20/25: DROP PROCEDURE IF EXISTS `GetCustomerOrders`;...
2025-09-02 15:55:29,496 - DEBUG - Executing statement 21/25: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*
FROM...
2025-09-02 15:55:29,498 - DEBUG - Executing statement 22/25: DROP TRIGGER IF EXISTS `tr_products_stock_check`;...
2025-09-02 15:55:29,499 - DEBUG - Executing statement 23/25: DROP TRIGGER IF EXISTS `tr_orders_update_timestamp`;...
2025-09-02 15:55:29,501 - DEBUG - Executing statement 24/25: CREATE DEFINER=`sstuser`@`%` TRIGGER tr_customers_loyalty_update
BEFORE UPDATE ON customers
FOR EACH...
2025-09-02 15:55:29,504 - DEBUG - Executing statement 25/25: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 15:55:29,504 - INFO - ✅ SQL file executed: 25 statements succeeded, 0 failed
2025-09-02 15:55:29,504 - INFO - 🔍 Running comparison step: Final comparison after rollback
2025-09-02 15:55:29,505 - INFO - Running in compare mode...
2025-09-02 15:55:29,506 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 15:55:29,506 - INFO - Connecting to databases...
2025-09-02 15:55:29,507 - INFO - Database connections successful
2025-09-02 15:55:29,507 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_final, stdin=None, shell=False, universal_newlines=False)
2025-09-02 15:55:29,510 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 15:55:29,510 - INFO - Initialized new git repository at test_output_final
2025-09-02 15:55:29,510 - DEBUG - Created directory: test_output_final/tables
2025-09-02 15:55:29,510 - DEBUG - Created directory: test_output_final/functions
2025-09-02 15:55:29,510 - DEBUG - Created directory: test_output_final/procedures
2025-09-02 15:55:29,510 - DEBUG - Created directory: test_output_final/triggers
2025-09-02 15:55:29,510 - DEBUG - Created directory: test_output_final/events
2025-09-02 15:55:29,511 - INFO - Initialized git repository at ./test_output_final
2025-09-02 15:55:29,511 - INFO - Extracting DDL objects...
2025-09-02 15:55:29,516 - DEBUG - Saving source DDL objects to files...
2025-09-02 15:55:29,516 - INFO - Processing 5 tables...
2025-09-02 15:55:29,517 - DEBUG - Saved tables DDL: test_output_final/tables/categories.sql
2025-09-02 15:55:29,517 - DEBUG - Saved tables DDL: test_output_final/tables/customers.sql
2025-09-02 15:55:29,518 - DEBUG - Saved tables DDL: test_output_final/tables/order_items.sql
2025-09-02 15:55:29,518 - DEBUG - Saved tables DDL: test_output_final/tables/orders.sql
2025-09-02 15:55:29,519 - DEBUG - Saved tables DDL: test_output_final/tables/products.sql
2025-09-02 15:55:29,519 - INFO - Processing 1 procedures...
2025-09-02 15:55:29,519 - DEBUG - Saved procedures DDL: test_output_final/procedures/GetCustomerOrders.sql
2025-09-02 15:55:29,519 - INFO - Processing 1 functions...
2025-09-02 15:55:29,520 - DEBUG - Saved functions DDL: test_output_final/functions/CalculateOrderTotal.sql
2025-09-02 15:55:29,520 - INFO - Processing 2 triggers...
2025-09-02 15:55:29,521 - DEBUG - Saved triggers DDL: test_output_final/triggers/tr_orders_update_timestamp.sql
2025-09-02 15:55:29,521 - DEBUG - Saved triggers DDL: test_output_final/triggers/tr_products_stock_check.sql
2025-09-02 15:55:29,521 - INFO - Processing 0 events...
2025-09-02 15:55:29,522 - DEBUG - Saving destination DDL objects to files...
2025-09-02 15:55:29,522 - INFO - Comparing schemas...
2025-09-02 15:55:29,522 - INFO - Performing safety analysis...
2025-09-02 15:55:29,522 - INFO - Generating migration SQL...
2025-09-02 15:55:29,551 - INFO - Generating schema visualizations...
2025-09-02 15:55:29,553 - INFO - Generated HTML documentation
2025-09-02 15:55:29,553 - INFO - Generated Mermaid ERD
2025-09-02 15:55:29,553 - INFO - Generated Graphviz DOT file
2025-09-02 15:55:29,554 - INFO - Generated JSON schema structure
2025-09-02 15:55:29,554 - INFO - Schema visualizations generated in test_output_final/documentation
2025-09-02 15:55:29,555 - INFO - Migration report generated: test_output_final/migration_report.md
2025-09-02 15:55:29,560 - INFO - Started tracking migration 216: ddl_test_source_to_ddl_test_dest_1756821329
2025-09-02 15:55:29,564 - INFO - Completed migration tracking 216: SUCCESS
2025-09-02 15:55:29,564 - INFO - Migration tracking completed: 216
2025-09-02 15:55:29,564 - INFO - Migration completed successfully!
2025-09-02 15:55:29,564 - INFO - Migration ID: 216
2025-09-02 15:55:29,564 - INFO - Operations: 6
2025-09-02 15:55:29,564 - INFO - Safety warnings: 0
2025-09-02 15:55:29,564 - INFO - Migration file: test_output_final/migration.sql
2025-09-02 15:55:29,564 - INFO - Rollback file: test_output_final/rollback.sql
2025-09-02 15:55:29,565 - INFO - Migration report: test_output_final/migration_report.md
2025-09-02 15:55:29,565 - INFO - ✅ Final comparison after rollback completed successfully
2025-09-02 15:55:29,565 - INFO - 🔍 Analyzing results in ./test_output_final...
2025-09-02 15:55:29,565 - INFO - 🔄 Comparing initial and final results...
2025-09-02 15:55:29,565 - INFO - ✅ Rollback test passed - initial and final states match!
2025-09-02 15:55:29,565 - INFO - 💾 Saving test data for reference...
2025-09-02 15:55:29,569 - INFO - ✅ Saved ./test_output to test_data/ddlw-test-20250902_155529/ddl-wizard-testsuite-initial-migration-20250902_155529
2025-09-02 15:55:29,574 - INFO - ✅ Saved ./test_output to test_data/ddlw-test-20250902_155529/test_output
2025-09-02 15:55:29,578 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddlw-test-20250902_155529/ddl-wizard-testsuite-post-migration-verification-20250902_155529
2025-09-02 15:55:29,582 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddlw-test-20250902_155529/test_output_post_migration
2025-09-02 15:55:29,586 - INFO - ✅ Saved ./test_output_final to test_data/ddlw-test-20250902_155529/ddl-wizard-testsuite-rollback-verification-20250902_155529
2025-09-02 15:55:29,590 - INFO - ✅ Saved ./test_output_final to test_data/ddlw-test-20250902_155529/test_output_final
2025-09-02 15:55:29,591 - INFO - ✅ Saved test log to test_data/ddlw-test-20250902_155529
2025-09-02 15:55:29,592 - INFO - 🧹 Cleaned up temporary directory: ./test_output
2025-09-02 15:55:29,594 - INFO - 🧹 Cleaned up temporary directory: ./test_output_post_migration
2025-09-02 15:55:29,595 - INFO - 🧹 Cleaned up temporary directory: ./test_output_final
2025-09-02 15:55:29,595 - INFO - 🧹 Cleaning up test databases...
2025-09-02 15:55:29,596 - INFO - ✅ Cleaned up database: ddl_test_source
2025-09-02 15:55:29,596 - INFO - ✅ Cleaned up database: ddl_test_dest
2025-09-02 15:56:49,293 - INFO - 🏗️  Setting up source database...
2025-09-02 15:56:49,360 - INFO - ✅ Source database setup completed
2025-09-02 15:56:49,360 - INFO - 🏗️  Setting up destination database with differences...
2025-09-02 15:56:49,413 - INFO - ✅ Destination database setup completed
2025-09-02 15:56:49,414 - INFO - 📝 Populating test data...
2025-09-02 15:56:49,416 - INFO - ✅ Test data populated in ddl_test_source
2025-09-02 15:56:49,419 - INFO - ✅ Test data populated in ddl_test_dest
2025-09-02 15:56:49,419 - INFO - 🔍 Running comparison step: Initial comparison
2025-09-02 15:56:49,420 - INFO - Running in compare mode...
2025-09-02 15:56:49,420 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 15:56:49,420 - INFO - Connecting to databases...
2025-09-02 15:56:49,421 - INFO - Database connections successful
2025-09-02 15:56:49,422 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output, stdin=None, shell=False, universal_newlines=False)
2025-09-02 15:56:49,425 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 15:56:49,425 - INFO - Initialized new git repository at test_output
2025-09-02 15:56:49,425 - DEBUG - Created directory: test_output/tables
2025-09-02 15:56:49,425 - DEBUG - Created directory: test_output/functions
2025-09-02 15:56:49,425 - DEBUG - Created directory: test_output/procedures
2025-09-02 15:56:49,426 - DEBUG - Created directory: test_output/triggers
2025-09-02 15:56:49,426 - DEBUG - Created directory: test_output/events
2025-09-02 15:56:49,426 - INFO - Initialized git repository at ./test_output
2025-09-02 15:56:49,426 - INFO - Extracting DDL objects...
2025-09-02 15:56:49,438 - DEBUG - Saving source DDL objects to files...
2025-09-02 15:56:49,438 - INFO - Processing 5 tables...
2025-09-02 15:56:49,439 - DEBUG - Saved tables DDL: test_output/tables/categories.sql
2025-09-02 15:56:49,440 - DEBUG - Saved tables DDL: test_output/tables/customers.sql
2025-09-02 15:56:49,441 - DEBUG - Saved tables DDL: test_output/tables/order_items.sql
2025-09-02 15:56:49,442 - DEBUG - Saved tables DDL: test_output/tables/orders.sql
2025-09-02 15:56:49,443 - DEBUG - Saved tables DDL: test_output/tables/products.sql
2025-09-02 15:56:49,443 - INFO - Processing 1 procedures...
2025-09-02 15:56:49,444 - DEBUG - Saved procedures DDL: test_output/procedures/GetCustomerOrders.sql
2025-09-02 15:56:49,444 - INFO - Processing 1 functions...
2025-09-02 15:56:49,445 - DEBUG - Saved functions DDL: test_output/functions/CalculateOrderTotal.sql
2025-09-02 15:56:49,445 - INFO - Processing 2 triggers...
2025-09-02 15:56:49,446 - DEBUG - Saved triggers DDL: test_output/triggers/tr_orders_update_timestamp.sql
2025-09-02 15:56:49,447 - DEBUG - Saved triggers DDL: test_output/triggers/tr_products_stock_check.sql
2025-09-02 15:56:49,447 - INFO - Processing 0 events...
2025-09-02 15:56:49,447 - DEBUG - Saving destination DDL objects to files...
2025-09-02 15:56:49,447 - INFO - Comparing schemas...
2025-09-02 15:56:49,447 - INFO - Performing safety analysis...
2025-09-02 15:56:49,447 - INFO - Generating migration SQL...
2025-09-02 15:56:49,485 - INFO - Generating schema visualizations...
2025-09-02 15:56:49,488 - INFO - Generated HTML documentation
2025-09-02 15:56:49,488 - INFO - Generated Mermaid ERD
2025-09-02 15:56:49,488 - INFO - Generated Graphviz DOT file
2025-09-02 15:56:49,489 - INFO - Generated JSON schema structure
2025-09-02 15:56:49,489 - INFO - Schema visualizations generated in test_output/documentation
2025-09-02 15:56:49,489 - INFO - Migration report generated: test_output/migration_report.md
2025-09-02 15:56:49,498 - INFO - Started tracking migration 217: ddl_test_source_to_ddl_test_dest_1756821409
2025-09-02 15:56:49,503 - INFO - Completed migration tracking 217: SUCCESS
2025-09-02 15:56:49,503 - INFO - Migration tracking completed: 217
2025-09-02 15:56:49,503 - INFO - Migration completed successfully!
2025-09-02 15:56:49,503 - INFO - Migration ID: 217
2025-09-02 15:56:49,504 - INFO - Operations: 6
2025-09-02 15:56:49,504 - INFO - Safety warnings: 0
2025-09-02 15:56:49,504 - INFO - Migration file: test_output/migration.sql
2025-09-02 15:56:49,504 - INFO - Rollback file: test_output/rollback.sql
2025-09-02 15:56:49,504 - INFO - Migration report: test_output/migration_report.md
2025-09-02 15:56:49,504 - INFO - ✅ Initial comparison completed successfully
2025-09-02 15:56:49,504 - INFO - 🔍 Analyzing results in ./test_output...
2025-09-02 15:56:49,504 - INFO - 🔧 Executing SQL file: ./test_output/migration.sql
2025-09-02 15:56:49,505 - DEBUG - Executing statement 1/27: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 15:56:49,506 - DEBUG - Executing statement 2/27: DROP TABLE IF EXISTS `ddl_test_dest`.`temp_table`;...
2025-09-02 15:56:49,509 - DEBUG - Executing statement 3/27: ALTER TABLE `orders` ADD CONSTRAINT `fk_orders_customer` FOREIGN KEY (`customer_id`) REFERENCES `cus...
2025-09-02 15:56:49,514 - DEBUG - Executing statement 4/27: ALTER TABLE `categories` ADD COLUMN `description` text DEFAULT NULL;...
2025-09-02 15:56:49,518 - DEBUG - Executing statement 5/27: ALTER TABLE `categories` ADD KEY `idx_categories_created` (`created_at`);...
2025-09-02 15:56:49,525 - DEBUG - Executing statement 6/27: ALTER TABLE `products` ADD COLUMN `weight` decimal(8,3) DEFAULT NULL;...
2025-09-02 15:56:49,530 - DEBUG - Executing statement 7/27: ALTER TABLE `products` ADD COLUMN `dimensions` varchar(100) DEFAULT NULL;...
2025-09-02 15:56:49,535 - DEBUG - Executing statement 8/27: ALTER TABLE `products` DROP COLUMN `old_column`;...
2025-09-02 15:56:49,542 - DEBUG - Executing statement 9/27: ALTER TABLE `products` ADD KEY `fk_products_category` (`category_id`);...
2025-09-02 15:56:49,548 - DEBUG - Executing statement 10/27: ALTER TABLE `products` ADD KEY `idx_products_active` (`is_active`);...
2025-09-02 15:56:49,554 - DEBUG - Executing statement 11/27: ALTER TABLE `products` ADD KEY `idx_products_price` (`price`);...
2025-09-02 15:56:49,560 - DEBUG - Executing statement 12/27: ALTER TABLE `products` ADD KEY `idx_products_stock` (`stock_quantity`);...
2025-09-02 15:56:49,566 - DEBUG - Executing statement 13/27: ALTER TABLE `products` ADD KEY `idx_products_sku` (`sku`);...
2025-09-02 15:56:49,572 - DEBUG - Executing statement 14/27: ALTER TABLE `products` DROP INDEX `idx_products_old`;...
2025-09-02 15:56:49,573 - WARNING - ⚠️  SQL execution warning (statement 14): (1091, "Can't DROP INDEX `idx_products_old`; check that it exists")
2025-09-02 15:56:49,573 - WARNING - Statement: ALTER TABLE `products` DROP INDEX `idx_products_old`;
2025-09-02 15:56:49,573 - DEBUG - Executing statement 15/27: ALTER TABLE `products` ADD CONSTRAINT `fk_products_category` FOREIGN KEY (`category_id`) REFERENCES ...
2025-09-02 15:56:49,578 - DEBUG - Executing statement 16/27: ALTER TABLE `customers` DROP COLUMN `loyalty_points`;...
2025-09-02 15:56:49,583 - DEBUG - Executing statement 17/27: ALTER TABLE `customers` ADD KEY `idx_customers_city` (`city`);...
2025-09-02 15:56:49,590 - DEBUG - Executing statement 18/27: ALTER TABLE `customers` ADD KEY `idx_customers_country` (`country`);...
2025-09-02 15:56:49,597 - DEBUG - Executing statement 19/27: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;...
2025-09-02 15:56:49,597 - WARNING - ⚠️  SQL execution warning (statement 19): (1091, "Can't DROP INDEX `idx_customers_loyalty`; check that it exists")
2025-09-02 15:56:49,597 - WARNING - Statement: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;
2025-09-02 15:56:49,597 - DEBUG - Executing statement 20/27: DROP PROCEDURE IF EXISTS `ddl_test_dest`.`GetCustomerOrders`;...
2025-09-02 15:56:49,599 - DEBUG - Executing statement 21/27: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*, COU...
2025-09-02 15:56:49,601 - DEBUG - Executing statement 22/27: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_products_stock_check`;...
2025-09-02 15:56:49,601 - DEBUG - Executing statement 23/27: CREATE DEFINER=`sstuser`@`%` TRIGGER tr_products_stock_check
BEFORE UPDATE ON products
FOR EACH ROW
...
2025-09-02 15:56:49,605 - DEBUG - Executing statement 24/27: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_orders_update_timestamp`;...
2025-09-02 15:56:49,605 - DEBUG - Executing statement 25/27: CREATE DEFINER=`sstuser`@`%` TRIGGER tr_orders_update_timestamp
BEFORE UPDATE ON orders
FOR EACH ROW...
2025-09-02 15:56:49,608 - DEBUG - Executing statement 26/27: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_customers_loyalty_update`;...
2025-09-02 15:56:49,610 - DEBUG - Executing statement 27/27: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 15:56:49,610 - INFO - ✅ SQL file executed: 25 statements succeeded, 2 failed
2025-09-02 15:56:49,610 - INFO - 🔍 Checking if schemas are identical after migration...
2025-09-02 15:56:49,610 - INFO - 🔍 Running comparison step: Post-migration schema check
2025-09-02 15:56:49,611 - INFO - Running in compare mode...
2025-09-02 15:56:49,612 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 15:56:49,612 - INFO - Connecting to databases...
2025-09-02 15:56:49,613 - INFO - Database connections successful
2025-09-02 15:56:49,614 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_post_migration, stdin=None, shell=False, universal_newlines=False)
2025-09-02 15:56:49,617 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 15:56:49,617 - INFO - Initialized new git repository at test_output_post_migration
2025-09-02 15:56:49,617 - DEBUG - Created directory: test_output_post_migration/tables
2025-09-02 15:56:49,617 - DEBUG - Created directory: test_output_post_migration/functions
2025-09-02 15:56:49,617 - DEBUG - Created directory: test_output_post_migration/procedures
2025-09-02 15:56:49,617 - DEBUG - Created directory: test_output_post_migration/triggers
2025-09-02 15:56:49,618 - DEBUG - Created directory: test_output_post_migration/events
2025-09-02 15:56:49,618 - INFO - Initialized git repository at ./test_output_post_migration
2025-09-02 15:56:49,618 - INFO - Extracting DDL objects...
2025-09-02 15:56:49,625 - DEBUG - Saving source DDL objects to files...
2025-09-02 15:56:49,625 - INFO - Processing 5 tables...
2025-09-02 15:56:49,626 - DEBUG - Saved tables DDL: test_output_post_migration/tables/categories.sql
2025-09-02 15:56:49,626 - DEBUG - Saved tables DDL: test_output_post_migration/tables/customers.sql
2025-09-02 15:56:49,627 - DEBUG - Saved tables DDL: test_output_post_migration/tables/order_items.sql
2025-09-02 15:56:49,628 - DEBUG - Saved tables DDL: test_output_post_migration/tables/orders.sql
2025-09-02 15:56:49,629 - DEBUG - Saved tables DDL: test_output_post_migration/tables/products.sql
2025-09-02 15:56:49,629 - INFO - Processing 1 procedures...
2025-09-02 15:56:49,630 - DEBUG - Saved procedures DDL: test_output_post_migration/procedures/GetCustomerOrders.sql
2025-09-02 15:56:49,630 - INFO - Processing 1 functions...
2025-09-02 15:56:49,631 - DEBUG - Saved functions DDL: test_output_post_migration/functions/CalculateOrderTotal.sql
2025-09-02 15:56:49,631 - INFO - Processing 2 triggers...
2025-09-02 15:56:49,632 - DEBUG - Saved triggers DDL: test_output_post_migration/triggers/tr_orders_update_timestamp.sql
2025-09-02 15:56:49,632 - DEBUG - Saved triggers DDL: test_output_post_migration/triggers/tr_products_stock_check.sql
2025-09-02 15:56:49,633 - INFO - Processing 0 events...
2025-09-02 15:56:49,633 - DEBUG - Saving destination DDL objects to files...
2025-09-02 15:56:49,633 - INFO - Comparing schemas...
2025-09-02 15:56:49,633 - INFO - Performing safety analysis...
2025-09-02 15:56:49,633 - INFO - Generating migration SQL...
2025-09-02 15:56:49,676 - INFO - Generating schema visualizations...
2025-09-02 15:56:49,679 - INFO - Generated HTML documentation
2025-09-02 15:56:49,679 - INFO - Generated Mermaid ERD
2025-09-02 15:56:49,680 - INFO - Generated Graphviz DOT file
2025-09-02 15:56:49,680 - INFO - Generated JSON schema structure
2025-09-02 15:56:49,680 - INFO - Schema visualizations generated in test_output_post_migration/documentation
2025-09-02 15:56:49,681 - INFO - Migration report generated: test_output_post_migration/migration_report.md
2025-09-02 15:56:49,685 - INFO - Started tracking migration 218: ddl_test_source_to_ddl_test_dest_1756821409
2025-09-02 15:56:49,690 - INFO - Completed migration tracking 218: SUCCESS
2025-09-02 15:56:49,690 - INFO - Migration tracking completed: 218
2025-09-02 15:56:49,690 - INFO - Migration completed successfully!
2025-09-02 15:56:49,690 - INFO - Migration ID: 218
2025-09-02 15:56:49,690 - INFO - Operations: 0
2025-09-02 15:56:49,690 - INFO - Safety warnings: 0
2025-09-02 15:56:49,690 - INFO - Migration file: test_output_post_migration/migration.sql
2025-09-02 15:56:49,691 - INFO - Rollback file: test_output_post_migration/rollback.sql
2025-09-02 15:56:49,691 - INFO - Migration report: test_output_post_migration/migration_report.md
2025-09-02 15:56:49,691 - INFO - ✅ Post-migration schema check completed successfully
2025-09-02 15:56:49,691 - INFO - ✅ Schemas are identical after migration!
2025-09-02 15:56:49,691 - INFO - 🔧 Executing SQL file: ./test_output/rollback.sql
2025-09-02 15:56:49,692 - DEBUG - Executing statement 1/25: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 15:56:49,692 - DEBUG - Executing statement 2/25: CREATE TABLE `temp_table` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`temp_data` varchar(255) DEFAULT N...
2025-09-02 15:56:49,696 - DEBUG - Executing statement 3/25: ALTER TABLE `orders` DROP FOREIGN KEY `fk_orders_customer`;...
2025-09-02 15:56:49,700 - DEBUG - Executing statement 4/25: ALTER TABLE `categories` DROP COLUMN `description`;...
2025-09-02 15:56:49,706 - DEBUG - Executing statement 5/25: ALTER TABLE `categories` DROP INDEX `idx_categories_created`;...
2025-09-02 15:56:49,711 - DEBUG - Executing statement 6/25: ALTER TABLE `products` DROP COLUMN `weight`;...
2025-09-02 15:56:49,716 - DEBUG - Executing statement 7/25: ALTER TABLE `products` DROP COLUMN `dimensions`;...
2025-09-02 15:56:49,724 - DEBUG - Executing statement 8/25: ALTER TABLE `products` ADD COLUMN `old_column` varchar(50) DEFAULT NULL;...
2025-09-02 15:56:49,731 - DEBUG - Executing statement 9/25: ALTER TABLE `products` DROP INDEX `fk_products_category`;...
2025-09-02 15:56:49,736 - DEBUG - Executing statement 10/25: ALTER TABLE `products` DROP INDEX `idx_products_active`;...
2025-09-02 15:56:49,741 - DEBUG - Executing statement 11/25: ALTER TABLE `products` DROP INDEX `idx_products_price`;...
2025-09-02 15:56:49,747 - DEBUG - Executing statement 12/25: ALTER TABLE `products` DROP INDEX `idx_products_stock`;...
2025-09-02 15:56:49,751 - DEBUG - Executing statement 13/25: ALTER TABLE `products` DROP INDEX `idx_products_sku`;...
2025-09-02 15:56:49,756 - DEBUG - Executing statement 14/25: ALTER TABLE `products` ADD KEY `idx_products_old` (`old_column`);...
2025-09-02 15:56:49,761 - DEBUG - Executing statement 15/25: ALTER TABLE `products` DROP FOREIGN KEY `fk_products_category`;...
2025-09-02 15:56:49,766 - DEBUG - Executing statement 16/25: ALTER TABLE `customers` ADD COLUMN `loyalty_points` int(11) DEFAULT 0;...
2025-09-02 15:56:49,771 - DEBUG - Executing statement 17/25: ALTER TABLE `customers` DROP INDEX `idx_customers_city`;...
2025-09-02 15:56:49,776 - DEBUG - Executing statement 18/25: ALTER TABLE `customers` DROP INDEX `idx_customers_country`;...
2025-09-02 15:56:49,781 - DEBUG - Executing statement 19/25: ALTER TABLE `customers` ADD KEY `idx_customers_loyalty` (`loyalty_points`);...
2025-09-02 15:56:49,787 - DEBUG - Executing statement 20/25: DROP PROCEDURE IF EXISTS `GetCustomerOrders`;...
2025-09-02 15:56:49,788 - DEBUG - Executing statement 21/25: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*
FROM...
2025-09-02 15:56:49,790 - DEBUG - Executing statement 22/25: DROP TRIGGER IF EXISTS `tr_products_stock_check`;...
2025-09-02 15:56:49,791 - DEBUG - Executing statement 23/25: DROP TRIGGER IF EXISTS `tr_orders_update_timestamp`;...
2025-09-02 15:56:49,793 - DEBUG - Executing statement 24/25: CREATE DEFINER=`sstuser`@`%` TRIGGER tr_customers_loyalty_update
BEFORE UPDATE ON customers
FOR EACH...
2025-09-02 15:56:49,796 - DEBUG - Executing statement 25/25: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 15:56:49,796 - INFO - ✅ SQL file executed: 25 statements succeeded, 0 failed
2025-09-02 15:56:49,796 - INFO - 🔍 Running comparison step: Final comparison after rollback
2025-09-02 15:56:49,797 - INFO - Running in compare mode...
2025-09-02 15:56:49,798 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 15:56:49,798 - INFO - Connecting to databases...
2025-09-02 15:56:49,799 - INFO - Database connections successful
2025-09-02 15:56:49,800 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_final, stdin=None, shell=False, universal_newlines=False)
2025-09-02 15:56:49,804 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 15:56:49,805 - INFO - Initialized new git repository at test_output_final
2025-09-02 15:56:49,805 - DEBUG - Created directory: test_output_final/tables
2025-09-02 15:56:49,805 - DEBUG - Created directory: test_output_final/functions
2025-09-02 15:56:49,805 - DEBUG - Created directory: test_output_final/procedures
2025-09-02 15:56:49,805 - DEBUG - Created directory: test_output_final/triggers
2025-09-02 15:56:49,805 - DEBUG - Created directory: test_output_final/events
2025-09-02 15:56:49,805 - INFO - Initialized git repository at ./test_output_final
2025-09-02 15:56:49,805 - INFO - Extracting DDL objects...
2025-09-02 15:56:49,815 - DEBUG - Saving source DDL objects to files...
2025-09-02 15:56:49,815 - INFO - Processing 5 tables...
2025-09-02 15:56:49,816 - DEBUG - Saved tables DDL: test_output_final/tables/categories.sql
2025-09-02 15:56:49,817 - DEBUG - Saved tables DDL: test_output_final/tables/customers.sql
2025-09-02 15:56:49,818 - DEBUG - Saved tables DDL: test_output_final/tables/order_items.sql
2025-09-02 15:56:49,819 - DEBUG - Saved tables DDL: test_output_final/tables/orders.sql
2025-09-02 15:56:49,819 - DEBUG - Saved tables DDL: test_output_final/tables/products.sql
2025-09-02 15:56:49,820 - INFO - Processing 1 procedures...
2025-09-02 15:56:49,820 - DEBUG - Saved procedures DDL: test_output_final/procedures/GetCustomerOrders.sql
2025-09-02 15:56:49,821 - INFO - Processing 1 functions...
2025-09-02 15:56:49,821 - DEBUG - Saved functions DDL: test_output_final/functions/CalculateOrderTotal.sql
2025-09-02 15:56:49,822 - INFO - Processing 2 triggers...
2025-09-02 15:56:49,822 - DEBUG - Saved triggers DDL: test_output_final/triggers/tr_orders_update_timestamp.sql
2025-09-02 15:56:49,823 - DEBUG - Saved triggers DDL: test_output_final/triggers/tr_products_stock_check.sql
2025-09-02 15:56:49,823 - INFO - Processing 0 events...
2025-09-02 15:56:49,823 - DEBUG - Saving destination DDL objects to files...
2025-09-02 15:56:49,823 - INFO - Comparing schemas...
2025-09-02 15:56:49,824 - INFO - Performing safety analysis...
2025-09-02 15:56:49,824 - INFO - Generating migration SQL...
2025-09-02 15:56:49,868 - INFO - Generating schema visualizations...
2025-09-02 15:56:49,872 - INFO - Generated HTML documentation
2025-09-02 15:56:49,873 - INFO - Generated Mermaid ERD
2025-09-02 15:56:49,873 - INFO - Generated Graphviz DOT file
2025-09-02 15:56:49,873 - INFO - Generated JSON schema structure
2025-09-02 15:56:49,874 - INFO - Schema visualizations generated in test_output_final/documentation
2025-09-02 15:56:49,874 - INFO - Migration report generated: test_output_final/migration_report.md
2025-09-02 15:56:49,884 - INFO - Started tracking migration 219: ddl_test_source_to_ddl_test_dest_1756821409
2025-09-02 15:56:49,888 - INFO - Completed migration tracking 219: SUCCESS
2025-09-02 15:56:49,888 - INFO - Migration tracking completed: 219
2025-09-02 15:56:49,888 - INFO - Migration completed successfully!
2025-09-02 15:56:49,888 - INFO - Migration ID: 219
2025-09-02 15:56:49,888 - INFO - Operations: 6
2025-09-02 15:56:49,888 - INFO - Safety warnings: 0
2025-09-02 15:56:49,888 - INFO - Migration file: test_output_final/migration.sql
2025-09-02 15:56:49,888 - INFO - Rollback file: test_output_final/rollback.sql
2025-09-02 15:56:49,889 - INFO - Migration report: test_output_final/migration_report.md
2025-09-02 15:56:49,889 - INFO - ✅ Final comparison after rollback completed successfully
2025-09-02 15:56:49,889 - INFO - 🔍 Analyzing results in ./test_output_final...
2025-09-02 15:56:49,889 - INFO - 🔄 Comparing initial and final results...
2025-09-02 15:56:49,889 - INFO - ✅ Rollback test passed - initial and final states match!
2025-09-02 15:56:49,889 - INFO - 💾 Saving test data for reference...
2025-09-02 15:56:49,897 - INFO - ✅ Saved ./test_output to test_data/ddlw-test-20250902_155649/ddl-wizard-testsuite-initial-migration-20250902_155649
2025-09-02 15:56:49,903 - INFO - ✅ Saved ./test_output to test_data/ddlw-test-20250902_155649/test_output
2025-09-02 15:56:49,910 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddlw-test-20250902_155649/ddl-wizard-testsuite-post-migration-verification-20250902_155649
2025-09-02 15:56:49,917 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddlw-test-20250902_155649/test_output_post_migration
2025-09-02 15:56:49,922 - INFO - ✅ Saved ./test_output_final to test_data/ddlw-test-20250902_155649/ddl-wizard-testsuite-rollback-verification-20250902_155649
2025-09-02 15:56:49,927 - INFO - ✅ Saved ./test_output_final to test_data/ddlw-test-20250902_155649/test_output_final
2025-09-02 15:56:49,927 - INFO - ✅ Saved test log to test_data/ddlw-test-20250902_155649
2025-09-02 15:56:49,929 - INFO - 🧹 Cleaned up temporary directory: ./test_output
2025-09-02 15:56:49,930 - INFO - 🧹 Cleaned up temporary directory: ./test_output_post_migration
2025-09-02 15:56:49,932 - INFO - 🧹 Cleaned up temporary directory: ./test_output_final
2025-09-02 15:56:49,932 - INFO - 🧹 Cleaning up test databases...
2025-09-02 15:56:49,948 - INFO - ✅ Cleaned up database: ddl_test_source
2025-09-02 15:56:49,962 - INFO - ✅ Cleaned up database: ddl_test_dest
2025-09-02 15:59:31,449 - INFO - Running in compare mode...
2025-09-02 15:59:31,450 - INFO - Connecting to databases...
2025-09-02 15:59:31,452 - INFO - Database connections successful
2025-09-02 15:59:31,456 - INFO - Initialized new git repository at test_function_comparison
2025-09-02 15:59:31,456 - INFO - Initialized git repository at test_function_comparison
2025-09-02 15:59:31,456 - INFO - Extracting DDL objects...
2025-09-02 15:59:31,465 - INFO - Processing 1 tables...
2025-09-02 15:59:31,467 - INFO - Processing 0 procedures...
2025-09-02 15:59:31,467 - INFO - Processing 1 functions...
2025-09-02 15:59:31,469 - INFO - Processing 0 triggers...
2025-09-02 15:59:31,469 - INFO - Processing 0 events...
2025-09-02 15:59:31,469 - INFO - Comparing schemas...
2025-09-02 15:59:31,469 - INFO - Performing safety analysis...
2025-09-02 15:59:31,469 - INFO - Generating migration SQL...
2025-09-02 15:59:31,476 - INFO - Generating schema visualizations...
2025-09-02 15:59:31,476 - INFO - Generated HTML documentation
2025-09-02 15:59:31,476 - INFO - Generated Mermaid ERD
2025-09-02 15:59:31,476 - INFO - Generated Graphviz DOT file
2025-09-02 15:59:31,477 - INFO - Generated JSON schema structure
2025-09-02 15:59:31,477 - INFO - Schema visualizations generated in test_function_comparison/documentation
2025-09-02 15:59:31,477 - INFO - Migration report generated: test_function_comparison/migration_report.md
2025-09-02 15:59:31,483 - INFO - Started tracking migration 220: test_func_source_to_test_func_dest_1756821571
2025-09-02 15:59:31,487 - INFO - Completed migration tracking 220: SUCCESS
2025-09-02 15:59:31,488 - INFO - Migration tracking completed: 220
2025-09-02 15:59:31,488 - INFO - Migration completed successfully!
2025-09-02 15:59:31,488 - INFO - Migration ID: 220
2025-09-02 15:59:31,488 - INFO - Operations: 1
2025-09-02 15:59:31,488 - INFO - Safety warnings: 0
2025-09-02 15:59:31,488 - INFO - Migration file: test_function_comparison/migration.sql
2025-09-02 15:59:31,488 - INFO - Rollback file: test_function_comparison/rollback.sql
2025-09-02 15:59:31,488 - INFO - Migration report: test_function_comparison/migration_report.md
2025-09-02 16:00:24,162 - INFO - 🏗️  Setting up source database...
2025-09-02 16:00:24,216 - INFO - ✅ Source database setup completed
2025-09-02 16:00:24,216 - INFO - 🏗️  Setting up destination database with differences...
2025-09-02 16:00:24,262 - INFO - ✅ Destination database setup completed
2025-09-02 16:00:24,262 - INFO - 📝 Populating test data...
2025-09-02 16:00:24,265 - INFO - ✅ Test data populated in ddl_test_source
2025-09-02 16:00:24,268 - INFO - ✅ Test data populated in ddl_test_dest
2025-09-02 16:00:24,268 - INFO - 🔍 Running comparison step: Initial comparison
2025-09-02 16:00:24,269 - INFO - Running in compare mode...
2025-09-02 16:00:24,270 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 16:00:24,270 - INFO - Connecting to databases...
2025-09-02 16:00:24,271 - INFO - Database connections successful
2025-09-02 16:00:24,272 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output, stdin=None, shell=False, universal_newlines=False)
2025-09-02 16:00:24,275 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 16:00:24,275 - INFO - Initialized new git repository at test_output
2025-09-02 16:00:24,276 - DEBUG - Created directory: test_output/tables
2025-09-02 16:00:24,276 - DEBUG - Created directory: test_output/functions
2025-09-02 16:00:24,276 - DEBUG - Created directory: test_output/procedures
2025-09-02 16:00:24,276 - DEBUG - Created directory: test_output/triggers
2025-09-02 16:00:24,276 - DEBUG - Created directory: test_output/events
2025-09-02 16:00:24,276 - INFO - Initialized git repository at ./test_output
2025-09-02 16:00:24,276 - INFO - Extracting DDL objects...
2025-09-02 16:00:24,285 - DEBUG - Saving source DDL objects to files...
2025-09-02 16:00:24,286 - INFO - Processing 5 tables...
2025-09-02 16:00:24,286 - DEBUG - Saved tables DDL: test_output/tables/categories.sql
2025-09-02 16:00:24,287 - DEBUG - Saved tables DDL: test_output/tables/customers.sql
2025-09-02 16:00:24,288 - DEBUG - Saved tables DDL: test_output/tables/order_items.sql
2025-09-02 16:00:24,289 - DEBUG - Saved tables DDL: test_output/tables/orders.sql
2025-09-02 16:00:24,289 - DEBUG - Saved tables DDL: test_output/tables/products.sql
2025-09-02 16:00:24,289 - INFO - Processing 1 procedures...
2025-09-02 16:00:24,290 - DEBUG - Saved procedures DDL: test_output/procedures/GetCustomerOrders.sql
2025-09-02 16:00:24,290 - INFO - Processing 1 functions...
2025-09-02 16:00:24,291 - DEBUG - Saved functions DDL: test_output/functions/CalculateOrderTotal.sql
2025-09-02 16:00:24,291 - INFO - Processing 2 triggers...
2025-09-02 16:00:24,292 - DEBUG - Saved triggers DDL: test_output/triggers/tr_orders_update_timestamp.sql
2025-09-02 16:00:24,292 - DEBUG - Saved triggers DDL: test_output/triggers/tr_products_stock_check.sql
2025-09-02 16:00:24,292 - INFO - Processing 0 events...
2025-09-02 16:00:24,292 - DEBUG - Saving destination DDL objects to files...
2025-09-02 16:00:24,292 - INFO - Comparing schemas...
2025-09-02 16:00:24,292 - INFO - Performing safety analysis...
2025-09-02 16:00:24,292 - INFO - Generating migration SQL...
2025-09-02 16:00:24,322 - INFO - Generating schema visualizations...
2025-09-02 16:00:24,324 - INFO - Generated HTML documentation
2025-09-02 16:00:24,324 - INFO - Generated Mermaid ERD
2025-09-02 16:00:24,325 - INFO - Generated Graphviz DOT file
2025-09-02 16:00:24,325 - INFO - Generated JSON schema structure
2025-09-02 16:00:24,325 - INFO - Schema visualizations generated in test_output/documentation
2025-09-02 16:00:24,325 - INFO - Migration report generated: test_output/migration_report.md
2025-09-02 16:00:24,332 - INFO - Started tracking migration 221: ddl_test_source_to_ddl_test_dest_1756821624
2025-09-02 16:00:24,336 - INFO - Completed migration tracking 221: SUCCESS
2025-09-02 16:00:24,336 - INFO - Migration tracking completed: 221
2025-09-02 16:00:24,337 - INFO - Migration completed successfully!
2025-09-02 16:00:24,337 - INFO - Migration ID: 221
2025-09-02 16:00:24,337 - INFO - Operations: 7
2025-09-02 16:00:24,337 - INFO - Safety warnings: 0
2025-09-02 16:00:24,337 - INFO - Migration file: test_output/migration.sql
2025-09-02 16:00:24,337 - INFO - Rollback file: test_output/rollback.sql
2025-09-02 16:00:24,337 - INFO - Migration report: test_output/migration_report.md
2025-09-02 16:00:24,337 - INFO - ✅ Initial comparison completed successfully
2025-09-02 16:00:24,337 - INFO - 🔍 Analyzing results in ./test_output...
2025-09-02 16:00:24,337 - INFO - 🔧 Executing SQL file: ./test_output/migration.sql
2025-09-02 16:00:24,338 - DEBUG - Executing statement 1/29: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 16:00:24,338 - DEBUG - Executing statement 2/29: DROP TABLE IF EXISTS `ddl_test_dest`.`temp_table`;...
2025-09-02 16:00:24,341 - DEBUG - Executing statement 3/29: ALTER TABLE `customers` DROP COLUMN `loyalty_points`;...
2025-09-02 16:00:24,346 - DEBUG - Executing statement 4/29: ALTER TABLE `customers` ADD KEY `idx_customers_country` (`country`);...
2025-09-02 16:00:24,353 - DEBUG - Executing statement 5/29: ALTER TABLE `customers` ADD KEY `idx_customers_city` (`city`);...
2025-09-02 16:00:24,358 - DEBUG - Executing statement 6/29: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;...
2025-09-02 16:00:24,359 - WARNING - ⚠️  SQL execution warning (statement 6): (1091, "Can't DROP INDEX `idx_customers_loyalty`; check that it exists")
2025-09-02 16:00:24,359 - WARNING - Statement: ALTER TABLE `customers` DROP INDEX `idx_customers_loyalty`;
2025-09-02 16:00:24,359 - DEBUG - Executing statement 7/29: ALTER TABLE `products` ADD COLUMN `dimensions` varchar(100) DEFAULT NULL;...
2025-09-02 16:00:24,363 - DEBUG - Executing statement 8/29: ALTER TABLE `products` ADD COLUMN `weight` decimal(8,3) DEFAULT NULL;...
2025-09-02 16:00:24,367 - DEBUG - Executing statement 9/29: ALTER TABLE `products` DROP COLUMN `old_column`;...
2025-09-02 16:00:24,373 - DEBUG - Executing statement 10/29: ALTER TABLE `products` ADD KEY `idx_products_sku` (`sku`);...
2025-09-02 16:00:24,379 - DEBUG - Executing statement 11/29: ALTER TABLE `products` ADD KEY `idx_products_active` (`is_active`);...
2025-09-02 16:00:24,384 - DEBUG - Executing statement 12/29: ALTER TABLE `products` ADD KEY `fk_products_category` (`category_id`);...
2025-09-02 16:00:24,390 - DEBUG - Executing statement 13/29: ALTER TABLE `products` ADD KEY `idx_products_price` (`price`);...
2025-09-02 16:00:24,396 - DEBUG - Executing statement 14/29: ALTER TABLE `products` ADD KEY `idx_products_stock` (`stock_quantity`);...
2025-09-02 16:00:24,402 - DEBUG - Executing statement 15/29: ALTER TABLE `products` DROP INDEX `idx_products_old`;...
2025-09-02 16:00:24,403 - WARNING - ⚠️  SQL execution warning (statement 15): (1091, "Can't DROP INDEX `idx_products_old`; check that it exists")
2025-09-02 16:00:24,403 - WARNING - Statement: ALTER TABLE `products` DROP INDEX `idx_products_old`;
2025-09-02 16:00:24,403 - DEBUG - Executing statement 16/29: ALTER TABLE `products` ADD CONSTRAINT `fk_products_category` FOREIGN KEY (`category_id`) REFERENCES ...
2025-09-02 16:00:24,407 - DEBUG - Executing statement 17/29: ALTER TABLE `categories` ADD COLUMN `description` text DEFAULT NULL;...
2025-09-02 16:00:24,412 - DEBUG - Executing statement 18/29: ALTER TABLE `categories` ADD KEY `idx_categories_created` (`created_at`);...
2025-09-02 16:00:24,418 - DEBUG - Executing statement 19/29: ALTER TABLE `orders` ADD CONSTRAINT `fk_orders_customer` FOREIGN KEY (`customer_id`) REFERENCES `cus...
2025-09-02 16:00:24,422 - DEBUG - Executing statement 20/29: DROP PROCEDURE IF EXISTS `ddl_test_dest`.`GetCustomerOrders`;...
2025-09-02 16:00:24,424 - DEBUG - Executing statement 21/29: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*, COU...
2025-09-02 16:00:24,425 - DEBUG - Executing statement 22/29: DROP FUNCTION IF EXISTS `ddl_test_dest`.`CalculateOrderTotal`;...
2025-09-02 16:00:24,425 - DEBUG - Executing statement 23/29: CREATE DEFINER=`sstuser`@`%` FUNCTION `CalculateOrderTotal`(order_id INT) RETURNS decimal(12,2)
READ...
2025-09-02 16:00:24,427 - DEBUG - Executing statement 24/29: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_orders_update_timestamp`;...
2025-09-02 16:00:24,427 - DEBUG - Executing statement 25/29: CREATE DEFINER=`sstuser`@`%` TRIGGER tr_orders_update_timestamp
BEFORE UPDATE ON orders
FOR EACH ROW...
2025-09-02 16:00:24,430 - DEBUG - Executing statement 26/29: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_products_stock_check`;...
2025-09-02 16:00:24,430 - DEBUG - Executing statement 27/29: CREATE DEFINER=`sstuser`@`%` TRIGGER tr_products_stock_check
BEFORE UPDATE ON products
FOR EACH ROW
...
2025-09-02 16:00:24,433 - DEBUG - Executing statement 28/29: DROP TRIGGER IF EXISTS `ddl_test_dest`.`tr_customers_loyalty_update`;...
2025-09-02 16:00:24,435 - DEBUG - Executing statement 29/29: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 16:00:24,436 - INFO - ✅ SQL file executed: 27 statements succeeded, 2 failed
2025-09-02 16:00:24,436 - INFO - 🔍 Checking if schemas are identical after migration...
2025-09-02 16:00:24,436 - INFO - 🔍 Running comparison step: Post-migration schema check
2025-09-02 16:00:24,437 - INFO - Running in compare mode...
2025-09-02 16:00:24,437 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 16:00:24,437 - INFO - Connecting to databases...
2025-09-02 16:00:24,438 - INFO - Database connections successful
2025-09-02 16:00:24,439 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_post_migration, stdin=None, shell=False, universal_newlines=False)
2025-09-02 16:00:24,441 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 16:00:24,442 - INFO - Initialized new git repository at test_output_post_migration
2025-09-02 16:00:24,442 - DEBUG - Created directory: test_output_post_migration/tables
2025-09-02 16:00:24,442 - DEBUG - Created directory: test_output_post_migration/functions
2025-09-02 16:00:24,442 - DEBUG - Created directory: test_output_post_migration/procedures
2025-09-02 16:00:24,442 - DEBUG - Created directory: test_output_post_migration/triggers
2025-09-02 16:00:24,442 - DEBUG - Created directory: test_output_post_migration/events
2025-09-02 16:00:24,442 - INFO - Initialized git repository at ./test_output_post_migration
2025-09-02 16:00:24,442 - INFO - Extracting DDL objects...
2025-09-02 16:00:24,447 - DEBUG - Saving source DDL objects to files...
2025-09-02 16:00:24,448 - INFO - Processing 5 tables...
2025-09-02 16:00:24,448 - DEBUG - Saved tables DDL: test_output_post_migration/tables/categories.sql
2025-09-02 16:00:24,449 - DEBUG - Saved tables DDL: test_output_post_migration/tables/customers.sql
2025-09-02 16:00:24,449 - DEBUG - Saved tables DDL: test_output_post_migration/tables/order_items.sql
2025-09-02 16:00:24,450 - DEBUG - Saved tables DDL: test_output_post_migration/tables/orders.sql
2025-09-02 16:00:24,450 - DEBUG - Saved tables DDL: test_output_post_migration/tables/products.sql
2025-09-02 16:00:24,450 - INFO - Processing 1 procedures...
2025-09-02 16:00:24,451 - DEBUG - Saved procedures DDL: test_output_post_migration/procedures/GetCustomerOrders.sql
2025-09-02 16:00:24,451 - INFO - Processing 1 functions...
2025-09-02 16:00:24,451 - DEBUG - Saved functions DDL: test_output_post_migration/functions/CalculateOrderTotal.sql
2025-09-02 16:00:24,451 - INFO - Processing 2 triggers...
2025-09-02 16:00:24,452 - DEBUG - Saved triggers DDL: test_output_post_migration/triggers/tr_orders_update_timestamp.sql
2025-09-02 16:00:24,453 - DEBUG - Saved triggers DDL: test_output_post_migration/triggers/tr_products_stock_check.sql
2025-09-02 16:00:24,453 - INFO - Processing 0 events...
2025-09-02 16:00:24,453 - DEBUG - Saving destination DDL objects to files...
2025-09-02 16:00:24,453 - INFO - Comparing schemas...
2025-09-02 16:00:24,453 - INFO - Performing safety analysis...
2025-09-02 16:00:24,453 - INFO - Generating migration SQL...
2025-09-02 16:00:24,481 - INFO - Generating schema visualizations...
2025-09-02 16:00:24,484 - INFO - Generated HTML documentation
2025-09-02 16:00:24,484 - INFO - Generated Mermaid ERD
2025-09-02 16:00:24,484 - INFO - Generated Graphviz DOT file
2025-09-02 16:00:24,485 - INFO - Generated JSON schema structure
2025-09-02 16:00:24,485 - INFO - Schema visualizations generated in test_output_post_migration/documentation
2025-09-02 16:00:24,485 - INFO - Migration report generated: test_output_post_migration/migration_report.md
2025-09-02 16:00:24,491 - INFO - Started tracking migration 222: ddl_test_source_to_ddl_test_dest_1756821624
2025-09-02 16:00:24,495 - INFO - Completed migration tracking 222: SUCCESS
2025-09-02 16:00:24,495 - INFO - Migration tracking completed: 222
2025-09-02 16:00:24,495 - INFO - Migration completed successfully!
2025-09-02 16:00:24,495 - INFO - Migration ID: 222
2025-09-02 16:00:24,495 - INFO - Operations: 0
2025-09-02 16:00:24,495 - INFO - Safety warnings: 0
2025-09-02 16:00:24,495 - INFO - Migration file: test_output_post_migration/migration.sql
2025-09-02 16:00:24,496 - INFO - Rollback file: test_output_post_migration/rollback.sql
2025-09-02 16:00:24,496 - INFO - Migration report: test_output_post_migration/migration_report.md
2025-09-02 16:00:24,496 - INFO - ✅ Post-migration schema check completed successfully
2025-09-02 16:00:24,496 - INFO - ✅ Schemas are identical after migration!
2025-09-02 16:00:24,496 - INFO - 🔧 Executing SQL file: ./test_output/rollback.sql
2025-09-02 16:00:24,497 - DEBUG - Executing statement 1/26: SET FOREIGN_KEY_CHECKS = 0;...
2025-09-02 16:00:24,497 - DEBUG - Executing statement 2/26: CREATE TABLE `temp_table` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`temp_data` varchar(255) DEFAULT N...
2025-09-02 16:00:24,500 - DEBUG - Executing statement 3/26: ALTER TABLE `customers` ADD COLUMN `loyalty_points` int(11) DEFAULT 0;...
2025-09-02 16:00:24,506 - DEBUG - Executing statement 4/26: ALTER TABLE `customers` DROP INDEX `idx_customers_country`;...
2025-09-02 16:00:24,510 - DEBUG - Executing statement 5/26: ALTER TABLE `customers` DROP INDEX `idx_customers_city`;...
2025-09-02 16:00:24,514 - DEBUG - Executing statement 6/26: ALTER TABLE `customers` ADD KEY `idx_customers_loyalty` (`loyalty_points`);...
2025-09-02 16:00:24,520 - DEBUG - Executing statement 7/26: ALTER TABLE `products` DROP COLUMN `dimensions`;...
2025-09-02 16:00:24,524 - DEBUG - Executing statement 8/26: ALTER TABLE `products` DROP COLUMN `weight`;...
2025-09-02 16:00:24,530 - DEBUG - Executing statement 9/26: ALTER TABLE `products` ADD COLUMN `old_column` varchar(50) DEFAULT NULL;...
2025-09-02 16:00:24,536 - DEBUG - Executing statement 10/26: ALTER TABLE `products` DROP INDEX `idx_products_sku`;...
2025-09-02 16:00:24,541 - DEBUG - Executing statement 11/26: ALTER TABLE `products` DROP INDEX `idx_products_active`;...
2025-09-02 16:00:24,545 - DEBUG - Executing statement 12/26: ALTER TABLE `products` DROP INDEX `fk_products_category`;...
2025-09-02 16:00:24,549 - DEBUG - Executing statement 13/26: ALTER TABLE `products` DROP INDEX `idx_products_price`;...
2025-09-02 16:00:24,554 - DEBUG - Executing statement 14/26: ALTER TABLE `products` DROP INDEX `idx_products_stock`;...
2025-09-02 16:00:24,558 - DEBUG - Executing statement 15/26: ALTER TABLE `products` ADD KEY `idx_products_old` (`old_column`);...
2025-09-02 16:00:24,564 - DEBUG - Executing statement 16/26: ALTER TABLE `products` DROP FOREIGN KEY `fk_products_category`;...
2025-09-02 16:00:24,569 - DEBUG - Executing statement 17/26: ALTER TABLE `categories` DROP COLUMN `description`;...
2025-09-02 16:00:24,574 - DEBUG - Executing statement 18/26: ALTER TABLE `categories` DROP INDEX `idx_categories_created`;...
2025-09-02 16:00:24,578 - DEBUG - Executing statement 19/26: ALTER TABLE `orders` DROP FOREIGN KEY `fk_orders_customer`;...
2025-09-02 16:00:24,582 - DEBUG - Executing statement 20/26: DROP PROCEDURE IF EXISTS `GetCustomerOrders`;...
2025-09-02 16:00:24,584 - DEBUG - Executing statement 21/26: CREATE DEFINER=`sstuser`@`%` PROCEDURE `GetCustomerOrders`(IN customer_id INT)
BEGIN
SELECT o.*
FROM...
2025-09-02 16:00:24,585 - DEBUG - Executing statement 22/26: DROP FUNCTION IF EXISTS `CalculateOrderTotal`;...
2025-09-02 16:00:24,587 - DEBUG - Executing statement 23/26: DROP TRIGGER IF EXISTS `tr_orders_update_timestamp`;...
2025-09-02 16:00:24,589 - DEBUG - Executing statement 24/26: DROP TRIGGER IF EXISTS `tr_products_stock_check`;...
2025-09-02 16:00:24,590 - DEBUG - Executing statement 25/26: CREATE DEFINER=`sstuser`@`%` TRIGGER tr_customers_loyalty_update
BEFORE UPDATE ON customers
FOR EACH...
2025-09-02 16:00:24,593 - DEBUG - Executing statement 26/26: SET FOREIGN_KEY_CHECKS = 1;...
2025-09-02 16:00:24,593 - INFO - ✅ SQL file executed: 26 statements succeeded, 0 failed
2025-09-02 16:00:24,593 - INFO - 🔍 Running comparison step: Final comparison after rollback
2025-09-02 16:00:24,594 - INFO - Running in compare mode...
2025-09-02 16:00:24,594 - DEBUG - Migration history database initialized: .ddl_wizard_history.db
2025-09-02 16:00:24,595 - INFO - Connecting to databases...
2025-09-02 16:00:24,596 - INFO - Database connections successful
2025-09-02 16:00:24,596 - DEBUG - Popen(['git', 'init'], cwd=/home/claudio/Projects/ddlwizard/test_output_final, stdin=None, shell=False, universal_newlines=False)
2025-09-02 16:00:24,599 - DEBUG - sys.platform='linux', git_executable='git'
2025-09-02 16:00:24,599 - INFO - Initialized new git repository at test_output_final
2025-09-02 16:00:24,600 - DEBUG - Created directory: test_output_final/tables
2025-09-02 16:00:24,600 - DEBUG - Created directory: test_output_final/functions
2025-09-02 16:00:24,600 - DEBUG - Created directory: test_output_final/procedures
2025-09-02 16:00:24,600 - DEBUG - Created directory: test_output_final/triggers
2025-09-02 16:00:24,600 - DEBUG - Created directory: test_output_final/events
2025-09-02 16:00:24,600 - INFO - Initialized git repository at ./test_output_final
2025-09-02 16:00:24,600 - INFO - Extracting DDL objects...
2025-09-02 16:00:24,608 - DEBUG - Saving source DDL objects to files...
2025-09-02 16:00:24,608 - INFO - Processing 5 tables...
2025-09-02 16:00:24,608 - DEBUG - Saved tables DDL: test_output_final/tables/categories.sql
2025-09-02 16:00:24,609 - DEBUG - Saved tables DDL: test_output_final/tables/customers.sql
2025-09-02 16:00:24,609 - DEBUG - Saved tables DDL: test_output_final/tables/order_items.sql
2025-09-02 16:00:24,610 - DEBUG - Saved tables DDL: test_output_final/tables/orders.sql
2025-09-02 16:00:24,610 - DEBUG - Saved tables DDL: test_output_final/tables/products.sql
2025-09-02 16:00:24,611 - INFO - Processing 1 procedures...
2025-09-02 16:00:24,611 - DEBUG - Saved procedures DDL: test_output_final/procedures/GetCustomerOrders.sql
2025-09-02 16:00:24,611 - INFO - Processing 1 functions...
2025-09-02 16:00:24,612 - DEBUG - Saved functions DDL: test_output_final/functions/CalculateOrderTotal.sql
2025-09-02 16:00:24,612 - INFO - Processing 2 triggers...
2025-09-02 16:00:24,612 - DEBUG - Saved triggers DDL: test_output_final/triggers/tr_orders_update_timestamp.sql
2025-09-02 16:00:24,613 - DEBUG - Saved triggers DDL: test_output_final/triggers/tr_products_stock_check.sql
2025-09-02 16:00:24,613 - INFO - Processing 0 events...
2025-09-02 16:00:24,613 - DEBUG - Saving destination DDL objects to files...
2025-09-02 16:00:24,613 - INFO - Comparing schemas...
2025-09-02 16:00:24,613 - INFO - Performing safety analysis...
2025-09-02 16:00:24,613 - INFO - Generating migration SQL...
2025-09-02 16:00:24,639 - INFO - Generating schema visualizations...
2025-09-02 16:00:24,641 - INFO - Generated HTML documentation
2025-09-02 16:00:24,641 - INFO - Generated Mermaid ERD
2025-09-02 16:00:24,641 - INFO - Generated Graphviz DOT file
2025-09-02 16:00:24,642 - INFO - Generated JSON schema structure
2025-09-02 16:00:24,642 - INFO - Schema visualizations generated in test_output_final/documentation
2025-09-02 16:00:24,642 - INFO - Migration report generated: test_output_final/migration_report.md
2025-09-02 16:00:24,648 - INFO - Started tracking migration 223: ddl_test_source_to_ddl_test_dest_1756821624
2025-09-02 16:00:24,652 - INFO - Completed migration tracking 223: SUCCESS
2025-09-02 16:00:24,652 - INFO - Migration tracking completed: 223
2025-09-02 16:00:24,652 - INFO - Migration completed successfully!
2025-09-02 16:00:24,652 - INFO - Migration ID: 223
2025-09-02 16:00:24,652 - INFO - Operations: 7
2025-09-02 16:00:24,652 - INFO - Safety warnings: 0
2025-09-02 16:00:24,652 - INFO - Migration file: test_output_final/migration.sql
2025-09-02 16:00:24,652 - INFO - Rollback file: test_output_final/rollback.sql
2025-09-02 16:00:24,652 - INFO - Migration report: test_output_final/migration_report.md
2025-09-02 16:00:24,653 - INFO - ✅ Final comparison after rollback completed successfully
2025-09-02 16:00:24,653 - INFO - 🔍 Analyzing results in ./test_output_final...
2025-09-02 16:00:24,653 - INFO - 🔄 Comparing initial and final results...
2025-09-02 16:00:24,653 - INFO - ✅ Rollback test passed - initial and final states match!
2025-09-02 16:00:24,653 - INFO - 💾 Saving test data for reference...
2025-09-02 16:00:24,657 - INFO - ✅ Saved ./test_output to test_data/ddlw-test-20250902_160024/ddl-wizard-testsuite-initial-migration-20250902_160024
2025-09-02 16:00:24,661 - INFO - ✅ Saved ./test_output to test_data/ddlw-test-20250902_160024/test_output
2025-09-02 16:00:24,665 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddlw-test-20250902_160024/ddl-wizard-testsuite-post-migration-verification-20250902_160024
2025-09-02 16:00:24,670 - INFO - ✅ Saved ./test_output_post_migration to test_data/ddlw-test-20250902_160024/test_output_post_migration
2025-09-02 16:00:24,674 - INFO - ✅ Saved ./test_output_final to test_data/ddlw-test-20250902_160024/ddl-wizard-testsuite-rollback-verification-20250902_160024
2025-09-02 16:00:24,678 - INFO - ✅ Saved ./test_output_final to test_data/ddlw-test-20250902_160024/test_output_final
2025-09-02 16:00:24,678 - INFO - ✅ Saved test log to test_data/ddlw-test-20250902_160024
2025-09-02 16:00:24,679 - INFO - 🧹 Cleaned up temporary directory: ./test_output
2025-09-02 16:00:24,680 - INFO - 🧹 Cleaned up temporary directory: ./test_output_post_migration
2025-09-02 16:00:24,681 - INFO - 🧹 Cleaned up temporary directory: ./test_output_final
2025-09-02 16:00:24,681 - INFO - 🧹 Cleaning up test databases...
2025-09-02 16:00:24,693 - INFO - ✅ Cleaned up database: ddl_test_source
2025-09-02 16:00:24,705 - INFO - ✅ Cleaned up database: ddl_test_dest
